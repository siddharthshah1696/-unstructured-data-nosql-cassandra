/**
 * Name: main.js:shared/jwplayer
 * Generated: 1496353711872832
 */
define("third_party/jwplayer/jwplayer.controls",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([1],{34:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(130),l=n(u);a=[i(3),i(6),i(2),i(1)],s=function(e,t,i,n){var a=function(e){var t=i.bounds(e),n=window.pageXOffset;return n&&i.isAndroid()&&document.body.parentElement.getBoundingClientRect().left>=0&&(t.left-=n,t.right-=n),t};return function(){function s(t,i){r(this,s),n.extend(this,e),this.className=t+" jw-background-color jw-reset",this.orientation=i,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),
this.tapListener=this.tap.bind(this)}return o(s,[{key:"setup",value:function(){this.el=i.createElement((0,l["default"])(this.className,"jw-slider-"+this.orientation)),this.elementRail=this.el.getElementsByClassName("jw-slider-container")[0],this.elementBuffer=this.el.getElementsByClassName("jw-buffer")[0],this.elementProgress=this.el.getElementsByClassName("jw-progress")[0],this.elementThumb=this.el.getElementsByClassName("jw-knob")[0],this.userInteract=new t(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)}},{key:"dragStart",value:function(){this.trigger("dragStart"),this.railBounds=a(this.elementRail)}},{key:"dragEnd",value:function(e){this.dragMove(e),this.trigger("dragEnd")}},{key:"dragMove",value:function(e){var t=this.railBounds=this.railBounds?this.railBounds:a(this.elementRail),n=void 0,r=void 0;
"horizontal"===this.orientation?(n=e.pageX,r=n<t.left?0:n>t.right?100:100*i.between((n-t.left)/t.width,0,1)):(n=e.pageY,r=n>=t.bottom?0:n<=t.top?100:100*i.between((t.height-(n-t.top))/t.height,0,1));var s=this.limit(r);return this.render(s),this.update(s),!1}},{key:"tap",value:function(e){this.railBounds=a(this.elementRail),this.dragMove(e)}},{key:"limit",value:function(e){return e}},{key:"update",value:function(e){this.trigger("update",{percentage:e})}},{key:"render",value:function(e){e=Math.max(0,Math.min(e,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")}},{key:"updateBuffer",value:function(e){this.elementBuffer.style.width=e+"%"}},{key:"element",value:function(){return this.el}}]),s}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},35:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,s=function(){
function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();r=[i(3),i(57),i(2),i(1)],a=function(e,t,i,r){return function(){function a(i,s,o){n(this,a),r.extend(this,e),this.el=document.createElement("div");var u="jw-icon jw-icon-tooltip "+i+" jw-button-color jw-reset";o||(u+=" jw-hidden"),t(this.el,s),this.el.className=u,this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip",this.el.appendChild(this.container)}return s(a,[{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.container.removeChild(this.content),this.content=null)}},{key:"hasContent",value:function(){return!!this.content}},{key:"element",value:function(){
return this.el}},{key:"openTooltip",value:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,i.toggleClass(this.el,this.openClass,this.isOpen)}},{key:"closeTooltip",value:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,i.toggleClass(this.el,this.openClass,this.isOpen)}},{key:"toggleOpenState",value:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}}]),a}()}.apply(t,r),!(void 0!==a&&(e.exports=a))},36:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="jw-display-icon-container jw-display-icon-'+e+' jw-background-color jw-reset">'+('<div class="jw-icon jw-icon-'+e+' jw-button-color jw-reset" role="button" tabindex="0" aria-label="'+t+'"></div>')+"</div>"}},57:function(e,t,i){var n,r;n=[],r=function(){return function(e,t){
e&&t&&(e.setAttribute("aria-label",t),e.setAttribute("role","button"),e.setAttribute("tabindex","0"))}}.apply(t,n),!(void 0!==r&&(e.exports=r))},64:function(e,t,i){var n,r;n=[i(6)],r=function(e){return function(t,i,n){var r=document.createElement("div");return r.className="jw-icon jw-icon-inline jw-button-color jw-reset "+t,r.setAttribute("role","button"),r.setAttribute("tabindex","0"),n&&r.setAttribute("aria-label",n),r.style.display="none",i&&new e(r).on("click tap",function(){i()}),{element:function(){return r},toggle:function(e){e?this.show():this.hide()},show:function(){r.style.display=""},hide:function(){r.style.display="none"}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},65:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){
return i&&e(t.prototype,i),n&&e(t,n),t}}();r=[i(4),i(5),i(3),i(19),i(2),i(1),i(64),i(117),i(119),i(118),i(123),i(122),i(120),i(121),i(163)],a=function(e,t,r,a,o,u,l,c,d,h,f,p,v,g,m){var y=o.isMobile()?4e3:2e3,b=function(){return{reason:"interaction"}},T=!1;return function(){function t(e,a){var s=this;n(this,t),u.extend(this,r),this.activeTimeout=-1,this.context=e,this.controlbar=null,this.displayContainer=null,this.dock=null,this.enabled=!0,this.instreamState=null,this.keydownCallback=null,this.mute=null,this.nextUpToolTip=null,this.playerContainer=a,this.rightClickMenu=null,this.showing=!1,this.unmuteCallback=null,this.div=null,this.right=null,this.activeListeners={mousemove:function(){return clearTimeout(s.activeTimeout)},mouseout:function(){return s.userActive()}},this.dimensions={},T||(T=!0,i(172))}return s(t,[{key:"enable",value:function(t,i){function n(e){var n=0,r=i.get("duration"),s=i.get("position");"DVR"===i.get("streamType")&&(n=r,r=Math.max(s,a.dvrSeekLimit));var u=o.between(s+e,n,r);
t.seek(u,b())}function r(e){var n=o.between(i.get("volume")+e,0,100);t.setVolume(n)}var s=this,u=this.context.createElement("div");u.className="jw-controls jw-reset",this.div=u;var y=i.get("touchMode");if(!this.displayContainer){var T=new h,E=new f(i,t),k=new p(i),w=new v(i,t);k.on("click tap",function(){s.trigger(e.JWPLAYER_DISPLAY_CLICK),s.userActive(1e3),t.play(b())}),o.isChrome()&&!y&&(k.el.style.pointerEvents="none",k.icon.style.pointerEvents="none"),T.addButton(E),T.addButton(k),T.addButton(w),this.div.appendChild(T.element()),this.displayContainer=T}var _=this.context.createElement("div");if(_.className="jw-controls-right jw-reset",u.appendChild(_),this.right=_,this.dock||(this.dock=new d(i)),this.right.appendChild(this.dock.element()),y?o.addClass(this.playerContainer,"jw-flag-touch"):(this.rightClickMenu=new m,i.change("flashBlocked",function(e,t){t?s.rightClickMenu.destroy():s.rightClickMenu.setup(e,s.playerContainer,s.playerContainer)})),i.get("nextUpDisplay")&&!this.nextUpToolTip){
var A=new g(i,t,this.playerContainer);A.setup(this.context),this.nextUpToolTip=A,this.div.appendChild(A.element())}if(this.controlbar||(this.controlbar=new c(t,i),this.controlbar.on(e.JWPLAYER_USER_ACTION,function(){return s.userActive()})),this.addActiveListeners(this.controlbar.element()),this.div.appendChild(this.controlbar.element()),i.get("autostartMuted")){var S=function(){return s.unmuteAutoplay(t,i)};this.mute=l("jw-autostart-mute jw-off",S,i.get("localization").volume),this.mute.show(),this.div.appendChild(this.mute.element()),this.controlbar.renderVolume(!0,i.get("volume")),o.addClass(this.playerContainer,"jw-flag-autostart"),i.on("change:autostartFailed change:autostartMuted change:mute",S),this.unmuteCallback=S}var L=function(e){if(e.ctrlKey||e.metaKey)return!0;switch(s.instreamState||s.userActive(),e.keyCode){case 27:t.setFullscreen(!1);break;case 13:case 32:t.play(b());break;case 37:s.instreamState||n(-5);break;case 39:s.instreamState||n(5);break;case 38:r(10);break;case 40:
r(-10);break;case 67:var a=t.getCaptionsList(),o=a.length;if(o){var u=(t.getCurrentCaptions()+1)%o;t.setCurrentCaptions(u)}break;case 77:t.setMute();break;case 70:t.setFullscreen();break;default:if(e.keyCode>=48&&e.keyCode<=59){var l=e.keyCode-48,c=l/10*i.get("duration");t.seek(c,b())}}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault(),!1):void 0};this.playerContainer.addEventListener("keydown",L),this.keydownCallback=L,this.userActive(),this.playerContainer.appendChild(this.div)}},{key:"disable",value:function(){this.off(),clearTimeout(this.activeTimeout),this.div.parentNode&&(o.removeClass(this.playerContainer,"jw-flag-touch"),this.playerContainer.removeChild(this.div)),this.controlbar&&this.removeActiveListeners(this.controlbar.element()),this.rightClickMenu&&(this.rightClickMenu.destroy(),this.rightClickMenu=null),this.keydownCallback&&(this.playerContainer.removeEventListener("keydown",this.keydownCallback),this.keydownCallback=null)}},{key:"controlbarHeight",value:function(){
return this.dimensions.cbHeight||(this.dimensions.cbHeight=this.controlbar.element().clientHeight),this.dimensions.cbHeight}},{key:"element",value:function(){return this.div}},{key:"logoContainer",value:function(){return this.right}},{key:"resize",value:function(){this.dimensions={}}},{key:"unmuteAutoplay",value:function(e,t){var i=!t.get("autostartFailed"),n=t.get("mute");i?n=!1:t.set("playOnViewable",!1),this.unmuteCallback&&(t.off("change:autostartFailed change:autostartMuted change:mute",this.unmuteCallback),this.unmuteCallback=null),t.set("autostartFailed",void 0),t.set("autostartMuted",void 0),e.setMute(n),this.controlbar.renderVolume(n,t.get("volume")),this.mute.hide(),o.removeClass(this.playerContainer,"jw-flag-autostart")}},{key:"addActiveListeners",value:function(e){e&&!o.isMobile()&&(e.addEventListener("mousemove",this.activeListeners.mousemove),e.addEventListener("mouseout",this.activeListeners.mouseout))}},{key:"removeActiveListeners",value:function(e){e&&(e.removeEventListener("mousemove",this.activeListeners.mousemove),
e.removeEventListener("mouseout",this.activeListeners.mouseout))}},{key:"userActive",value:function(e){var t=this;clearTimeout(this.activeTimeout),this.activeTimeout=setTimeout(function(){return t.userInactive()},e||y),this.showing||(o.removeClass(this.playerContainer,"jw-flag-user-inactive"),this.showing=!0,this.trigger("userActive"))}},{key:"userInactive",value:function(){clearTimeout(this.activeTimeout),this.showing=!1,this.controlbar&&this.controlbar.closeMenus({type:"userInactive"}),o.addClass(this.playerContainer,"jw-flag-user-inactive"),this.trigger("userInactive")}}]),t}()}.apply(t,r),!(void 0!==a&&(e.exports=a))},112:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();r=[i(1),i(2),i(28)],
a=function(e,t,i){var r=function(){function e(t,i){n(this,e),this.time=t,this.text=i,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset"}return s(e,[{key:"align",value:function(e){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var t=this.time/e*100;this.pct=t+"%"}this.el.style.left=this.pct}}]),e}();return{loadChapters:function(e){t.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(t){var n=i(t.responseText);e.isArray(n)&&(e.each(n,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new r(e.begin,e.text))},drawCues:function(){var t=this,i=this._model.get("duration");return!i||0>=i?void this._model.once("change:duration",this.drawCues,this):void e.each(this.cues,function(e){e.align(i),e.el.addEventListener("mouseover",function(){t.activeCue=e}),e.el.addEventListener("mouseout",function(){t.activeCue=null}),t.elementRail.appendChild(e.el)})},resetChapters:function(){
e.each(this.cues,function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)}),this.cues=[]}}}.apply(t,r),!(void 0!==a&&(e.exports=a))},113:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,u,l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),
n&&e(t,n),t}}(),c=i(127),d=n(c);o=[i(35),i(2),i(1),i(6)],u=function(e,t,i,n){return function(e){function o(){return r(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return s(o,e),l(o,[{key:"setup",value:function(e,r,a){a=a||{},this.iconUI||(this.iconUI=new n(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=i.isArray(e)?e:[],t.toggleClass(this.el,"jw-hidden",e.length<2);var s=e.length>2||2===e.length&&a&&a.toggle===!1,o=!s&&2===e.length;if(t.toggleClass(this.el,"jw-toggle",o||a.isToggle),t.toggleClass(this.el,"jw-button-color",!o),s){t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var u=(0,
d["default"])(e),l=t.createElement(u);this.addContent(l),this.contentUI=new n(this.content).on("click tap",this.selectListener)}else o&&this.iconUI.on("click tap",this.toggleValueListener);this.selectItem(r)}},{key:"toggleValue",value:function(){this.trigger("toggleValue")}},{key:"select",value:function(e){if(e.target.parentElement===this.content){var n=t.classList(e.target),r=i.find(n,function(e){return 0===e.indexOf("jw-item")});r&&(this.trigger("select",parseInt(r.split("-")[2])),this.closeTooltipListener())}}},{key:"selectItem",value:function(e){if(this.content)for(var i=0;i<this.content.children.length;i++)t.toggleClass(this.content.children[i],"jw-active-option",e===i);t.toggleClass(this.el,"jw-off",0===e)}},{key:"reset",value:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}}]),o}(e)}.apply(t,o),!(void 0!==u&&(e.exports=u))},114:function(e,t,i){var n,r;n=[i(1),i(2),i(28)],r=function(e,t,i){function n(e){
this.begin=e.begin,this.end=e.end,this.img=e.text}return{loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(t){var r=i(t.responseText);e.isArray(r)&&(e.each(r,function(e){this.thumbnails.push(new n(e))},this),this.drawCues())},thumbnailsFailed:function(){},chooseThumbnail:function(t){var i=e.sortedIndex(this.thumbnails,{end:t},e.property("end"));i>=this.thumbnails.length&&(i=this.thumbnails.length-1);var n=this.thumbnails[i].img;return n.indexOf("://")<0&&(n=this.vttPath?this.vttPath+"/"+n:n),n},loadThumbnail:function(t){var i=this.chooseThumbnail(t),n={display:"block",margin:"0 auto",backgroundPosition:"0 0"},r=i.indexOf("#xywh");if(r>0)try{var a=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(i);i=a[1],n.backgroundPosition=-1*a[2]+"px "+-1*a[3]+"px",n.width=a[4],n.height=a[5]}catch(s){return}else this.individualImage||(this.individualImage=new Image,
this.individualImage.onload=e.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height}),this.timeTip.setWidth(this.individualImage.width)},this),this.individualImage.src=i);return n.backgroundImage='url("'+i+'")',n},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},115:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{
value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,o,u=function c(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,i)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(i):void 0},l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();s=[i(1),i(2),i(19),i(6),i(34),i(35),i(112),i(114)],o=function(e,t,i,s,o,c,d,h){function f(){return{reason:"interaction"}}var p=function(e){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return a(i,e),l(i,[{key:"setup",value:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),
this.img.className="jw-reset",this.containerWidth=0,this.textLength=0,this.dragJustReleased=!1;var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),this.addContent(e)}},{key:"image",value:function(e){t.style(this.img,e)}},{key:"update",value:function(e){this.text.textContent=e}},{key:"getWidth",value:function(){return this.containerWidth||this.setWidth(),this.containerWidth}},{key:"setWidth",value:function(e){return e?void(this.containerWidth=e+16):void(this.container&&(this.containerWidth=t.bounds(this.container).width))}},{key:"resetWidth",value:function(){this.containerWidth=0}}]),i}(c),v=function(o){function c(t,i){n(this,c);var a=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,"jw-slider-time","horizontal"));return a._model=t,a._api=i,a.timeTip=new p("jw-tooltip-time",null,!0),a.timeTip.setup(),a.cues=[],a.seekThrottled=e.throttle(a.performSeek,400),a.mobileHoverDistance=5,a.setup(),a}return a(c,o),
l(c,[{key:"setup",value:function(){u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"setup",this).apply(this,arguments),this._model.on("duration",this.onDuration,this).change("playlistItem",this.onPlaylistItem,this).change("position",this.onPosition,this).change("buffer",this.onBuffer,this),this.elementRail.appendChild(this.timeTip.element()),this.elementUI=new s(this.el,{useHover:!0,useMove:!0}).on("drag move over",this.showTimeTooltip.bind(this),this).on("dragEnd out",this.hideTimeTooltip.bind(this),this)}},{key:"limit",value:function(t){if(this.activeCue&&e.isNumber(this.activeCue.pct))return this.activeCue.pct;var n=this._model.get("duration"),r=this._model.get("streamType");if("DVR"===r){var a=(1-t/100)*n,s=this._model.get("position"),o=Math.min(a,Math.max(i.dvrSeekLimit,s)),u=100*o/n;return 100-u}return t}},{key:"update",value:function(e){this.seekTo=e,this.seekThrottled(),u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"update",this).apply(this,arguments)}},{
key:"dragStart",value:function(){this._model.set("scrubbing",!0),u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"dragStart",this).apply(this,arguments)}},{key:"dragEnd",value:function(){u(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"dragEnd",this).apply(this,arguments),this._model.set("scrubbing",!1),this.dragJustReleased=!0}},{key:"onSeeked",value:function(){this._model.get("scrubbing")&&this.performSeek()}},{key:"onBuffer",value:function(e,t){this.updateBuffer(t)}},{key:"onPosition",value:function(e,t){return this.dragJustReleased?void(this.dragJustReleased=!1):void this.updateTime(t,e.get("duration"))}},{key:"onDuration",value:function(e,t){this.updateTime(e.get("position"),t)}},{key:"updateTime",value:function(e,t){var i=0;if(t){var n=this._model.get("streamType");"DVR"===n?i=(t-e)/t*100:"VOD"===n&&(i=e/t*100)}this.render(i)}},{key:"onPlaylistItem",value:function(t,i){if(i){this.reset(),t.mediaModel.on("seeked",this.onSeeked,this);var n=i.tracks;e.each(n,function(e){
e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)},this)}}},{key:"performSeek",value:function(){var e,t=this.seekTo,i=this._model.get("duration"),n=this._model.get("streamType");0===i?this._api.play(f()):"DVR"===n?(e=(100-t)/100*i,this._api.seek(e,f())):(e=t/100*i,this._api.seek(Math.min(e,i-.25),f()))}},{key:"showTimeTooltip",value:function(n){var r=this._model.get("duration");if(0!==r){var a=this._model.get("containerWidth"),o=t.bounds(this.elementRail),u=n.pageX?n.pageX-o.left:n.x;u=t.between(u,0,o.width);var l=u/o.width,c=r*l;0>r&&(c=r-c);var d;if("touch"===s.getPointerType(n.sourceEvent)&&(this.activeCue=e.reduce(this.cues,function(e,t){return Math.abs(u-parseInt(t.pct)/100*o.width)<this.mobileHoverDistance?t:e}.bind(this),void 0)),this.activeCue)d=this.activeCue.text;else{var h=!0;d=t.timeFormat(c,h),0>r&&c>i.dvrSeekLimit&&(d="Live")}var f=this.timeTip;f.update(d),this.textLength!==d.length&&(this.textLength=d.length,
f.resetWidth()),this.showThumbnail(c),t.addClass(f.el,"jw-open");var p=f.getWidth(),v=o.width/100,g=a-o.width,m=0;p>g&&(m=(p-g)/(200*v));var y=100*Math.min(1-m,Math.max(m,l)).toFixed(3);t.style(f.el,{left:y+"%"})}}},{key:"hideTimeTooltip",value:function(){t.removeClass(this.timeTip.el,"jw-open")}},{key:"reset",value:function(){this.resetChapters(),this.resetThumbnails(),this.timeTip.resetWidth(),this.textLength=0}}]),c}(o);return e.extend(v.prototype,d,h),v}.apply(t,s),!(void 0!==o&&(e.exports=o))},116:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,
configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,o,u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();s=[i(35),i(34),i(6),i(2)],o=function(e,t,i){return function(e){function s(e,a,o){n(this,s);var u=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,a,o,!0));return u._model=e,u.volumeSlider=new t("jw-slider-volume jw-volume-tip","vertical"),u.volumeSlider.setup(),u.addContent(u.volumeSlider.element()),u.volumeSlider.on("update",function(e){this.trigger("update",e)},u),new i(u.el,{useHover:!0,directSelect:!0}).on("click",u.toggleValue,u).on("tap",u.toggleOpenState,u).on("over",u.openTooltip,u).on("out",u.closeTooltip,u),u._model.on("change:volume",u.onVolume,u),u}return a(s,e),u(s,[{key:"toggleValue",value:function(){this.trigger("toggleValue")}}]),
s}(e)}.apply(t,s),!(void 0!==o&&(e.exports=o))},117:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();r=[i(2),i(1),i(3),i(19),i(6),i(57),i(34),i(115),i(113),i(116),i(64)],a=function(e,t,i,r,a,o,u,l,c,d,h){function f(e,t){var i=document.createElement("span");return i.className="jw-text jw-reset "+e,t&&i.setAttribute("role",t),i}function p(e,t){return new c(e,t)}function v(t,i){if(!e.isChrome()||e.isIOS())return h("jw-icon-airplay jw-off",t,i.airplay);var n=i.cast,r=document.createElement("button","google-cast-button");r.className="jw-button-color jw-icon-inline",o(r,n);var a=document.createElement("div");return a.className="jw-reset jw-icon-cast",a.style.display="none",a.style.cursor="pointer",
a.appendChild(r),{element:function(){return a},toggle:function(e){e?this.show():this.hide()},show:function(){a.style.display=""},hide:function(){a.style.display="none"},button:r}}function g(){return{reason:"interaction"}}function m(e,i){var n=document.createElement("div");return n.className="jw-group jw-controlbar-"+e+"-group jw-reset",t.each(i,function(e){e.element&&(e=e.element()),n.appendChild(e)}),n}return function(){function o(r,a){n(this,o),t.extend(this,i),this._api=r,this._model=a,this._isMobile=e.isMobile(),this._localization=a.get("localization"),this.setup(r,a)}return s(o,[{key:"setup",value:function(e,i){var n=new l(i,e),s=void 0,o=void 0,c=void 0,y=this._localization.play,b=this._localization.next,T=this._localization.volume,E=this._localization.rewind;this._isMobile||(s=new u("jw-slider-volume","horizontal"),s.setup(),o=new d(i,"jw-icon-volume",T)),!this._isMobile||(c=h("jw-icon-volume",e.setMute,T));var k=h("jw-icon-next",e.next.bind(this),b);i.get("nextUpDisplay")&&new a(k.element(),{
useHover:!0,directSelect:!0}).on("over",function(){this._model.set("nextUpVisible",!0)},this).on("out",function(){this._model.get("nextUpSticky")||this._model.set("nextUpVisible",!1)},this),this.elements={alt:f("jw-text-alt","status"),play:h("jw-icon-playback",e.play.bind(this,g()),y),rewind:h("jw-icon-rewind",this.rewind.bind(this),E),next:k,elapsed:f("jw-text-elapsed","timer"),countdown:f("jw-text-countdown","timer"),time:n,duration:f("jw-text-duration","timer"),durationLeft:f("jw-text-duration","timer"),hd:p("jw-icon-hd",this._localization.hd),cc:p("jw-icon-cc",this._localization.cc),audiotracks:p("jw-icon-audio-tracks",this._localization.audioTracks),mute:c,volume:s,volumetooltip:o,cast:v(e.castToggle,this._localization),fullscreen:h("jw-icon-fullscreen",e.setFullscreen,this._localization.fullscreen)},this.layout={left:[this.elements.play,this.elements.rewind,this.elements.elapsed,this.elements.durationLeft],center:[this.elements.time,this.elements.alt],right:[this.elements.countdown,this.elements.duration,this.elements.next,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.fullscreen]
},this.menus=t.compact([this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip]),this.layout.left=t.compact(this.layout.left),this.layout.center=t.compact(this.layout.center),this.layout.right=t.compact(this.layout.right),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=m("left",this.layout.left),this.elements.center=m("center",this.layout.center),this.elements.right=m("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right),this.elements.play.show(),this.elements.fullscreen.show(),this.elements.mute&&this.elements.mute.show(),i.change("volume",this.onVolume,this),i.change("mute",this.onMute,this),i.change("playlistItem",this.onPlaylistItem,this),i.change("mediaModel",this.onMediaModel,this),i.change("castAvailable",this.onCastAvailable,this),i.change("castActive",this.onCastActive,this),i.change("duration",this.onDuration,this),
i.change("position",this.onElapsed,this),i.change("fullscreen",this.onFullscreen,this),i.change("captionsList",this.onCaptionsList,this),i.change("captionsIndex",this.onCaptionsIndex,this),i.change("streamType",this.onStreamTypeChange,this),i.change("nextUp",this.onNextUp,this),i.change("cues",this.addCues,this),i.change("altText",this.setAltText,this),this.elements.volume&&this.elements.volume.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.cast.button&&new a(this.elements.cast.button).on("click tap",function(){this._model.set("castClicked",!0)},this),this.elements.hd.on("select",function(e){this._model.getVideo().setCurrentQuality(e)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0);
},this),this.elements.cc.on("select",function(e){this._api.setCurrentCaptions(e)},this),this.elements.cc.on("toggleValue",function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)},this),this.elements.audiotracks.on("select",function(e){this._model.getVideo().setCurrentAudioTrack(e)},this),new a(this.elements.duration).on("click tap",function(){if("DVR"===this._model.get("streamType")){var e=this._model.get("position");this._api.seek(Math.max(r.dvrSeekLimit,e),g())}},this),new a(this.elements.durationLeft).on("click tap",function(){if("DVR"===this._model.get("streamType")){var e=this._model.get("position");this._api.seek(Math.max(r.dvrSeekLimit,e))}},this),new a(this.el).on("click tap drag",function(){this.trigger("userAction")},this),t.each(this.menus,function(e){e.on("open-tooltip",this.closeMenus,this)},this)}},{key:"onCaptionsList",value:function(e,t){var i=e.get("captionsIndex");this.elements.cc.setup(t,i,{isToggle:!0})}},{key:"onCaptionsIndex",value:function(e,t){
this.elements.cc.selectItem(t)}},{key:"onPlaylistItem",value:function(){this.elements.audiotracks.setup()}},{key:"onMediaModel",value:function(e,i){i.on("change:levels",function(e,t){this.elements.hd.setup(t,e.get("currentLevel"))},this),i.on("change:currentLevel",function(e,t){this.elements.hd.selectItem(t)},this),i.on("change:audioTracks",function(e,i){var n=t.map(i,function(e){return{label:e.name}});this.elements.audiotracks.setup(n,e.get("currentAudioTrack"),{toggle:!1})},this),i.on("change:currentAudioTrack",function(e,t){this.elements.audiotracks.selectItem(t)},this)}},{key:"onVolume",value:function(e,t){this.renderVolume(e.get("mute"),t)}},{key:"onMute",value:function(e,t){this.renderVolume(t,e.get("volume"))}},{key:"renderVolume",value:function(t,i){this.elements.mute&&e.toggleClass(this.elements.mute.element(),"jw-off",t),this.elements.volume&&this.elements.volume.render(t?0:i),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(t?0:i),e.toggleClass(this.elements.volumetooltip.element(),"jw-off",t));
}},{key:"onCastAvailable",value:function(e,t){this.elements.cast.toggle(t)}},{key:"onCastActive",value:function(t,i){this.elements.fullscreen.toggle(!i),this.elements.cast.button&&e.toggleClass(this.elements.cast.button,"jw-off",!i)}},{key:"onElapsed",value:function(t,i){var n=void 0,r=void 0,a=t.get("duration");"DVR"===t.get("streamType")?n=r="-"+e.timeFormat(-a):(n=e.timeFormat(i),r="-"+e.timeFormat(a-i)),this.elements.elapsed.textContent=n,this.elements.countdown.textContent=r}},{key:"onDuration",value:function(t,i){var n=void 0;n="DVR"===t.get("streamType")?"Live":e.timeFormat(i),this.elements.duration.textContent=n,this.elements.durationLeft.textContent=n}},{key:"onFullscreen",value:function(t,i){e.toggleClass(this.elements.fullscreen.element(),"jw-off",i)}},{key:"element",value:function(){return this.el}},{key:"setAltText",value:function(e,t){this.elements.alt.textContent=t}},{key:"addCues",value:function(e,i){this.elements.time&&(t.each(i,function(e){this.elements.time.addCue(e)},this),
this.elements.time.drawCues())}},{key:"closeMenus",value:function(e){t.each(this.menus,function(t){e&&e.target===t.el||t.closeTooltip(e)})}},{key:"rewind",value:function(){var e=this._model.get("position"),t=this._model.get("duration"),i=e-10,n=0;"DVR"===this._model.get("streamType")&&(n=t),this._api.seek(Math.max(i,n),g())}},{key:"onStreamTypeChange",value:function(e){var t=e.get("streamType");this.elements.rewind.toggle("LIVE"!==t),"DVR"===t&&(this.elements.duration.textContent="Live",this.elements.durationLeft.textContent="Live");var i=e.get("duration");this.onDuration(e,i)}},{key:"onNextUp",value:function(e,t){this.elements.next.toggle(!!t)}}]),o}()}.apply(t,r),!(void 0!==a&&(e.exports=a))},118:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(125),l=n(u);a=[i(2)],s=function(e){return function(){function t(){r(this,t),this.el=e.createElement((0,l["default"])()),this.container=this.el.querySelector(".jw-display-controls")}return o(t,[{key:"addButton",value:function(e){this.container.appendChild(e.el)}},{key:"element",value:function(){return this.el}}]),t}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},119:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(126),l=n(u);a=[i(2),i(1),i(6)],s=function(e,t,i){function n(t){return e.hasClass(t.target,"jw-dock-button")?t.target:e.hasClass(t.target,"jw-dock-text")?t.target.parentElement.parentElement:t.target.parentElement;
}function a(t){var i=(0,l["default"])(t);return e.createElement(i)}return function(){function s(t){var n=this;r(this,s),this.model=t;var o=this.model.get("dock");this.el=a(o),new i(this.el).on("click tap",this.click,this),this.model.on("change:dock",function(t,i){var r=a(i);e.emptyElement(n.el);for(var s=r.childNodes.length;s--;)n.el.appendChild(r.firstChild)},this)}return o(s,[{key:"click",value:function(e){var i=n(e),r=i.getAttribute("button"),a=this.model.get("dock"),s=t.findWhere(a,{id:r});s&&s.callback&&s.callback(e)}},{key:"element",value:function(){return this.el}}]),s}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},120:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){
return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(36),l=n(u);a=[i(2),i(6)],s=function(e,t){return function(){function i(n,a){r(this,i);var s=e.createElement((0,l["default"])("next",n.get("localization").next));this.iconUI=new t(s).on("click tap",function(){a.next()}),n.change("nextUp",function(e,t){s.style.display=t?"":"none"}),this.el=s}return o(i,[{key:"element",value:function(){return this.el}}]),i}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},121:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(128),l=n(u);a=[i(11),i(6),i(2)],s=function(e,t,i){return function(){function n(e,t,i){r(this,n),this._model=e,this._api=t,this._playerElement=i,
this.nextUpText=e.get("localization").nextUp,this.nextUpClose=e.get("localization").nextUpClose,this.state="tooltip",this.reset()}return o(n,[{key:"setup",value:function(e){this.container=e.createElement("div"),this.container.className="jw-nextup-container jw-reset";var n=i.createElement((0,l["default"])());this.addContent(n),this.closeButton=this.content.querySelector(".jw-nextup-close"),this.closeButton.setAttribute("aria-label",this.nextUpClose),this.tooltip=this.content.querySelector(".jw-nextup-tooltip");var r=this._model;r.set("nextUpEnabled",!1),r.on("change:mediaModel",this.onMediaModel,this),r.on("change:streamType",this.onStreamType,this),r.on("change:nextUp",this.onNextUp,this),r.on("change:nextUpVisible",this.toggle,this),r.on("change:nextUpSticky",this.toggle,this),r.on("change:duration",this.onDuration,this),r.on("change:position",this.onElapsed,this),this.onMediaModel(r,r.get("mediaModel")),new t(this.closeButton,{directSelect:!0}).on("click tap",function(){r.set("nextUpSticky",!1),
r.set("nextUpVisible",!1)},this),new t(this.tooltip).on("click tap",this.click,this)}},{key:"loadThumbnail",value:function(e){return this.nextUpImage=new Image,this.nextUpImage.onload=function(){this.nextUpImage.onload=null}.bind(this),this.nextUpImage.src=e,{backgroundImage:'url("'+e+'")'}}},{key:"click",value:function(){this.reset(),this._api.next()}},{key:"toggle",value:function(t,i){i=!!i,t.get("nextUpEnabled")&&(e.toggleClass(this.container,"jw-nextup-container-visible",i),e.toggleClass(this._playerElement,"jw-flag-nextup",i),e.toggleClass(this.container,"jw-nextup-sticky",!!t.get("nextUpSticky")))}},{key:"setNextUpItem",value:function(t){var n=this;setTimeout(function(){if(n.thumbnail=n.content.querySelector(".jw-nextup-thumbnail"),e.toggleClass(n.thumbnail,"jw-nextup-thumbnail-visible",!!t.image),t.image){var r=n.loadThumbnail(t.image);i.style(n.thumbnail,r)}n.header=n.content.querySelector(".jw-nextup-header"),n.header.innerText=n.nextUpText,n.title=n.content.querySelector(".jw-nextup-title");
var a=t.title;n.title.innerText=a?i.createElement(a).textContent:""},500)}},{key:"onNextUp",value:function(e,t){if(this.reset(),t){var i=!(!t.title&&!t.image);e.set("nextUpEnabled",i),i&&(t.showNextUp||e.set("nextUpSticky",!1),this.setNextUpItem(t))}}},{key:"onDuration",value:function(e,t){if(t){var n=i.seconds(e.get("nextupoffset")||-10);0>n&&(n+=t),this.offset=n}}},{key:"onMediaModel",value:function(e,t){t.on("change:state",function(t,i){"complete"===i&&e.set("nextUpVisible",!1)})}},{key:"onElapsed",value:function(e,t){var i=e.get("nextUpSticky");if(e.get("nextUpEnabled")&&i!==!1){var n=t>=this.offset;n&&void 0===i?(e.set("nextUpVisible",n),e.set("nextUpSticky",n)):n||i!==!0||this.reset()}}},{key:"onStreamType",value:function(e,t){"VOD"!==t&&e.set("nextUpSticky",!1)}},{key:"element",value:function(){return this.container}},{key:"addContent",value:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)}},{key:"removeContent",value:function(){this.content&&(this.container.removeChild(this.content),
this.content=null)}},{key:"reset",value:function(){var e=this._model;e.set("nextUpVisible",!1),e.set("nextUpSticky",void 0)}}]),n}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},122:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(36),l=n(u);a=[i(2),i(3),i(6),i(1)],s=function(e,t,i,n){return function(){function a(s){var o=this;r(this,a),n.extend(this,t);var u=s.get("localization"),c=e.createElement((0,l["default"])("display",u.playback)),d=c.getElementsByClassName("jw-icon-display")[0];c.style.cursor="pointer",this.icon=d,this.el=c,this.iconUI=new i(this.el).on("click tap",function(e){o.trigger(e.type)}),s.on("change:state",function(e,t){
var i=void 0;switch(t){case"buffering":i=u.buffer;break;case"playing":i=u.pause;break;case"paused":i=u.playback;break;case"complete":i=u.replay;break;default:i=""}""===i?d.removeAttribute("aria-label"):d.setAttribute("aria-label",i)})}return o(a,[{key:"element",value:function(){return this.el}}]),a}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},123:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(36),l=n(u);a=[i(2),i(6)],s=function(e,t){return function(){function i(n,a){r(this,i),this.el=e.createElement((0,l["default"])("rewind",n.get("localization").playback)),this.iconUI=new t(this.el).on("click tap",function(){var e=n.get("position"),t=n.get("duration"),i=e-10,r=0;
"DVR"===n.get("streamType")&&(r=t),a.seek(Math.max(i,r))})}return o(i,[{key:"element",value:function(){return this.el}}]),i}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},124:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(129),l=n(u);a=[i(2),i(6),i(24)],s=function(e,t,i){return function(){function n(){r(this,n)}return o(n,[{key:"buildArray",value:function(){var t=i.split("+"),n=t[0],r={items:[{title:"Powered by JW Player "+n,featured:!0,showLogo:!0,link:"https://jwplayer.com/learn-more"}]},a=n.indexOf("-")>0,s=t[1];if(a&&s){var o=s.split(".");r.items.push({title:"build: ("+o[0]+"."+o[1]+")",link:"#"})}var u=this.model.get("provider");
if(u&&u.name.indexOf("flash")>=0){var l="Flash Version "+e.flashVersion();r.items.push({title:l,link:"http://www.adobe.com/software/flash/about/"})}return r}},{key:"rightClick",value:function(e){return this.lazySetup(),!this.mouseOverContext&&(this.hideMenu(),this.showMenu(e),!1)}},{key:"getOffset",value:function(e){for(var t=e.target,i=e.offsetX||e.layerX,n=e.offsetY||e.layerY;t!==this.playerElement;)i+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;return{x:i,y:n}}},{key:"showMenu",value:function(t){var i=this,n=this.getOffset(t);return this.el.style.left=n.x+"px",this.el.style.top=n.y+"px",e.addClass(this.playerElement,"jw-flag-rightclick-open"),e.addClass(this.el,"jw-open"),clearTimeout(this._menuTimeout),this._menuTimeout=setTimeout(function(){return i.hideMenu()},3e3),!1}},{key:"hideMenu",value:function(){return this.elementUI.off("out",this.hideMenu,this),this.mouseOverContext?void this.elementUI.on("out",this.hideMenu,this):(e.removeClass(this.playerElement,"jw-flag-rightclick-open"),
void e.removeClass(this.el,"jw-open"))}},{key:"lazySetup",value:function(){var i=(0,l["default"])(this.buildArray());if(this.el){if(this.html!==i){this.html=i;var n=e.createElement(i);e.emptyElement(this.el);for(var r=n.childNodes.length;r--;)this.el.appendChild(n.firstChild)}}else this.html=i,this.el=e.createElement(this.html),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.elementUI=new t(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this)}},{key:"setup",value:function(e,t,i){this.playerElement=t,this.model=e,this.mouseOverContext=!1,this.layer=i,t.oncontextmenu=this.rightClick.bind(this)}},{key:"addOffListener",value:function(e){e.addEventListener("mousedown",this.hideMenuHandler),e.addEventListener("touchstart",this.hideMenuHandler),e.addEventListener("pointerdown",this.hideMenuHandler)}},{key:"removeOffListener",
value:function(e){e.removeEventListener("mousedown",this.hideMenuHandler),e.removeEventListener("touchstart",this.hideMenuHandler),e.removeEventListener("pointerdown",this.hideMenuHandler)}},{key:"destroy",value:function(){clearTimeout(this._menuTimeout),this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model=null)}}]),n}()}.apply(t,a),!(void 0!==s&&(e.exports=s))},125:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return'<div class="jw-display jw-reset"><div class="jw-display-container jw-reset"><div class="jw-display-controls jw-reset"></div></div></div>'}},126:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){
return i(e.btnClass,e.id,e.img,e.tooltip)}).join("");return'<div class="jw-dock jw-reset">'+t+"</div>"};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2],r=arguments[3],a=i?'style="background-image: url('+i+')"':"",s=r?n(r):"",o=r?'aria-label="'+r+'" role="button" tabindex="0"':"";return'<div class="jw-dock-button jw-background-color jw-reset '+e+'" button="'+t+'">'+('<div class="jw-icon jw-dock-image jw-button-color jw-reset" '+a+" "+o+"></div>")+'<div class="jw-arrow jw-reset"></div>'+s+"</div>"},n=function(e){return'<div class="jw-overlay jw-background-color jw-reset">'+('<span class="jw-text jw-dock-text jw-reset">'+e+"</span>")+"</div>"}},127:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e,t){return i(t,e.label)}).join("");return'<ul class="jw-menu jw-background-color jw-reset">'+t+"</ul>";
};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"<li class='jw-text jw-option jw-item-"+e+" jw-reset'>"+t+"</li>"}},128:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'<div class="jw-nextup jw-reset"><div class="jw-nextup-tooltip jw-reset">'+('<div class="jw-nextup-header jw-reset">'+e+"</div>")+'<div class="jw-nextup-body jw-background-color jw-reset"><div class="jw-nextup-thumbnail jw-reset"></div>'+('<div class="jw-nextup-title jw-reset">'+t+"</div>")+"</div></div>"+('<button class="jw-icon jw-nextup-close" aria-label="'+i+'"></button>')+"</div>"}},129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){
var t=e.items,n=void 0===t?[]:t,r=n.map(function(e){return i(e.link,e.title,e.featured,e.showLogo)}).join("");return'<div class="jw-rightclick jw-reset"><ul class="jw-reset">'+r+"</ul></div>"};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2],n=arguments[3],r=n?'<span class="jw-icon jw-rightclick-logo jw-reset"></span>':"";return'<li class="jw-reset '+(i?"jw-featured":"")+'">'+('<a href="'+e+'" class="jw-reset" target="_blank">')+(""+r)+(""+t)+"</a></li>"}},130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="'+e+" "+t+' jw-reset" aria-hidden="true"><div class="jw-slider-container jw-reset"><div class="jw-rail jw-reset"></div><div class="jw-buffer jw-reset"></div><div class="jw-progress jw-reset"></div><div class="jw-knob jw-reset"></div></div></div>';
}},163:function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,o,u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function c(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,i);
}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(i):void 0};s=[i(124)],o=function(e){return function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"buildArray",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildArray",this).call(this);if(this.model.get("abouttext")){e.items[0].showLogo=!1,e.items.push(e.items.shift());var i={title:this.model.get("abouttext"),link:this.model.get("aboutlink")||e.items[0].link};e.items.unshift(i)}return e}}]),t}(e)}.apply(t,s),!(void 0!==o&&(e.exports=o))},166:function(e,t,i){t=e.exports=i(75)(),t.push([])},168:function(e,t,i){e.exports=i.p+"jw-icons.ttf"},169:function(e,t,i){e.exports=i.p+"jw-icons.woff"},172:function(e,t,i){var n=i(166);"string"==typeof n&&(n=[["all-players",n,""]]),i(42).style(n,"all-players"),n.locals&&(e.exports=n.locals)}})}),define("third_party/jwplayer/provider.hlsjs",["shared/polyfills"],function(e,t,i){
webpackJsonpjwplayer([2],{8:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},10:function(e,t,i){var n,r;n=[i(1),i(12),i(2),i(16),i(15)],r=function(e,t,i,n,r){function a(t){if(this._currentTextTrackIndex=-1,t){if(this._textTracks?(this._textTracks=e.reject(this._textTracks,function(e){return this.renderNatively&&"nativecaptions"===e._id?(delete this._tracksById[e._id],!0):void 0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),t.length){var n=0,a=t.length;for(n;a>n;n++){var s=t[n];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind,!s.label&&"captions"===s.kind){var o=r.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=r.createId(s,this._textTracks.length);if(this._tracksById[s._id])continue;s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",
s.oncuechange=R.bind(this),this._tracksById[s._id]=s;else if(_(s.kind)){var u,l=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=l,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var c=this._cuesByTrackId[s._id].cues;u=c.shift();)k(this.renderNatively,s,u);s.mode=l,this._cuesByTrackId[s._id].loaded=!0}L.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||b.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(e){if(this.renderNatively){var t=e===this._itemTracks;t||n.cancelXhr(this._itemTracks),this._itemTracks=e,e&&(t||(this.disableTextTrack(),C.call(this),this.addTextTracks(e)))}}function o(){return this._currentTextTrackIndex;
}function u(t){return this.renderNatively?void(this._textTracks&&(0===t&&e.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==t-1&&(this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1))}function l(e){if(e.text&&e.begin&&e.end){var t=e.trackid.toString(),i=this._tracksById&&this._tracksById[t];i||(i={kind:"captions",_id:t,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var r;e.useDTS&&(i.source||(i.source=e.source||"mpegts")),r=e.begin+"_"+e.text;var a=this._metaCuesByTextTime[r];if(!a){a={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[r]=a;var s=n.convertToVTTCues([a])[0];i.data.push(s)}}}function c(e){
this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var a={kind:e.type,_id:t,label:n,embedded:!0};i=S.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):T.call(this,[i])}x.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?k(this.renderNatively,i,r):i.data.push(r))}function d(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],r=[],a=!1,s=0;s<i.length;s++){var o=i[s],u=e.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),a=!0)}a&&r.sort(function(e,t){return e.begin-t.begin});var l=n.convertToVTTCues(r);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(f(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function f(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function p(){n.cancelXhr(this._itemTracks);
var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(w(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),w(this.renderNatively,this.video.textTracks))}function v(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function g(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var t=this.video.textTracks,i=e.filter(t,function(e){return(e.inuse||!e._id)&&_(e.kind)});if(!this._textTracks||I.call(this,i))return void this.setTextTracks(t);
for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}function b(){this.setTextTracks(this.video.textTracks)}function T(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||_(i.kind)){var r=S.call(this,i);L.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),P))}}!this.renderNatively&&this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function E(e,t){if(this.renderNatively){var i=this._tracksById[e._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded){var n;for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};n=t.shift();)k(this.renderNatively,i,n)}}}function k(e,t,n){if(!i.isIE()||!e||!window.TextTrackCue)return void t.addCue(n);var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);
t.addCue(r)}function w(t,n){n.length&&e.each(n,function(e){if(!(i.isIE()&&t&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function _(e){return"subtitles"===e||"captions"===e}function A(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function S(t){var i,n=r.createLabel(t,this._unknownCount),a=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===t.kind){var s=this.video.textTracks;i=e.findWhere(s,{label:a}),i?(i.kind=t.kind,i.language=t.language||""):i=this.video.addTextTrack(t.kind,a,t.language||""),i["default"]=t["default"],i.mode="disabled",i.inuse=!0}else i=t,i.data=i.data||[];return i._id||(i._id=r.createId(t,this._textTracks.length)),i}function L(e){this._textTracks.push(e),this._tracksById[e._id]=e}function C(){if(this._textTracks){var t=e.filter(this._textTracks,function(e){
return e.embedded||"subs"===e.groupid});this._initTextTracks(),e.each(t,function(e){this._tracksById[e._id]=e}),this._textTracks=t}}function R(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var a=[];if(e.each(n,function(e){e.startTime<r||(e.data||e.value?a.push(e):e.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(e.text)}))},this),a.length){var s=t.parseID3(a);this.trigger("meta",{metadataTime:r,metadata:s})}this._activeCuePosition=r}}}function x(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var a="_"+t.line,s=Math.floor(20*t.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1||(r[n+a]=s,0));case"metadata":var u=t.data?new Uint8Array(t.data).join(""):t.text;return n=t.startTime+u,!r[n]&&(r[n]=t.endTime,!0);default:return!1}}function I(e){if(e.length>this._textTracks.length)return!0;
for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function P(e){i.log("CAPTIONS("+e+")")}var O={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:A,addTracksListener:h,clearTracks:p,clearCueData:v,disableTextTrack:g,enableTextTrack:m,getSubtitlesTrack:o,removeTracksListener:f,addTextTracks:T,setTextTracks:a,setupSideloadedTracks:s,setSubtitlesTrack:u,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:d,addCaptionsCue:l,addVTTCue:c,addVTTCuesToTrack:E,renderNatively:!1};return O}.apply(t,n),!(void 0!==r&&(e.exports=r))},32:function(e,t,i){var n,r;n=[],r=function(){function e(e){return e&&e.length?e.end(e.length-1):0}return{endOfRange:e}}.apply(t,n),!(void 0!==r&&(e.exports=r))},39:function(e,t,i){var n,r;n=[i(2)],r=function(e){return{container:null,volume:function(t){t=e.between(t/100,0,1),
this.video.volume=t},mute:function(e){this.video.muted=!!e,this.video.muted||this.video.removeAttribute("muted")},resize:function(t,i,n){if(!(t&&i&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===n){var r=t/i,a=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(r-a)<.09&&(s="fill"),e.style(this.video,{objectFit:s})}return!1},getContainer:function(){return this.container},setContainer:function(e){this.container=e,e.insertBefore(this.video,e.firstChild)},remove:function(){this.stop(),this.destroy(),this.container===this.video.parentNode&&this.container.removeChild(this.video)},getVideo:function(t,i){var n=i||document.getElementById(t),r=n?n.querySelector("video"):null;return r||(r=document.createElement("video"),e.isMobile()&&r.setAttribute("jw-gesture-required","")),r.className="jw-video jw-reset",this.video=r,r}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},40:function(e,t,i){var n,r;n=[i(3),i(9),i(5),i(1)],r=function(e,t,i,n){var r=256;return{stallCheckTimeout_:-1,
lastStalledTime_:NaN,trigger:function(t,i){return e.trigger.call(this,t,i)},setState:function(e){return t.setState.call(this,e)},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.stopStallCheck(),this.eventsOff_(),this.video},stopStallCheck:function(){clearTimeout(this.stallCheckTimeout_)},startStallCheck:function(){n.isNaN(this.lastStalledTime_)&&this.stalledHandler(),this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this),r)},stalledHandler:function(){return this.lastStalledTime_!==this.video.currentTime?void(this.lastStalledTime_=this.video.currentTime):void(this.video.paused||this.video.ended||this.state!==i.LOADING&&this.state!==i.ERROR&&(this.seeking||this.setState(i.STALLED)))},setAutoplayAttributes:function(){this.video.setAttribute("autoplay",""),this.video.setAttribute("muted","")},removeAutoplayAttributes:function(){this.video.removeAttribute("autoplay"),this.video.removeAttribute("muted")}}}.apply(t,n),!(void 0!==r&&(e.exports=r));
},41:function(e,t,i){var n,r;n=[i(2),i(5)],r=function(e,t){return{seeking:!1,loadedmetadata:function(){var e={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},t=this.drmUsed;t&&(e.drm=t),this.trigger("meta",e)},timeupdate:function(){this.stopStallCheck();var e=this.video.videoHeight;e!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:e}}),this._helperLastVideoHeight=e,this.state!==t.STALLED&&this.state!==t.LOADING||this.setState(t.PLAYING),this.startStallCheck();var i=this.getCurrentTime(),n={position:i,duration:this.getDuration()};if(this.getPtsOffset){var r=this.getPtsOffset();r>=0&&(n.metadata={mpegts:r+i})}(this.state===t.PLAYING||this.seeking)&&this.trigger("time",n)},click:function(e){this.trigger("click",e)},volumechange:function(){var e=this.video;this.trigger("volume",{volume:Math.round(100*e.volume)}),this.trigger("mute",{mute:e.muted})},seeked:function(){this.seeking&&(this.seeking=!1,
this.trigger("seeked"))},playing:function(){this.setState(t.PLAYING),this.video.hasAttribute("jw-gesture-required")&&this.video.removeAttribute("jw-gesture-required"),this.trigger("providerFirstFrame")},pause:function(){this.state!==t.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(t.PAUSED))},progress:function(){var t=this.getDuration();if(!(0>=t||t===1/0)){var i=this.video.buffered;if(i&&0!==i.length){var n=e.between(i.end(i.length-1)/t,0,1);this.trigger("bufferChange",{bufferPercent:100*n,position:this.getCurrentTime(),duration:t})}}},ended:function(){this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==t.IDLE&&this.state!==t.COMPLETE&&this.trigger("complete")},loadeddata:function(){this.setTextTracks(this.video.textTracks),this.video.setAttribute("jw-loaded","data")},error:function(){var e=this.video.error&&this.video.error.code||-1,t={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"
}[e]||"Unknown";this.trigger("mediaError",{code:e,message:"Error playing file: "+t})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},69:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);
}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(170),l=n(u),c=i(156),d=n(c),h=i(155),f=n(h),p=i(157),v=i(153),g=n(v),m=i(154),y=n(m),b=i(158),T=n(b),E=i(8),k=i(1),w=i(41),_=i(5),A=i(4),S=i(2),L=i(14),C=i(32),R=window.VTTCue||window.TextTrackCue,x=function(e){function t(e,i){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.bufferFull=!1,n.bufferStallTimeout=1e3,n.currentHlsjsLevel=null,n.currentJwItem=null,n.edgeOfLiveStream=!1,n.staleManifestDurationMultiplier=3e3,n.staleManifestTimeout=null,n.eventHandler=null,n.gestureRequired=M(),n.hlsjs=null,n.hlsjsConfig=null,n.jwConfig=i,n.jwLevels=null,n.lastRecoveryTime=null,n.lastEndSn=null,n.levelDuration=0,n.live=!1,n.maxRetries=3,n.playerId=e,n.preloaded=!1,n.preloadMetaOnly=!1,n.recoveryInterval=5e3,n.recoveringMediaError=!1,n.recoveringNetworkError=!1,n.renderNatively=D(i.renderCaptionsNatively),n.retryCount=0,n.stale=!1,n.stallTimeout=null,n.state=_.IDLE,n.streamType="VOD",n.supports=t.supports,
n.video=n.getVideo(e),n.withCredentials=!1,n}return s(t,e),o(t,[{key:"initHlsjs",value:function(e){var t=!!(void 0!==this.jwConfig.withCredentials?this.jwConfig.withCredentials:e.withCredentials);this.hlsjs&&this.withCredentials===t||(this.video=this.getVideo(this.playerId,this.container),this.restoreVideoProperties(),this.setContainer(this.container),this.withCredentials=t,this.stopStallTimeout(),this.stale=!1,this.hlsjsConfig=(0,g["default"])(this.withCredentials,this.jwConfig.aestoken,this.renderNatively),this.hlsjs=new l["default"](this.hlsjsConfig),this.eventHandler=new f["default"](this.video,this.createVideoListeners(),this.hlsjs,this.createHlsjsListeners()))}},{key:"init",value:function(e){if(this.video&&this.video.textTracks.length&&(this.saveVideoProperties(),this.remove()),this.initHlsjs(e),"none"!==e.preload&&this.preload(e),this.video.textTracks.length){var t=this.video.textTracks[0];t&&t.textTrack1&&(this.video.textTracks[0].inuse=!0)}e.tracks&&e.tracks.length&&this.setupSideloadedTracks(e.tracks);
}},{key:"load",value:function(e,t){return this.initHlsjs(e),t||this.setState(_.LOADING),this.gestureRequired&&this.triggerBufferFull(),this.preloaded?(this.preloadMetaOnly&&(P("startLoad"),this.hlsjs.startLoad()),void this.resetPreload()):(P("load",e),this.currentJwItem=e,this.eventsOn_(),this.hlsjs.attachMedia(this.video),this.hlsjs.nextLevel=-1,this.hlsjs.config.startPosition=e.starttime||-1,void this.hlsjs.loadSource(e.sources[0].file))}},{key:"preload",value:function(e){this.preloaded||(P("preload",e),this.preloadMetaOnly="auto"!==e.preload,this.load(e,!0),this.preloaded=!0)}},{key:"play",value:function(){var e=this,t=this.video.play();t&&t["catch"]&&t.then(function(){e.gestureRequired=!1})["catch"](function(t){O(t),e.gestureRequired&&t&&"NotAllowedError"===t.name&&e.pause()})}},{key:"pause",value:function(){this.video.pause(),this.setState(_.PAUSED)}},{key:"stop",value:function(){this.video.pause(),this.clearTracks(),this.hlsjs&&(this.eventsOff_(),this.hlsjs.stopLoad())}},{key:"seek",
value:function(e){var t=this.video.duration;if(t===1/0)return void O("Returned early from seek","Duration",t);this.stopStallTimeout();var i=e>=0?e:e+t;this.trigger(A.JWPLAYER_MEDIA_SEEK,{position:this.getCurrentTime(),offset:i});var n=this.getDuration();0!==n&&n!==1/0&&(this.seeking=!0,this.video.currentTime=i,this.trigger("time",{duration:n,position:this.getCurrentTime()}))}},{key:"getCurrentQuality",value:function(){var e=0;return this.hlsjs&&!this.hlsjs.autoLevelEnabled&&(e=(0,p.toJwLevel)(this.hlsjs.manualLevel,this.jwLevels)),e}},{key:"getQualityLevels",value:function(){return k.map(this.jwLevels,function(e){return(0,E.qualityLevel)(e)})}},{key:"getCurrentAudioTrack",value:function(){return k.isNumber(this.currentAudioTrackIndex)?this.currentAudioTrackIndex:-1}},{key:"getAudioTracks",value:function(){return this.audioTracks||[]}},{key:"getCurrentTime",value:function(){var e=this.video.currentTime;return this.live&&"DVR"===this.streamType&&(e-=this.video.duration),e}},{key:"getDuration",
value:function(){var e=this.currentJwItem.minDvrWindow,t=this.levelDuration,i=this.video.duration;return this.live&&(i=S.isDvr(t,e)?-t:1/0),this.streamType=S.streamType(i,e),i}},{key:"getCurrentHlsjsLevel",value:function(){var e=0;if(this.hlsjs){var t=this.hlsjs,i=t.firstLevel,n=t.currentLevel;e=n>0?n:i}return e}},{key:"getName",value:function(){return I()}},{key:"setCurrentQuality",value:function(e){if(!(0>e)){var t=this.hlsjs.levels,i=(0,p.toHlsjsLevel)(e,this.jwLevels);this.hlsjs.nextLevel=i,this.trigger(A.JWPLAYER_MEDIA_LEVEL_CHANGED,{levels:this.jwLevels,currentQuality:e}),this.jwConfig.qualityLabel=this.jwLevels[e].label,P("Setting level to ",i,t[Math.max(i,0)],this.jwLevels[e])}}},{key:"setCurrentAudioTrack",value:function(e){var t=this.getCurrentHlsjsLevel(),i=(0,p.toJwLevel)(t,this.jwLevels);if(this.jwLevels[i]){var n=this.jwLevels[i].audioGroupId;k.size(this.audioTracksMap)&&(this.audioTracks=this.audioTracksMap[n],k.isNumber(e)&&k.size(this.audioTracks)&&this.audioTracks[e]&&this.currentAudioTrackIndex!==e&&(this.trigger(A.JWPLAYER_AUDIO_TRACKS,{
tracks:this.audioTracks,currentTrack:e}),null!==this.currentAudioTrackIndex&&this.audioTracks[e].hlsjsIndex!==this.hlsjs.audioTrack&&this.trigger(A.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:this.audioTracks,currentTrack:e}),this.currentAudioTrackIndex=e,this.hlsjs.audioTrack=this.audioTracks[e].hlsjsIndex,P("Setting audio track to",this.audioTracks[e])))}}},{key:"updateAudioTrack",value:function(e){if(this.hlsjs.audioTracks.length){var t=this.currentAudioTrackIndex;k.isNumber(t)?this.audioTracks[t].hlsjsIndex!==this.hlsjs.audioTrack&&(this.currentAudioTrackIndex=null):t=(0,p.getDefaultJwTrackIndex)(this.audioTracksMap[e.attrs.AUDIO]),this.setCurrentAudioTrack(t)}}},{key:"setCurrentSubtitleTrack",value:function(e){this.hlsjs.subtitleTrack=e}},{key:"onAdaptation",value:function(e){var t=this.hlsjs,i=t.levels,n=t.autoLevelEnabled,r=i[e],a=(r?r.width:0)||this.video.videoWidth,s=(r?r.height:0)||this.video.videoHeight,o=r?r.bitrate:0,u=(0,p.toJwLevel)(e,this.jwLevels);this.trigger("visualQuality",{
reason:n?"auto":"api",mode:n?"auto":"manual",type:"visualQuality",level:{bitrate:o,index:u,height:s,label:n?"auto":this.jwLevels[u].label,width:a}}),this.triggerMediaType(a,s)}},{key:"triggerMediaType",value:function(e,t){var i="video";e&&t||(i="audio"),P("Media Type",i),this.trigger(A.JWPLAYER_MEDIA_TYPE,{mediaType:i})}},{key:"createVideoListeners",value:function(){var e=this,t={};return k.each(w,function(i,n){"function"==typeof i&&(t[n]=i.bind(e))}),t}},{key:"createHlsjsListeners",value:function(){var e=this,t={};return t[l["default"].Events.MEDIA_ATTACHED]=function(){P("Media attached"),e.recoveringMediaError&&(e.hlsjs.startLoad(),e.recoveringMediaError=!1,e.resetRecovery(),e.stopStallTimeout())},t[l["default"].Events.MEDIA_DETACHED]=function(){P("Media detached"),e.renderNatively||(e.clearCueData("textTrack1"),e.clearCueData("textTrack2"))},t[l["default"].Events.MANIFEST_LOADED]=function(e,t){P("Manifest loaded",t)},t[l["default"].Events.MANIFEST_PARSED]=function(t,i){P("Manifest parsed",i);
var n=i.levels,r=i.firstLevel,a=r,s=0;e.currentHlsjsLevel=null,e.jwLevels=(0,p.formatLevels)(n,e.jwConfig.qualityLabels);var o=k.find(e.jwLevels,function(t){return t.label===e.jwConfig.qualityLabel});o&&o.hlsjsIndex>-1&&(a=o.hlsjsIndex,s=(0,p.toJwLevel)(a,e.jwLevels),e.hlsjs.nextLevel=a),e.hlsjs.startLevel=a,e.preloadMetaOnly||e.hlsjs.startLoad(e.hlsjs.config.startPosition),e.trigger(A.JWPLAYER_MEDIA_LEVELS,{levels:e.jwLevels,currentQuality:s})},t[l["default"].Events.LEVEL_SWITCH]=function(t,i){P("Level switch requested",i,e.hlsjs.levels,"ABR:",e.hlsjs.autoLevelEnabled)},t[l["default"].Events.LEVEL_LOADED]=function(t,i){P("Level loaded",i);var n=i.details,r=n.endSN,a=n.live,s=n.targetduration;e.checkStaleManifest(r,a,s)},t[l["default"].Events.LEVEL_UPDATED]=function(t,i){P("Level updated",i);var n=i.details,r=n.live,a=n.totalduration;e.live=r,e.levelDuration=a},t[l["default"].Events.LEVEL_PTS_UPDATED]=function(t,i){P("Level PTS updated",i),e.levelDuration=i.details.totalduration},t[l["default"].Events.LEVEL_REMOVED]=function(){
e.jwLevels=(0,p.formatLevels)(e.hlsjs.levels,e.jwConfig.qualityLabels),e.trigger(A.JWPLAYER_MEDIA_LEVELS,{levels:e.jwLevels,currentQuality:0})},t[l["default"].Events.FRAG_CHANGED]=function(t,i){P("Frag changed",i);var n=e.hlsjs.levels,r=i.frag.level,a=n[r];r!==e.currentHlsjsLevel?(P("Level switch complete",r,a),e.currentHlsjsLevel=r,e.onAdaptation(r),e.updateAudioTrack(n[r])):e.video.videoHeight!==e._helperLastVideoHeight&&e.onAdaptation(r)},t[l["default"].Events.FRAG_PARSING_METADATA]=function(t,i){P("Frag metadata parsed",i);var n=e.hlsjs.levels;k.each(i.samples,function(t){var r=t.unit,a=t.data,s=t.pts,o=(0,d["default"])(r||a).cues;if(!o)return void O("No cues found in ID3 byte array");var u=S.parseID3(o);if(!u)return void O("No metadata found in the ID3 cues");var l=n[i.frag.level],c=l&&l.details;if(!c){if(u.PRIV&&"com.apple.streaming.transportStreamTimestamp"in u.PRIV)return;return void O("No matching level found for ID3 metadata")}var h=k.find(l.details.fragments,function(e){return e.sn===i.frag.sn;
});if(!h)return void O("No matching fragment found for ID3 level");if(!h.endPTS)return void O("No endPTS found for matching ID3 fragment");var f=Math.max(s,0),p=h.endPTS;if(p>f){var v=new R(f,p,JSON.stringify(u));e.addVTTCue({type:"metadata",cue:v})}})},t[l["default"].Events.BUFFER_APPENDING]=function(e,t){P("Buffer appending",t)},t[l["default"].Events.BUFFER_APPENDED]=function(t,i){var n=e.video.buffered.length;P("Buffer appended",i,e.state,n,n&&e.video.buffered.end(n-1)),e.stopStallTimeout(),e.recoveringNetworkError&&(e.resetRecovery(),e.recoveringNetworkError=!1)},t[l["default"].Events.FRAG_BUFFERED]=function(t,i){P("Frag buffered",i),e.triggerBufferFull()},t[l["default"].Events.KEY_LOADING]=function(t,i){P("Key loading",i),e.supports("drm")||e.shutdown("AES decryption not supported with this license")},t[l["default"].Events.SUBTITLE_TRACKS_UPDATED]=function(e,t){P("Subtitle tracks updated",t)},this.renderNatively||(t[l["default"].Events.NON_NATIVE_TEXT_TRACKS_FOUND]=function(t,i){P("Externally managed text track found",i),
e.addTextTracks(i.tracks)},t[l["default"].Events.CUES_PARSED]=function(t,i){P("Externally managed VTTCues found",i),i.cues.forEach(function(t){e.addVTTCue({type:i.type,cue:t,track:i.track})})}),t[l["default"].Events.AUDIO_TRACKS_UPDATED]=function(t,i){P("Audio tracks updated");var n=i.audioTracks,r=e.hlsjs.levels,a=e.getCurrentHlsjsLevel();n&&n.length&&(e.currentAudioTrackIndex=null,e.audioTracksMap=(0,p.formatAudioTracks)(n),e.updateAudioTrack(r[a]))},t[l["default"].Events.ERROR]=function(t,i){var n=(0,y["default"])(i),r=i.fatal,a=i.type,s=n.stalling,o=n.recoverable,u=n.message,l=n.doCodecSwap;if(O(n),s&&(e.seeking?e.setState(_.LOADING):e.stallTimeout||e.startStallTimeout()),r){var c=Date.now();o&&e.retryCount<e.maxRetries?c>=e.lastRecoveryTime+e.recoveryInterval?(O("Attempting to recover, retry count:",e.retryCount),"networkError"===a?(e.recoveringNetworkError=!0,e.hlsjs.startLoad()):"mediaError"===a&&(e.recoveringMediaError=!0,l&&e.hlsjs.swapAudioCodec(),e.hlsjs.recoverMediaError()),
e.retryCount+=1,e.lastRecoveryTime=c):O("Recovery not attempted - too little time between attempts",c-e.lastRecoveryTime):e.shutdown(u,i)}},t}},{key:"eventsOn_",value:function(){P("eventsOn_"),this.eventHandler.on()}},{key:"eventsOff_",value:function(){P("eventsOff_"),this.disableTextTrack(),this.hlsjs.detachMedia(),this.eventHandler.off(),this.resetLifecycleVariables()}},{key:"shutdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Fatal Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.error("Hlsjs shutdown",e,t),this.destroy(),this.trigger(A.JWPLAYER_MEDIA_ERROR,{message:e})}},{key:"destroy",value:function(){this.hlsjs&&(this.eventsOff_(),this.hlsjs.destroy(),this.hlsjs=null,P("Hlsjs destroyed"))}},{key:"startStallTimeout",value:function(){var e=this;this.stallTimeout||(this.stallTimeout=setTimeout(function(){var t=e.video.ended||e.atEdgeOfLiveStream();t?(e.edgeOfLiveStream=!0,e.checkStreamEnded()):e.setState(_.STALLED)},this.bufferStallTimeout));
}},{key:"stopStallTimeout",value:function(){clearTimeout(this.stallTimeout),clearTimeout(this.staleManifestTimeout),this.stallTimeout=null,this.staleManifestTimeout=null,this.edgeOfLiveStream=!1}},{key:"saveVideoProperties",value:function(){this.jwConfig.volume=100*this.video.volume,this.jwConfig.mute=this.video.muted}},{key:"restoreVideoProperties",value:function(){this.volume(this.jwConfig.volume),this.mute(this.jwConfig.mute)}},{key:"resetRecovery",value:function(){this.retryCount=0}},{key:"checkStaleManifest",value:function(e,t,i){var n=this;t&&this.lastEndSn===e?this.staleManifestTimeout||(this.staleManifestTimeout=setTimeout(function(){n.stale=!0,n.checkStreamEnded()},this.staleManifestDurationMultiplier*i)):(clearTimeout(this.staleManifestTimeout),this.staleManifestTimeout=null,this.stale=!1),this.lastEndSn=e,this.live=t}},{key:"atEdgeOfLiveStream",value:function(){if(!this.live)return!1;var e=2;return C.endOfRange(this.video.buffered)-this.video.currentTime<=e}},{key:"checkStreamEnded",
value:function(){this.stale&&this.edgeOfLiveStream&&this.shutdown("The live stream is either down or has ended")}},{key:"resetPreload",value:function(){this.preloaded=!1,this.preloadMetaOnly=!1}},{key:"resetLifecycleVariables",value:function(){this.resetPreload(),this.resetRecovery(),this.stopStallTimeout(),this.setState(_.IDLE),this.bufferFull=!1,this.currentHlsjsLevel=null,this.currentJwItem=null,this.gestureRequired=M(),this.jwLevels=null,this.lastRecoveryTime=null,this.lastEndSn=null,this.levelDuration=0,this.live=!1,this.recoveringMediaError=!1,this.recoveringNetworkError=!1,this.stale=!1,this.staleManifestTimeout=null,this.streamType="VOD"}},{key:"triggerBufferFull",value:function(){this.bufferFull||(this.bufferFull=!0,this.trigger(A.JWPLAYER_MEDIA_BUFFER_FULL))}}],[{key:"getName",value:function(){return I()}},{key:"setEdition",value:function(e){t.supports=L(e)}}]),t}(T["default"]);t["default"]=x;var I=function(){return{name:"hlsjs"}},P=function(){if(window.jwplayer.debug){var e;(e=console).info.apply(e,arguments);
}},O=function(){if(window.jwplayer.debug){var e;(e=console).warn.apply(e,arguments)}},D=function(e){return!(!S.isIOS()&&!S.isSafari())||e&&(S.isChrome()||S.isEdge())},M=function(){return S.isAndroid()};delete w.error},153:function(e,t,i){"use strict";function n(e,t,i){var n={liveSyncDuration:25,autoStartLoad:!1,maxBufferSize:2e7,maxMaxBufferLength:90,capLevelToPlayerSize:!0,renderNatively:i};return(e||t)&&(n=a.extend({},n,r(e,t))),n}function r(e,t){return{xhrSetup:function(i,n){if(e&&(i.withCredentials=!0),t){var r=n.indexOf("?")>0?"&token=":"?token=";i.open("GET",n+r+t,!0)}},fetchSetup:function(e,t){return t.credentials="include",new Request(e.url,t)}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var a=i(1)},154:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e.details,i=a.indexOf(s,t)<0,n=a.indexOf(o,t)>=0,r=a.indexOf(u,t)>=0,d=l(e);switch(e.type){case"networkError":d="Cannot load M3U8: "+d;
break;case"mediaError":d="Media Error: "+d;break;case"otherError":d="Error: "+d+";"}return new c(d,i,n,r,e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=i(1),s=["manifestLoadError","manifestParsingError","manifestIncompatibleCodecsError","levelLoadError"],o=["bufferStalledError","bufferSeekOverHole"],u=["fragLoopLoadingError"],l=function(e){var t="";if(e)if(e.response){var i=e.response,n=i.code,r=i.text,a=e.url;t=n?n+" "+r:a&&"http:"===a.substring(0,5)&&"https:"===document.location.protocol?"Unable to fetch HTTP resource over HTTPS":"Crossdomain access denied"}else t=e.reason?""+e.reason:""+e.details;return t},c=t.HlsjsError=function d(e,t,i,r,a){n(this,d),this.message=e,this.recoverable=t,this.stalling=i,this.doCodecSwap=r,this.hlsjsError=a}},155:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){
var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1),s=function(){function e(t,i,r,a){n(this,e),this.video=t,this.hlsjs=r,this.videoListeners=i,this.hlsjsListeners=a}return r(e,[{key:"on",value:function(){var e=this;this.off(),a.each(this.videoListeners,function(t,i){e.video.addEventListener(i,t,!1)}),a.each(this.hlsjsListeners,function(t,i){e.hlsjs.on(i,t)})}},{key:"off",value:function(){var e=this;a.each(this.videoListeners,function(t,i){e.video.removeEventListener(i,t)}),a.each(this.hlsjsListeners,function(t,i){e.hlsjs.off(i,t)})}}]),e}();t["default"]=s},156:function(e,t,i){"use strict";function n(e){for(var t=0,i=0,n=10,o=[];t+s<e.length;){var u=a.utf8ArrayToStr(e.subarray(t,t+=3));if("ID3"===u){var l=e.subarray(t,t+=2),c=e.subarray(t,t+=1)[0];if(0!==(128&c)||l[0]<3)break;var d=a.syncSafeInt(e.subarray(t,t+=4));0!==(64&c)&&(n+=a.syncSafeInt(e.subarray(t,t+=4))),
o=o.concat(r(e,i+n,d)),t+=d}else{if("3DI"!==u){t-=3;break}t+=7}i=t}return{position:t,cues:o}}function r(e,t,i){for(var n=e.length,r=t,s=[];t+i>r;){if(8>n-r)return s;var o=r;r+=4;var u=a.syncSafeInt(e.subarray(r,r+=4));if(u+2>n-r)return s;var l=e.subarray(r,r+=1)[0];if(l>0)return s;var c=e[r];3!==c&&0!==c||(u-=1,r+=1);var d=e.buffer.slice(o-10,r+u+1);s.push({data:d}),r+=u+1}return s}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var a=i(12),s=9},157:function(e,t,i){"use strict";function n(e,t){var i=l.hasRedundantLevels(e),n=u.map(e,function(e,n){return{label:l.generateLabel(e,t,i),level_id:e.id,hlsjsIndex:n,bitrate:e.bitrate,height:e.height,width:e.width,audioGroupId:e.attrs?e.attrs.AUDIO:void 0}});return n=c(n),n.length>1&&n.unshift({label:"Auto",level_id:"auto",hlsjsIndex:-1}),n}function r(e,t){return Math.max(0,u.indexOf(t,u.find(t,function(t){return t.hlsjsIndex===e})))}function a(e,t){var i=-1;return e>-1&&t[e]&&(i=t[e].hlsjsIndex),i}function s(e){var t=u.reduce(e,function(e,t,i){
var n=t.groupId;return e[n]=e[n]||[],e[n].push({autoselect:t.autoselect,defaulttrack:t["default"],groupid:n,language:t.lang,name:t.name,hlsjsIndex:i}),e},{});return t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.max(u.indexOf(e,u.find(e,function(e){return e.defaulttrack})),0)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatLevels=n,t.toJwLevel=r,t.toHlsjsLevel=a,t.formatAudioTracks=s,t.getDefaultJwTrackIndex=o;var u=i(1),l=i(60),c=function(e){return e.sort(function(e,t){var i=void 0;return i=e.height&&t.height?e.height===t.height?t.bitrate-e.bitrate:t.height-e.height:t.bitrate-e.bitrate})}},158:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),a=i(39),s=i(40),o=i(10),u=i(3),l=function c(){n(this,c)};t["default"]=l,l.prototype=r.extend({},u,a,s,o)},170:function(t,i){!function(e){if("object"==typeof i&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{
var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.Hls=e()}}(function(){var t;return function i(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){var l="function"==typeof e&&e;if(!u&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return a(i?i:e)},d,d.exports,i,t,n,r)}return n[o].exports}for(var s="function"==typeof e&&e,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");
return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(i=this._events[e],o(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(s(i))for(a=Array.prototype.slice.call(arguments,1),l=i.slice(),n=l.length,u=0;n>u;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,
s(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var i,n,a,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],a=i.length,n=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(i)){for(o=a;o-->0;)if(i[o]===t||i[o].listener&&i[o].listener===t){
n=o;break}if(0>n)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],r(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t);
}},{}],2:[function(e,i,n){!function(e){var r=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/;?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),t=t.trim(),!t){if(!i.alwaysNormalize)return e;var n=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return n.path=u.normalizePath(n.path),u.buildURLFromParts(n)}var r=this.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=u.normalizePath(r.path),u.buildURLFromParts(r)):t;var s=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var o=a.exec(s.path);s.netLoc=o[1],s.path=o[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(l.netLoc=s.netLoc,"/"!==r.path[0]))if(r.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+r.path;
l.path=u.normalizePath(d)}else l.path=s.path,r.params||(l.params=s.params,r.query||(l.query=s.query));return null===l.path&&(l.path=i.alwaysNormalize?u.normalizePath(r.path):r.path),u.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(s,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof n&&"object"==typeof i?i.exports=u:"function"==typeof t&&t.amd?t([],function(){return u}):"object"==typeof n?n.URLToolkit=u:e.URLToolkit=u}(this)},{}],3:[function(e,t,i){var n=arguments[3],r=arguments[4],a=arguments[5],s=JSON.stringify;t.exports=function(e,t){function i(e){g[e]=!0;for(var t in r[e][1]){var n=r[e][1][t];g[n]||i(n)}}for(var o,u=Object.keys(a),l=0,c=u.length;c>l;l++){
var d=u[l],h=a[d].exports;if(h===e||h&&h["default"]===e){o=d;break}}if(!o){o=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},l=0,c=u.length;c>l;l++){var d=u[l];f[d]=d}r[o]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[o]=o,r[p]=[Function(["require"],"var f = require("+s(o)+");(f.default ? f.default : f)(self);"),v];var g={};i(p);var m="("+n+")({"+Object.keys(g).map(function(e){return s(e)+":["+r[e][0]+","+s(r[e][1])+"]"}).join(",")+"},{},["+s(p)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return b;var T=y.createObjectURL(b),E=new Worker(T);return E.objectURL=T,E}},{}],4:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0}),i.hlsDefaultConfig=void 0;var r=e(5),a=n(r),s=e(8),o=n(s),u=e(9),l=n(u),c=e(10),d=n(c),h=e(56),f=n(h),p=e(7),v=n(p),g=e(6),m=n(g),y=e(47),b=n(y),T=e(15),E=n(T),k=e(14),w=n(k),_=e(13),A=n(_);
i.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f["default"],
fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:a["default"],bufferController:o["default"],capLevelController:l["default"],fpsController:d["default"],audioStreamController:m["default"],audioTrackController:v["default"],subtitleStreamController:A["default"],subtitleTrackController:w["default"],timelineController:E["default"],cueHandler:b["default"],enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,13:13,14:14,15:15,47:47,5:5,56:56,6:6,7:7,8:8,9:9}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(34),f=n(h),p=e(30),v=e(51),g=e(49),m=n(g),y=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].FRAG_LOADING,l["default"].FRAG_LOADED,l["default"].FRAG_BUFFERED,l["default"].ERROR));
return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=e,i.onCheck=i._abandonRulesCheck.bind(i),i}return s(t,e),o(t,[{key:"destroy",value:function(){this.clearTimer(),d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var i=this.hls,n=e.frag.level,r=i.levels[n].details.live,a=i.config,s=void 0,o=void 0;r?(s=a.abrEwmaFastLive,o=a.abrEwmaSlowLive):(s=a.abrEwmaFastVoD,o=a.abrEwmaSlowVoD),this._bwEstimator=new m["default"](i,o,s,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,i=this.fragCurrent,n=i.loader,r=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=n.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var s=performance.now()-a.trequest,o=Math.abs(t.playbackRate);
if(s>500*i.duration/o){var u=e.levels,c=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/s),d=u[i.level],h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(i.duration*h/8)),g=t.currentTime,m=(p-a.loaded)/c,y=(f["default"].bufferInfo(t,g,e.config.maxBufferHole).end-g)/o;if(y<2*i.duration/o&&m>y){var b=void 0,T=void 0;for(T=i.level-1;T>r;T--){var E=u[T].realBitrate?Math.max(u[T].realBitrate,u[T].bitrate):u[T].bitrate;if(b=i.duration*E/(6.4*c),y>b)break}m>b&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+T+":fragLoadedDelay["+T+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+m.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=T,this._bwEstimator.sample(s,a.loaded),n.abort(),this.clearTimer(),e.trigger(l["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,
this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[t.level],n=(i.loaded?i.loaded.bytes:0)+e.stats.loaded,r=(i.loaded?i.loaded.duration:0)+e.frag.duration;i.loaded={bytes:n,duration:r},i.realBitrate=Math.round(8*n/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,i=e.frag;if(!(t.aborted===!0||1!==i.loadCounter||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&t.tload!==t.tbuffered)){var n=t.tparsed-t.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:
this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"_findBestLevel",value:function(e,t,i,n,r,a,s,o,u){for(var l=r;l>=n;l--){var c=u[l],d=c.details,h=d?d.totalduration/d.fragments.length:t,f=!!d&&d.live,p=void 0;p=e>=l?s*i:o*i;var g=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,m=g*h/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+g+"/"+h+"/"+a+"/"+m),p>g&&(!m||f||a>m))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var i=this._nextABRAutoLevel;return-1!==e&&(i=Math.min(e,i)),i},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.levels,n=e.config,r=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(f["default"].bufferInfo(a,u,n.maxBufferHole).end-u)/l,h=this._findBestLevel(s,o,c,r,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,i);
if(h>=0)return h;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===d){var y=this.bitrateTestDelay;if(y){var b=o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay;p=b-y,v.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}}return h=this._findBestLevel(s,o,c,r,t,d+p,g,m,i),Math.max(h,0)}}]),t}(d["default"]);i["default"]=y},{30:30,31:31,32:32,34:34,49:49,51:51}],6:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(45),l=n(u),c=e(34),d=n(c),h=e(24),f=n(h),p=e(32),v=n(p),g=e(31),m=n(g),y=e(35),b=n(y),T=e(52),E=n(T),k=e(30),w=e(51),_=e(48),A={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},S=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v["default"].MEDIA_ATTACHED,v["default"].MEDIA_DETACHING,v["default"].AUDIO_TRACKS_UPDATED,v["default"].AUDIO_TRACK_SWITCHING,v["default"].AUDIO_TRACK_LOADED,v["default"].KEY_LOADED,v["default"].FRAG_LOADED,v["default"].FRAG_PARSING_INIT_SEGMENT,v["default"].FRAG_PARSING_DATA,v["default"].FRAG_PARSED,v["default"].ERROR,v["default"].BUFFER_CREATED,v["default"].BUFFER_APPENDED,v["default"].BUFFER_FLUSHED,v["default"].INIT_PTS_FOUND));
return i.config=e.config,i.audioCodecSwap=!1,i.ticks=0,i._state=A.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return s(t,e),o(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m["default"].prototype.destroy.call(this),this.state=A.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,i=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[i]=n,this.videoTrackCC=i,w.logger.log("InitPTS for cc:"+i+" found from video track:"+n),this.state===A.WAITING_INIT_PTS&&(w.logger.log("sending pending audio frag to demuxer"),this.state=A.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(w.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=A.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,
this.state=A.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=A.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=A.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,i,n=this.hls,r=n.config;switch(this.state){case A.ERROR:case A.PAUSED:case A.BUFFER_FLUSHING:break;case A.STARTING:this.state=A.WAITING_TRACK,this.loadedmetadata=!1;break;case A.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition?this.nextLoadPosition:0;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=d["default"].bufferInfo(s,e,r.maxBufferHole),u=o.len,c=o.end,h=this.fragPrevious,f=r.maxMaxBufferLength,p=this.audioSwitch,g=this.trackId;
if((f>u||p)&&g<a.length){if(i=a[g].details,"undefined"==typeof i){this.state=A.WAITING_TRACK;break}if(!p&&!i.live&&h&&h.sn===i.endSN&&(!this.media.seeking||this.media.duration-c<h.duration/2)){this.hls.trigger(v["default"].BUFFER_EOS,{type:"audio"}),this.state=A.ENDED;break}var m=i.fragments,y=m.length,b=m[0].start,T=m[y-1].start+m[y-1].duration,E=void 0;if(p)if(i.live&&!i.PTSKnown)w.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,i.PTSKnown&&b>e){if(!(o.end>b||o.nextStart))return;w.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(i.initSegment&&!i.initSegment.data)E=i.initSegment;else if(b>=c){if(E=m[0],null!==this.videoTrackCC&&E.cc!==this.videoTrackCC&&(E=(0,_.findFragWithCC)(m,this.videoTrackCC)),i.live&&E.loadIdx&&E.loadIdx===this.fragLoadIdx){var S=o.nextStart?o.nextStart:b;return w.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),
void(this.media.currentTime=S+.05)}}else{var L=void 0,C=r.maxFragLookUpTolerance,R=h?m[h.sn-m[0].sn+1]:void 0,x=function(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};T>c?(c>T-C&&(C=0),L=R&&!x(R)?R:l["default"].search(m,x)):L=m[y-1],L&&(E=L,b=L.start,h&&E.level===h.level&&E.sn===h.sn&&(E.sn<i.endSN?(E=m[E.sn+1-i.startSN],w.logger.log("SN just loaded, load next one: "+E.sn)):E=null))}if(E)if(E.decryptdata&&null!=E.decryptdata.uri&&null==E.decryptdata.key)w.logger.log("Loading key for "+E.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+g),this.state=A.KEY_LOADING,n.trigger(v["default"].KEY_LOADING,{frag:E});else{if(w.logger.log("Loading "+E.sn+", cc: "+E.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+g+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,E.loadCounter){E.loadCounter++;var I=r.fragLoadingLoopThreshold;if(E.loadCounter>I&&Math.abs(this.fragLoadIdx-E.loadIdx)<I)return void n.trigger(v["default"].ERROR,{
type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:E})}else E.loadCounter=1;E.loadIdx=this.fragLoadIdx,this.fragCurrent=E,this.startFragRequested=!0,isNaN(E.sn)||(this.nextLoadPosition=E.start+E.duration),n.trigger(v["default"].FRAG_LOADING,{frag:E}),this.state=A.FRAG_LOADING}}break;case A.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=A.IDLE);break;case A.FRAG_LOADING_WAITING_RETRY:var P=performance.now(),O=this.retryDate;s=this.media;var D=s&&s.seeking;(!O||P>=O||D)&&(w.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=A.IDLE);break;case A.WAITING_INIT_PTS:if(void 0===this.initPTS[this.videoTrackCC])break;var M=this.waitingFragment;if(M){var N=M.frag.cc;this.videoTrackCC!==N?(w.logger.warn("Waiting fragment CC ("+N+") does not match video track CC ("+this.videoTrackCC+")"),this.waitingFragment=null,this.state=A.IDLE):(this.onFragLoaded(this.waitingFragment),this.state=A.FRAG_LOADING,
this.waitingFragment=null)}else this.state=A.IDLE;break;case A.STOPPED:case A.FRAG_LOADING:case A.PARSING:case A.PARSED:case A.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}
},{key:"onMediaSeeking",value:function(){this.state===A.ENDED&&(this.state=A.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){w.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=A.IDLE,this.fragCurrent=null,this.state=A.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=A.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,i=e.id,n=this.tracks[i],r=t.totalduration,a=0;if(w.logger.log("track "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),
t.live){var s=n.details;s&&t.fragments.length>0?(b["default"].mergeDetails(s,t),a=t.fragments[0].start,t.PTSKnown?w.logger.log("live audio playlist sliding:"+a.toFixed(3)):w.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,w.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var o=t.startTimeOffset;isNaN(o)?this.startPosition=0:(w.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===A.WAITING_TRACK&&(this.state=A.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===A.KEY_LOADING&&(this.state=A.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,i=e.frag;if(this.state===A.FRAG_LOADING&&t&&"audio"===i.type&&i.level===t.level&&i.sn===t.sn){var n=this.tracks[this.trackId],r=n.details,a=r.totalduration,s=t.level,o=t.sn,u=t.cc,l=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",c=this.stats=e.stats;
if("initSegment"===o)this.state=A.IDLE,c.tparsed=c.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(v["default"].FRAG_BUFFERED,{stats:c,frag:t,id:"audio"}),this.tick();else{this.state=A.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new f["default"](this.hls,"audio"));var d=this.initPTS[u],h=r.initSegment?r.initSegment.data:[];if(h||void 0!==d){this.pendingBuffering=!0,w.logger.log("Demuxing "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s);var p=!1;this.demuxer.push(e.payload,h,l,null,t,a,p,d)}else w.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+o+" of ["+r.startSN+" ,"+r.endSN+"],track "+s),this.waitingFragment=e,this.state=A.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,i=e.frag;if(t&&"audio"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===A.PARSING){var n=e.tracks,r=void 0;if(n.video&&delete n.video,r=n.audio){r.levelCodec="mp4a.40.2",
r.id=e.id,this.hls.trigger(v["default"].BUFFER_CODECS,n),w.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v["default"].BUFFER_APPENDING,s))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,i=this.fragCurrent,n=e.frag;if(i&&"audio"===e.id&&"audio"===e.type&&n.sn===i.sn&&n.level===i.level&&this.state===A.PARSING){var r=this.trackId,a=this.tracks[r],s=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+i.duration,e.endDTS=e.startDTS+i.duration),w.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),b["default"].updateFragPTSDTS(a.details,i.sn,e.startPTS,e.endPTS);var o=this.audioSwitch,u=this.media,l=!1;if(o&&u)if(u.readyState){
var c=u.currentTime;w.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(w.logger.log("switching audio track : flushing all audio"),this.state=A.BUFFER_FLUSHING,s.trigger(v["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,s.trigger(v["default"].AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,s.trigger(v["default"].AUDIO_TRACK_SWITCHED,{id:r});var d=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&d.push({type:e.type,data:t,parent:"audio",content:"data"})}),!l&&d.length&&(d.forEach(function(e){t.state===A.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(v["default"].BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,i=e.frag;t&&"audio"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===A.PARSING&&(this.stats.tparsed=performance.now(),this.state=A.PARSED,this._checkAppendedParsed());
}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==A.PARSING&&t!==A.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==A.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,i=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),i.trigger(v["default"].FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("audio buffered : "+E["default"].toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(v["default"].AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=A.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case k.ErrorDetails.FRAG_LOAD_ERROR:case k.ErrorDetails.FRAG_LOAD_TIMEOUT:
if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var n=this.config;if(i<=n.fragLoadingMaxRetry){this.fragLoadError=i,t.loadCounter=0;var r=Math.min(Math.pow(2,i-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);w.logger.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=A.FRAG_LOADING_WAITING_RETRY}else w.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=A.ERROR}break;case k.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case k.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case k.ErrorDetails.KEY_LOAD_ERROR:case k.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==A.ERROR&&(this.state=e.fatal?A.ERROR:A.IDLE,w.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case k.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===A.PARSING||this.state===A.PARSED)){var a=this.mediaBuffer,s=this.media.currentTime,o=a&&d["default"].isBuffered(a,s)&&d["default"].isBuffered(a,s+.5);
if(o){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,w.logger.warn("audio:reduce max buffer length to "+u.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*u.fragLoadingLoopThreshold),this.state=A.IDLE}else w.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=A.BUFFER_FLUSHING,this.hls.trigger(v["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(w.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(v["default"].BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=A.PARSED):(this.state=A.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(m["default"]);
i["default"]=S},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,48:48,51:51,52:52}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),
n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].MANIFEST_LOADING,l["default"].MANIFEST_LOADED,l["default"].AUDIO_TRACK_LOADED));return i.ticks=0,i.ontick=i.tick.bind(i),i}return s(t,e),o(t,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,i=e.audioTracks||[],n=!1;this.tracks=i,this.hls.trigger(l["default"].AUDIO_TRACKS_UPDATED,{audioTracks:i});var r=0;i.forEach(function(e){return e["default"]?(t.audioTrack=r,void(n=!0)):void r++}),n===!1&&i.length&&(h.logger.log("no default audio track defined, use first audio track as default"),
this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(h.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("switching to audioTrack "+e);var t=this.tracks[e],i=this.hls,n=t.type,r=t.url,a={id:e,type:n,url:r};i.trigger(l["default"].AUDIO_TRACK_SWITCH,a),i.trigger(l["default"].AUDIO_TRACK_SWITCHING,a);var s=t.details;!r||void 0!==s&&s.live!==!0||(h.logger.log("(re)loading playlist for audioTrack "+e),i.trigger(l["default"].AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("updating audioTrack "+e);
var t=this.tracks[e],i=t.url,n=t.details;!i||void 0!==n&&n.live!==!0||(h.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l["default"].AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(d["default"]);i["default"]=f},{31:31,32:32,51:51}],8:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,
enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=e(30),p=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].MEDIA_ATTACHING,l["default"].MEDIA_DETACHING,l["default"].MANIFEST_PARSED,l["default"].BUFFER_RESET,l["default"].BUFFER_APPENDING,l["default"].BUFFER_CODECS,l["default"].BUFFER_EOS,l["default"].BUFFER_FLUSHING,l["default"].LEVEL_PTS_UPDATED,l["default"].LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return s(t,e),
o(t,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){var n=this.sourceBuffer.audio,r=Math.abs(n.timestampOffset-e.start);if(r>.1){var a=n.updating;try{n.abort()}catch(s){a=!0,h.logger.warn("can not abort audio buffer: "+s)}a?this.audioTimestampOffset=e.start:(h.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,i=e.video,n=0;e.altAudio&&(t||i)&&(n=(t?1:0)+(i?1:0),h.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var i=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),
i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(i)}}},{key:"onMediaDetaching",value:function(){h.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){h.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l["default"].MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){h.logger.log("media source opened"),this.hls.trigger(l["default"].MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;
e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){h.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){h.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;h.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,i=this.segments.reduce(function(e,i){return i.parent===t?e+1:e},0);this.hls.trigger(l["default"].BUFFER_APPENDED,{parent:t,pending:i}),this._needsFlush||this.doAppending(),
this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){h.logger.error("sourceBuffer error:",e),this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var i=e[t];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(n){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,i=this.mediaSource;for(var n in e)if(!t[n]){var r=e[n],a=r.levelCodec||r.codec,s=r.container+";codecs="+a;h.logger.log("creating sourceBuffer("+s+")");try{var o=t[n]=i.addSourceBuffer(s);
o.addEventListener("updateend",this.onsbue),o.addEventListener("error",this.onsbe),this.tracks[n]={codec:a,container:r.container},r.buffer=o}catch(u){h.logger.error("error while trying to add sourceBuffer:"+u.message),this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:u,mimeType:s})}}this.hls.trigger(l["default"].BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){h.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,i=e.type;for(var n in t)i&&n!==i||t[n].ended||(t[n].ended=!0,h.logger.log(n+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;
if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var i in e){var n=e[i];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}h.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(r){h.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,i=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&i&&0!==e.readyState&&"open"===t.readyState){for(var r in i)if(i[r].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;
(n>this._msDuration&&n>a||a===1/0||isNaN(a))&&(h.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,i=this.sourceBuffer;try{for(var n in i)t+=i[n].buffered.length}catch(r){h.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l["default"].BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,i=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void h.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var n=i.shift();try{var r=n.type,a=t[r];a?a.updating?i.unshift(n):(a.ended=!1,this.parent=n.parent,
a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(s){h.logger.error("error while trying to append buffer:"+s.message),i.unshift(n);var o={type:f.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===s.code)return this.segments=[],o.details=f.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(l["default"].ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=f.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return h.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],o.fatal=!0,void e.trigger(l["default"].ERROR,o);o.fatal=!1,e.trigger(l["default"].ERROR,o)}}}}},{key:"flushBuffer",value:function(e,t,i){var n,r,a,s,o,u,l=this.sourceBuffer;if(Object.keys(l).length){if(h.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in l)if(!i||c===i){if(n=l[c],n.ended=!1,
n.updating)return h.logger.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<n.buffered.length;r++)if(a=n.buffered.start(r),s=n.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(o=e,u=t):(o=Math.max(a,e),u=Math.min(s,t)),Math.min(u,s)-o>.5)return this.flushBufferCounter++,h.logger.log("flush "+c+" ["+o+","+u+"], of ["+a+","+s+"], pos:"+this.media.currentTime),n.remove(o,u),!1}catch(d){h.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else h.logger.warn("abort flushing too many retries");h.logger.log("buffer flushed")}return!0}}]),t}(d["default"]);i["default"]=p},{30:30,31:31,32:32,51:51}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].FPS_DROP_LEVEL_CAPPING,l["default"].MEDIA_ATTACHING,l["default"].MANIFEST_PARSED))}return s(t,e),o(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,
this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",
value:function(e){var t=0,i=void 0,n=void 0,r=this.mediaWidth,a=this.mediaHeight,s=0,o=0;for(i=0;e>=i&&(n=this.levels[i],!this.isLevelRestricted(i))&&(t=i,s=n.width,o=n.height,!(s>=r||o>=a));i++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||-1===this.restrictedLevels.indexOf(e))}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(d["default"]);i["default"]=h},{31:31,32:32}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=function(e){function t(e){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].MEDIA_ATTACHING))}return s(t,e),o(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){
var t=this.hls.config;if(t.capLevelOnFPSDrop){var i=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,s=t-this.lastDecodedFrames,o=1e3*a/r,u=this.hls;if(u.trigger(l["default"].FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:i}),o>0&&a>u.config.fpsDroppedMonitoringThreshold*s){var c=u.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(l["default"].FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=t;
}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(d["default"]);i["default"]=f},{31:31,32:32,51:51}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{
value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=e(30),p=e(34),v=n(p),g=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].MANIFEST_LOADED,l["default"].LEVEL_LOADED,l["default"].FRAG_LOADED,l["default"].ERROR));return i.ontick=i.tick.bind(i),i._manualLevel=-1,i}return s(t,e),o(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,i=[],n=[],r={},a=!1,s=!1,o=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(e,t){
return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),u&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=r[e.bitrate];void 0===t?(r[e.bitrate]=i.length,e.url=[e.url],e.urlId=0,i.push(e)):i[t].url.push(e.url)}),a&&s?i.forEach(function(e){e.videoCodec&&n.push(e)}):n=i,n=n.filter(function(e){var t=e.audioCodec,i=e.videoCodec;return(!t||c("audio",t))&&(!i||c("video",i))}),n.length){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===t){this._firstLevel=d,h.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}o.trigger(l["default"].MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:a,altAudio:e.audioTracks.length>0})}else o.trigger(l["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
fatal:!0,url:o.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,i=this.hls;if(e>=0&&e<t.length){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e){h.logger.log("switching to level "+e),this._level=e;var n=t[e];n.level=e,i.trigger(l["default"].LEVEL_SWITCH,n),i.trigger(l["default"].LEVEL_SWITCHING,n)}var r=t[e],a=r.details;if(!a||a.live===!0){var s=r.urlId;i.trigger(l["default"].LEVEL_LOADING,{url:r.url[s],level:e,id:s})}}else i.trigger(l["default"].ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,i=this.hls,n=void 0,r=void 0,a=!1,s=!1;switch(t){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:n=e.frag.level;break;
case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=e.context.level,a=!0;break;case f.ErrorDetails.REMUX_ALLOC_ERROR:n=e.level;break;case f.ErrorDetails.MANIFEST_EMPTY_ERROR:n=e.context.level,a=!0,s=!0}if(void 0!==n){r=this._levels[n],r.loadError?r.loadError++:r.loadError=1;var o=r.url.length;if(o>1&&r.loadError<o)r.urlId=(r.urlId+1)%o,r.details=void 0,h.logger.warn("level controller,"+t+" for level "+n+": switching to redundant stream id "+r.urlId);else{s&&(h.logger.warn("Bad level encountered, removing & forcing to auto mode"),this._levels=this.levels.filter(function(e,t){return t!==n}),i.currentLevel=-1,i.trigger(l["default"].LEVEL_REMOVED,{level:n}));var u=-1===this._manualLevel&&n;if(u)h.logger.warn("level controller,"+t+": switch-down for next fragment"),i.nextAutoLevel=Math.max(0,n-1);else if(r&&r.details&&r.details.live)h.logger.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===f.ErrorDetails.LEVEL_LOAD_ERROR||t===f.ErrorDetails.LEVEL_LOAD_TIMEOUT){
var c=i.media,d=c&&v["default"].isBuffered(c,c.currentTime)&&v["default"].isBuffered(c,c.currentTime+.5);if(d){var p=i.config.levelLoadingRetryDelay;h.logger.warn("level controller,"+t+", but media buffered, retry in "+p+"ms"),this.timer=setTimeout(this.ontick,p)}else h.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var i=this._levels[t.level];i&&(i.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var i=this._levels[t];i.loadError=0;var n=e.details;if(n.live){var r=1e3*(n.averagetargetduration?n.averagetargetduration:n.targetduration),a=this._levels[e.level],s=a.details;s&&n.endSN===s.endSN&&(r/=2,h.logger.log("same live playlist, reload twice faster")),r-=performance.now()-e.stats.trequest,r=Math.max(1e3,Math.round(r)),h.logger.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r);
}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var i=t.urlId;this.hls.trigger(l["default"].LEVEL_LOADING,{url:t.url[i],level:e,id:i})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel;
},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(d["default"]);i["default"]=g},{30:30,31:31,32:32,34:34,51:51}],12:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(45),l=n(u),c=e(34),d=n(c),h=e(24),f=n(h),p=e(32),v=n(p),g=e(31),m=n(g),y=e(35),b=n(y),T=e(52),E=n(T),k=e(30),w=e(51),_=e(48),A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v["default"].MEDIA_ATTACHED,v["default"].MEDIA_DETACHING,v["default"].MANIFEST_LOADING,v["default"].MANIFEST_PARSED,v["default"].LEVEL_LOADED,v["default"].KEY_LOADED,v["default"].FRAG_LOADED,v["default"].FRAG_LOAD_EMERGENCY_ABORTED,v["default"].FRAG_PARSING_INIT_SEGMENT,v["default"].FRAG_PARSING_DATA,v["default"].FRAG_PARSED,v["default"].ERROR,v["default"].AUDIO_TRACK_SWITCHING,v["default"].AUDIO_TRACK_SWITCHED,v["default"].BUFFER_CREATED,v["default"].BUFFER_APPENDED,v["default"].BUFFER_FLUSHED,v["default"].LEVEL_REMOVED));
return i.config=e.config,i.audioCodecSwap=!1,i.ticks=0,i._state=A.STOPPED,i.ontick=i.tick.bind(i),i}return s(t,e),o(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),m["default"].prototype.destroy.call(this),this.state=A.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(w.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=A.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=A.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),
this.demuxer=null),this.state=A.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case A.ERROR:break;case A.BUFFER_FLUSHING:this.fragLoadError=0;break;case A.IDLE:if(!this._doTickIdle())return;break;case A.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=A.IDLE);break;case A.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),i=this.retryDate;(!i||t>=i||this.media&&this.media.seeking)&&(w.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=A.IDLE);break;case A.ERROR:case A.STOPPED:case A.FRAG_LOADING:case A.PARSING:case A.PARSED:case A.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,i=this.media;if(void 0!==this.levelLastLoaded&&!i&&(this.startFragRequested||!t.startFragPrefetch))return!0;var n=0;this.loadedmetadata?n=i.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition);
var r=e.nextLoadLevel,a=this.levels[r],s=a.bitrate,o=void 0;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var u=d["default"].bufferInfo(this.mediaBuffer?this.mediaBuffer:i,n,t.maxBufferHole),l=u.len;if(l>=o)return!0;w.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var c=a.details;if("undefined"==typeof c||c.live&&this.levelLastLoaded!==r)return this.state=A.WAITING_LEVEL,!0;var h=this.fragPrevious;if(!c.live&&h&&h.sn===c.endSN){var f=Math.min(i.duration,h.start+h.duration);if(f-Math.max(u.end,h.start)<=Math.max(.2,h.duration/2)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(v["default"].BUFFER_EOS,p),this.state=A.ENDED,!0}}return this._fetchPayloadOrEos(n,u,c)}},{key:"_fetchPayloadOrEos",value:function(e,t,i){var n=this.fragPrevious,r=this.level,a=i.fragments,s=a.length;if(0===s)return!1;var o=a[0].start,u=a[s-1].start+a[s-1].duration,l=t.end,c=void 0;
if(i.initSegment&&!i.initSegment.data)c=i.initSegment;else if(i.live){var d=this.config.initialLiveManifestSize;if(d>s)return w.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+d),!1;if(c=this._ensureFragmentAtLivePoint(i,l,o,u,n,a,s),null===c)return!1}else o>l&&(c=a[0]);return c||(c=this._findFragment(o,n,s,a,l,u,i)),!c||this._loadFragmentOrKey(c,r,i,e,l)}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,i,n,r,a,s){var o=this.hls.config,u=this.media,l=void 0,c=void 0!==o.liveMaxLatencyDuration?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(i-o.maxFragLookUpTolerance,n-c)){var d=this.liveSyncPosition=this.computeLivePosition(i,e);w.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,u&&u.readyState&&u.duration>d&&(u.currentTime=d)}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){
if(r){var h=r.sn+1,f=r.cc+1;h>=e.startSN&&h<=e.endSN?(l=a[h-e.startSN],w.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn)):f>=e.startCC&&f<=e.endCC&&(l=(0,_.findFirstFragWithCC)(a,f),w.logger.log("Live playlist switch, cannot find frag with target SN. Loading frag with next CC: "+l.cc))}l||(l=a[Math.min(s-1,Math.round(s/2))],w.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(e,t,i,n,r,a,s){var o=this.hls.config,u=void 0,c=void 0,d=o.maxFragLookUpTolerance,h=t?n[t.sn-n[0].sn+1]:void 0,f=function(e){var t=Math.min(d,e.duration);return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(a>r?(r>a-d&&(d=0),c=h&&!f(h)?h:l["default"].search(n,f)):c=n[i-1],c){u=c;var p=u.sn-s.startSN,v=t&&u.level===t.level,g=n[p-1],m=n[p+1];if(v&&u.sn===t.sn)if(u.sn<s.endSN){var y=t.deltaPTS;y&&y>o.maxBufferHole&&t.dropped&&p&&!u.backtracked?(u=g,w.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),
t.loadCounter--):(u=m,w.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.dropped&&!v&&(m&&m.backtracked?(w.logger.warn("Already backtracked from fragment "+(p+1)+", will not backtrack to fragment "+p+". Loading fragment "+(p+1)),u=m):(w.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,g?(g.loadCounter&&g.loadCounter--,u=g):u=null))}return u}},{key:"_loadFragmentOrKey",value:function(e,t,i,n,r){var a=this.hls,s=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(w.logger.log("Loading "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+r),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var o=s.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return a.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,
frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(v["default"].FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new f["default"](a,"main")),this.state=A.FRAG_LOADING,!0}w.logger.log("Loading key for "+e.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t),this.state=A.KEY_LOADING,a.trigger(v["default"].KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return l["default"].search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,i=this.media;if(i&&i.readyState&&i.seeking===!1&&(t=i.currentTime,t>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),d["default"].isBuffered(i,t)?e=this.getBufferedFrag(t):d["default"].isBuffered(i,t+.1)&&(e=this.getBufferedFrag(t+.1)),
e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(v["default"].FRAG_CHANGED,{frag:n});var r=n.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(v["default"].LEVEL_SWITCHED,{level:r}),this.fragPlaying=n}}}},{key:"immediateLevelSwitch",value:function(){if(w.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,d["default"].isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,i=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,
i=this.getBufferedFrag(e.currentTime),i&&i.startPTS>1&&this.flushMainBuffer(0,i.startPTS-1),e.paused)t=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],s=this.fragLastKbps;t=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if(n=this.getBufferedFrag(e.currentTime+t),n&&(n=this.followingBufferedFrag(n))){var o=this.fragCurrent;o&&o.loader&&o.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.startPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=A.BUFFER_FLUSHING;var i={startOffset:e,endOffset:t};this.altAudio&&(i.type="video"),this.hls.trigger(v["default"].BUFFER_FLUSHING,i)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);
var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,i=this.config;if(w.logger.log("media seeking to "+t.toFixed(3)),this.state===A.FRAG_LOADING){var n=this.mediaBuffer?this.mediaBuffer:e,r=d["default"].bufferInfo(n,t,this.config.maxBufferHole),a=this.fragCurrent;if(0===r.len&&a){var s=i.maxFragLookUpTolerance,o=a.start-s,u=a.start+a.duration+s;
o>t||t>u?(a.loader&&(w.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE):w.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===A.ENDED&&(this.state=A.IDLE);e&&(this.lastCurrentTime=t),this.state!==A.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){w.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){w.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){w.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v["default"].BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",
value:function(e){var t,i=!1,n=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(-1!==t.indexOf("mp4a.40.2")&&(i=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=i&&n,this.audioCodecSwitch&&w.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,i=e.level,n=this.levels[this.levelLastLoaded],r=this.levels[i],a=t.totalduration,s=0;if(w.logger.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"], cc ["+t.startCC+", "+t.endCC+"] duration:"+a),t.live){var o=r.details;o&&t.fragments.length>0?(b["default"].mergeDetails(o,t),s=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),t.PTSKnown?w.logger.log("live playlist sliding:"+s.toFixed(3)):(w.logger.log("live playlist - outdated PTS, unknown sliding"),(0,_.alignDiscontinuities)(this.fragPrevious,n,t))):(w.logger.log("live playlist - first load, unknown sliding"),
t.PTSKnown=!1,(0,_.alignDiscontinuities)(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(this.levelLastLoaded=i,r.details=t,this.hls.trigger(v["default"].LEVEL_UPDATED,{details:t,level:i}),this.startFragRequested===!1){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;isNaN(u)?t.live?(this.startPosition=this.computeLivePosition(s,t),w.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(0>u&&(w.logger.log("negative start time offset "+u+", count from end of last fragment"),u=s+a+u),w.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===A.WAITING_LEVEL&&(this.state=A.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===A.KEY_LOADING&&(this.state=A.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,i=e.frag;if(this.state===A.FRAG_LOADING&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){
var n=e.stats,r=this.levels[t.level],a=r.details;if(w.logger.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,i.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=A.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(v["default"].FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=A.IDLE,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(v["default"].FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=A.PARSING;var s=a.totalduration,o=t.level,u=t.sn,l=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,w.logger.log("Parsing "+u+" of ["+a.startSN+" ,"+a.endSN+"],level "+o+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new f["default"](this.hls,"main"));
var d=this.media,h=d&&d.seeking,p=!h&&(a.PTSKnown||!a.live),g=a.initSegment?a.initSegment.data:[];c.push(e.payload,g,l,r.videoCodec,t,s,p,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===A.PARSING){var n,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==r.container&&(s="mp4a.40.2",w.logger.log("Android: force audio codec to "+s)),r.levelCodec=s,r.id=e.id}r=a.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(v["default"].BUFFER_CODECS,a);for(n in a){r=a[n],w.logger.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");
var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v["default"].BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,i=this.fragCurrent,n=e.frag;if(i&&"main"===e.id&&n.sn===i.sn&&n.level===i.level&&("audio"!==e.type||!this.altAudio)&&this.state===A.PARSING){var r=this.levels[this.level],a=i;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+i.duration,e.endDTS=e.startDTS+i.duration),w.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped){if(!a.backtracked)return a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=A.IDLE,void this.tick();w.logger.warn("Already backtracked on this fragment, appending with the gap")}else a.backtracked=!1;var s=b["default"].updateFragPTSDTS(r.details,a.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;
o.trigger(v["default"].LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(i){i&&i.length&&t.state===A.PARSING&&(t.appended=!0,t.pendingBuffering=!0,o.trigger(v["default"].BUFFER_APPENDING,{type:e.type,data:i,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,i=e.frag;t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===A.PARSING&&(this.stats.tparsed=performance.now(),this.state=A.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,i=e.id;if(!t){if(this.mediaBuffer!==this.media){w.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(w.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),
this.demuxer=null),this.state=A.IDLE}var r=this.hls;r.trigger(v["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(v["default"].AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,i=!!this.hls.audioTracks[t].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(w.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,i=void 0,n=void 0,r=!1;for(var a in t){var s=t[a];"main"===s.id?(n=a,i=s,"video"===a&&(this.videoBuffer=t[a].buffer)):r=!0}r&&i?(w.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==A.PARSING&&t!==A.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed());
}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==A.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("main buffered : "+E["default"].toString(t.buffered));var i=this._bufferedFrags.filter(function(e){return d["default"].isBuffered(t,(e.startPTS+e.endPTS)/2)});i.push(e),this._bufferedFrags=i.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(v["default"].FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=A.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i=this.media,n=i&&d["default"].isBuffered(i,i.currentTime)&&d["default"].isBuffered(i,i.currentTime+.5);switch(e.details){case k.ErrorDetails.FRAG_LOAD_ERROR:case k.ErrorDetails.FRAG_LOAD_TIMEOUT:case k.ErrorDetails.KEY_LOAD_ERROR:
case k.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var a=this.config;if(r<=a.fragLoadingMaxRetry||n||t.autoLevel&&t.level){this.fragLoadError=r,t.loadCounter=0;var s=Math.min(Math.pow(2,r-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);w.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=A.FRAG_LOADING_WAITING_RETRY}else w.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=A.ERROR}break;case k.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=A.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=A.ERROR));break;case k.ErrorDetails.LEVEL_LOAD_ERROR:case k.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==A.ERROR&&(e.fatal?(this.state=A.ERROR,w.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===A.WAITING_LEVEL&&(this.state=A.IDLE));
break;case k.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==A.PARSING&&this.state!==A.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=A.IDLE):(w.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,w.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,n=i.buffered;if(!this.loadedmetadata&&n.length){this.loadedmetadata=!0;var r=e.seeking?t:this.startPosition,a=d["default"].isBuffered(i,r);t===r&&a||(w.logger.log("target start position:"+r),a||(r=n.start(0),w.logger.log("target start position not buffered, seek to buffered.start(0) "+r)),
w.logger.log("adjust currentTime from "+t+" to "+r),e.currentTime=r)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var s=d["default"].bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),u=.5,l=t!==this.lastCurrentTime,c=this.config;if(l)this.stallReported&&(w.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var h=performance.now(),f=this.hls;if(this.stalled){var p=h-this.stalled,g=s.len,m=this.nudgeRetry||0;if(u>=g&&p>1e3*c.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in low buffer @"+t),f.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var y=s.nextStart,b=y-t;if(y&&b<c.maxSeekHole&&b>0){this.nudgeRetry=++m;var T=m*c.nudgeOffset;w.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+T),
e.currentTime=y+T,this.stalled=void 0,f.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+T-t})}}else if(g>u&&p>1e3*c.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in high buffer @"+t),f.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++m,m<c.nudgeMaxRetry){var E=e.currentTime,_=E+m*c.nudgeOffset;w.logger.log("adjust currentTime from "+E+" to "+_),e.currentTime=_,f.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else w.logger.error("still stuck in high buffer @"+t+" after "+c.nudgeMaxRetry+", raise fatal error"),f.trigger(v["default"].ERROR,{type:k.ErrorTypes.MEDIA_ERROR,details:k.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",
value:function(){this.state=A.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return d["default"].isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=A.IDLE,this.fragPrevious=null}},{key:"onLevelRemoved",value:function(e){this.levels=this.levels.filter(function(t,i){return i!==e.level})}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("main stream:"+t+"->"+e),this.hls.trigger(v["default"].STREAM_STATE_TRANSITION,{
previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(m["default"]);i["default"]=S},{24:24,30:30,31:31,32:32,34:34,35:35,45:45,48:48,51:51,52:52}],13:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].ERROR,l["default"].SUBTITLE_TRACKS_UPDATED,l["default"].SUBTITLE_TRACK_SWITCH,l["default"].SUBTITLE_TRACK_LOADED,l["default"].SUBTITLE_FRAG_PROCESSED));return i.config=e.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.currentTrackId=-1,i}return s(t,e),o(t,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"clearVttFragQueues",
value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(l["default"].FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;h.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,
this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],i=this.vttFragQueues[e.id],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,r=function(e){return t.indexOf(e.sn)>-1},a=function(e){return i.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){r(t)||t.sn===n||a(t)||(t.trackId=e.id,i.push(t))}),this.nextFrag()}}]),t}(d["default"]);i["default"]=f},{31:31,32:32,51:51}],14:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{
value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(51),f=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].MEDIA_ATTACHED,l["default"].MEDIA_DETACHING,l["default"].MANIFEST_LOADING,l["default"].MANIFEST_LOADED,l["default"].SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i}return s(t,e),o(t,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){var t=this;this.media=e.media,this.media&&this.media.textTracks.addEventListener("change",function(){if(t.media){
for(var e=-1,i=t.media.textTracks,n=0;n<i.length;n++)"showing"===i[n].mode&&(e=n);t.subtitleTrack=e}})}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,i=e.subtitles||[],n=!1;this.tracks=i,this.trackId=-1,this.hls.trigger(l["default"].SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(e){e["default"]&&(t.subtitleTrack=e.id,n=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var i=t.details;void 0!==i&&i.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(l["default"].SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(h.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),
!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(l["default"].SUBTITLE_TRACK_SWITCH,{id:e});var i=t.details;void 0!==i&&i.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(l["default"].SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(d["default"]);i["default"]=f},{31:31,32:32,51:51}],15:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function u(e,t){return e&&(!e._id||/^subtitle/.test(e._id))&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function l(e,t,i,n){return Math.min(t,n)-Math.max(e,i)}Object.defineProperty(i,"__esModule",{value:!0});var c=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=e(32),h=n(d),f=e(31),p=n(f),v=e(46),g=n(v),m=e(55),y=n(m),b=e(51),T=function(e){function t(e){r(this,t);
var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h["default"].MEDIA_ATTACHING,h["default"].MEDIA_DETACHING,h["default"].FRAG_PARSING_USERDATA,h["default"].MANIFEST_LOADING,h["default"].MANIFEST_LOADED,h["default"].FRAG_LOADED,h["default"].LEVEL_SWITCHING,h["default"].INIT_PTS_FOUND));if(i.hls=e,i.config=e.config,i.enabled=!0,i.Cues=e.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.manifestCaptionsLabels={},i.config.enableCEA708Captions){var n=i,s=i.manifestCaptionsLabels,u={newCue:function(e,t,i){if(!n.textTrack1)if(n.config.renderNatively){var r=n.getExistingTrack("1");if(r){n.textTrack1=r,o(n.textTrack1);var a=new window.Event("addtrack");a.track=n.textTrack1,n.media.dispatchEvent(a)}else n.textTrack1=n.createTextTrack("captions",s.captionsTextTrack1Label,s.captionsTextTrack1LanguageCode),n.textTrack1.textTrack1=!0}else n.textTrack1={_id:"textTrack1",label:s.captionsTextTrack1Label,kind:"captions","default":!1},n.hls.trigger(h["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{
tracks:[n.textTrack1]});n.addCues("textTrack1",e,t,i)}},l={newCue:function(e,t,i){if(!n.textTrack2)if(n.config.renderNatively){var r=n.getExistingTrack("2");if(r){n.textTrack2=r,o(n.textTrack2);var a=new window.Event("addtrack");a.track=n.textTrack2,n.media.dispatchEvent(a)}else n.textTrack2=n.createTextTrack("captions",s.captionsTextTrack2Label,s.captionsTextTrack2LanguageCode),n.textTrack2.textTrack2=!0}else n.textTrack2={_id:"textTrack2",label:s.captionsTextTrack2Label,kind:"captions","default":!1},n.hls.trigger(h["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n.textTrack2]});n.addCues("textTrack2",e,t,i)}};i.cea608Parser=new g["default"](0,u,l)}return i}return s(t,e),c(t,[{key:"addCues",value:function(e,t,i,n){for(var r=this,a=this.cueRanges,s=!1,o=a.length;o--;){var u=a[o],c=l(u[0],u[1],t,i);if(c>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],i),s=!0,c/(i-t)>.5))return}s||a.push([t,i]);var d=this.Cues.createCues(t,i,n);this.config.renderNatively?d.forEach(function(t){r[e].addCue(t);
}):this.hls.trigger(h["default"].CUES_PARSED,{type:"captions",cues:d,track:e})}},{key:"onInitPtsFound",value:function(e){var t=this;"undefined"==typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var n=t.textTracks[i],r="textTrack"+e;if(n[r]===!0)return n}return null}},{key:"createTextTrack",value:function(e,t,i){var n=this.media;return n?n.addTextTrack(e,t,i):void 0}},{key:"destroy",value:function(){p["default"].prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){o(this.textTrack1),o(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)o(t[i]);
}}},{key:"onManifestLoaded",value:function(e){var t=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[];var i=this.manifestCaptionsLabels;if(i.captionsTextTrack1Label="Unknown CC",i.captionsTextTrack1LanguageCode="en",i.captionsTextTrack2Label="Unknown CC",i.captionsTextTrack2LanguageCode="es",this.config.enableWebVTT){var n=this.tracks&&e.subtitles&&this.tracks.length===e.subtitles.length;if(this.tracks=e.subtitles||[],this.config.renderNatively){var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var n=void 0;if(i<r.length){var a=r[i];u(a,e)&&(n=a)}n||(n=t.createTextTrack("subtitles",e.name,e.lang)),n.mode=e["default"]?"showing":"hidden",t.textTracks.push(n)})}else if(!n){var a=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),"default":e["default"]}});this.hls.trigger(h["default"].NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}if(this.config.enableCEA708Captions&&e.captions){var s=void 0,o=void 0;
e.captions.forEach(function(e){o=/(?:CC|SERVICE)([1-2])/.exec(e.instreamId),o&&(s=o[1],i["captionsTextTrack"+s+"Label"]=e.name,e.lang&&(i["captionsTextTrack"+s+"LanguageCode"]=e.lang))})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,i=e.payload,n=this;if("main"===t.type){var r=t.sn;r!==this.lastSn+1&&this.cea608Parser.reset(),this.lastSn=r}else if("subtitle"===t.type)if(i.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:this.prevCC,"new":!0},this.prevCC=t.cc);var s=this.hls,o=n.config.renderNatively?this.textTracks:this.tracks;y["default"].parse(i,this.initPTS,a,t.cc,function(e){if(n.config.renderNatively)e.forEach(function(e){o[t.trackId].addCue(e)});else{var i=o[t.trackId],r=i["default"]?"default":"subtitles"+t.trackId;s.trigger(h["default"].CUES_PARSED,{type:"subtitles",cues:e,track:r
})}s.trigger(h["default"].SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){b.logger.log("Failed to parse VTT cue: "+e),s.trigger(h["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(h["default"].SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var i=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,i)}}},{key:"extractCea608Data",value:function(e){for(var t,i,n,r,a,s=31&e[0],o=2,u=[],l=0;s>l;l++)t=e[o++],i=127&e[o++],n=127&e[o++],r=0!==(4&t),a=3&t,0===i&&0===n||r&&0===a&&(u.push(i),u.push(n));return u}}]),t}(p["default"]);i["default"]=T},{31:31,32:32,46:46,51:51,55:55}],16:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){
var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i){n(this,e),this.subtle=t,this.aesIV=i}return r(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();i["default"]=a},{}],17:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],
this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return r(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;4>n;n++)i[n]=t.getUint32(4*n);return i}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,i=this.subMix,n=i[0],r=i[1],a=i[2],s=i[3],o=this.invSubMix,u=o[0],l=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,v=0;for(v=0;256>v;v++)128>v?h[v]=v<<1:h[v]=v<<1^283;for(v=0;256>v;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[f]=g,t[g]=f;var m=h[f],y=h[m],b=h[y],T=257*h[g]^16843008*g;n[f]=T<<24|T>>>8,r[f]=T<<16|T>>>16,a[f]=T<<8|T>>>24,s[f]=T,T=16843009*b^65537*y^257*m^16843008*f,u[g]=T<<24|T>>>8,l[g]=T<<16|T>>>16,c[g]=T<<8|T>>>24,d[g]=T,f?(f=m^h[h[h[b^m]]],p^=h[h[p]]):f=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);
var a=this.ksRows=4*(r+6+1),s=void 0,o=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],v=h[2],g=h[3],m=void 0,y=void 0;for(s=0;a>s;s++)r>s?m=u[s]=t[s]:(y=m,s%r===0?(y=y<<8|y>>>24,y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[s/r|0]<<24):r>6&&s%r===4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[s]=m=(u[s-r]^y)>>>0);for(o=0;a>o;o++)s=a-o,y=3&o?u[s]:u[s-4],4>o||4>=s?l[o]=y:l[o]=f[c[y>>>24]]^p[c[y>>>16&255]]^v[c[y>>>8&255]]^g[c[255&y]],l[o]=l[o]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,i){for(var n,r,a=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,u=this.invSubMix,l=u[0],c=u[1],d=u[2],h=u[3],f=this.uint8ArrayToUint32Array_(i),p=f[0],v=f[1],g=f[2],m=f[3],y=new Int32Array(e),b=new Int32Array(y.length),T=void 0,E=void 0,k=void 0,w=void 0,_=void 0,A=void 0,S=void 0,L=void 0,C=void 0,R=void 0,x=void 0,I=void 0,P=this.networkToHostOrderSwap;t<y.length;){
for(C=P(y[t]),R=P(y[t+1]),x=P(y[t+2]),I=P(y[t+3]),_=C^s[0],A=I^s[1],S=x^s[2],L=R^s[3],n=4,r=1;a>r;r++)T=l[_>>>24]^c[A>>16&255]^d[S>>8&255]^h[255&L]^s[n],E=l[A>>>24]^c[S>>16&255]^d[L>>8&255]^h[255&_]^s[n+1],k=l[S>>>24]^c[L>>16&255]^d[_>>8&255]^h[255&A]^s[n+2],w=l[L>>>24]^c[_>>16&255]^d[A>>8&255]^h[255&S]^s[n+3],_=T,A=E,S=k,L=w,n+=4;T=o[_>>>24]<<24^o[A>>16&255]<<16^o[S>>8&255]<<8^o[255&L]^s[n],E=o[A>>>24]<<24^o[S>>16&255]<<16^o[L>>8&255]<<8^o[255&_]^s[n+1],k=o[S>>>24]<<24^o[L>>16&255]<<16^o[_>>8&255]<<8^o[255&A]^s[n+2],w=o[L>>>24]<<24^o[_>>16&255]<<16^o[A>>8&255]<<8^o[255&S]^s[n+3],n+=3,b[t]=P(T^p),b[t+1]=P(w^v),b[t+2]=P(k^g),b[t+3]=P(E^m),p=C,v=R,g=x,m=I,t+=4}return b.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();i["default"]=a},{}],18:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{
"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(16),o=n(s),u=e(19),l=n(u),c=e(17),d=n(c),h=e(30),f=e(51),p=function(){function e(t,i){r(this,e),this.observer=t,this.config=i,this.logEnabled=!0;try{var n=crypto?crypto:self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(a){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,i,n){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(f.logger.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new d["default"]),
a.expandKey(t),n(a.decrypt(e,0,i))}else{this.logEnabled&&(f.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var s=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new l["default"](s,t)),this.fastAesKey.expandKey().then(function(a){var u=new o["default"](s,i);u.decrypt(e,a)["catch"](function(a){r.onWebCryptoError(a,e,t,i,n)}).then(function(e){n(e)})})["catch"](function(a){r.onWebCryptoError(a,e,t,i,n)})}}},{key:"onWebCryptoError",value:function(e,t,i,n,r){this.config.enableSoftwareAES?(f.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,n,r)):(f.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();i["default"]=p},{16:16,17:17,19:19,30:30,51:51}],19:[function(e,t,i){"use strict";function n(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i){n(this,e),this.subtle=t,this.key=i}return r(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();i["default"]=a},{}],20:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);
}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(21),o=n(s),u=e(51),l=e(26),c=n(l),d=function(){function e(t,i,n){r(this,e),this.observer=t,this.config=n,this.remuxer=i}return a(e,[{key:"resetInitSegment",value:function(e,t,i,n){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,i,n){var r,a,s,l,d,h,f,p,v,g,m,y=new c["default"](e);for(a=y.timeStamp?90*y.timeStamp:9e4*t,r=this._aacTrack,f=y.length||0,g=e.length;g-1>f&&(255!==e[f]||240!==(246&e[f+1]));f++);for(r.samplerate||(s=o["default"].getAudioConfig(this.observer,e,f,r.manifestCodec),r.config=s.config,r.samplerate=s.samplerate,r.channelCount=s.channelCount,r.codec=s.codec,u.logger.log("parsed codec:"+r.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)),h=0,d=9216e4/r.samplerate;g>f+5&&(p=1&e[f+1]?7:9,l=(3&e[f+3])<<11|e[f+4]<<3|(224&e[f+5])>>>5,
l-=p,l>0&&g>=f+p+l);)for(v=a+h*d,m={unit:e.subarray(f+p,f+p+l),pts:v,dts:v},r.samples.push(m),r.len+=l,f+=l+p,h++;g-1>f&&(255!==e[f]||240!==(240&e[f+1]));f++);var b=y.payload?{samples:[{pts:a,dts:a,unit:y.payload}],inputTimeScale:9e4}:{samples:[]};this.remuxer.remux(r,{samples:[]},b,{samples:[]},t,i,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,i,n=new c["default"](e);for(t=n.length||0,i=e.length;i-1>t;t++)if(255===e[t]&&240===(246&e[t+1]))return!0;return!1}}]),e}();i["default"]=d},{21:21,26:26,51:51}],21:[function(e,t,i){"use strict";var n=e(51),r=e(30),a={getAudioConfig:function(e,t,i,a){var s,o,u,l,c,d=navigator.userAgent.toLowerCase(),h=a,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return s=((192&t[i+2])>>>6)+1,o=(60&t[i+2])>>>2,o>f.length-1?void e.trigger(Event.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(l=(1&t[i+2])<<2,l|=(192&t[i+3])>>>6,
n.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+o+"["+f[o]+"Hz],channelConfig:"+l),/firefox/i.test(d)?o>=6?(s=5,c=new Array(4),u=o-3):(s=2,c=new Array(2),u=o):-1!==d.indexOf("android")?(s=2,c=new Array(2),u=o):(s=5,c=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&o>=6?u=o-3:((a&&-1!==a.indexOf("mp4a.40.2")&&o>=6&&1===l||!a&&1===l)&&(s=2,c=new Array(2)),u=o)),c[0]=s<<3,c[0]|=(14&o)>>1,c[1]|=(1&o)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:f[o],channelCount:l,codec:"mp4a.40."+s,manifestCodec:h})}};t.exports=a},{30:30,51:51}],22:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(32),o=n(s),u=e(30),l=e(18),c=n(l),d=e(20),h=n(d),f=e(27),p=n(f),v=e(29),g=n(v),m=e(42),y=n(m),b=e(43),T=n(b),E=function(){function e(t,i,n,a){r(this,e),this.observer=t,this.typeSupported=i,this.config=n,this.vendor=a}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,i,n,r,a,s,u,l,d,h,f){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new c["default"](this.observer,this.config));var v,g=this;try{v=performance.now()}catch(m){v=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c;try{c=performance.now()}catch(p){c=Date.now()}g.observer.trigger(o["default"].FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:c}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),n,r,a,s,u,l,d,h,f)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),n,r,a,s,u,l,d,h,f);
}},{key:"pushDecrypted",value:function(e,t,i,n,r,a,s,l,c,d,f,v){var m=this.demuxer;if(!m||s&&!this.probe(e)){var b=this.observer,E=this.typeSupported,k=this.config,w=[{demux:g["default"],remux:y["default"]},{demux:h["default"],remux:y["default"]},{demux:p["default"],remux:T["default"]}];for(var _ in w){var A=w[_],S=A.demux.probe;if(S(e)){var L=this.remuxer=new A.remux(b,k,E,this.vendor);m=new A.demux(b,L,k,E),this.probe=S;break}}if(!m)return void b.trigger(o["default"].ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=m}var C=this.remuxer;(s||l)&&(m.resetInitSegment(i,n,r,d),C.resetInitSegment()),s&&(m.resetTimeStamp(),C.resetTimeStamp(v)),"function"==typeof m.setDecryptData&&m.setDecryptData(t),m.append(e,a,c,f)}}]),e}();i["default"]=E},{18:18,20:20,27:27,29:29,30:30,32:32,42:42,43:43}],23:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{
value:!0});var r=e(22),a=n(r),s=e(32),o=n(s),u=e(51),l=e(1),c=n(l),d=function(e){var t=new c["default"];t.trigger=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;i>r;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;i>r;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var i=function(t,i){e.postMessage({event:t,data:i})};e.addEventListener("message",function(n){var r=n.data;switch(r.cmd){case"init":var s=JSON.parse(r.config);e.demuxer=new a["default"](t,r.typeSupported,s,r.vendor);try{(0,u.enableLogs)(s.debug===!0)}catch(o){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":e.demuxer.push(r.data,r.decryptdata,r.initSegment,r.audioCodec,r.videoCodec,r.timeOffset,r.discontinuity,r.trackSwitch,r.contiguous,r.duration,r.accurateTimeOffset,r.defaultInitPTS)}}),t.on(o["default"].FRAG_DECRYPTED,i),t.on(o["default"].FRAG_PARSING_INIT_SEGMENT,i),t.on(o["default"].FRAG_PARSED,i),
t.on(o["default"].ERROR,i),t.on(o["default"].FRAG_PARSING_METADATA,i),t.on(o["default"].FRAG_PARSING_USERDATA,i),t.on(o["default"].INIT_PTS_FOUND,i),t.on(o["default"].FRAG_PARSING_DATA,function(t,i){var n=[],r={event:t,data:i};i.data1&&(r.data1=i.data1.buffer,n.push(i.data1.buffer),delete i.data1),i.data2&&(r.data2=i.data2.buffer,n.push(i.data2.buffer),delete i.data2),e.postMessage(r,n)})};i["default"]=d},{1:1,22:22,32:32,51:51}],24:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(32),o=n(s),u=e(22),l=n(u),c=e(23),d=n(c),h=e(51),f=e(30),p=e(1),v=n(p),g=function(){function t(i,n){
r(this,t),this.hls=i,this.id=n;var a=this.observer=new v["default"],s=i.config;a.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];a.emit.apply(a,[e,e].concat(i))},a.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];a.removeListener.apply(a,[e].concat(i))};var u=function(e,t){t=t||{},t.frag=this.frag,t.id=this.id,i.trigger(e,t)}.bind(this);a.on(o["default"].FRAG_DECRYPTED,u),a.on(o["default"].FRAG_PARSING_INIT_SEGMENT,u),a.on(o["default"].FRAG_PARSING_DATA,u),a.on(o["default"].FRAG_PARSED,u),a.on(o["default"].ERROR,u),a.on(o["default"].FRAG_PARSING_METADATA,u),a.on(o["default"].FRAG_PARSING_USERDATA,u),a.on(o["default"].INIT_PTS_FOUND,u);var c={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(s.enableWorker&&"undefined"!=typeof Worker){h.logger.log("demuxing in webworker");var g=void 0;
try{var m=e(3);g=this.w=m(d["default"]),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(e){i.trigger(o["default"].ERROR,{type:f.ErrorTypes.OTHER_ERROR,details:f.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:c,vendor:p,id:n,config:JSON.stringify(s)})}catch(y){h.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&URL.revokeObjectURL(g.objectURL),this.demuxer=new l["default"](a,c,s,p),this.w=void 0}}else this.demuxer=new l["default"](a,c,s,p)}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,i,n,r,a,s,o){var u=this.w,l=isNaN(r.startDTS)?r.start:r.startDTS,c=r.decryptdata,d=this.frag,f=!(d&&r.cc===d.cc),p=!(d&&r.level===d.level),v=d&&r.sn===d.sn+1,g=!p&&v;
if(f&&h.logger.log(this.id+":discontinuity detected"),p&&h.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:i,videoCodec:n,timeOffset:l,discontinuity:f,trackSwitch:p,contiguous:g,duration:a,accurateTimeOffset:s,defaultInitPTS:o},[e]);else{var m=this.demuxer;m&&m.push(e,c,t,i,n,l,f,p,g,a,s,o)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,i=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case o["default"].FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}}}]),t}();i["default"]=g},{1:1,22:22,23:23,3:3,30:30,32:32,51:51}],25:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){
var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e(51),s=function(){function e(t){n(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return r(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(i,i+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,
this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,i,n=8,r=8;for(t=0;e>t;t++)0!==r&&(i=this.readEG(),r=(n+i+256)%256),n=0===r?n:r}},{key:"readSPS",
value:function(){var e,t,i,n,r,a,s,o,u,l=0,c=0,d=0,h=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),v=this.readUEG.bind(this),g=this.readBoolean.bind(this),m=this.skipBits.bind(this),y=this.skipEG.bind(this),b=this.skipUEG.bind(this),T=this.skipScalingList.bind(this);if(f(),e=f(),t=p(5),m(3),i=f(),b(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var E=v();if(3===E&&m(1),b(),b(),m(1),g())for(o=3!==E?8:12,u=0;o>u;u++)g()&&T(6>u?16:64)}b();var k=v();if(0===k)v();else if(1===k)for(m(1),y(),y(),n=v(),u=0;n>u;u++)y();b(),m(1),r=v(),a=v(),s=p(1),0===s&&m(1),m(1),g()&&(l=v(),c=v(),d=v(),h=v());var w=[1,1];if(g()&&g()){var _=f();switch(_){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;
case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(r+1)-2*l-2*c),height:(2-s)*(a+1)*16-(s?2:4)*(d+h),pixelRatio:w}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();i["default"]=s},{51:51}],26:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e(51),s=function(){function e(t){n(this,e),this._hasTimeStamp=!1;for(var i,r,s,o,u,l,c,d,h=0;;)if(c=this.readUTF(t,h,3),h+=3,"ID3"===c)h+=3,i=127&t[h++],r=127&t[h++],s=127&t[h++],o=127&t[h++],u=(i<<21)+(r<<14)+(s<<7)+o,l=h+u,this._parseID3Frames(t,h,l),h=l;else{if("3DI"!==c)return h-=3,
d=h,void(d&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=d,this._payload=t.subarray(0,d)));h+=7,a.logger.log("3DI footer found, end: "+h)}}return r(e,[{key:"readUTF",value:function(e,t,i){var n="",r=t,a=t+i;do n+=String.fromCharCode(e[r++]);while(a>r);return n}},{key:"_parseID3Frames",value:function(e,t,i){for(var n,r,s,o,u;i>=t+8;)switch(n=this.readUTF(e,t,4),t+=4,r=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],o=e[t++]<<8+e[t++],s=t,n){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var l=1&e[t++];this._hasTimeStamp=!0,u=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,l&&(u+=47721858.84),u=Math.round(u),a.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();i["default"]=s;
},{51:51}],27:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(32),o=n(s),u=function(){function e(t,i){r(this,e),this.observer=t,this.remuxer=i}return a(e,[{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(t,i,n,r){var a=this.initData=e.parseInitSegment(t),s={};a.audio&&(s.audio={container:"audio/mp4",codec:i,initSegment:t}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:t}),this.observer.trigger(o["default"].FRAG_PARSING_INIT_SEGMENT,{tracks:s})}},{key:"append",value:function(t,i,n,r){var a=this.initData,s=e.startDTS(a,t);
this.remuxer.remux(a.audio,a.video,null,null,s,n,r,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){var i=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(i)>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"findBox",value:function(t,i){var n,r,a,s,o,u=[];if(!i.length)return null;for(n=0;n<t.byteLength;)r=t[n]<<24,r|=t[n+1]<<16,r|=t[n+2]<<8,r|=t[n+3],a=e.bin2str(t.subarray(n+4,n+8)),s=r>1?n+r:t.byteLength,a===i[0]&&(1===i.length?u.push(t.subarray(n+8,s)):(o=e.findBox(t.subarray(n+8,s),i.slice(1)),o.length&&(u=u.concat(o)))),n=s;return u}},{key:"parseInitSegment",value:function(t){var i=[],n=e.findBox(t,["moov","trak"]);return n.forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var r=n[0],a=0===r?12:20,s=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3];s=0>s?4294967296+s:s;var o=e.findBox(t,["mdia","mdhd"])[0];if(o){r=o[0],a=0===r?12:20;var u=o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3],l=e.findBox(t,["mdia","hdlr"])[0];
if(l){var c=e.bin2str(l.subarray(8,12)),d={soun:"audio",vide:"video"}[c];d&&(i[s]={timescale:u,type:d},i[d]={timescale:u,id:s})}}}}),i}},{key:"startDTS",value:function(t,i){var n,r,a;return n=e.findBox(i,["moof","traf"]),r=[].concat.apply([],n.map(function(i){return e.findBox(i,["tfhd"]).map(function(n){var r,a,s;return r=n[4]<<24|n[5]<<16|n[6]<<8|n[7],a=t[r].timescale||9e4,s=e.findBox(i,["tfdt"]).map(function(e){var t,i;return t=e[0],i=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(i*=Math.pow(2,32),i+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),i})[0],s=s||1/0,s/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0}}]),e}();i["default"]=u},{32:32}],28:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(18),o=n(s),u=function(){function e(t,i,n,a){r(this,e),this.decryptdata=n,this.discardEPB=a,this.decrypter=new o["default"](t,i)}return a(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,i,n){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,function(a){a=new Uint8Array(a),r.set(a,16),n||o.decryptAacSamples(e,t+1,i)})}},{key:"decryptAacSamples",value:function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<=e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);
return i}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var i=0,n=32;n<=e.length-16;n+=160,i+=16)e.set(t.subarray(i,i+16),n);return e}},{key:"decryptAvcSample",value:function(e,t,i,n,r,a){var s=this.discardEPB(r.data),o=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(o.buffer,function(o){r.data=u.getAvcDecryptedUnit(s,o),a||u.decryptAvcSamples(e,t,i+1,n)})}},{key:"decryptAvcSamples",value:function(e,t,i,n){for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,n,a,s),!s)return}}}}}]),e}();i["default"]=u},{18:18}],29:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(21),o=n(s),u=e(32),l=n(u),c=e(25),d=n(c),h=e(28),f=n(h),p=e(51),v=e(30),g=function(){function e(t,i,n,a){r(this,e),this.observer=t,this.config=n,this.typeSupported=a,this.remuxer=i,this.sampleAes=null}return a(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new f["default"](this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,
sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=i,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,i,n){var r,a,s,o,u,c,d=e.length,h=!1;this.contiguous=i;var f=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,y=this._id3Track,b=g.id,T=m.id,E=y.id,k=this._pmtId,w=g.pesData,_=m.pesData,A=y.pesData,S=this._parsePAT,L=this._parsePMT,C=this._parsePES,R=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this);for(d-=d%188,r=0;d>r;r+=188)if(71===e[r]){if(a=!!(64&e[r+1]),s=((31&e[r+1])<<8)+e[r+2],o=(48&e[r+3])>>4,o>1){if(u=r+5+e[r+4],u===r+188)continue}else u=r+4;switch(s){case b:a&&(w&&(c=C(w))&&R(c,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(u,r+188)),w.size+=r+188-u);break;case T:a&&(_&&(c=C(_))&&(m.isAAC?x(c):I(c)),_={data:[],size:0}),_&&(_.data.push(e.subarray(u,r+188)),_.size+=r+188-u);break;
case E:a&&(A&&(c=C(A))&&P(c),A={data:[],size:0}),A&&(A.data.push(e.subarray(u,r+188)),A.size+=r+188-u);break;case 0:a&&(u+=e[u]+1),k=this._pmtId=S(e,u);break;case k:a&&(u+=e[u]+1);var O=L(e,u,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);b=O.avc,b>0&&(g.id=b),T=O.audio,T>0&&(m.id=T,m.isAAC=O.isAAC),E=O.id3,E>0&&(y.id=E),h&&!f&&(p.logger.log("reparse from beginning"),h=!1,r=-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(l["default"].ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(c=C(w))?(R(c,!0),g.pesData=null):g.pesData=w,_&&(c=C(_))?(m.isAAC?x(c):I(c),m.pesData=null):(_&&_.size&&p.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=_),A&&(c=C(A))?(P(c),y.pesData=null):y.pesData=A,null==this.sampleAes?this.remuxer.remux(m,g,y,this._txtTrack,t,i,n):this.decryptAndRemux(m,g,y,this._txtTrack,t,i,n);
}},{key:"decryptAndRemux",value:function(e,t,i,n,r,a,s){if(e.samples&&e.isAAC){var o=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,i,n,r,a,s)})}else this.decryptAndRemuxAvc(e,t,i,n,r,a,s)}},{key:"decryptAndRemuxAvc",value:function(e,t,i,n,r,a,s){if(t.samples){var o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,i,n,r,a,s)})}else this.remuxer.remux(e,t,i,n,r,a,s)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,i,n){var r,a,s,o,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&e[t+1])<<8|e[t+2],a=t+3+r-4,s=(15&e[t+10])<<8|e[t+11],t+=12+s;a>t;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){p.logger.log("unkown stream type:"+e[t]);break}case 15:-1===u.audio&&(u.audio=o);break;case 21:-1===u.id3&&(u.id3=o);break;case 219:if(!n){p.logger.log("unkown stream type:"+e[t]);break;
}case 27:-1===u.avc&&(u.avc=o);break;case 3:case 4:i?-1===u.audio&&(u.audio=o,u.isAAC=!1):p.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:p.logger.warn("HEVC stream type found, not supported for now");break;default:p.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return u}},{key:"_parsePES",value:function(e){var t,i,n,r,a,s,o,u,l,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(t=d[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(r=(t[4]<<8)+t[5],r&&r>e.size-6)return null;i=t[7],192&i&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&i?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,u>4294967295&&(u-=8589934592),o-u>54e5&&(p.logger.warn(Math.round((o-u)/9e4)+"s delta between PTS and DTS, align them"),
o=u)):u=o),a=t[8],l=a+9,e.size-=l,s=new Uint8Array(e.size);for(var f=0,v=d.length;v>f;f++){t=d[f];var g=t.byteLength;if(l){if(l>g){l-=g;continue}t=t.subarray(l),g-=l,l=0}s.set(t,c),c+=g}return r&&(r-=a+3),{data:s,pts:o,dts:u,len:r}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var i=t.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(n||this.contiguous)?(e.id=n,i.push(e)):t.dropped++}e.debug.length&&p.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var i,n,r,a=this,s=this._avcTrack,o=this._parseAVCNALu(e.data),u=!1,l=this.avcSample;e.data=null,o.forEach(function(t){switch(t.type){case 1:n=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;var o=t.data;if(o.length>4){var c=new d["default"](o).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=a._createAVCSample(!0,e.pts,e.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:n=!0,u&&l&&(l.debug+="SEI "),
i=new d["default"](a.discardEPB(t.data)),i.readUByte();for(var h=0,f=0,p=!1,v=0;!p&&i.bytesAvailable>1;){h=0;do v=i.readUByte(),h+=v;while(255===v);f=0;do v=i.readUByte(),f+=v;while(255===v);if(4===h&&0!==i.bytesAvailable){p=!0;var g=i.readUByte();if(181===g){var m=i.readUShort();if(49===m){var y=i.readUInt();if(1195456820===y){var b=i.readUByte();if(3===b){var T=i.readUByte(),E=i.readUByte(),k=31&T,w=[T,E];for(r=0;k>r;r++)w.push(i.readUByte()),w.push(i.readUByte()),w.push(i.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}}}}else if(f<i.bytesAvailable)for(r=0;f>r;r++)i.readUByte()}break;case 7:if(n=!0,u&&l&&(l.debug+="SPS "),!s.sps){i=new d["default"](t.data);var _=i.readSPS();s.width=_.width,s.height=_.height,s.pixelRatio=_.pixelRatio,s.sps=[t.data],s.duration=a._duration;var A=t.data.subarray(1,4),S="avc1.";for(r=0;3>r;r++){var L=A[r].toString(16);L.length<2&&(L="0"+L),S+=L}s.codec=S}break;case 8:n=!0,u&&l&&(l.debug+="PPS "),s.pps||(s.pps=[t.data]);
break;case 9:n=!1,l&&a.pushAccesUnit(l,s),l=a.avcSample=a._createAVCSample(!1,e.pts,e.dts,u?"AUD ":"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&n){var C=l.units;C.push(t)}}),t&&l&&(this.pushAccesUnit(l,s),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,i,n){return{key:e,pts:t,dts:i,units:[],debug:n}}},{key:"_insertSampleInOrder",value:function(e,t){var i=e.length;if(i>0){if(t.pts>=e[i-1].pts)e.push(t);else for(var n=i-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var i=this._avcTrack,n=i.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,i,n,r,a,s=0,o=e.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],h=-1;for(-1===l&&(h=0,a=31&e[0],l=0,s=1);o>s;)if(t=e[s++],l)if(1!==l)if(t)if(1===t){if(h>=0)n={data:e.subarray(h,s-l-1),type:a},d.push(n);else{
var f=this._getLastNalUnit();if(f&&(c&&4-c>=s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),i=s-l-1,i>0)){var p=new Uint8Array(f.data.byteLength+i);p.set(f.data,0),p.set(e.subarray(0,i),f.data.byteLength),f.data=p}}o>s?(r=31&e[s],h=s,a=r,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(h>=0&&l>=0&&(n={data:e.subarray(h,o),type:a,state:l},d.push(n)),0===d.length){var v=this._getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+e.byteLength);g.set(v.data,0),g.set(e,v.data.byteLength),v.data=g}}return u.naluState=l,d}},{key:"discardEPB",value:function(e){for(var t,i,n=e.byteLength,r=[],a=1;n-2>a;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var s=0;for(a=0;t>a;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=e[s];return i}},{key:"_parseAACPES",value:function(e){var t,i,n,r,a,s,u,c,d,h=this._audioTrack,f=e.data,g=e.pts,m=0,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var T=new Uint8Array(y.byteLength+f.byteLength);
T.set(y,0),T.set(f,y.byteLength),f=T}for(a=m,c=f.length;c-1>a&&(255!==f[a]||240!==(240&f[a+1]));a++);if(a){var E,k;if(c-1>a?(E="AAC PES did not start with ADTS header,offset:"+a,k=!1):(E="no ADTS header found in AAC PES",k=!0),p.logger.warn("parsing error:"+E),this.observer.trigger(l["default"].ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:k,reason:E}),k)return}if(!h.samplerate){var w=this.audioCodec;t=o["default"].getAudioConfig(this.observer,f,a,w),h.config=t.config,h.samplerate=t.samplerate,h.channelCount=t.channelCount,h.codec=t.codec,h.manifestCodec=t.manifestCodec,h.duration=this._duration,p.logger.log("parsed codec:"+h.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(r=0,n=9216e4/h.samplerate,y&&b){var _=b+n;Math.abs(_-g)>1&&(p.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_-g)/90)),g=_)}for(;c>a+5&&(s=1&f[a+1]?7:9,i=(3&f[a+3])<<11|f[a+4]<<3|(224&f[a+5])>>>5,i-=s,i>0&&c>=a+s+i);)for(u=g+r*n,d={unit:f.subarray(a+s,a+s+i),
pts:u,dts:u},h.samples.push(d),h.len+=i,a+=i+s,r++;c-1>a&&(255!==f[a]||240!==(240&f[a+1]));a++);y=c>a?f.subarray(a,c):null,this.aacOverFlow=y,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(e){for(var t,i=e.data,n=e.pts,r=i.length,a=0,s=0;r>s&&(t=this._parseMpeg(i,s,r,a++,n))>0;)s+=t}},{key:"_onMpegFrame",value:function(e,t,i,n,r,a){var s=1152/i*1e3,o=a+r*s,u=this._audioTrack;u.config=[],u.channelCount=n,u.samplerate=i,u.duration=this._duration,u.samples.push({unit:e,pts:o,dts:o}),u.len+=e.length}},{key:"_onMpegNoise",value:function(e){p.logger.warn("mpeg audio has noise: "+e.length+" bytes")}},{key:"_parseMpeg",value:function(e,t,i,n,r){var a=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2>i)return-1;if(255===e[t]||224===(224&e[t+1])){
if(t+24>i)return-1;var o=e[t+1]>>3&3,u=e[t+1]>>1&3,l=e[t+2]>>4&15,c=e[t+2]>>2&3,d=!!(2&e[t+2]);if(1!==o&&0!==l&&15!==l&&3!==c){var h=3===o?3-u:3===u?3:4,f=1e3*a[14*h+l-1],p=3===o?0:2===o?1:2,v=s[3*p+c],g=d?1:0,m=e[t+3]>>6===3?1:2,y=3===u?(3===o?12:6)*f/v+g<<2:(3===o?144:72)*f/v+g|0;return t+y>i?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+y),f,v,m,n,r),y)}}for(var b=t+2;i>b;){if(255===e[b-1]&&224===(224&e[b]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,b-1)),b-t-1;b++}return-1}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();i["default"]=g},{21:21,25:25,28:28,30:30,32:32,51:51}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",
MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",MANIFEST_EMPTY_ERROR:"manifestEmptyError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"
}},{}],31:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e(51),u=e(30),l=e(32),c=n(l),d=function(){function e(t){r(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;i>a;a++)n[a-1]=arguments[a];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return s(e,[{key:"destroy",value:function(){this.unregisterListeners();
}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var i=function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)};try{i.call(this,e,t).call()}catch(n){o.logger.error("internal error happened while processing "+e+":"+n.message),this.hls.trigger(c["default"].ERROR,{type:u.ErrorTypes.OTHER_ERROR,
details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}}}]),e}();i["default"]=d},{30:30,32:32,51:51}],32:[function(e,t,i){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_REMOVED:"hlsLevelRemoved",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",
AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPT_STARTED:"hlsFragDecryptStarted",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",
FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],33:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return r(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);
if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();i["default"]=a},{}],34:[function(e,t,i){"use strict";var n={isBuffered:function(e,t){if(e)for(var i=e.buffered,n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0;
return!1},bufferInfo:function(e,t,i){if(!e)return{len:0,start:t,end:t,nextStart:void 0};try{var n,r=e.buffered,a=[];for(n=0;n<r.length;n++)a.push({start:r.start(n),end:r.end(n)});return this.bufferedInfo(a,t,i)}catch(s){return{len:0,start:0,end:0,nextStart:void 0}}},bufferedInfo:function(e,t,i){var n,r,a,s,o,u=[];for(e.sort(function(e,t){var i=e.start-t.start;return i?i:t.end-e.end}),o=0;o<e.length;o++){var l=u.length;if(l){var c=u[l-1].end;e[o].start-c<i?e[o].end>c&&(u[l-1].end=e[o].end):u.push(e[o])}else u.push(e[o])}for(o=0,n=0,r=a=t;o<u.length;o++){var d=u[o].start,h=u[o].end;if(t+i>=d&&h>t)r=d,a=h,n=a-t;else if(d>t+i){s=d;break}}return{len:n,start:r||0,end:a||0,nextStart:s}}};t.exports=n},{}],35:[function(e,t,i){"use strict";var n=e(51),r={mergeDetails:function(e,t){var i,a=Math.max(e.startSN,t.startSN)-t.startSN,s=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,u=e.fragments,l=t.fragments,c=0;if(a>s)return void(t.PTSKnown=!1);for(var d=a;s>=d;d++){var h=u[o+d],f=l[d];f&&h&&(c=h.cc-f.cc,
isNaN(h.startPTS)||(f.start=f.startPTS=h.startPTS,f.endPTS=h.endPTS,f.duration=h.duration,i=f))}if(c)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<l.length;d++)l[d].cc+=c;if(i)r.updateFragPTSDTS(t,i.sn,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(o>=0&&o<u.length){var p=u[o].start;for(d=0;d<l.length;d++)l[d].start+=p}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,i,n,a,s){var o,u,l,c;if(!e||t<e.startSN||t>e.endSN)return 0;if(o=t-e.startSN,u=e.fragments,l=u[o],!isNaN(l.startPTS)){var d=Math.abs(l.startPTS-i);isNaN(l.deltaPTS)?l.deltaPTS=d:l.deltaPTS=Math.max(d,l.deltaPTS),i=Math.min(i,l.startPTS),n=Math.max(n,l.endPTS),a=Math.min(a,l.startDTS),s=Math.max(s,l.endDTS)}var h=i-l.start;for(l.start=l.startPTS=i,l.endPTS=n,l.startDTS=a,l.endDTS=s,l.duration=n-i,c=o;c>0;c--)r.updatePTS(u,c,c-1);for(c=o;c<u.length-1;c++)r.updatePTS(u,c,c+1);return e.PTSKnown=!0,h},updatePTS:function(e,t,i){var r=e[t],a=e[i],s=a.startPTS;isNaN(s)?i>t?a.start=r.start+r.duration:a.start=Math.max(r.start-a.duration,0):i>t?(r.duration=s-r.start,
r.duration<0&&n.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(a.duration=r.start-s,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=r},{51:51}],36:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(2),o=n(s),u=e(32),l=n(u),c=e(30),d=e(40),h=n(d),f=e(38),p=n(f),v=e(39),g=n(v),m=e(12),y=n(m),b=e(11),T=n(b),E=e(51),k=e(1),w=n(k),_=e(4),A=function(){
function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=e.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in n)a in i||(i[a]=n[a]);if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||void 0===i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,E.enableLogs)(i.debug),this.config=i,this._autoLevelCapping=-1;var s=this.observer=new w["default"];s.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];
s.emit.apply(s,[e,e].concat(i))},s.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];s.removeListener.apply(s,[e].concat(i))},this.on=s.on.bind(s),this.off=s.off.bind(s),this.trigger=s.trigger.bind(s);var o=this.abrController=new i.abrController(this),u=new i.bufferController(this),l=new i.capLevelController(this),c=new i.fpsController(this),d=new h["default"](this),f=new p["default"](this),v=new g["default"](this),m=this.levelController=new T["default"](this),b=this.streamController=new y["default"](this),k=[m,b],_=i.audioStreamController;_&&k.push(new _(this)),this.networkControllers=k;var A=[d,f,v,o,u,l,c];if(_=i.audioTrackController){var S=new _(this);this.audioTrackController=S,A.push(S)}if(_=i.subtitleTrackController){var L=new _(this);this.subtitleTrackController=L,A.push(L)}[i.subtitleStreamController,i.timelineController].forEach(function(e){e&&A.push(new e(t))}),this.coreComponents=A}return a(e,null,[{key:"isSupported",value:function(){
return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.7.5"}},{key:"Events",get:function(){return l["default"]}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:_.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){E.logger.log("destroy"),this.trigger(l["default"].DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){E.logger.log("attachMedia"),this.media=e,this.trigger(l["default"].MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",
value:function(){E.logger.log("detachMedia"),this.trigger(l["default"].MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=o["default"].buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),E.logger.log("loadSource:"+e),this.url=e,this.trigger(l["default"].MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;E.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){E.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){E.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){E.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel;
},set:function(e){E.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){E.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){E.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){E.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){E.logger.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",
get:function(){return this._autoLevelCapping},set:function(e){E.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,i=e.config.minAutoBitrate,n=t?t.length:0,r=0;n>r;r++){var a=t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate;if(a>i)return r}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,i=e.autoLevelCapping,n=void 0;return n=-1===i&&t&&t.length?t.length-1:i}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;
return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();i["default"]=A},{1:1,11:11,12:12,2:2,30:30,32:32,38:38,39:39,4:4,40:40,51:51}],37:[function(e,t,i){"use strict";t.exports=e(36)["default"]},{36:36}],38:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(30),f=e(51),p=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].FRAG_LOADING));return i.loaders={},i}return s(t,e),o(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var i=e[t];i&&i.destroy()}this.loaders={},d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,i=t.type,n=this.loaders[i],r=this.hls.config;t.loaded=0,n&&(f.logger.warn("abort previous fragment loader for type:"+i),
n.abort()),n=this.loaders[i]=t.loader="undefined"!=typeof r.fLoader?new r.fLoader(r):new r.loader(r);var a=void 0,s=void 0,o=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),s={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(a,s,o)}},{key:"loadsuccess",value:function(e,t,i){var n=e.data,r=i.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l["default"].FRAG_LOADED,{payload:n,frag:r,stats:t})}},{key:"loaderror",value:function(e,t){var i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",
value:function(e,t){var i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,i){var n=t.frag;n.loaded=e.loaded,this.hls.trigger(l["default"].FRAG_LOAD_PROGRESS,{frag:n,stats:e})}}]),t}(d["default"]);i["default"]=p},{30:30,31:31,32:32,51:51}],39:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0
}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(32),l=n(u),c=e(31),d=n(c),h=e(30),f=e(51),p=function(e){function t(e){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l["default"].KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return s(t,e),o(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},d["default"].prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,i=t.type,n=this.loaders[i],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;n&&(f.logger.warn("abort previous key loader for type:"+i),
n.abort()),t.loader=this.loaders[i]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var o=void 0,u=void 0,c=void 0;o={url:a,frag:t,responseType:"arraybuffer"},u={timeout:s.fragLoadingTimeOut,maxRetry:s.fragLoadingMaxRetry,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,u,c)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(l["default"].KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,i){var n=i.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(l["default"].KEY_LOADED,{frag:n})}},{key:"loaderror",value:function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})}},{key:"loadtimeout",
value:function(e,t){var i=t.frag,n=i.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.NETWORK_ERROR,details:h.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})}}]),t}(d["default"]);i["default"]=p},{30:30,31:31,32:32,51:51}],40:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){
for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e(2),l=n(u),c=e(32),d=n(c),h=e(31),f=n(h),p=e(30),v=e(44),g=n(v),m=e(51),y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,T=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,E=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,k=function(){function e(){s(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return o(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l["default"].buildAbsoluteURL(this.baseuri,this.reluri,{
alwaysNormalize:!0})),this._uri}}]),e}(),w=function(){function e(){s(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return o(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),i=12;16>i;i++)t[i]=e>>8*(15-i)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&(i=new k,i.method=e.method,i.baseuri=e.baseuri,i.reluri=e.reluri,i.iv=this.createInitializationVector(t)),i}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l["default"].buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){
var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var i=this.lastByteRangeEndOffset;e[0]=i?i:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),_=function(e){function t(e){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d["default"].MANIFEST_LOADING,d["default"].LEVEL_LOADING,d["default"].AUDIO_TRACK_LOADING,d["default"].SUBTITLE_TRACK_LOADING));return i.loaders={},i}return a(t,e),o(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},f["default"].prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{
type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var i=this.loaders[t.type];if(i){var n=i.context;if(n&&n.url===e)return void m.logger.trace("playlist request ongoing");m.logger.warn("abort previous loader for type:"+t.type),i.abort()}var r=this.hls.config,a=void 0,s=void 0,o=void 0,u=void 0;"manifest"===t.type?(a=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,u=r.manifestLoadingMaxRetryTimeout):(a=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,u=r.levelLoadingMaxRetryTimeout,m.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),i=this.loaders[t.type]=t.loader="undefined"!=typeof r.pLoader?new r.pLoader(r):new r.loader(r),t.url=e,
t.responseType="";var l=void 0,c=void 0;l={timeout:s,maxRetry:a,retryDelay:o,maxRetryDelay:u},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.load(t,l,c)}},{key:"resolve",value:function(e,t){return l["default"].buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var i=[],n=void 0;for(y.lastIndex=0;null!=(n=y.exec(e));){var r={},a=r.attrs=new g["default"](n[1]);r.url=this.resolve(n[2],t);var s=a.decimalResolution("RESOLUTION");s&&(r.width=s.width,r.height=s.height),r.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),r.name=a.NAME;var o=a.CODECS;if(o){o=o.split(/[ ,]+/);for(var u=0;u<o.length;u++){var l=o[u];-1!==l.indexOf("avc1")?r.videoCodec=this.avc1toavcoti(l):r.audioCodec=l}}i.push(r)}return i}},{key:"parseMasterPlaylistMedia",value:function(e,t,i){var n=void 0,r=[],a=0;for(b.lastIndex=0;null!=(n=b.exec(e));){var s={},o=new g["default"](n[1]);o.TYPE===i&&(s.groupId=o["GROUP-ID"],
s.instreamId=o["INSTREAM-ID"],s.name=o.NAME,s.type=i,s["default"]="YES"===o.DEFAULT,s.autoselect="YES"===o.AUTOSELECT,s.forced="YES"===o.FORCED,o.URI&&(s.url=this.resolve(o.URI,t)),s.lang=o.LANGUAGE,s.name||(s.name=s.lang),s.id=a++,r.push(s))}return r}},{key:"avc1toavcoti",value:function(e){var t,i=e.split(".");return i.length>2?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,i,n){var r,a,s=0,o=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new k,c=0,d=null,h=new w;for(T.lastIndex=0;null!==(r=T.exec(e));){var f=r[1];if(f){h.duration=parseFloat(f);var p=(" "+r[2]).slice(1);h.title=p?p:null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(r[3]){if(!isNaN(h.duration)){var v=s++;h.type=n,h.start=o,h.levelkey=l,h.sn=v,h.level=i,h.cc=c,h.baseurl=t,h.relurl=(" "+r[3]).slice(1),u.fragments.push(h),d=h,o+=h.duration,h=new w}}else if(r[4]){if(h.rawByteRange=(" "+r[4]).slice(1),
d){var y=d.byteRangeEndOffset;y&&(h.lastByteRangeEndOffset=y)}}else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]);else{for(r=r[0].match(E),a=1;a<r.length&&void 0===r[a];a++);var b=(" "+r[a+1]).slice(1),_=(" "+r[a+2]).slice(1);switch(r[a]){case"#":h.tagList.push(_?[b,_]:[b]);break;case"PLAYLIST-TYPE":u.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":s=u.startSN=parseInt(b);break;case"TARGETDURATION":u.targetduration=parseFloat(b);break;case"VERSION":u.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(b);break;case"KEY":var A=b,S=new g["default"](A),L=S.enumeratedString("METHOD"),C=S.URI,R=S.hexadecimalInteger("IV");L&&(l=new k,C&&["AES-128","SAMPLE-AES"].indexOf(L)>=0&&(l.method=L,l.baseuri=t,l.reluri=C,l.key=null,l.iv=R));break;case"START":var x=b,I=new g["default"](x),P=I.decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(u.startTimeOffset=P);
break;case"MAP":var O=new g["default"](b);h.relurl=O.URI,h.rawByteRange=O.BYTERANGE,h.baseurl=t,h.level=i,h.type=n,h.sn="initSegment",u.initSegment=h,h=new w;break;default:m.logger.warn("line parsed but not handled: "+r)}}}return h=d,h&&!h.relurl&&(u.fragments.pop(),o-=h.duration),u.totalduration=o,u.averagetargetduration=o/u.fragments.length,u.endSN=s-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=c,u}},{key:"loadsuccess",value:function(e,t,i){var n=e.data,r=e.url,a=i.type,s=i.id,o=i.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==r&&0!==r.indexOf("data:")||(r=i.url),t.tload=performance.now(),0===n.indexOf("#EXTM3U"))if(n.indexOf("#EXTINF:")>0){var l="audioTrack"!==a&&"subtitleTrack"!==a,c=isNaN(o)?isNaN(s)?0:s:o,h=this.parseLevelPlaylist(n,r,c,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");h.tload=t.tload,"manifest"===a&&u.trigger(d["default"].MANIFEST_LOADED,{levels:[{url:r,details:h}],audioTracks:[],url:r,stats:t}),t.tparsed=performance.now(),h.targetduration?l?u.trigger(d["default"].LEVEL_LOADED,{
details:h,level:o||0,id:s||0,stats:t}):"audioTrack"===a?u.trigger(d["default"].AUDIO_TRACK_LOADED,{details:h,id:s,stats:t}):"subtitleTrack"===a&&u.trigger(d["default"].SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:t}):u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"invalid targetduration"})}else{var f=this.parseMasterPlaylist(n,r);if(f.length){var v=this.parseMasterPlaylistMedia(n,r,"AUDIO"),g=this.parseMasterPlaylistMedia(n,r,"SUBTITLES"),y=this.parseMasterPlaylistMedia(n,r,"CLOSED-CAPTIONS");if(v.length){var b=!1;v.forEach(function(e){e.url||(b=!0)}),b===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(m.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main"}))}u.trigger(d["default"].MANIFEST_LOADED,{levels:f,audioTracks:v,subtitles:g,captions:y,url:r,stats:t})}else"manifest"===a?u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,
details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no level found in manifest"}):u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_EMPTY_ERROR,fatal:!1,url:r,reason:"no level found in manifest",context:i})}else u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:r,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var i,n,r=t.loader;switch(t.type){case"manifest":i=p.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":i=p.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":i=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}r&&(r.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:i,fatal:n,url:t.url,loader:r,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var i,n,r=t.loader;switch(t.type){case"manifest":i=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":
i=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":i=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}r&&(r.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:i,fatal:n,url:t.url,loader:r,context:t})}}]),t}(f["default"]);i["default"]=_},{2:2,30:30,31:31,32:32,44:44,51:51}],41:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=Math.pow(2,32)-1,s=function(){function e(){n(this,e)}return r(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],
mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:i,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,u,s,o),
e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))}},{key:"box",value:function(e){for(var t,i=Array.prototype.slice.call(arguments,1),n=8,r=i.length,a=r;r--;)n+=i[r].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),r=0,n=8;a>r;r++)t.set(i[r],n),n+=i[r].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,i){i*=t;var n=Math.floor(i/(a+1)),r=Math.floor(i%(a+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){
return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,i,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,i))}},{key:"moov",value:function(t){for(var i=t.length,n=[];i--;)n[i]=e.trak(t[i]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var i=t.length,n=[];i--;)n[i]=e.trex(t[i]);return e.box.apply(null,[e.types.mvex].concat(n))}},{key:"mvhd",value:function(t,i){i*=t;var n=Math.floor(i/(a+1)),r=Math.floor(i%(a+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)}},{key:"sdtp",
value:function(t){var i,n,r=t.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var i,n,r,a=[],s=[];for(i=0;i<t.sps.length;i++)n=t.sps[i],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));for(i=0;i<t.pps.length;i++)n=t.pps[i],r=n.byteLength,s.push(r>>>8&255),s.push(255&r),s=s.concat(Array.prototype.slice.call(n));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])));
}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var i=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var i=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var i=t.id,n=t.duration*t.timescale,r=t.width,s=t.height,o=Math.floor(n/(a+1)),u=Math.floor(n%(a+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,s>>8&255,255&s,0,0]));
}},{key:"traf",value:function(t,i){var n=e.sdtp(t),r=t.id,s=Math.floor(i/(a+1)),o=Math.floor(i%(a+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var i=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,i){var n,r,a,s,o,u,l=t.samples||[],c=l.length,d=12+16*c,h=new Uint8Array(d);for(i+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;c>n;n++)r=l[n],a=r.duration,s=r.size,o=r.flags,u=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);
return e.box(e.types.trun,h)}},{key:"initSegment",value:function(t){e.types||e.init();var i,n=e.moov(t);return i=new Uint8Array(e.FTYP.byteLength+n.byteLength),i.set(e.FTYP),i.set(n,e.FTYP.byteLength),i}}]),e}();i["default"]=s},{}],42:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(33),o=n(s),u=e(32),l=n(u),c=e(51),d=e(41),h=n(d),f=e(30),p=1e4,v=function(){function e(t,i,n,a){r(this,e),this.observer=t,this.config=i,this.typeSupported=n;var s=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&s&&!s.match("CriOS"),this.ISGenerated=!1}return a(e,[{key:"destroy",
value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,i,n,r,a,s){if(this.ISGenerated||this.generateIS(e,t,r),this.ISGenerated)if(e.samples.length){var o=this.remuxAudio(e,r,a,s);if(t.samples.length){var u=void 0;o&&(u=o.endPTS-o.startPTS),this.remuxVideo(t,r,a,u)}}else{var c=void 0;t.samples.length&&(c=this.remuxVideo(t,r,a)),c&&e.codec&&this.remuxEmptyAudio(e,r,a,c)}i.samples.length&&this.remuxID3(i,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(l["default"].FRAG_PARSED)}},{key:"generateIS",value:function(e,t,i){var n,r,a=this.observer,s=e.samples,o=t.samples,u=this.typeSupported,d="audio/mp4",p={},v={tracks:p},g=void 0===this._initPTS;if(g&&(n=r=1/0),e.config&&s.length&&(e.timescale=e.samplerate,c.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(d="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),p.audio={container:d,codec:e.codec,
initSegment:!e.isAAC&&u.mpeg?new Uint8Array:h["default"].initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(n=r=s[0].pts-e.inputTimeScale*i)),t.sps&&t.pps&&o.length){var m=t.inputTimeScale;t.timescale=m,p.video={container:"video/mp4",codec:t.codec,initSegment:h["default"].initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(n=Math.min(n,o[0].pts-m*i),r=Math.min(r,o[0].dts-m*i),this.observer.trigger(l["default"].INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(a.trigger(l["default"].FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,g&&(this._initPTS=n,this._initDTS=r)):a.trigger(l["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,i,n){var r,a,s,o,u,d,p,v,g=8,m=e.timescale,y=e.samples,b=[],T=y.length,E=this._PTSNormalize,k=this._initDTS;y.sort(function(e,t){var i=e.dts-t.dts,n=e.pts-t.pts;return i?i:n?n:e.id-t.id});var w=y.reduce(function(e,t){
return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(0>w){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(w/90)+" ms to overcome this issue");for(var _=0;_<y.length;_++)y[_].dts+=w}var A=void 0;A=i?this.nextAvcDts:t*m;var S=y[0];u=Math.max(E(S.dts-k,A),0),o=Math.max(E(S.pts-k,A),0);var L=Math.round((u-A)/90);i&&L&&(L>1?c.logger.log("AVC:"+L+" ms hole between fragments detected,filling it"):-1>L&&c.logger.log("AVC:"+-L+" ms overlapping between fragments detected"),u=A,y[0].dts=u+k,o=Math.max(o-L,A),y[0].pts=o+k,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(o/90)+"/"+Math.round(u/90)+",delta:"+L+" ms")),d=u,S=y[y.length-1],v=Math.max(E(S.dts-k,A),0),p=Math.max(E(S.pts-k,A),0),p=Math.max(p,v);var C=this.isSafari;C&&(r=Math.round((v-u)/(y.length-1)));for(var R=0,x=0,I=0;T>I;I++){for(var P=y[I],O=P.units,D=O.length,M=0,N=0;D>N;N++)M+=O[N].data.length;x+=M,R+=D,P.length=M,C?P.dts=u+I*r:P.dts=Math.max(E(P.dts-k,A),u),P.pts=Math.max(E(P.pts-k,A),P.dts)}var j=x+4*R+8;
try{a=new Uint8Array(j)}catch(F){return void this.observer.trigger(l["default"].ERROR,{type:f.ErrorTypes.MUX_ERROR,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var B=new DataView(a.buffer);B.setUint32(0,j),a.set(h["default"].types.mdat,4);for(var U=0;T>U;U++){for(var G=y[U],V=G.units,W=0,Y=void 0,H=0,J=V.length;J>H;H++){var K=V[H],q=K.data,z=K.data.byteLength;B.setUint32(g,z),g+=4,a.set(q,g),g+=z,W+=4+z}if(C)Y=Math.max(0,r*Math.round((G.pts-G.dts)/r));else{if(T-1>U)r=y[U+1].dts-G.dts;else{var X=this.config,Q=G.dts-y[U>0?U-1:U].dts;if(X.stretchShortVideoTrack){var $=X.maxBufferHole,Z=X.maxSeekHole,ee=Math.floor(Math.min($,Z)*m),te=(n?o+n*m:this.nextAudioPts)-G.pts;te>ee?(r=te-Q,0>r&&(r=Q),c.logger.log("It is approximately "+te/90+" ms to the next segment; using duration "+r/90+" ms for the last video frame.")):r=Q}else r=Q}Y=Math.round(G.pts-G.dts)}b.push({size:W,duration:r,cts:Y,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,
dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=v+r;var ie=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=b[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=b,s=h["default"].moof(e.sequenceNumber++,u,e),e.samples=[];var re={data1:s,data2:a,startPTS:o/m,endPTS:(p+r)/m,startDTS:u/m,endDTS:this.nextAvcDts/m,type:"video",nb:b.length,dropped:ie};return this.observer.trigger(l["default"].FRAG_PARSING_DATA,re),re}},{key:"remuxAudio",value:function(e,t,i,n){var r,a,s,u,d,v,g,m,y,b,T,E,k,w,_,A,S=e.inputTimeScale,L=e.timescale,C=S/L,R=e.isAAC?1024:1152,x=R*C,I=this._PTSNormalize,P=this._initDTS,O=!e.isAAC&&this.typeSupported.mpeg,D=O?0:8,M=[],N=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),N=e.samples,A=this.nextAudioPts,i|=N.length&&A&&(Math.abs(t-A/S)<.1||Math.abs(N[0].pts-A-P)<20*x),i||(A=t*S),n&&e.isAAC)for(var j=0,F=A;j<N.length;){var B=N[j],U=I(B.pts-P,A),G=U-F,V=Math.abs(1e3*G/S);if(-x>=G)c.logger.warn("Dropping 1 audio frame @ "+(F/S).toFixed(3)+"s due to "+V+" ms overlap."),
N.splice(j,1),e.len-=B.unit.length;else if(G>=x&&p>V&&F){var W=Math.round(G/x);c.logger.warn("Injecting "+W+" audio frame @ "+(F/S).toFixed(3)+"s due to "+1e3*G/S+" ms gap.");for(var Y=0;W>Y;Y++)_=F+P,_=Math.max(_,P),w=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),w||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),w=B.unit.subarray()),N.splice(j,0,{unit:w,pts:_,dts:_}),e.len+=w.length,F+=x,j+=1;B.pts=B.dts=F+P,F+=x,j+=1}else Math.abs(G)>.1*x,F+=x,0===j?B.pts=B.dts=P+A:B.pts=B.dts=N[j-1].pts+x,j+=1}for(var H=0,J=N.length;J>H;H++){if(a=N[H],u=a.unit,b=a.pts-P,T=a.dts-P,void 0!==y)E=I(b,y),k=I(T,y),s.duration=Math.round((k-y)/C);else{E=I(b,A),k=I(T,A);var K=Math.round(1e3*(E-A)/S),q=0;if(i&&e.isAAC&&K){if(K>0&&p>K)q=Math.round((E-A)/x),c.logger.log(K+" ms hole between AAC samples detected,filling it"),q>0&&(w=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),w||(w=u.subarray()),e.len+=q*w.length);else if(-12>K){
c.logger.log(-K+" ms overlapping between AAC samples detected, drop frame"),e.len-=u.byteLength;continue}E=k=A}if(g=Math.max(0,E),m=Math.max(0,k),!(e.len>0))return;var z=O?e.len:e.len+8;try{d=new Uint8Array(z)}catch(X){return void this.observer.trigger(l["default"].ERROR,{type:f.ErrorTypes.MUX_ERROR,details:f.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}O||(r=new DataView(d.buffer),r.setUint32(0,z),d.set(h["default"].types.mdat,4));for(var Q=0;q>Q;Q++)_=E-(q-Q)*x,w=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount),w||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),w=u.subarray()),d.set(w,D),D+=w.byteLength,s={size:w.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(s)}d.set(u,D);var $=u.byteLength;D+=$,s={size:$,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(s),
y=k}var Z=0,ee=M.length;if(ee>=2&&(Z=M[ee-2].duration,s.duration=Z),ee){this.nextAudioPts=E+C*Z,e.len=0,e.samples=M,v=O?new Uint8Array:h["default"].moof(e.sequenceNumber++,m/C,e),e.samples=[];var te={data1:v,data2:d,startPTS:g/S,endPTS:this.nextAudioPts/S,startDTS:m/S,endDTS:(k+C*Z)/S,type:"audio",nb:ee};return this.observer.trigger(l["default"].FRAG_PARSING_DATA,te),te}return null}},{key:"remuxEmptyAudio",value:function(e,t,i,n){var r=e.inputTimeScale,a=e.samplerate?e.samplerate:r,s=r/a,u=this.nextAudioPts,l=(void 0!==u?u:n.startDTS*r)+this._initDTS,d=n.endDTS*r+this._initDTS,h=1024,f=s*h,p=Math.ceil((d-l)/f),v=o["default"].getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("remux empty Audio"),!v)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var g=[],m=0;p>m;m++){var y=l+m*f;g.push({unit:v,pts:y,dts:y}),e.len+=v.length}e.samples=g,this.remuxAudio(e,t,i)}},{key:"remuxID3",value:function(e,t){
var i,n=e.samples.length,r=e.inputTimeScale,a=this._initPTS,s=this._initDTS;if(n){for(var o=0;n>o;o++)i=e.samples[o],i.pts=(i.pts-a)/r,i.dts=(i.dts-s)/r;this.observer.trigger(l["default"].FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var i,n=e.samples.length,r=e.inputTimeScale,a=this._initPTS;if(n){for(var s=0;n>s;s++)i=e.samples[s],i.pts=(i.pts-a)/r;this.observer.trigger(l["default"].FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var i;if(void 0===t)return e;for(i=e>t?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e}}]),e}();i["default"]=v},{30:30,32:32,33:33,41:41,51:51}],43:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){
for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(32),o=n(s),u=function(){function e(t){r(this,e),this.observer=t}return a(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,i,n,r,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(o["default"].FRAG_PARSING_DATA,{data1:u,startPTS:r,startDTS:r,type:c,nb:1,dropped:0}),l.trigger(o["default"].FRAG_PARSED)}}]),e}();i["default"]=u},{32:32}],44:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=/^(\d+)x(\d+)$/,s=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){function e(t){n(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}return r(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);return null!==t?{width:parseInt(t[1],10),height:parseInt(t[2],10)
}:void 0}}],[{key:"parseAttrList",value:function(e){var t,i={};for(s.lastIndex=0;null!==(t=s.exec(e));){var n=t[2],r='"';0===n.indexOf(r)&&n.lastIndexOf(r)===n.length-1&&(n=n.slice(1,-1)),i[t[1]]=n}return i}}]),e}();i["default"]=o},{}],45:[function(e,t,i){"use strict";var n={search:function(e,t){for(var i=0,n=e.length-1,r=null,a=null;n>=i;){r=(i+n)/2|0,a=e[r];var s=t(a);if(s>0)i=r+1;else{if(!(0>s))return a;n=r-1}}return null}};t.exports=n},{}],46:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,
134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},o=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,
TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var i=this.verboseFilter[e];this.verboseLevel>=i&&console.log(this.time.toFixed(3)+" ["+e+"] "+t)}},v=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t},g=function(){function e(t,i,r,a,s){n(this,e),this.foreground=t||"white",this.underline=i||!1,this.italics=r||!1,this.background=a||"black",this.flash=s||!1}return r(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash;
}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),m=function(){function e(t,i,r,a,s,o){n(this,e),this.uchar=t||" ",this.penState=new g(i,r,a,s,o)}return r(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){n(this,e),this.chars=[];for(var t=0;u>t;t++)this.chars.push(new m);
this.pos=0,this.currPenState=new g}return r(e,[{key:"equals",value:function(e){for(var t=!0,i=0;u>i;i++)if(!this.chars[i].equals(e.chars[i])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;u>t;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;u>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var i=this.pos+1;t+1>i;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=s(e);return this.pos>=u?void p.log("WARNING","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),
void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;u>t;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,i=0;u>i;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),b=function(){function e(){n(this,e),this.rows=[];for(var t=0;o>t;t++)this.rows.push(new y);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return r(e,[{key:"reset",value:function(){for(var e=0;o>e;e++)this.rows[e].clear();this.currRow=o-1}},{key:"equals",value:function(e){for(var t=!0,i=0;o>i;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;o>t;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",
value:function(){for(var e=!0,t=0;o>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;o>i;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[n].cueStartTime;if(a&&a<p.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[n+s]);
}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,c=Math.max(l-1,0);u.setCursor(e.indent),e.color=u.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],i="",n=-1,r=0;o>r;r++){var a=this.rows[r].getTextString();a&&(n=r+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),
i}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),T=function(){function e(t,i){n(this,e),this.chNr=t,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return r(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),
"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){
p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",
value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var i=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[i]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),
this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),E=function(){function e(t,i,r){n(this,e),this.field=t||1,this.outputs=[i,r],this.channels=[new T(1,i),new T(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return r(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var i,n,r,a=!1;this.lastTime=e,p.setTime(e);for(var s=0;s<t.length;s+=2)if(n=127&t[s],r=127&t[s+1],0!==n||0!==r){if(p.log("DATA","["+v([t[s],t[s+1]])+"] -> ("+v([n,r])+")"),i=this.parseCmd(n,r),
i||(i=this.parseMidrow(n,r)),i||(i=this.parsePAC(n,r)),i||(i=this.parseBackgroundAttributes(n,r)),!i&&(a=this.parseChars(n,r)))if(this.currChNr&&this.currChNr>=0){var o=this.channels[this.currChNr-1];o.insertChars(a)}else p.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:a?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([n,r])+" orig: "+v([t[s],t[s+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var i=null,n=(20===e||28===e)&&t>=32&&47>=t,r=(23===e||31===e)&&t>=33&&35>=t;if(!n&&!r)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;i=20===e||23===e?1:2;var a=this.channels[i-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),
this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0}},{key:"parseMidrow",value:function(e,t){var i=null;if((17===e||25===e)&&t>=32&&47>=t){if(i=17===e?1:2,i!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[i-1];return n.ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var i=null,n=null,r=(e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t,a=(16===e||24===e)&&t>=64&&95>=t;if(!r&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=23>=e?1:2,n=t>=64&&95>=t?1===i?l[e]:d[e]:1===i?c[e]:h[e];var s=this.interpretPAC(n,t),o=this.channels[i-1];return o.setPAC(s),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=i,!0}},{key:"interpretPAC",value:function(e,t){var i=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,n.underline=1===(1&i),13>=i?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:15>=i?(n.italics=!0,
n.color="white"):n.indent=4*Math.floor((i-16)/2),n}},{key:"parseChars",value:function(e,t){var i=null,n=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&19>=r){var a=t;a=17===r?t+80:18===r?t+112:t+144,p.log("INFO","Special char '"+s(a)+"' in channel "+i),n=[a]}else e>=32&&127>=e&&(n=0===t?[e]:[e,t]);if(n){var o=v(n);p.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n}},{key:"parseBackgroundAttributes",value:function(e,t){var i,n,r,a,s=(16===e||24===e)&&t>=32&&47>=t,o=(23===e||31===e)&&t>=45&&47>=t;return!(!s&&!o||(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=f[n],t%2===1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),r=24>e?1:2,a=this.channels[r-1],a.setBkgData(i),this.lastCmdA=null,this.lastCmdB=null,0))}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",
value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();i["default"]=E},{}],47:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=e(54),a=e(53),s=n(a),o={createCues:function(e,t,i){for(var n,a,o,u,l,c=[],d=0;d<i.rows.length;d++)if(n=i.rows[d],o=!0,u=0,l="",!n.isEmpty()){for(var h=0;h<n.chars.length;h++)n.chars[h].uchar.match(/\s/)&&o?u++:(l+=n.chars[h].uchar,o=!1);n.cueStartTime=e,e===t&&(t+=1e-4),a=new s["default"](e,t,(0,r.fixLineBreaks)(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(u/32))),c.push(a)}return c}};t.exports=o},{53:53,54:54}],48:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){for(var i=null,n=0;n<e.length;n+=1){var r=e[n];if(r&&r.cc===t){i=r;break}}return i}function a(e,t){return d["default"].search(e,function(e){return e.cc<t?1:e.cc>t?-1:0;
})}function s(e,t,i){var n=!1;return t&&t.details&&i&&(i.endCC>i.startCC||e&&e.cc<i.startCC)&&(n=!0),n}function o(e,t){var i=e.fragments,n=t.fragments;if(!n.length||!i.length)return void h.logger.log("No fragments to align");var a=r(i,n[0].cc);return!a||a&&!a.startPTS?void h.logger.log("No frag in previous level to align on"):a}function u(e,t){e&&(t.fragments.forEach(function(t,i){t&&(t.duration=e.duration,t.end=t.endPTS=e.endPTS+t.duration*i,t.start=t.startPTS=e.startPTS+t.start)}),t.PTSKnown=!0)}function l(e,t,i){if(s(e,t,i)){h.logger.log("Adjusting PTS using last level due to CC increase within current level");var n=o(t.details,i);u(n,i)}}Object.defineProperty(i,"__esModule",{value:!0}),i.findFirstFragWithCC=r,i.findFragWithCC=a,i.shouldAlignOnDiscontinuities=s,i.findDiscontinuousReferenceFrag=o,i.adjustPtsByReferenceFrag=u,i.alignDiscontinuities=l;var c=e(45),d=n(c),h=e(51)},{45:45,51:51}],49:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e(50),o=n(s),u=function(){function e(t,i,n,a){r(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o["default"](i),this.fast_=new o["default"](n)}return a(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var i=8e3*t/e,n=e/1e3;this.fast_.sample(n,i),this.slow_.sample(n,i)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),
e}();i["default"]=u},{50:50}],50:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return r(e,[{key:"sample",value:function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();i["default"]=a},{}],51:[function(e,t,i){"use strict";function n(){}function r(e,t){
return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var i=arguments.length,n=Array(i),a=0;i>a;a++)n[a]=arguments[a];n[0]&&(n[0]=r(e,n[0])),t.apply(self.console,n)}:n}function s(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];i.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u;i.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":o(e))){s(e,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u},i.logger=l},{}],52:[function(e,t,i){"use strict";var n={toString:function(e){for(var t="",i=e.length,n=0;i>n;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};t.exports=n;
},{}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(){function e(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return!!t&&e.toLowerCase()}function t(e){if("string"!=typeof e)return!1;var t=s[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function n(n,a,s){var o=this,u=function(){return"undefined"!=typeof navigator?/MSIE\s8\.0/.test(navigator.userAgent):void 0}(),l={};u?o=document.createElement("custom"):l.enumerable=!0,o.hasBeenReset=!1;var c="",d=!1,h=n,f=a,p=s,v=null,g="",m=!0,y="auto",b="start",T=50,E=50,k="middle";return Object.defineProperty(o,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");
h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return g},set:function(t){var i=e(t);if(i===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==r)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{
get:function(){return b},set:function(e){var i=t(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");b=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return T},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return E},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return k},set:function(e){var i=t(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");k=i,this.hasBeenReset=!0}})),o.displayState=void 0,u?o:void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",a={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},n;
}()},{}],54:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new h,this.regionList=[]}function a(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function s(){this.values=Object.create(null)}function o(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length){var o=s[0],u=s[1];t(o,u)}}}function u(e,t,i){function n(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(e,t){var n=new s;o(e,function(e,t){switch(e){case"region":for(var r=i.length-1;r>=0;r--)if(i[r].id===t){n.set(e,i[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];n.integer(e,s),
n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",p,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",p,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",p,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var r=n.get("line","auto");"auto"===r&&-1===f.line&&(r=-1),t.line=r,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",p);var a=n.get("position","auto");"auto"===a&&50===f.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function u(){e=e.replace(/^\s+/,"")}var l=e;if(u(),t.startTime=n(),u(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),u(),t.endTime=n(),u(),r(e,t);
}function l(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(i,"__esModule",{value:!0}),i.fixLineBreaks=void 0;var c=e(53),d=n(c),h=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var i;return!!((i=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&100>=t))&&(this.set(e,t),!0)}};var f=new d["default"](0,0,0),p="middle"===f.align?"middle":"center";r.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=l(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);
return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}function i(e){o(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;r=t();var a=r.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var s=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(s?s=!1:r=t(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new d["default"](0,0,""),n.state="CUE",-1===r.indexOf("-->")){n.cue.id=r;continue}case"CUE":try{u(r,n.cue,n.regionList)}catch(c){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var h=-1!==r.indexOf("-->");if(!r||h&&(s=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),
n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(c){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}},i.fixLineBreaks=l,i["default"]=r},{53:53}],55:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=e(54),a=n(r),s=function(e,t,i){return e.substr(i||0,t.length)===t},o=function(e){var t=parseInt(e.substr(-3)),i=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(i)||isNaN(n)||isNaN(r)?-1:(t+=1e3*i,t+=6e4*n,t+=36e5*r)},u=function(e,t,i){var n=e[t],r=e[n.prevCC];if(!r||!r["new"]&&n["new"])return e.ccOffset=e.presentationOffset=n.start,void(n["new"]=!1);
for(;r&&r["new"];)e.ccOffset+=n.start-r.start,n["new"]=!1,n=r,r=e[n.prevCC];e.presentationOffset=i},l={parse:function(e,t,i,n,r,l){var c=/\r\n|\n\r|\n|\r/g,d=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(c,"\n").split("\n"),h="00:00.000",f=0,p=0,v=0,g=[],m=void 0,y=!0,b=new a["default"];b.oncue=function(e){var t=i[n],r=i.ccOffset;t&&t["new"]&&(p?r=i.ccOffset=t.start:u(i,n,v)),v&&!p&&(r=v+i.ccOffset-i.presentationOffset),e.startTime+=r-p,e.endTime+=r-p,e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&g.push(e)},b.onparsingerror=function(e){m=e},b.onflush=function(){return m&&l?void l(m):void r(g)},d.forEach(function(e){if(y){if(s(e,"X-TIMESTAMP-MAP=")){y=!1,e.substr(16).split(",").forEach(function(e){s(e,"LOCAL:")?h=e.substr(6):s(e,"MPEGTS:")&&(f=parseInt(e.substr(7)))});try{t=0>t?t+8589934592:t,f-=t,p=o(h)/1e3,v=f/9e4,-1===p&&(m=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(i){m=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(y=!1)}b.parse(e+"\n");
}),b.flush()}};t.exports=l},{54:54}],56:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e(51),s=function(){function e(t){n(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return r(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,
this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,i=t.readyState,n=this.stats,r=this.context,s=this.config;if(!n.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===i){var o=t.status;if(o>=200&&300>o){
n.tload=Math.max(n.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===r.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),n.loaded=n.total=l;var c={url:t.responseURL,data:u};this.callbacks.onSuccess(c,n,r)}else n.retry>=s.maxRetry||o>=400&&499>o?(a.logger.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:t.statusText},r)):(a.logger.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var i=this.callbacks.onProgress;i&&i(t,this.context,null);
}}]),e}();i["default"]=s},{51:51}]},{},[37])(37)})}})}),define("third_party/jwplayer/provider.shaka",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([3,13],{8:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},10:function(e,t,i){var n,r;n=[i(1),i(12),i(2),i(16),i(15)],r=function(e,t,i,n,r){function a(t){if(this._currentTextTrackIndex=-1,t){if(this._textTracks?(this._textTracks=e.reject(this._textTracks,function(e){return this.renderNatively&&"nativecaptions"===e._id?(delete this._tracksById[e._id],!0):void 0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),t.length){var n=0,a=t.length;for(n;a>n;n++){var s=t[n];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind,!s.label&&"captions"===s.kind){var o=r.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=r.createId(s,this._textTracks.length);
if(this._tracksById[s._id])continue;s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",s.oncuechange=R.bind(this),this._tracksById[s._id]=s;else if(_(s.kind)){var u,l=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=l,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var c=this._cuesByTrackId[s._id].cues;u=c.shift();)k(this.renderNatively,s,u);s.mode=l,this._cuesByTrackId[s._id].loaded=!0}L.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||b.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(e){if(this.renderNatively){var t=e===this._itemTracks;t||n.cancelXhr(this._itemTracks),
this._itemTracks=e,e&&(t||(this.disableTextTrack(),C.call(this),this.addTextTracks(e)))}}function o(){return this._currentTextTrackIndex}function u(t){return this.renderNatively?void(this._textTracks&&(0===t&&e.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==t-1&&(this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1))}function l(e){if(e.text&&e.begin&&e.end){var t=e.trackid.toString(),i=this._tracksById&&this._tracksById[t];i||(i={kind:"captions",_id:t,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var r;e.useDTS&&(i.source||(i.source=e.source||"mpegts")),r=e.begin+"_"+e.text;var a=this._metaCuesByTextTime[r];
if(!a){a={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[r]=a;var s=n.convertToVTTCues([a])[0];i.data.push(s)}}}function c(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var a={kind:e.type,_id:t,label:n,embedded:!0};i=S.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):T.call(this,[i])}x.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?k(this.renderNatively,i,r):i.data.push(r))}function d(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],r=[],a=!1,s=0;s<i.length;s++){var o=i[s],u=e.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),a=!0)}a&&r.sort(function(e,t){return e.begin-t.begin});var l=n.convertToVTTCues(r);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(f(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i));
}function f(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function p(){n.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(w(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),w(this.renderNatively,this.video.textTracks))}function v(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function g(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var t=this.video.textTracks,i=e.filter(t,function(e){
return(e.inuse||!e._id)&&_(e.kind)});if(!this._textTracks||I.call(this,i))return void this.setTextTracks(t);for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}function b(){this.setTextTracks(this.video.textTracks)}function T(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||_(i.kind)){var r=S.call(this,i);L.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),P))}}!this.renderNatively&&this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function E(e,t){if(this.renderNatively){var i=this._tracksById[e._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded){var n;for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};n=t.shift();)k(this.renderNatively,i,n);
}}}function k(e,t,n){if(!i.isIE()||!e||!window.TextTrackCue)return void t.addCue(n);var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);t.addCue(r)}function w(t,n){n.length&&e.each(n,function(e){if(!(i.isIE()&&t&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function _(e){return"subtitles"===e||"captions"===e}function A(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function S(t){var i,n=r.createLabel(t,this._unknownCount),a=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===t.kind){var s=this.video.textTracks;i=e.findWhere(s,{label:a}),i?(i.kind=t.kind,i.language=t.language||""):i=this.video.addTextTrack(t.kind,a,t.language||""),i["default"]=t["default"],i.mode="disabled",i.inuse=!0}else i=t,i.data=i.data||[];return i._id||(i._id=r.createId(t,this._textTracks.length)),
i}function L(e){this._textTracks.push(e),this._tracksById[e._id]=e}function C(){if(this._textTracks){var t=e.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),e.each(t,function(e){this._tracksById[e._id]=e}),this._textTracks=t}}function R(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var a=[];if(e.each(n,function(e){e.startTime<r||(e.data||e.value?a.push(e):e.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(e.text)}))},this),a.length){var s=t.parseID3(a);this.trigger("meta",{metadataTime:r,metadata:s})}this._activeCuePosition=r}}}function x(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var a="_"+t.line,s=Math.floor(20*t.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1||(r[n+a]=s,0));case"metadata":var u=t.data?new Uint8Array(t.data).join(""):t.text;
return n=t.startTime+u,!r[n]&&(r[n]=t.endTime,!0);default:return!1}}function I(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function P(e){i.log("CAPTIONS("+e+")")}var O={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:A,addTracksListener:h,clearTracks:p,clearCueData:v,disableTextTrack:g,enableTextTrack:m,getSubtitlesTrack:o,removeTracksListener:f,addTextTracks:T,setTextTracks:a,setupSideloadedTracks:s,setSubtitlesTrack:u,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:d,addCaptionsCue:l,addVTTCue:c,addVTTCuesToTrack:E,renderNatively:!1};return O}.apply(t,n),!(void 0!==r&&(e.exports=r))},21:function(e,t,i){var n,r;n=[i(29)],r=function(e){function t(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");
return decodeURIComponent(encodeURIComponent(e))}}}function i(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(s);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function n(){this.values=Object.create(null)}function r(e,t,i,n){for(var r=n?e.split(n):[e],a=0;a<=r.length;a+=1)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length){var o=s[0],u=s[1];t(o,u)}}}function a(e,t,a){function s(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(c,""),t}function o(e,t){var i=new n;r(e,function(e,t){switch(e){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===t){i.set(e,a[n].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),s=r[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",b,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",b,"end","line-left","line-right","auto"]);
break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",b,"end","left","right"])}},d,h),t.region=i.get("region",null),t.vertical=i.get("vertical","");var s=i.get("line","auto");"auto"===s&&-1===y.line&&(s=-1),t.line=s,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",b);var o=i.get("position","auto");"auto"===o&&50===y.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}function u(){e=e.replace(f,"")}var l=e;if(u(),t.startTime=s(),u(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),u(),t.endTime=s(),u(),o(e,t)}var s=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,o=/^-?\d+$/,u=/\r\n|\n/,l=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,d=/:/,h=/\s/,f=/^\s+/,p=/-->/,v=/^WEBVTT([ \t].*)?$/,g=window.requestAnimationFrame||function(e){return window.setTimeout(e,17)},m=function(e,i){this.window=e,this.state="INITIAL",
this.buffer="",this.decoder=i||new t,this.regionList=[],this.maxCueBatch=1e3};n.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){o.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return t=parseFloat(t),t>=0&&100>=t&&(this.set(e,t),!0)}};var y=new e(0,0,0),b="middle"===y.align?"middle":"center";return m.prototype={parse:function(t,i){function n(){for(var e=h.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,h.buffer=e.substr(t),i}function s(e){r(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},d)}function o(){"CUETEXT"===h.state&&h.cue&&h.oncue&&h.oncue(h.cue),h.cue=null,h.state="INITIAL"===h.state?"BADWEBVTT":"BADCUE"}function c(){try{for(;h.buffer&&T<=h.maxCueBatch;){
if(!u.test(h.buffer))return h.flush(),this;switch(b?b=!1:f=n(),h.state){case"HEADER":d.test(f)?s(f):f||(h.state="ID");break;case"NOTE":f||(h.state="ID");break;case"ID":if(l.test(f)){h.state="NOTE";break}if(!f)break;if(h.cue=new e(0,0,""),h.state="CUE",!p.test(f)){h.cue.id=f;break}case"CUE":try{a(f,h.cue,h.regionList)}catch(t){h.cue=null,h.state="BADCUE";break}h.state="CUETEXT";break;case"CUETEXT":var r=p.test(f);if(!f||r&&(b=!0)){h.oncue&&(T+=1,h.oncue(h.cue)),h.cue=null,h.state="ID";break}h.cue.text&&(h.cue.text+="\n"),h.cue.text+=f;break;case"BADCUE":f||(h.state="ID")}}if(T=0,h.buffer)g(c);else if(!i)return h.flush(),this}catch(t){return o(t),this}}var h=this;t&&(h.buffer+=h.decoder.decode(t,{stream:!0}));try{var f;if("INITIAL"===h.state){if(!u.test(h.buffer))return this;f=n();var m=f.match(v);if(!m||!m[0])throw new Error("Malformed WebVTT signature.");h.state="HEADER"}}catch(y){return o(),this}var b=!1,T=0;c()},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",
e.parse(void 0,!0)),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}},m}.apply(t,n),!(void 0!==r&&(e.exports=r))},39:function(e,t,i){var n,r;n=[i(2)],r=function(e){return{container:null,volume:function(t){t=e.between(t/100,0,1),this.video.volume=t},mute:function(e){this.video.muted=!!e,this.video.muted||this.video.removeAttribute("muted")},resize:function(t,i,n){if(!(t&&i&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===n){var r=t/i,a=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(r-a)<.09&&(s="fill"),e.style(this.video,{objectFit:s})}return!1},getContainer:function(){return this.container},setContainer:function(e){this.container=e,e.insertBefore(this.video,e.firstChild)},remove:function(){this.stop(),this.destroy(),this.container===this.video.parentNode&&this.container.removeChild(this.video)},getVideo:function(t,i){var n=i||document.getElementById(t),r=n?n.querySelector("video"):null;
return r||(r=document.createElement("video"),e.isMobile()&&r.setAttribute("jw-gesture-required","")),r.className="jw-video jw-reset",this.video=r,r}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},40:function(e,t,i){var n,r;n=[i(3),i(9),i(5),i(1)],r=function(e,t,i,n){var r=256;return{stallCheckTimeout_:-1,lastStalledTime_:NaN,trigger:function(t,i){return e.trigger.call(this,t,i)},setState:function(e){return t.setState.call(this,e)},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.stopStallCheck(),this.eventsOff_(),this.video},stopStallCheck:function(){clearTimeout(this.stallCheckTimeout_)},startStallCheck:function(){n.isNaN(this.lastStalledTime_)&&this.stalledHandler(),this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this),r)},stalledHandler:function(){return this.lastStalledTime_!==this.video.currentTime?void(this.lastStalledTime_=this.video.currentTime):void(this.video.paused||this.video.ended||this.state!==i.LOADING&&this.state!==i.ERROR&&(this.seeking||this.setState(i.STALLED)));
},setAutoplayAttributes:function(){this.video.setAttribute("autoplay",""),this.video.setAttribute("muted","")},removeAutoplayAttributes:function(){this.video.removeAttribute("autoplay"),this.video.removeAttribute("muted")}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},41:function(e,t,i){var n,r;n=[i(2),i(5)],r=function(e,t){return{seeking:!1,loadedmetadata:function(){var e={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},t=this.drmUsed;t&&(e.drm=t),this.trigger("meta",e)},timeupdate:function(){this.stopStallCheck();var e=this.video.videoHeight;e!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:e}}),this._helperLastVideoHeight=e,this.state!==t.STALLED&&this.state!==t.LOADING||this.setState(t.PLAYING),this.startStallCheck();var i=this.getCurrentTime(),n={position:i,duration:this.getDuration()};if(this.getPtsOffset){var r=this.getPtsOffset();r>=0&&(n.metadata={mpegts:r+i})}(this.state===t.PLAYING||this.seeking)&&this.trigger("time",n);
},click:function(e){this.trigger("click",e)},volumechange:function(){var e=this.video;this.trigger("volume",{volume:Math.round(100*e.volume)}),this.trigger("mute",{mute:e.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger("seeked"))},playing:function(){this.setState(t.PLAYING),this.video.hasAttribute("jw-gesture-required")&&this.video.removeAttribute("jw-gesture-required"),this.trigger("providerFirstFrame")},pause:function(){this.state!==t.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(t.PAUSED))},progress:function(){var t=this.getDuration();if(!(0>=t||t===1/0)){var i=this.video.buffered;if(i&&0!==i.length){var n=e.between(i.end(i.length-1)/t,0,1);this.trigger("bufferChange",{bufferPercent:100*n,position:this.getCurrentTime(),duration:t})}}},ended:function(){this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==t.IDLE&&this.state!==t.COMPLETE&&this.trigger("complete")},loadeddata:function(){this.setTextTracks(this.video.textTracks),
this.video.setAttribute("jw-loaded","data")},error:function(){var e=this.video.error&&this.video.error.code||-1,t={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"}[e]||"Unknown";this.trigger("mediaError",{code:e,message:"Error playing file: "+t})}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},71:function(e,t,i){var n,r,a=i(8);n=[i(1),i(20),i(107),i(2),i(5),i(4),i(3),i(41),i(39),i(40),i(10),i(25),i(160),i(171)],r=function(e,t,i,n,r,s,o,u,l,c,d,h,f,p){function v(f,v){function m(){$.addEventListener("error",w),$.addEventListener("trackschanged",D),e.each(te,function(e,t){ie.video.addEventListener(t,e,!1)})}function y(e,t){return n.generateLabel(e,v.qualityLabels,t)}function b(e,t,i){for(var n={index:0,track:null},r=t.length;r--;)for(var a=t[r].id,s=i.length;s--;){var o=i[s];if(a===o.id&&o.height===e)return n.index=s+1,n.track=o,n}return n}function T(){$.removeEventListener("error",w),$.removeEventListener("trackschanged",D),e.each(te,function(e,t){
ie.video.removeEventListener(t,e)})}function E(){var e=ie.video;T(),$.destroy(),ie.video=ie.video=e,window.VTTCue=g}function k(e,t){var i=e.headers,n=e.customData;if(i)for(var r=0;r<i.length;r++){var a=i[r];t.headers[a.name]=a.value}n&&(t.headers.customData=n)}function w(e){var t=e.detail?e.detail.category:e.category,i=e.detail?e.detail.code:e.code;if(t===p.util.Error.Category.NETWORK)return void ie.trigger(s.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"});if(i===p.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE){var n=z();return null!==n&&X(n),void console.error("The MP4 SIDX parser found the wrong box type.")}q(),ie.trigger(s.JWPLAYER_MEDIA_ERROR,{message:"Error playing file: Unknown playback error"})}function _(){return e.map(ie.jwTracks,function(e){return(0,a.qualityLevel)(e)})}function A(){return ie.currentQuality}function S(e){return ie._helperLastVideoHeight=0,p.polyfill.installAll(),new p.Player(e)}function L(e){$||($=S(ie.video)),ie.currentAudioIndex=-1,
(n.isAndroid()||e.preload&&"none"!==e.preload)&&(T(),m(),x(e))}function C(e){T(),m(),ie.setState(r.LOADING),ie.loadedItem!==e?(ie.drmUsed=null,x(e)):(ie.video.currentTime=0,R())}function R(){var e=ie.video.play();e&&e["catch"]?e["catch"](function(e){console.warn(e),"NotAllowedError"===e.name&&ie.video.hasAttribute("jw-gesture-required")&&ie.trigger("autoplayFailed")}):ie.video.hasAttribute("jw-gesture-required")&&ie.trigger("autoplayFailed")}function x(e){var t=e.sources[0].file,i=e.starttime||0;ee=!0,Z=e.sources[0].drm||{},ie.loadedItem=e,ie.setupSideloadedTracks(e.tracks),$.configure({drm:M(),abr:{enabled:ie.abr}}),(e.withCredentials||re.withCredentials)&&$.getNetworkingEngine().registerRequestFilter(function(e,t){t.allowCrossSiteCredentials=!0}),$.load(t,i).then(I,w),ie.on(s.JWPLAYER_PLAYER_STATE,function(){var e=ie.video;ie.state===r.STALLED&&e&&e.buffered&&e.buffered.length>0&&e.currentTime<e.buffered.start(0)&&ie.seek(e.buffered.start(0))})}function I(){ie.trigger(s.JWPLAYER_MEDIA_BUFFER_FULL);
}function P(e){var t=0===e,i=ie.shakaTracks[e-1],n=ie.shakaAudioTracks[U()];ie.abr===t&&A()===e||(ie.abr=t,ie.abr?$.configure({abr:{enabled:ie.abr}}):$.selectTrack(i),$.configure({preferredAudioLanguage:n.language}))}function O(e){var t=ie.shakaAudioTracks[e];$.configure({preferredAudioLanguage:t.language})}function D(){var t,i={};ie.video.textTracks&&"Shaka Player TextTrack"===ie.video.textTracks[0].label&&(ie.video.textTracks[0].embedded=!0,ie.video.textTracks[0].inuse=!0),e.each($.getTracks(),function(e){i[e.type]=i[e.type]||[],i[e.type].push(e)}),i.audio&&i.audio.length>0&&(t="audio",W(i.audio),ie.jwTracks=ie.audioTracks,O(ie.currentAudioIndex)),i.video&&i.video.length>0&&(t="video",N(i.video),P(ie.currentQuality)),ie.trigger(s.JWPLAYER_MEDIA_TYPE,{mediaType:t})}function M(){var e,t,i={},n="";if(h.isSupported("clearkey")&&Z.clearkey)return t=Z.clearkey,t.keyId=t.keyId?t.keyId.replace(/-/g,""):null,i.clearKeys={},i.clearKeys[t.keyId]=t.key,i;if(h.isSupported("widevine"))ie.drmUsed="widevine",
e="com.widevine.alpha",n="http://widevine-proxy.appspot.com/proxy";else{if(!h.isSupported("playready"))return i;ie.drmUsed="playready",e="com.microsoft.playready",n="http://microsoft-proxy.appspot.com/proxy"}return(t=Z[ie.drmUsed])?(i.servers=i.servers||{},i.servers[e]=t.url||n,$.getNetworkingEngine().registerRequestFilter(function(e,i){e===p.net.NetworkingEngine.RequestType.LICENSE&&t&&k(t,i)}),i):i}function N(t){ie.shakaTracks=t,ie.currentQuality=0,t.sort(function(e,t){return e.height&&t.height?t.height-e.height:t.bandwidth-e.bandwidth});var i=n.hasRedundantLevels(t);ie.jwTracks=e.map(t,function(e){return{shakaId:e.id,bitrate:e.bandwidth,label:y(e,i),height:e.height,width:e.width}}),t.length>1&&ie.jwTracks.unshift({label:"Auto",shakaId:"auto"}),ie.trigger(s.JWPLAYER_MEDIA_LEVELS,{levels:ie.jwTracks,currentQuality:ie.currentQuality})}function j(t){return e.map(t,function(r,a){var s=r.language,o=e.where(t,{language:s}).length>1,u=i.getLabel(s);return"und"===s?u="Unknown":"dv"===s&&(u="Audio Description"),
o&&(u+=" ("+n.toKbps(r.bandwidth)+" kbps)"),{autoselect:!1,defaulttrack:r.active,groupid:"default",language:r.language,name:u,shakaIndex:a,shakaId:r.id}})}function F(){var t;return B(ie.currentAudioIndex)?ie.currentAudioIndex:(t=e.find(ie.audioTracks,function(e){return e.defaulttrack&&"dv"!==e.language}),t||(t=e.find(ie.audioTracks,function(e){return"dv"!==e.language})),t?t.shakaIndex:0)}function B(t){return e.isNumber(t)&&!e.isNaN(t)&&t>=0&&t<e.size(ie.audioTracks)}function U(){return B(ie.currentAudioIndex)?ie.currentAudioIndex:-1}function G(){return e.isArray(ie.audioTracks)?ie.audioTracks:[]}function V(e){B(e)&&(ie.trigger(s.JWPLAYER_AUDIO_TRACKS,{tracks:ie.audioTracks,currentTrack:e}),ie.trigger(s.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:ie.audioTracks,currentTrack:e}),O(e),ie.currentAudioIndex=e)}function W(t){e.isArray(t)&&(ie.shakaTracks=t,ie.shakaAudioTracks=t,ie.audioTracks=j(t),ie.currentAudioIndex=F(),ie.trigger(s.JWPLAYER_AUDIO_TRACKS,{tracks:ie.audioTracks,currentTrack:ie.currentAudioIndex
}))}function Y(){ie.video.pause(),ie.setState(r.PAUSED)}function H(){return ie.seeking?(ie.setState(r.LOADING),void ie.once(s.JWPLAYER_MEDIA_SEEKED,ie.play)):(ie.setState(r.LOADING),R(),void ie.setVisibility(ie))}function J(e){if("LIVE"!==ne){var t=$.seekRange(),i=e,n=e;0>e&&(i=t.end-t.start+e,n=t.end+e),ie.trigger(s.JWPLAYER_MEDIA_SEEK,{position:ie.getCurrentTime(),offset:i}),ie.seeking=!0,ie.video.currentTime=n}}function K(e){e=!!e,e?t.style(this.container,{visibility:"visible",opacity:1}):t.style(this.container,{visibility:"",opacity:0})}function q(){T(),ie.clearTracks(),ie.video.pause(),ie.setState(r.IDLE)}function z(){var t=e.findWhere(ie.shakaTracks,{active:!0});if(t)for(var i=0;i<ie.jwTracks.length;i+=1)if(t.id===ie.jwTracks[i].shakaId)return i;return null}function X(e){ie.currentQuality===e||0>e||e>=ie.jwTracks.length||(ie.trigger(s.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:ie.jwTracks}),P(e),O(U()),ie.currentQuality=e,R())}function Q(e){$=e}var $,Z,ee,te={},ie=this,ne="VOD",re=v;
this.video=l.getVideo.call(ie,f),this.loadedItem=null,this.drmUsed=null,this.position=0,this.levels=[],this.currentQuality=-1,this.abr=!0,e.each(u,function(e,t){"function"==typeof e?te[t]=e.bind(ie):ie[t]=e}),ie.adaptation=function(e){ie.shakaTracks||D();var t=$.getStats(),i=b(e.size.height,t.switchHistory,ie.shakaTracks),n=ie.jwTracks?ie.jwTracks[i.index]:null,r=n?n.label:y(i.track),a={level:{index:i.index,label:r,bitrate:t.streamBandwidth,width:e.size.width,height:e.size.height},bandwidth:t.estimatedBandwidth,type:"visualQuality"};ee?(a.reason="initial choice",a.mode="auto",ee=!1):0===ie.currentQuality?a.reason=a.mode="auto":(a.reason="api",a.mode="manual"),ie.trigger("visualQuality",a)},e.extend(ie,o,l,c,d,{eventsOn_:function(){$=S(ie.video),m()},eventsOff_:function(){Z&&n.isFF()?(ie.remove(),ie.video=ie.getVideo(f,ie.container),ie.setContainer(ie.container)):E()},init:L,load:C,pause:Y,getQualityLevels:_,getCurrentQuality:A,getAudioTracks:G,getCurrentAudioTrack:U,play:H,seek:J,setCurrentQuality:X,
setAudioTracks:W,setCurrentAudioTrack:V,setVisibility:K,stop:q,getCurrentTime:function(){var e=ie.video.currentTime;return $.isLive()&&"DVR"===ne&&(e=-($.seekRange().end-e)),e},getDuration:function(){var e=ie.loadedItem.minDvrWindow,t=ie.video.duration;if($.isLive()){var i=$.seekRange();t=-(i.end-i.start),t=n.isDvr(t,e)?t:1/0}return ne=n.streamType(t,e),t},setShakaPlayer:Q,supportsFullscreen:e.constant(!0),getName:e.constant({name:"shaka"}),destroy:E,renderNatively:!0})}var g=window.VTTCue;return p.media.TextEngine.registerParser("text/vtt",f),p.media.TextEngine.registerParser('text/vtt; codecs="vtt"',f),v.getName=e.constant({name:"shaka"}),v}.apply(t,n),!(void 0!==r&&(e.exports=r))},107:function(e,t,i){var n,r;n=[],r=function(){function e(e){return t[e]||e}var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return{getLabel:e}}.apply(t,n),!(void 0!==r&&(e.exports=r))},159:function(e,t,i){var n,r;n=[i(21),i(2)],
r=function(e,t){var i=this;return i.parser=new e(window),i.getCue=function(e){return(t.isIE(11)||t.isEdge())&&window.TextTrackCue?new window.TextTrackCue(e.startTime,e.endTime,e.text):e},i.arrayBufferToString=function(e){var t,i;return e?(t=new Uint8Array(e),239===t[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3)),i=String.fromCharCode.apply(null,t),window.decodeURIComponent(window.escape(i))):""},i.parseCuesFromText=function(e){var t=[];return i.parser.oncue=function(e){t.push(i.getCue(e))},i.parser.parse(e),t},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},160:function(e,t,i){var n,r;n=[i(159)],r=function(e){return function(t){var i,n=e.arrayBufferToString(t);return n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),i=e.parseCuesFromText(n)}}.apply(t,n),!(void 0!==r&&(e.exports=r))},171:function(e,t,i){var n;!function(){var r={};(function(e){function t(e,t){var i=e.split("."),n=ea;i[0]in n||!n.execScript||n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===t?n=n[r]?n[r]:n[r]={}:n[r]=t;
}function i(e){function t(){}var i=L;t.prototype=i.prototype,e.qd=i.prototype,e.prototype=new t,e.prototype.constructor=e,e.nd=function(e,t,n){return i.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function n(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function r(e,t,i){var n=Math.pow(e.c,t);i=i*(1-n)+n*e.a,isNaN(i)||(e.a=i,e.b+=t)}function a(e){return e.a/(1-Math.pow(e.c,e.b))}function s(){this.c=new n(2),this.f=new n(5),this.a=0,this.b=5e5}function o(){}function u(){}function l(){this.h=null,this.f=!1,this.b=new s,this.g={},this.a={},this.i=!1,this.c=null}function c(e){return(e=e.g.audio)?(e=h(e),e[Math.floor(e.length/2)]):null}function d(e){var t=e.g.video;if(!t)return null;var t=h(t),i=e.a.audio,i=i&&i.bandwidth||0;e=e.b.getBandwidthEstimate();for(var n=t[0],r=0;r<t.length;++r){var a=t[r];if(a.bandwidth){var s=((r+1<t.length?t[r+1]:{bandwidth:1/0}).bandwidth+i)/.85;e>=(a.bandwidth+i)/.95&&s>=e&&(n=a)}}return n}function h(e){return e.streams.slice(0).filter(function(e){
return e.allowedByApplication&&e.allowedByKeySystem}).sort(function(e,t){return e.bandwidth-t.bandwidth})}function f(t,i){var n,r=i||{};for(n in r)this[n]=r[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function p(e){return JSON.stringify(e,function(e,t){if("manager"!=e&&"function"!=typeof t){if(t instanceof Event||t instanceof f){var i,n={};for(i in t){var r=t[i];r&&"object"==typeof r||i in Event||(n[i]=r)}return n}if(t instanceof TimeRanges)for(n={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=0;i<t.length;++i)n.start.push(t.start(i)),n.end.push(t.end(i));else n="number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return n}})}function v(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-(1/0):"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?g(t):t})}function g(e){
return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}function m(e,t,i){this.category=e,this.code=t,this.data=Array.prototype.slice.call(arguments,2)}function y(){var e,t,i=new Promise(function(i,n){e=i,t=n});return i.resolve=e,i.reject=t,i}function b(e,t,i,n,r){this.C=e,this.l=t,this.A=i,this.B=n,this.s=r,this.f=this.j=this.h=!1,this.v="",this.a=this.i=null,this.b={video:{},player:{}},this.m=0,this.c={},this.g=null}function T(e){for(var t in e.c){var i=e.c[t];delete e.c[t],i.reject(new m(7,7e3))}}function E(e,t){var i=p(t);e.a.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},o)}function k(){this.a={}}function w(){this.a=new k}function _(e,t,i,n){t=new S(t,i,n),e.a.push(i,t)}function A(e){var t,i=e.a,n=[];for(t in i.a)n.push.apply(n,i.a[t]);for(i=0;i<n.length;++i)n[i].la();e.a.a={}}function S(e,t,i){this.target=e,this.type=t,this.a=i,this.target.addEventListener(t,i,!1)}function L(){this.Ba=new k,this.U=this}function C(e,t,i){L.call(this),
this.c=e,this.b=t,this.h=this.f=this.g=this.i=this.j=null,this.a=new b(i,this.Vc.bind(this),this.Wc.bind(this),this.Xc.bind(this),this.qb.bind(this)),R(this)}function R(e){e.a.init(),e.h=new w,ta.forEach(function(e){_(this.h,this.c,e,this.kd.bind(this))}.bind(e)),aa.forEach(function(e){_(this.h,this.b,e,this.Cc.bind(this))}.bind(e)),e.j={};for(var t in e.c)Object.defineProperty(e.j,t,{configurable:!1,enumerable:!0,get:e.jd.bind(e,t),set:e.ld.bind(e,t)});e.i={};for(t in e.b)Object.defineProperty(e.i,t,{configurable:!1,enumerable:!0,get:e.Bc.bind(e,t)});e.g=new L,e.g.U=e.j,e.f=new L,e.f.U=e.i}function x(e,t,i){L.call(this),this.b=e,this.a=t,this.i={video:e,player:t},this.j=i||function(){},this.h=!1,this.c=!0,this.f=this.g=null,I(this)}function I(t){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=t.Ab.bind(t),i.onSenderDisconnected=t.Ab.bind(t),i.onSystemVolumeChanged=t.Xb.bind(t),t.g=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.g.onMessage=t.mc.bind(t),
i.start(),ta.forEach(function(e){this.b.addEventListener(e,this.Db.bind(this,"video"))}.bind(t)),aa.forEach(function(e){this.a.addEventListener(e,this.Db.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.a.gb(3840,2160):t.a.gb(1920,1080),t.a.addEventListener("loading",function(){this.c=!1,P(this)}.bind(t)),t.b.addEventListener("playing",function(){this.c=!1,P(this)}.bind(t)),t.a.addEventListener("unloading",function(){this.c=!0,P(this)}.bind(t)),t.b.addEventListener("ended",function(){e.setTimeout(function(){this.b&&this.b.ended&&(this.c=!0,P(this))}.bind(this),5e3)}.bind(t))}function P(e){Promise.resolve().then(function(){this.dispatchEvent(new f("caststatuschanged"))}.bind(e))}function O(e,t,i){for(var n in t.player)e.a[n](t.player[n]);e.j(i),i=Promise.resolve();var r=e.b.autoplay;t.manifest&&(e.b.autoplay=!1,i=e.a.load(t.manifest,t.startTime),i["catch"](function(e){this.a.dispatchEvent(new f("error",{
detail:e}))}.bind(e))),i.then(function(){for(var e in t.video){var i=t.video[e];this.b[e]=i}for(e in t.playerAfterLoad)i=t.playerAfterLoad[e],this.a[e](i);this.b.autoplay=r,t.manifest&&this.b.play()}.bind(e))}function D(e,t,i){e.h&&(t=p(t),i?e.g.getCastChannel(i).send(t):e.g.broadcast(t))}function M(e,t){return e.reduce(function(e,t,i){return t["catch"](e.bind(null,i))}.bind(null,t),Promise.reject())}function N(e,t){return e.concat(t)}function j(){}function F(e){return null!=e}function B(e){return function(t){return t!=e}}function U(e,t,i){return i.indexOf(e)==t}function G(e){return!e||!Object.keys(e).length}function V(e){return Object.keys(e).map(function(t){return e[t]})}function W(e,t){return Object.keys(e).reduce(function(i,n){return i[n]=t(e[n],n),i},{})}function Y(e,t){return Object.keys(e).every(function(i){return t(i,e[i])})}function H(t){return e.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function J(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));
for(var i=new Uint8Array(t.length),n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}function K(t){for(var i=new Uint8Array(t.length/2),n=0;n<t.length;n+=2)i[n/2]=e.parseInt(t.substr(n,2),16);return i}function q(e){for(var t="",i=0;i<e.length;++i){var n=e[i].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function z(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!=t[i])return!1;return!0}function X(e,t){var i=Q(e,t);return 1!=i.length?null:i[0]}function Q(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e.tagName==t})}function $(e){var t=e.firstChild;return t&&t.nodeType==Node.TEXT_NODE?e.textContent.trim():null}function Z(e,t,i,n){var r=null;return e=e.getAttribute(t),null!=e&&(r=i(e)),null==r?void 0!==n?n:null:r}function ee(e){return e?(e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function te(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),
isFinite(e)?e:null):null}function ie(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ne(e){return e=Number(e),e%1?null:e}function re(e){return e=Number(e),!(e%1)&&e>0?e:null}function ae(e){return e=Number(e),!(e%1)&&e>=0?e:null}function se(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1]/t[2]):Number(e),isNaN(e)?null:e}function oe(e,t){var i=de(e),n=null,r=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Ib||(n=e.init||n,!1)}),a=i.map(function(e){return e.keyId}).filter(F),s=null;if(0<a.length&&(s=a[0],a.some(B(s))))throw new m(4,4010);return a=[],0<r.length?(a=ce(n,t,r),a.length||(a=[le("",n)])):0<i.length&&(a=V(da).map(function(e){return le(e,n)})),{nb:s,od:n,drmInfos:a,pb:!0}}function ue(e,t,i){var n=oe(e,t);if(i.pb)e=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,t=!n.drmInfos.length,(!i.drmInfos.length||e&&!t)&&(i.drmInfos=n.drmInfos),i.pb=!1;else if(0<n.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(e){
return n.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),!i.drmInfos.length))throw new m(4,4008);return n.nb||i.nb}function le(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}function ce(e,t,i){return i.map(function(i){var n=da[i.Ib];return n?[le(n,i.init||e)]:t(i.node)||[]}).reduce(N,[])}function de(e){return e.map(function(e){var t=e.getAttribute("schemeIdUri"),i=e.getAttribute("cenc:default_KID"),n=Q(e,"cenc:pssh").map($);if(!t)return null;if(t=t.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),0<=i.indexOf(" ")))throw new m(4,4009);var r=[];try{r=n.map(function(e){return{initDataType:"cenc",initData:J(e)}})}catch(a){throw new m(4,4007)}return{node:e,Ib:t,keyId:i,init:0<r.length?r:null}}).filter(F)}function he(e){var t;e instanceof he?(fe(this,e.T),this.ma=e.ma,this.V=e.V,pe(this,e.ya),this.P=e.P,ve(this,Te(e.a)),this.da=e.da):e&&(t=String(e).match(ha))?(fe(this,t[1]||"",!0),
this.ma=ge(t[2]||""),this.V=ge(t[3]||"",!0),pe(this,t[4]),this.P=ge(t[5]||"",!0),ve(this,t[6]||"",!0),this.da=ge(t[7]||"")):this.a=new be(null)}function fe(e,t,i){e.T=i?ge(t,!0):t,e.T&&(e.T=e.T.replace(/:$/,""))}function pe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.ya=t}else e.ya=null}function ve(e,t,i){t instanceof be?e.a=t:(i||(t=me(t,ga)),e.a=new be(t))}function ge(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function me(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,ye),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ye(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function be(e){this.b=e||null}function Te(e){var t=new be;if(t.b=e.b,e.a){var i,n={};for(i in e.a)n[i]=e.a[i].concat();t.a=n,t.c=e.c}return t}function Ee(e,t,i){this.a=e,this.M=t,this.D=i}function ke(e,t,i,n,r,a){this.position=e,this.startTime=t,this.endTime=i,this.a=n,this.M=r,this.D=a}function we(t,i,n,r,a){null!==a&&(a=Math.round(a));
var s={RepresentationID:i,Number:n,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,i,n){if("$$"==t)return"$";var r=s[i];return null==r?t:("RepresentationID"==i&&n&&(n=void 0),t=r.toString(),n=e.parseInt(n,10)||1,Array(Math.max(0,n-t.length)+1).join("0")+t)})}function _e(e,t,i){if(i.length){var n=i[0];n.startTime<=ya&&(i[0]=new ke(n.position,0,n.endTime,n.a,n.M,n.D)),e||(e=i[i.length-1],e.startTime>t||(i[i.length-1]=new ke(e.position,e.startTime,t,e.a,e.M,e.D)))}}function Ae(e,t){if(!t.length)return e;var i=t.map(function(e){return new he(e)});return e.map(function(e){return new he(e)}).map(function(e){return i.map(e.resolve.bind(e))}).reduce(N,[]).map(function(e){return e.toString()})}function Se(e,t){var i=Le(e,t,"timescale"),n=1;i&&(n=re(i)||1),i=Le(e,t,"duration"),(i=re(i||""))&&(i/=n);var r=Le(e,t,"startNumber"),a=Le(e,t,"presentationTimeOffset"),s=ae(r||"");null!=r&&null!=s||(s=1);var o=Ce(e,t,"SegmentTimeline"),r=null;
if(o){for(var r=n,u=Number(a),l=e.I.duration||1/0,o=Q(o,"S"),c=[],d=0,h=0;h<o.length;++h){var f=o[h],p=Z(f,"t",ae),v=Z(f,"d",ae),f=Z(f,"r",ne);if(null!=p&&(p-=u),!v)break;if(p=null!=p?p:d,f=f||0,0>f)if(h+1<o.length){if(f=Z(o[h+1],"t",ae),null==f)break;if(p>=f)break;f=Math.ceil((f-p)/v)-1}else{if(1/0==l)break;if(p/r>=l)break;f=Math.ceil((l*r-p)/v)-1}0<c.length&&p!=d&&(c[c.length-1].end=p/r);for(var g=0;f>=g;++g)d=p+v,c.push({start:p/r,end:d/r,gd:p}),p=d}r=c}return{timescale:n,G:i,ja:s,presentationTimeOffset:Number(a)/n||0,lb:Number(a),w:r}}function Le(e,t,i){return[t(e.u),t(e.R),t(e.L)].filter(F).map(function(e){return e.getAttribute(i)}).reduce(function(e,t){return e||t})}function Ce(e,t,i){return[t(e.u),t(e.R),t(e.L)].filter(F).map(function(e){return X(e,i)}).reduce(function(e,t){return e||t})}function Re(e){if(!e)return"";e=new Uint8Array(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(Oe(e));try{return decodeURIComponent(e)}catch(t){throw new m(2,2004)}}function xe(e,t){
if(!e)return"";if(e.byteLength%2)throw new m(2,2004);var i;if(e instanceof ArrayBuffer)i=e;else{var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(e)),i=n.buffer}var n=e.byteLength/2,r=new Uint16Array(n);i=new DataView(i);for(var a=0;n>a;a++)r[a]=i.getUint16(2*a,t);return Oe(r)}function Ie(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return Re(t);if(254==t[0]&&255==t[1])return xe(t.subarray(2),!1);if(255==t[0]&&254==t[1])return xe(t.subarray(2),!0);var i=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(!t[0]&&!t[2])return xe(e,!1);if(!t[1]&&!t[3])return xe(e,!0);if(i(0)&&i(1)&&i(2)&&i(3))return Re(e);throw new m(2,2003)}function Pe(e){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t.buffer}function Oe(e){for(var t="",i=0;i<e.length;i+=16e3)t+=String.fromCharCode.apply(null,e.subarray(i,i+16e3));return t}function De(e){this.b=e,this.c=0==ba,this.a=0}function Me(e){return e.a<e.b.byteLength;
}function Ne(e){try{var t=e.b.getUint8(e.a)}catch(i){We()}return e.a+=1,t}function je(e){try{var t=e.b.getUint16(e.a,e.c)}catch(i){We()}return e.a+=2,t}function Fe(e){try{var t=e.b.getUint32(e.a,e.c)}catch(i){We()}return e.a+=4,t}function Be(e){var t,i;try{e.c?(t=e.b.getUint32(e.a,!0),i=e.b.getUint32(e.a+4,!0)):(i=e.b.getUint32(e.a,!1),t=e.b.getUint32(e.a+4,!1))}catch(n){We()}if(i>2097151)throw new m(3,3001);return e.a+=8,i*Math.pow(2,32)+t}function Ue(e,t){e.a+t>e.b.byteLength&&We();var i=e.b.buffer.slice(e.a,e.a+t);return e.a+=t,new Uint8Array(i)}function Ge(e,t){e.a+t>e.b.byteLength&&We(),e.a+=t}function Ve(e){var t=e.a;try{for(;Me(e)&&e.b.getUint8(e.a);)e.a+=1}catch(i){We()}return t=e.b.buffer.slice(t,e.a),e.a+=1,Re(t)}function We(){throw new m(3,3e3)}function Ye(e,t){for(;Me(t);){var i=t.a,n=Fe(t),r=Fe(t);if(1==n?n=Be(t):n||(n=t.b.byteLength-i),r==e)return n;Ge(t,n-(t.a-i))}return-1}function He(e,t){for(var i=new De(new DataView(e)),n=[[1836019574,0],[1953653099,0],[1835297121,0],[1835626086,0],[1937007212,0],[1937011556,8],[t,0]],r=-1,a=0;a<n.length;a++){
var s=n[a][1],r=Ye(n[a][0],i);if(-1==r)return-1;Ge(i,s)}return r}function Je(e,t,i,n){var r=[];e=new De(new DataView(e));var a=Ye(1936286840,e);if(-1==a)throw new m(3,3004);var s=Ne(e);Ge(e,3),Ge(e,4);var o=Fe(e);if(!o)throw new m(3,3005);var u,l;for(s?(u=Be(e),l=Be(e)):(u=Fe(e),l=Fe(e)),Ge(e,2),s=je(e),n=u-n,t=t+a+l,a=0;s>a;a++){u=Fe(e),l=(2147483648&u)>>>31,u&=2147483647;var c=Fe(e);if(Ge(e,4),1==l)throw new m(3,3006);r.push(new ke(r.length,n/o,(n+c)/o,function(){return i},t,t+u-1)),n+=c,t+=u}return r}function Ke(e){this.a=e}function qe(e){this.b=e,this.a=new De(e),Ta||(Ta=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ze(e){var t;if(t=Xe(e),7<t.length)throw new m(3,3002);for(var i=0,n=0;n<t.length;n++)i=256*i+t[n];t=i,i=Xe(e);e:{for(n=0;n<Ta.length;n++)if(z(i,Ta[n])){
n=!0;break e}n=!1}if(n)i=e.b.byteLength-e.a.a;else{if(8==i.length&&224&i[1])throw new m(3,3001);for(var n=i[0]&(1<<8-i.length)-1,r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=e.a.a+i<=e.b.byteLength?i:e.b.byteLength-e.a.a,n=new DataView(e.b.buffer,e.b.byteOffset+e.a.a,i),Ge(e.a,i),new Qe(t,n)}function Xe(e){var t,i=Ne(e.a);for(t=1;8>=t&&!(i&1<<8-t);t++);if(t>8)throw new m(3,3002);var n=new Uint8Array(t);for(n[0]=i,i=1;t>i;i++)n[i]=Ne(e.a);return n}function Qe(e,t){this.id=e,this.a=t}function $e(e){if(8<e.a.byteLength)throw new m(3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new m(3,3001);for(var t=0,i=0;i<e.a.byteLength;i++)var n=e.a.getUint8(i),t=256*t+n;return t}function Ze(e,t,i,n,r,a){function s(){return r}var o=[];e=new qe(e.a);for(var u=-1,l=-1;Me(e.a);){var c=ze(e);if(187==c.id){var d=et(c);d&&(c=i*(d.hd-a),d=t+d.Fc,u>=0&&o.push(new ke(o.length,u,c,s,l,d-1)),u=c,l=d)}}return u>=0&&o.push(new ke(o.length,u,n,s,l,null)),o}function et(e){var t=new qe(e.a);if(e=ze(t),179!=e.id)throw new m(3,3013);
if(e=$e(e),t=ze(t),183!=t.id)throw new m(3,3012);for(var t=new qe(t.a),i=0;Me(t.a);){var n=ze(t);if(241==n.id){i=$e(n);break}}return{hd:e,Fc:i}}function tt(e,t){var i=Ce(e,t,"Initialization");if(!i)return null;var n=e.u.N,r=i.getAttribute("sourceURL");r&&(n=Ae(e.u.N,[r]));var r=0,a=null;return(i=Z(i,"range",ie))&&(r=i.start,a=i.end),new Ee(function(){return n},r,a)}function it(e,t){var i,n=Le(e,rt,"presentationTimeOffset"),r=tt(e,rt);i=Number(n);var a=e.u.contentType,s=e.u.mimeType.split("/")[1];if("text"!=a&&"mp4"!=s&&"webm"!=s)throw new m(4,4006);if("webm"==s&&!r)throw new m(4,4005);var a=Ce(e,rt,"RepresentationIndex"),o=Le(e,rt,"indexRange"),u=e.u.N,o=ie(o||"");if(a){var l=a.getAttribute("sourceURL");l&&(u=Ae(e.u.N,[l])),o=Z(a,"range",ie,o)}if(!o)throw new m(4,4002);return i=nt(e,t,r,u,o.start,o.end,s,i),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,presentationTimeOffset:Number(n)||0
}}function nt(e,t,i,n,r,a,s,o){var u=e.presentationTimeline,l=e.I.start,c=e.I.duration,d=t,h=null;return{createSegmentIndex:function(){var t=[d(n,r,a),"webm"==s?d(i.a(),i.M,i.D):null];return d=null,Promise.all(t).then(function(t){var i,a,d=t[0];if(t=t[1]||null,"mp4"==s)d=Je(d,r,n,o);else{if(t=new qe(new DataView(t)),440786851!=ze(t).id)throw new m(3,3008);if(a=ze(t),408125543!=a.id)throw new m(3,3009);for(t=a.a.byteOffset,a=new qe(a.a),i=null;Me(a.a);){var f=ze(a);if(357149030==f.id){i=f;break}}if(!i)throw new m(3,3010);for(i=new qe(i.a),f=1e6,a=null;Me(i.a);){var p=ze(i);if(2807729==p.id)f=$e(p);else if(17545==p.id)if(a=p,4==a.a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new m(3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new m(3,3011);if(i=f/=1e9,a*=f,d=ze(new qe(new DataView(d))),475249515!=d.id)throw new m(3,3007);d=Ze(d,t,i,a,n,o)}_e(e.Sa,c,d),u.Ha(l,d),h=new Ke(d)})},findSegmentPosition:function(e){return h.find(e)},getSegmentReference:function(e){return h.get(e);
}}}function rt(e){return e.Ia}function at(e,t){var i,n=tt(e,st);i=ut(e);var r=Se(e,st),a=r.ja;a||(a=1);var s=0;if(r.G?s=r.G*(a-1):r.w&&0<r.w.length&&(s=r.w[0].start),i={G:r.G,startTime:s,ja:a,presentationTimeOffset:r.presentationTimeOffset,w:r.w,wa:i},!i.G&&!i.w&&1<i.wa.length)throw new m(4,4002);if(!i.G&&!e.I.duration&&!i.w&&1==i.wa.length)throw new m(4,4002);if(i.w&&!i.w.length)throw new m(4,4002);return a=r=null,e.L.id&&e.u.id&&(a=e.L.id+","+e.u.id,r=t[a]),s=ot(e.I.duration,i.ja,e.u.N,i),_e(e.Sa,e.I.duration,s),r?(r.Za(s),r.Ta(e.presentationTimeline.ua()-e.I.start)):(e.presentationTimeline.Ha(e.I.start,s),r=new Ke(s),a&&(t[a]=r)),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,presentationTimeOffset:i.presentationTimeOffset}}function st(e){return e.$}function ot(e,t,i,n){var r=n.wa.length;n.w&&n.w.length!=n.wa.length&&(r=Math.min(n.w.length,n.wa.length));for(var a=[],s=n.startTime,o=0;r>o;o++){
var u,l=n.wa[o],c=Ae(i,[l.ic]);u=null!=n.G?s+n.G:n.w?n.w[o].end:s+e,a.push(new ke(o+t,s,u,function(e){return e}.bind(null,c),l.start,l.end)),s=u}return a}function ut(e){return[e.u.$,e.R.$,e.L.$].filter(F).map(function(e){return Q(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.tb&&(e.tb=!0);var i=t.getAttribute("media");return t=Z(t,"mediaRange",ie,{start:0,end:null}),{ic:i,start:t.start,end:t.end}})}function lt(e,t,i,n){var r,a=ft(e);r=Se(e,ct);var s=Le(e,ct,"media"),o=Le(e,ct,"index");if(r={G:r.G,timescale:r.timescale,ja:r.ja,presentationTimeOffset:r.presentationTimeOffset,lb:r.lb,w:r.w,Ya:s,Fa:o},s=0+(r.Fa?1:0),s+=r.w?1:0,s+=r.G?1:0,!s)throw new m(4,4002);if(1!=s&&(r.Fa&&(r.w=null),r.G=null),!r.Fa&&!r.Ya)throw new m(4,4002);if(r.Fa){if(i=e.u.mimeType.split("/")[1],"mp4"!=i&&"webm"!=i)throw new m(4,4006);if("webm"==i&&!a)throw new m(4,4005);n=we(r.Fa,e.u.id,null,e.bandwidth||null,null),n=Ae(e.u.N,[n]),e=nt(e,t,a,n,0,null,i,r.presentationTimeOffset);
}else r.G?(n||e.presentationTimeline.$a(r.G),e=dt(e,r)):(n=t=null,e.L.id&&e.u.id&&(n=e.L.id+","+e.u.id,t=i[n]),s=ht(e,r),_e(e.Sa,e.I.duration,s),t?(t.Za(s),t.Ta(e.presentationTimeline.ua()-e.I.start)):(e.presentationTimeline.Ha(e.I.start,s),t=new Ke(s),n&&(i[n]=t)),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:a,presentationTimeOffset:r.presentationTimeOffset}}function ct(e){return e.Ja}function dt(e,t){var i=e.I.duration,n=t.G,r=t.ja,a=t.timescale,s=t.Ya,o=e.bandwidth||null,u=e.u.id,l=e.u.N;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||i&&e>=i?null:Math.floor(e/n)},getSegmentReference:function(e){var t=e*n;return 0>t||i&&t>=i?null:new ke(e,t,t+n,function(){var i=we(s,u,e+r,o,t*a);return Ae(l,[i])},0,null)}}}
function ht(e,t){for(var i=[],n=0;n<t.w.length;n++){var r=n+t.ja;i.push(new ke(r,t.w[n].start,t.w[n].end,function(e,t,i,n,r,a){return e=we(e,t,r,i,a),Ae(n,[e]).map(function(e){return e.toString()})}.bind(null,t.Ya,e.u.id,e.bandwidth||null,e.u.N,r,t.w[n].gd+t.lb),0,null))}return i}function ft(e){var t=Le(e,ct,"initialization");if(!t)return null;var i=e.u.id,n=e.bandwidth||null,r=e.u.N;return new Ee(function(){var e=we(t,i,null,n,null);return Ae(r,[e])},0,null)}function pt(e){this.f=!1,this.a=[],this.b=[],this.c=[],this.h=e||null}function vt(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function gt(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t}}function mt(){var e,t={};for(e in ka)t[e]=!0;for(e in wa)t[e]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(e){t[e]=!!ka[e]}),["mpd","m3u8","ism"].forEach(function(e){t[e]=!!wa[e];
}),t}function yt(e,t,i,n){var r=n;return r||(n=new he(e).P.split("/").pop().split("."),1<n.length&&(n=n.pop().toLowerCase(),r=wa[n])),r?Promise.resolve(r):(i=gt([e],i),i.method="HEAD",t.request(0,i).then(function(t){return(t=t.headers["content-type"])&&(t=t.toLowerCase()),(r=ka[t])?r:Promise.reject(new m(4,4e3,e))},function(e){return Promise.reject(e)}))}function bt(e,t){this.j=e,this.i=t,this.c=this.a=1/0,this.b=1,this.h=this.f=0,this.g=!0}function Tt(e,t,i){this.g=_a[t],this.c=e,this.h=0,this.f=1/0,this.a=this.b=null,this.i=i}function Et(e,t,i){return e>=t?null:new VTTCue(e,t,i)}function kt(e,t,i,n){var r=e.h;return Promise.resolve().then(function(){if(this.c){var e=this.g(t,r,i,n,this.i);if(null!=i&&null!=n){for(var a=0;a<e.length&&!(e[a].startTime>=this.f);++a)this.c.addCue(e[a]);null==this.b&&(this.b=i),this.a=Math.min(n,this.f)}}}.bind(e))}function wt(e,t){return null==e.a||e.a<t||t<e.b?0:e.a-t}function _t(e,t){for(var i=e.c.cues,n=[],r=0;r<i.length;++r)t(i[r])&&n.push(i[r]);for(r=0;r<n.length;++r)e.c.removeCue(n[r]);
}function At(e,t,i){return i==t||e>=Aa&&i==t.split("-")[0]||e>=Sa&&i.split("-")[0]==t.split("-")[0]}function St(e){e=e.toLowerCase().split("-");var t=La[e[0]];return t&&(e[0]=t),e.join("-")}function Lt(e,t,i){for(var n=0;n<e.length;++n)if(i(e[n],t))return n;return-1}function Ct(e){this.a=null,this.b=function(){this.a=null,e()}.bind(this)}function Rt(e){e.cancel(),e.a=setTimeout(e.b,100)}function xt(e,t,i){this.l=this.h=this.s=null,this.B=!1,this.b=null,this.f=new w,this.a=[],this.m=[],this.j=new y,this.H=e,this.i=null,this.g=function(e){this.j.reject(e),t(e)}.bind(this),this.A={},this.K=i,this.v=new Ct(this.Dc.bind(this)),this.C=this.c=!1,this.j["catch"](function(){})}function It(e,t){if(!e.h)return _(e.f,t,"encrypted",function(){this.f.la(t,"encrypted"),this.g(new m(6,6010))}.bind(e)),Promise.resolve();e.l=t;var i=e.l.setMediaKeys(e.h),i=i["catch"](function(e){return Promise.reject(new m(6,6003,e.message))}),n=null;return e.b.serverCertificate&&(n=e.h.setServerCertificate(e.b.serverCertificate),
n=n["catch"](function(e){return Promise.reject(new m(6,6004,e.message))})),Promise.all([i,n]).then(function(){return this.c?Promise.reject():(Ot(this),void(this.b.initData.length||this.m.length||_(this.f,this.l,"encrypted",this.jc.bind(this))))}.bind(e))["catch"](function(e){return this.c?Promise.resolve():Promise.reject(e)}.bind(e))}function Pt(e,t){return Promise.all(t.map(function(e){return Gt(this,e).then(function(e){if(e){for(var t=new y,i=0;i<this.a.length;i++)if(this.a[i].ha==e){this.a[i].Oa=t;break}return Promise.all([e.remove(),t])}}.bind(this))}.bind(e)))}function Ot(e){var t=e.b?e.b.initData:[];return t.forEach(function(e){Vt(this,e.initDataType,e.initData)}.bind(e)),e.m.forEach(function(e){Gt(this,e)}.bind(e)),t.length||e.m.length||e.j.resolve(),e.j}function Dt(e){return e.a.map(function(e){return e.ha.sessionId})}function Mt(e,t,i,n,r){var a=Ft(e);t.periods.forEach(function(e){e.streamSets.forEach(function(e){"text"!=e.type&&(a&&(e.drmInfos=[a]),e.drmInfos.forEach(function(t){
jt(this,t);var a=n[t.keySystem];a||(a={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:i?"required":"optional",sessionTypes:[i?"persistent-license":"temporary"],label:t.keySystem,drmInfos:[]},n[t.keySystem]=a,r.push(t.keySystem)),a.drmInfos.push(t),t.distinctiveIdentifierRequired&&(a.distinctiveIdentifier="required"),t.persistentStateRequired&&(a.persistentState="required");var s="video"==e.type?a.videoCapabilities:a.audioCapabilities,o=("video"==e.type?t.videoRobustness:t.audioRobustness)||"";e.streams.forEach(function(e){var i=e.mimeType;e.codecs&&(i+='; codecs="'+e.codecs+'"'),e.keyId&&t.keyIds.push(e.keyId),s.push({robustness:o,contentType:i})}.bind(this))}.bind(this)))}.bind(this))}.bind(e))}function Nt(e,t,i){if(1==i.length&&""==i[0])return Promise.reject(new m(6,6e3));var n=new y,r=n;return[!0,!1].forEach(function(e){i.forEach(function(i){var n=t[i];n.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(n.audioCapabilities.length||delete n.audioCapabilities,
n.videoCapabilities.length||delete n.videoCapabilities,r=r["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(i,[n])}.bind(this)))}.bind(this))}.bind(e)),r=r["catch"](function(){return Promise.reject(new m(6,6001))}),r=r.then(function(e){if(this.c)return Promise.reject();var i=0<=navigator.userAgent.indexOf("Edge/"),n=e.getConfiguration();return this.s=(n.audioCapabilities||[]).concat(n.videoCapabilities||[]).map(function(e){return e.contentType}),i&&(this.s=null),i=t[e.keySystem],Bt(this,e.keySystem,i,i.drmInfos),this.b.licenseServerUri?e.createMediaKeys():Promise.reject(new m(6,6012))}.bind(e)).then(function(e){return this.c?Promise.reject():(this.h=e,void(this.B=!0))}.bind(e))["catch"](function(e){return this.c?Promise.resolve():(this.s=this.b=null,e instanceof m?Promise.reject(e):Promise.reject(new m(6,6002,e.message)))}.bind(e)),n.reject(),r}function jt(e,t){var i=t.keySystem;if(i){if(!t.licenseServerUri){var n=e.i.servers[i];n&&(t.licenseServerUri=n);
}t.keyIds||(t.keyIds=[]),(i=e.i.advanced[i])&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate))}}function Ft(t){if(G(t.i.clearKeys))return null;var i,n=[],r=[];for(i in t.i.clearKeys){var a=t.i.clearKeys[i],s=K(i),a=K(a),s={kty:"oct",kid:H(s),k:H(a)};n.push(s),r.push(s.kid)}return t=JSON.stringify({keys:n}),r=JSON.stringify({kids:r}),r=[{initData:new Uint8Array(Pe(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}function Bt(e,t,i,n){var r=[],a=[],s=[],o=[];Ut(n,r,a,s,o),e.b={keySystem:t,
licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:i.audioCapabilities?i.audioCapabilities[0].robustness:"",videoRobustness:i.videoCapabilities?i.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:s,keyIds:o}}function Ut(e,t,i,n,r){function a(e,t){return e.initDataType==t.initDataType&&z(e.initData,t.initData)}e.forEach(function(e){if(-1==t.indexOf(e.licenseServerUri)&&t.push(e.licenseServerUri),e.serverCertificate&&-1==Lt(i,e.serverCertificate,z)&&i.push(e.serverCertificate),e.initData&&e.initData.forEach(function(e){-1==Lt(n,e,a)&&n.push(e)}),e.keyIds)for(var s=0;s<e.keyIds.length;++s)-1==r.indexOf(e.keyIds[s])&&r.push(e.keyIds[s])})}function Gt(e,t){var i;try{i=e.h.createSession("persistent-license")}catch(n){var r=new m(6,6005,n.message);return e.g(r),Promise.reject(r)}_(e.f,i,"message",e.Bb.bind(e)),_(e.f,i,"keystatuseschange",e.wb.bind(e));var a={initData:null,
ha:i,loaded:!1,Oa:null};return e.a.push(a),i.load(t).then(function(e){if(!this.c){if(e)return a.loaded=!0,this.a.every(function(e){return e.loaded})&&this.j.resolve(),i;this.a.splice(this.a.indexOf(a),1),this.g(new m(6,6013))}}.bind(e),function(e){this.c||(this.a.splice(this.a.indexOf(a),1),this.g(new m(6,6005,e.message)))}.bind(e))}function Vt(e,t,i){var n;try{n=e.C?e.h.createSession("persistent-license"):e.h.createSession()}catch(r){return void e.g(new m(6,6005,r.message))}_(e.f,n,"message",e.Bb.bind(e)),_(e.f,n,"keystatuseschange",e.wb.bind(e)),e.a.push({initData:i,ha:n,loaded:!1,Oa:null}),n.generateRequest(t,i.buffer)["catch"](function(e){if(!this.c){for(var t=0;t<this.a.length;++t)if(this.a[t].ha==n){this.a.splice(t,1);break}this.g(new m(6,6006,e.message))}}.bind(e))}function Wt(e){for(var t=xe(e.body,!0),t=(new DOMParser).parseFromString(t,"application/xml"),i=t.getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)e.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;
e.body=J(t.querySelector("Challenge").textContent).buffer}function Yt(){var e=[],t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],i=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],n={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(t){var r=navigator.requestMediaKeySystemAccess(t,i).then(function(e){var i=e.getConfiguration().sessionTypes;return n[t]={persistentState:!!i&&0<=i.indexOf("persistent-license")},e.createMediaKeys()})["catch"](function(){n[t]=null});e.push(r)}),Promise.all(e).then(function(){return n})}function Ht(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Jt(e,t){var i=0;if(!e||1==e.length&&1e-6>e.end(0)-e.start(0))return i;var n=!1,r=1e-4;t||(r=.25);for(var a=0;a<e.length;++a)if(t+r>=e.start(a)&&t<e.end(a))i+=e.end(a)-t,
n=!0;else if(n&&.04>=e.start(a)-e.end(a-1))i+=e.end(a)-e.start(a),i+=e.start(a)-e.end(a-1);else if(a>0&&t+r<e.start(a)&&t+r>=e.end(a-1)){if(!(.04>=e.start(a)-t))break;i+=e.end(a)-t,n=!0}else n=!1;return i}function Kt(e,t,i){var n=Jt(e,t);return n||(n=Jt(e,t+i))&&(n+=i),n}function qt(e,t,i){this.f=e,this.F=t,this.i=i,this.c={},this.b=null,this.a={},this.g=new w,this.h=!1}function zt(){var e={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(t){
e[t]=!!_a[t]||MediaSource.isTypeSupported(t);var i=t.split(";")[0];e[i]=e[i]||e[t]}),e}function Xt(e,t){var i;return"text"==t?i=e.b.b:(i=$t(e,t),i=!i||1==i.length&&1e-6>i.end(0)-i.start(0)?null:1==i.length&&0>i.start(0)?0:i.length?i.start(0):null),i}function Qt(e,t,i,n){return"text"==t?(t=wt(e.b,i),!t&&n&&(t=wt(e.b,i+n))&&(t+=n)):(e=$t(e,t),t=Kt(e,i,n||0)),t}function $t(e,t){try{return e.c[t].buffered}catch(i){return null}}function Zt(e,t,i,n,r){return"text"==t?kt(e.b,i,n,r):ni(e,t,e.Zc.bind(e,t,i))}function ei(e,t){return"text"==t?e.b.remove(0,1/0):ni(e,t,e.Gb.bind(e,t,0,e.F.duration))}function ti(e,t,i){return"text"==t?(e.b.h=i,Promise.resolve()):ni(e,t,e.Pc.bind(e,t,i))}function ii(e,t,i){return"text"==t?(e.b.f=i,Promise.resolve()):Promise.all([ni(e,t,e.Pb.bind(e,t)),ni(e,t,e.Nc.bind(e,t,i))])}function ni(e,t,i){if(e.h)return Promise.reject();if(i={start:i,p:new y},e.a[t].push(i),1==e.a[t].length)try{i.start()}catch(n){"QuotaExceededError"==n.name?i.p.reject(new m(3,3017,t)):i.p.reject(new m(3,3015,n)),
ai(e,t)}return i.p}function ri(e,t){if(e.h)return Promise.reject();var i,n=[];for(i in e.c){var r=new y,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.a[i].push(a),n.push(r),1==e.a[i].length&&a.start()}return Promise.all(n).then(function(){var e,i;try{t()}catch(n){i=Promise.reject(new m(3,3015,n))}for(e in this.c)ai(this,e);return i}.bind(e),function(){return Promise.reject()}.bind(e))}function ai(e,t){e.a[t].shift();var i=e.a[t][0];if(i)try{i.start()}catch(n){i.p.reject(new m(3,3015,n)),ai(e,t)}}function si(e,t,i){var n=!1;return e.streamSets.forEach(function(e){e.streams.forEach(function(r){var a=r.allowedByApplication;r.allowedByApplication=!0,"video"==e.type?(r.width<t.minWidth||r.width>t.maxWidth||r.width>i.width||r.height<t.minHeight||r.height>t.maxHeight||r.height>i.height||r.width*r.height<t.minPixels||r.width*r.height>t.maxPixels||r.bandwidth<t.minVideoBandwidth||r.bandwidth>t.maxVideoBandwidth)&&(r.allowedByApplication=!1):"audio"==e.type&&(r.bandwidth<t.minAudioBandwidth||r.bandwidth>t.maxAudioBandwidth)&&(r.allowedByApplication=!1),
a!=r.allowedByApplication&&(n=!0)})}),n}function oi(e,t,i){var n="",r=null;for(e&&e.B&&(n=e.keySystem(),r=e.s),e=0;e<i.streamSets.length;++e){var a=i.streamSets[e];if(n&&a.drmInfos.length&&!a.drmInfos.some(function(e){return e.keySystem==n}))i.streamSets.splice(e,1),--e;else{for(var s=t[a.type],o=0;o<a.streams.length;++o){var u=a.streams[o],l=pi(u.mimeType,u.codecs);_a[l]||MediaSource.isTypeSupported(l)?r&&u.encrypted&&0>r.indexOf(l)?(a.streams.splice(o,1),--o):!s||u.mimeType==s.mimeType&&u.codecs.split(".")[0]==s.codecs.split(".")[0]||(a.streams.splice(o,1),--o):(a.streams.splice(o,1),--o)}a.streams.length||(i.streamSets.splice(e,1),--e)}}}function ui(e,t){return e.streamSets.map(function(e){var i=t?t[e.type]:null;return e.streams.filter(function(e){return e.allowedByApplication&&e.allowedByKeySystem}).map(function(t){return{id:t.id,active:i==t,type:e.type,bandwidth:t.bandwidth,language:e.language,kind:t.kind||null,width:t.width||null,height:t.height||null,frameRate:t.frameRate||void 0,
codecs:t.codecs||null}})}).reduce(N,[])}function li(e,t){for(var i=0;i<e.streamSets.length;i++)for(var n=e.streamSets[i],r=0;r<n.streams.length;r++){var a=n.streams[r];if(a.id==t.id)return{stream:a,bd:n}}return null}function ci(e){return e.streams.some(function(e){return e.allowedByApplication&&e.allowedByKeySystem})}function di(e,t,i){var n={};e.streamSets.forEach(function(e){!ci(e)||e.type in n||(n[e.type]=e)});var r=0;return e.streamSets.forEach(function(e){if(ci(e)&&"video"==e.type){var t=fi(e);t>r?(r=t,n.video=e):t==r&&hi(e)<hi(n.video)&&(n.video=e)}}),e.streamSets.forEach(function(e){ci(e)&&e.primary&&(n[e.type].primary?hi(e)<hi(n[e.type])&&(n[e.type]=e):n[e.type]=e)}),[Sa,Aa,0].forEach(function(r){e.streamSets.forEach(function(e){if(ci(e)){var a;if("audio"==e.type?a=t.preferredAudioLanguage:"text"==e.type&&(a=t.preferredTextLanguage),a){a=St(a);var s=St(e.language);At(r,a,s)&&(e.language==n[e.type].language?hi(e)<hi(n[e.type])&&(n[e.type]=e):n[e.type]=e,i&&(i[e.type]=!0))}}})}),n;
}function hi(e){var t=0;return!e||1>e.streams.length?t:(e.streams.forEach(function(e){t+=e.bandwidth}),t/e.streams.length)}function fi(e){var t=0;return e?(e.streams.forEach(function(e){e.height>t&&(t=e.height)}),t):t}function pi(e,t){var i=e;return t&&(i+='; codecs="'+t+'"'),i}function vi(){this.m=this.l=this.j=this.c=this.a=null,this.g=[],this.b=null,this.h=[],this.v=1,this.i={},this.s=0,this.f=null,this.La=this.La.bind(this)}function gi(e){return e.a.request(0,gt(e.g,e.c.retryParameters)).then(function(e){return this.a?mi(this,e.data,e.uri):void 0}.bind(e))}function mi(e,t,i){var n=Re(t),r=new DOMParser,a=null;t=null;try{a=r.parseFromString(n,"text/xml")}catch(s){}if(a&&"MPD"==a.documentElement.tagName&&(t=a.documentElement),!t)throw new m(4,4001);i=[i],n=Q(t,"Location").map($).filter(F),0<n.length&&(i=e.g=n),n=Q(t,"BaseURL").map($),i=Ae(i,n);var o=Z(t,"minBufferTime",te);e.s=Z(t,"minimumUpdatePeriod",te,-1);var u,l=Z(t,"availabilityStartTime",ee),n=Z(t,"timeShiftBufferDepth",te),c=Z(t,"suggestedPresentationDelay",te),r=Z(t,"maxSegmentDuration",te),a=t.getAttribute("type")||"static";
if(e.b)u=e.b.presentationTimeline;else{var d=Math.max(10,1.5*o);u=new bt(l,null!=c?c:d)}var l=yi(e,{Sa:"static"!=a,presentationTimeline:u,L:null,I:null,R:null,u:null,bandwidth:void 0,tb:!1},i,t),c=l.duration,h=l.periods;return u.Mb("static"==a),u.Aa(c||1/0),u.Lb(null!=n?n:1/0),u.$a(r||1),e.b?Promise.resolve():(t=Q(t,"UTCTiming"),n=u.S(),l.ca&&e.a.Eb(e.La),Si(e,i,t,n).then(function(e){this.a&&(u.Kb(e),this.b={presentationTimeline:u,periods:h,offlineSessionIds:[],minBufferTime:o||0})}.bind(e)))}function yi(e,t,i,n){var r=Z(n,"mediaPresentationDuration",te),a=!1,s=[],o=0;n=Q(n,"Period");for(var u=0;u<n.length;u++){var l=n[u],o=Z(l,"start",te,o),c=Z(l,"duration",te);if(null==c)if(u+1!=n.length){var d=Z(n[u+1],"start",te);null!=d&&(c=d-o)}else null!=r&&(c=r-o);if(d={start:o,duration:c,node:l,ca:!1},l=bi(e,t,i,d),s.push(l),a=a||d.ca,d=t.L.id,e.h.every(B(d))&&(e.j(l),e.h.push(d),e.b&&e.b.periods.push(l)),null==c){o=null;break}o+=c}return null!=r?{periods:s,duration:r,ca:a}:{periods:s,duration:o,
ca:a}}function bi(e,t,i,n){if(t.L=ki(n.node,null,i),t.I=n,t.L.id||(t.L.id="__shaka_period_"+n.start),e=Q(n.node,"AdaptationSet").map(e.zc.bind(e,t)).filter(F),t=e.map(function(e){return e.Hc}).reduce(N,[]),i=t.filter(U),t.length!=i.length)throw new m(4,4018);if(!e.length)throw new m(4,4004);for(t=0;t<e.length;t++)e[t].ca&&(n.ca=!0);return e=wi(e),{startTime:n.start,streamSets:e}}function Ti(e){if(X(e,"InbandEventStream"))return!0;e=Q(e,"Representation");var t;if(0<e.length)for(var i=0;i<e.length;i++)if(t=X(e[i],"InbandEventStream"))return!0;return!1}function Ei(t,i){0>t.s||(t.f=e.setTimeout(t.Yc.bind(t),1e3*Math.max(Math.max(3,t.s)-i,0)))}function ki(e,t,i){t=t||{contentType:"",mimeType:"",codecs:"",frameRate:void 0},i=i||t.N;var n=Q(e,"BaseURL").map($),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,o=Z(e,"frameRate",se)||t.frameRate;return r||(r=Li(a,s)),{N:Ae(i,n),Ia:X(e,"SegmentBase")||t.Ia,$:X(e,"SegmentList")||t.$,
Ja:X(e,"SegmentTemplate")||t.Ja,width:Z(e,"width",ae)||t.width,height:Z(e,"height",ae)||t.height,contentType:r,mimeType:a,codecs:s,frameRate:o,id:e.getAttribute("id")}}function wi(e){var t={};e.forEach(function(e){t[e.id]=[e]}),e.forEach(function(e){var i=t[e.id];e.dd.forEach(function(e){(e=t[e])&&e!=i&&(i.push.apply(i,e),e.forEach(function(e){t[e.id]=i}))})});var i=[],n=[];return V(t).forEach(function(e){if(!(0<=n.indexOf(e))){n.push(e);var t=new k;e.forEach(function(e){t.push(e.contentType||"",e)}),t.keys().forEach(function(e){var n=new k;t.get(e).forEach(function(e){n.push(e.language,e)}),n.keys().forEach(function(t){var r=n.get(t);t={language:t,type:e,primary:r.some(function(e){return e.hc}),drmInfos:r.map(function(e){return e.drmInfos}).reduce(N,[]),streams:r.map(function(e){return e.streams}).reduce(N,[])},i.push(t)})})}}),i}function _i(e){var t;return t=0+(e.Ia?1:0),t+=e.$?1:0,(t+=e.Ja?1:0)?(1!=t&&(e.Ia&&(e.$=null),e.Ja=null),!0):"text"==e.contentType||"application"==e.contentType;
}function Ai(e,t,i,n){return t=Ae(t,[i]),t=gt(t,e.c.retryParameters),t.method=n,e.a.request(0,t).then(function(e){if("HEAD"==n){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=Re(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Si(e,t,i,n){i=i.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var r=e.c.dash.clockSyncUri;return n&&!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),M(i,function(e){var i=e.value;switch(e.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Ai(this,t,i,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Ai(this,t,i,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e=Date.parse(i),isNaN(e)?0:e-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":
case"urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(e))["catch"](function(){return 0})}function Li(e,t){return _a[pi(e,t)]?"text":e.split("/")[0]}function Ci(e,t){var i=Re(e),n=[],r=new DOMParser,a=null;try{a=r.parseFromString(i,"text/xml")}catch(s){throw new m(2,2005)}if(a){var o,u,l;if(!(r=a.getElementsByTagName("tt")[0]))throw new m(2,2006);if(a=r.getAttribute("ttp:frameRate"),o=r.getAttribute("ttp:subFrameRate"),u=r.getAttribute("ttp:frameRateMultiplier"),l=r.getAttribute("ttp:tickRate"),i=r.getAttribute("xml:space")||"default","default"!=i&&"preserve"!=i)throw new m(2,2005);for(i="default"==i,a=new Ri(a,o,u,l),o=Ci.b(r.getElementsByTagName("styling")[0]),u=Ci.b(r.getElementsByTagName("layout")[0]),r=Ci.b(r.getElementsByTagName("body")[0]),l=0;l<r.length;l++){var c=Ci.c(r[l],t,a,o,u,i);c&&n.push(c)}}return n}function Ri(e,t,i,n){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(n),this.a||(this.a=e?this.frameRate*this.b:1),i&&(e=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=e[1]/e[2]);
}function xi(e,t){var i=new De(new DataView(e)),n=Ye(1835295092,i);if(-1!=n)return Ci(Ue(i,n-8).buffer,t);if(-1!=He(e,xi.U))return[];throw new m(2,2007)}function Ii(e){this.b=e,this.a=0}function Pi(e,t){var i;return t.lastIndex=e.a,i=(i=t.exec(e.b))?{position:i.index,length:i[0].length,Kc:i}:null,e.a!=e.b.length&&i&&i.position==e.a?(e.a+=i.length,i.Kc):null}function Oi(e){return e.a==e.b.length?null:(e=Pi(e,/[^ \t\n]*/gm))?e[0]:null}function Di(e,t,i,n,r){if(e=Re(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),e=e.split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(e[0]))throw new m(2,2e3);n=[];for(var a=1;a<e.length;a++){var s=e[a].split("\n");(s=Di.c(s,t,i,r))&&n.push(s)}return n}function Mi(e,t,i,n){var r=new De(new DataView(e)),a=Ye(1835295092,r);if(-1!=a)return Mi.Ba(Ue(r,a-8).buffer,t,i,n);if(-1!=He(e,Mi.pa))return[];throw new m(2,2008)}function Ni(e,t,i,n,r,a){this.a=e,this.c=t,this.j=i,this.s=n,this.l=r,this.m=a,this.b=new w,this.g=!1,this.h=1,this.i=this.f=null,0<e.readyState?this.xb():_(this.b,e,"loadedmetadata",this.xb.bind(this)),
_(this.b,e,"ratechange",this.qc.bind(this)),Ui(this)}function ji(e){return 0<e.a.readyState?Hi(e,e.a.currentTime):Fi(e)}function Fi(e){return e.s?Hi(e,e.s):1/0>e.c.ea()?e.c.ta():Math.max(e.c.Va(),e.c.ta())}function Bi(e,t){t!=e.g&&(e.g=t,Vi(e,e.h),e.l(t))}function Ui(t){Gi(t),t.i=e.setTimeout(t.uc.bind(t),250)}function Gi(t){t.i&&(e.clearTimeout(t.i),t.i=null)}function Vi(t,i){null!=t.f&&(e.clearInterval(t.f),t.f=null),t.h=i,t.a.playbackRate=t.g||0>i?0:i,!t.g&&0>i&&(t.f=e.setInterval(function(){this.a.currentTime+=i/4}.bind(t),250))}function Wi(e,t){var i=e.c,n=i.ta(),r=i.Z();return i.S()&&1/0!=i.c?(i=n+1,n=i+e.j,t>=n&&r>=t||Jt(e.a.buffered,t)&&t>=i&&r>=t?t:t>r?r:n>r&&t>=i&&r>=t?t:Math.min(n+2,r)):n>t?n:t>r?r:t}function Yi(e,t,i){e.a.currentTime=i;var n=0,r=function(){!this.a||10<=n++||this.a.currentTime!=t||(this.a.currentTime=i,setTimeout(r,100))}.bind(e);setTimeout(r,100)}function Hi(e,t){var i=e.c.ta();return i>t?i:(i=e.c.Z(),t>i?i:t)}function Ji(e,t,i,n,r,a,s,o,u){this.m=e,this.f=t,
this.U=i,this.a=n,this.H=r,this.v=a,this.j=s,this.A=o||null,this.B=u||null,this.g=null,this.i=1,this.C=Promise.resolve(),this.h=[],this.l={},this.b={},this.c=this.s=this.K=!1}function Ki(e){return e.a.periods[fn(e,ji(e.m))]}function qi(e){return W(e.b,function(e){return e.stream})}function zi(e,t){var i={};return i.text=t,$i(e,i)}function Xi(e,t,i,n){var r=e.b[t];!r&&"text"==t&&e.g.ignoreTextStreamFailures?zi(e,i):r&&(t=e.h[pn(e,i)])&&t.za&&(t=e.l[i.id])&&t.za&&r.stream!=i&&(r.stream=i,r.Ma=!0,n&&(r.ba?r.Qa=!0:r.ga?(r.na=!0,r.Qa=!0):(yn(r),gn(e,r,!0))))}function Qi(e){var t=ji(e.m);if(!Object.keys(e.b).every(function(e){return 0<Qt(this.f,e,t)}.bind(e)))for(var i in e.b){var n=e.b[i];n.ba||n.na||(n.ga?n.na=!0:null==Xt(e.f,i)?null==n.aa&&mn(e,n,0):(yn(n),gn(e,n,!1)))}}function $i(e,t,i){var n=fn(e,ji(e.m)),r=W(t,function(e){return pi(e.mimeType,e.codecs)});return e.f.init(r,e.g.useRelativeCueTimestamps),tn(e),r=V(t),en(e,r).then(function(){if(!this.c)for(var e in t){var r=t[e];this.b[e]||(this.b[e]={
stream:r,type:e,va:null,W:null,Ma:!0,Ga:n,endOfStream:!1,ga:!1,aa:null,na:!1,Qa:!1,ba:!1,eb:!1,Xa:!1,Hb:i||0},mn(this,this.b[e],0))}}.bind(e))}function Zi(e,t){var i=e.h[t];if(i)return i.J;i={J:new y,za:!1},e.h[t]=i;var n=e.a.periods[t].streamSets.map(function(e){return e.streams}).reduce(N,[]);return e.C=e.C.then(function(){return this.c?void 0:en(this,n)}.bind(e)).then(function(){this.c||(this.h[t].J.resolve(),this.h[t].za=!0)}.bind(e))["catch"](function(e){this.c||(this.h[t].J.reject(),delete this.h[t],this.j(e))}.bind(e)),i.J}function en(e,t){for(var i=[],n=0;n<t.length;++n){var r=t[n],a=e.l[r.id];a?i.push(a.J):(e.l[r.id]={J:new y,za:!1},i.push(r.createSegmentIndex()))}return Promise.all(i).then(function(){if(!this.c)for(var e=0;e<t.length;++e){var i=this.l[t[e].id];i.za||(i.J.resolve(),i.za=!0)}}.bind(e))["catch"](function(e){return this.c?void 0:(this.l[r.id].J.reject(),delete this.l[r.id],Promise.reject(e))}.bind(e))}function tn(e){var t=e.a.presentationTimeline.ea();1/0>t?e.f.Aa(t):e.f.Aa(Math.pow(2,32));
}function nn(e,t){var i,n=ji(e.m),r=e.f;i=t.type,i="text"==i?r.b.a:Ht($t(r,i));var a=t.va&&t.W?e.a.periods[pn(e,t.va)].startTime+t.W.endTime:Math.max(n,t.Hb);t.Hb=0;var r=pn(e,t.stream),s=fn(e,a),o=Qt(e.f,t.type,n,.1),u=Math.max(e.i*Math.max(e.a.minBufferTime||0,e.g.rebufferingGoal),e.i*e.g.bufferingGoal);return a>=e.a.presentationTimeline.ea()?(t.endOfStream=!0,null):(t.endOfStream=!1,t.Ga=s,s!=r?null:o>=u?.5:(t.W&&t.stream==t.va?(a=t.W.position+1,i=rn(e,t,r,a)):(a=t.W?t.stream.findSegmentPosition(Math.max(0,e.a.periods[pn(e,t.va)].startTime+t.W.endTime-e.a.periods[r].startTime)):t.stream.findSegmentPosition(Math.max(0,(i||n)-e.a.periods[r].startTime)),null==a?i=null:(s=null,null==i&&(s=rn(e,t,r,Math.max(0,a-1))),i=s||rn(e,t,r,a))),i?(an(e,t,n,r,i),null):1))}function rn(e,t,i,n){return i=e.a.periods[i],(t=t.stream.getSegmentReference(n))?(e=e.a.presentationTimeline,n=e.Z(),i.startTime+t.endTime<e.ua()||i.startTime+t.startTime>n?null:t):null}function an(e,t,i,n,r){var a=e.a.periods[n],s=t.stream,o=e.a.periods[n+1],u=null,u=o?o.startTime:e.a.presentationTimeline.ea();
n=on(e,t,n,u),t.ga=!0,t.Ma=!1,o=vn(e,r),Promise.all([n,o]).then(function(e){return this.c||this.s?void 0:un(this,t,i,a,s,r,e[1])}.bind(e)).then(function(){this.c||this.s||(t.ga=!1,t.eb=!1,mn(this,t,0),cn(this,s))}.bind(e))["catch"](function(e){this.c||this.s||(t.ga=!1,1001==e.code||1002==e.code||1003==e.code?"text"==t.type&&this.g.ignoreTextStreamFailures&&1001==e.code?delete this.b.text:(this.j(e),mn(this,t,4)):3017==e.code?sn(this,t,e):"text"==t.type&&this.g.ignoreTextStreamFailures?delete this.b.text:(t.Xa=!0,this.j(e)))}.bind(e))}function sn(e,t,i){if(!V(e.b).some(function(e){return e!=t&&e.eb})){var n=Math.round(100*e.i);if(n>20)e.i-=.2;else{if(!(n>4))return t.Xa=!0,e.s=!0,void e.j(i);e.i-=.04}t.eb=!0}mn(e,t,4)}function on(e,t,i,n){return t.Ma?(i=ti(e.f,t.type,e.a.periods[i].startTime-t.stream.presentationTimeOffset),n=null!=n?ii(e.f,t.type,n):Promise.resolve(),t.stream.initSegmentReference?(e=vn(e,t.stream.initSegmentReference).then(function(e){return this.c?void 0:Zt(this.f,t.type,e,null,null);
}.bind(e))["catch"](function(e){return t.Ma=!0,Promise.reject(e)}),Promise.all([i,n,e])):Promise.all([i,n])):Promise.resolve()}function un(e,t,i,n,r,a,s){return ln(e,t,i).then(function(){return this.c?void 0:Zt(this.f,t.type,s,a.startTime+n.startTime,a.endTime+n.startTime)}.bind(e)).then(function(){return this.c?void 0:(t.va=r,t.W=a,Promise.resolve())}.bind(e))}function ln(e,t,i){var n=Xt(e.f,t.type);return null==n?Promise.resolve():(i=i-n-e.g.bufferBehind,0>=i?Promise.resolve():e.f.remove(t.type,n,n+i).then(function(){}.bind(e)))}function cn(e,t){if(!e.K&&(e.K=V(e.b).every(function(e){return"text"==e.type||!e.na&&!e.ba&&e.W}),e.K)){var i=pn(e,t);for(e.h[i]||Zi(e,i).then(function(){this.v()}.bind(e))["catch"](j),i=0;i<e.a.periods.length;++i)Zi(e,i)["catch"](j);e.B&&e.B()}}function dn(e,t){if(t.Ga!=pn(e,t.stream)){var i=t.Ga,n=V(e.b);n.every(function(e){return e.Ga==i})&&n.every(hn)&&Zi(e,i).then(function(){if(!this.c&&n.every(function(e){var t=pn(this,e.stream);return hn(e)&&e.Ga==i&&t!=i;
}.bind(this))){var e,t=this.a.periods[i],r=this.H(t);for(e in this.b)if(!r[e]&&"text"!=e)return void this.j(new m(5,5005));for(e in r)if(!this.b[e]){if("text"!=e)return void this.j(new m(5,5005));$i(this,{text:r.text},t.startTime),delete r[e]}for(e in this.b)(t=r[e])?(Xi(this,e,t,!1),mn(this,this.b[e],0)):delete this.b[e];this.v()}}.bind(e))["catch"](j)}}function hn(e){return!e.ga&&null==e.aa&&!e.na&&!e.ba}function fn(e,t){for(var i=e.a.periods.length-1;i>0;--i)if(t>=e.a.periods[i].startTime)return i;return 0}function pn(e,t){for(var i=0;i<e.a.periods.length;++i)for(var n=e.a.periods[i],r=0;r<n.streamSets.length;++r)if(0<=n.streamSets[r].streams.indexOf(t))return i;return-1}function vn(e,t){var i=gt(t.a(),e.g.retryParameters);if(t.M||null!=t.D){var n="bytes="+t.M+"-";null!=t.D&&(n+=t.D),i.headers.Range=n}return e.U.request(1,i).then(function(e){return e.data})}function gn(e,t,i){t.na=!1,t.Qa=!1,t.ba=!0,ei(e.f,t.type).then(function(){if(!this.c&&i){var e=this.f,n=t.type;return"text"==n?Promise.resolve():ni(e,n,e.Yb.bind(e,n));
}}.bind(e)).then(function(){this.c||(t.va=null,t.W=null,t.ba=!1,mn(this,t,0))}.bind(e))}function mn(t,i,n){i.aa=e.setTimeout(t.Y.bind(t,i),1e3*n)}function yn(t){null!=t.aa&&(e.clearTimeout(t.aa),t.aa=null)}function bn(t){return new Promise(function(i){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new m(1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new m(1,1004,t);var r=n[0],n=e.decodeURIComponent(n.slice(1).join(",")),r=r.split(";"),a=null;if(1<r.length&&(a=r[1]),"base64"==a)n=J(n).buffer;else{if(a)throw new m(1,1005,t);n=Pe(n)}i({uri:t,data:n,headers:{"content-type":r[0]}})})}function Tn(e,t){return new Promise(function(i,n){var r=new XMLHttpRequest;r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onload=function(t){t=t.target;var r=t.getAllResponseHeaders().split("\r\n").reduce(function(e,t){var i=t.split(": ");return e[i[0].toLowerCase()]=i.slice(1).join(": "),e},{});if(200<=t.status&&299>=t.status&&202!=t.status)t.responseURL&&(e=t.responseURL),
i({uri:e,data:t.response,headers:r,pd:!!r["x-shaka-from-cache"]});else{var a=null;try{a=Ie(t.response)}catch(s){}n(new m(1,1001,e,t.status,a,r))}},r.onerror=function(){n(new m(1,1002,e))},r.ontimeout=function(){n(new m(1,1003,e))};for(var a in t.headers)r.setRequestHeader(a,t.headers[a]);r.send(t.body)})}function En(){this.a=null,this.c=[],this.b={}}function kn(e,t,i){return An(e,t,"readwrite",function(e){return e.put(i)})}function wn(e,t){var i=[];return An(e,"segment","readwrite",function(e){return e.openCursor()},function(e){if(e){if(t(e.value)){var n=e["delete"](),r=new y;n.onsuccess=r.resolve,n.onerror=Sn.bind(null,n,r),i.push(r)}e["continue"]()}}).then(function(){return Promise.all(i)}).then(function(){return i.length})}function _n(e,t){var i=0;return An(e,t,"readonly",function(e){return e.openCursor(null,"prev")},function(e){e&&(i=e.key+1)}).then(function(){return i})}function An(e,t,i,n,r){i=e.a.transaction([t],i);var a=n(i.objectStore(t)),s=new y;r&&(a.onsuccess=function(e){r(e.target.result);
}),a.onerror=Sn.bind(null,a,s);var o={transaction:i,J:s};e.c.push(o);var u=function(){this.c.splice(this.c.indexOf(o),1)}.bind(e);return i.oncomplete=function(){u(),s.resolve(a.result)},i.onerror=function(e){u(),Sn(a,s,e)},s}function Sn(e,t,i){"AbortError"==e.error.name?t.reject(new m(9,9002)):t.reject(new m(9,9001,e.error)),i.preventDefault()}function Ln(e){return{offlineUri:"offline:"+e.key,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,tracks:e.periods[0].streams.map(function(e){return{id:e.id,active:!1,type:e.contentType,bandwidth:0,language:e.language,kind:e.kind||null,width:e.width,height:e.height,frameRate:e.frameRate,codecs:e.codecs}}),appMetadata:e.appMetadata}}function Cn(e,t,i){this.b={},this.i=i,this.m=e,this.l=t,this.j=this.a=null,this.f=this.g=this.h=this.c=0}function Rn(e,t,i,n,r){e.b[t]=e.b[t]||[],e.b[t].push({uris:i.a(),M:i.M,D:i.D,mb:n,Ea:r})}function xn(e,t){e.c=0,e.h=0,e.g=0,e.f=0,V(e.b).forEach(function(e){e.forEach(function(e){null!=e.D?this.c+=e.D-e.M+1:this.g+=e.mb;
}.bind(this))}.bind(e)),e.a=t,e.a.size=e.c;var i=V(e.b).map(function(e){var t=0,i=function(){if(!this.i)return Promise.reject(new m(9,9002));if(t>=e.length)return Promise.resolve();var n=e[t++];return In(this,n).then(i)}.bind(this);return i()}.bind(e));return e.b={},e.j=Promise.all(i)}function In(e,t){var i=gt(t.uris,e.l);(t.M||null!=t.D)&&(i.headers.Range="bytes="+t.M+"-"+(null==t.D?"":t.D));var n;return e.m.request(1,i).then(function(e){return this.a?(n=e.data.byteLength,t.Ea(e.data)):Promise.reject(new m(9,9002))}.bind(e)).then(function(){if(!this.a)return Promise.reject(new m(9,9002));null==t.D?(this.a.size+=n,this.f+=t.mb):this.h+=n;var e=(this.h+this.f)/(this.c+this.g),i=Ln(this.a);this.i.progressCallback(i,e)}.bind(e))}function Pn(){}function On(e){var t=new bt(null,0);t.Aa(e.duration);var i=e.drmInfo?[e.drmInfo]:[];return{presentationTimeline:t,minBufferTime:10,offlineSessionIds:e.sessionIds,periods:e.periods.map(function(e){return{startTime:e.startTime,streamSets:e.streams.map(function(n){
var r=n.segments.map(function(e,t){return new ke(t,e.startTime,e.endTime,function(){return[e.uri]},0,null)});return t.Ha(e.startTime,r),r=new Ke(r),{language:n.language,type:n.contentType,primary:n.primary,drmInfos:i,streams:[{id:n.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n.initSegmentUri?new Ee(function(){return[n.initSegmentUri]},0,null):null,presentationTimeOffset:n.presentationTimeOffset,mimeType:n.mimeType,codecs:n.codecs,bandwidth:0,width:n.width||void 0,height:n.height||void 0,kind:n.kind,encrypted:n.encrypted,keyId:n.keyId,allowedByApplication:!0,allowedByKeySystem:!0}]}})}})}}function Dn(e){if(/^offline:([0-9]+)$/.exec(e)){var t={uri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(t)}if(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e)){var i=Number(t[1]),n=new En;return n.init(Ca).then(function(){return n.get("segment",i);
}).then(function(t){return n.o().then(function(){if(!t)throw new m(9,9003,i);return{uri:e,data:t.data,headers:{}}})})}return Promise.reject(new m(1,9004,e))}function Mn(){this.a=Promise.resolve(),this.c=this.b=this.f=!1,this.g=new Promise(function(e){this.h=e}.bind(this))}function Nn(e){return e.f||(e.a=e.a.then(function(e){return this.b=!0,Promise.resolve(e)}.bind(e),function(e){return this.b=!0,Promise.reject(e)}.bind(e))),e.f=!0,e.a}function jn(e,t,i,n,r){var a,s=r in n;for(a in t){var o=r+"."+a,u=s?n[r]:i[a],l=!!{".abr.manager":!0}[o];(s||a in e)&&(void 0===t[a]?void 0===u||s?delete e[a]:e[a]=u:l?e[a]=t[a]:"object"==typeof e[a]&&"object"==typeof t[a]?jn(e[a],t[a],u,n,o):typeof t[a]==typeof u&&(e[a]=t[a]))}}function Fn(e,t){L.call(this),this.A=!1,this.f=e,this.m=null,this.v=new w,this.Ka=new l,this.pa=this.c=this.l=this.b=this.i=this.qa=this.C=this.F=this.g=this.h=null,this.Ra=1e9,this.oa=[],this.Da=!1,this.sa=!0,this.H=this.j=null,this.s={},this.a=Yn(this),this.Ca={width:1/0,height:1/0
},this.B=[],this.Y=this.K=this.ra=0,t&&t(this),this.h=new pt(this.Uc.bind(this)),this.qa=Bn(this);for(var i=0;i<this.f.textTracks.length;++i){var n=this.f.textTracks[i];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.m=n)}this.m||(this.m=this.f.addTextTrack("subtitles","Shaka Player TextTrack")),this.m.mode="hidden",_(this.v,this.f,"error",this.tc.bind(this))}function Bn(t){t.F=new MediaSource;var i=new y;return _(t.v,t.F,"sourceopen",i.resolve),t.f.src=e.URL.createObjectURL(t.F),i}function Un(e){if(e.l&&e.l.configure(e.a.manifest),e.g&&e.g.configure(e.a.drm),e.b){e.b.configure(e.a.streaming);try{e.c.periods.forEach(e.Na.bind(e))}catch(t){e.ia(t)}qn(e,Ki(e.b))}e.a.abr.enabled&&!e.sa?e.a.abr.manager.enable():e.a.abr.manager.disable(),e.a.abr.manager.setDefaultEstimate(e.a.abr.defaultBandwidthEstimate)}function Gn(e){e.v&&e.v.la(e.F,"sourceopen"),e.f&&(e.f.removeAttribute("src"),e.f.load());var t=Promise.all([e.a?e.a.abr.manager.stop():null,e.g?e.g.o():null,e.C?e.C.o():null,e.i?e.i.o():null,e.b?e.b.o():null,e.l?e.l.stop():null]);
return e.g=null,e.C=null,e.i=null,e.b=null,e.l=null,e.c=null,e.pa=null,e.qa=null,e.F=null,e.s={},e.B=[],e.ra=0,e.K=0,t}function Vn(e){return e.l?Gn(e).then(function(){this.A||(this.Nb(!1),this.qa=Bn(this))}.bind(e)):Promise.resolve()}function Wn(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}function Yn(e){return{drm:{retryParameters:vt(),servers:{},clearKeys:{},advanced:{}},manifest:{retryParameters:vt(),dash:{customScheme:function(e){return e?null:void 0},clockSyncUri:""}},streaming:{retryParameters:vt(),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,useRelativeCueTimestamps:!1},abr:{manager:e.Ka,enabled:!0,defaultBandwidthEstimate:5e5},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minAudioBandwidth:0,maxAudioBandwidth:1/0,
minVideoBandwidth:0,maxVideoBandwidth:1/0}}}function Hn(e,t,i){for(var n in t){var r=t[n],a=i||!1;"text"==n&&(a=!0),e.sa?e.s[n]={stream:r,Vb:a}:Xi(e.b,n,r,a)}}function Jn(e){if(e.c){var t=Date.now()/1e3;e.Da?e.K+=t-e.Y:e.ra+=t-e.Y,e.Y=t}}function Kn(e,t,i){if(!V(t).some(ci))return e.ia(new m(4,4012)),{};var n={};if(i)["video","audio","text"].forEach(function(e){e in t&&(n[e]=t[e])});else{i=qi(e.b);for(var r in i){var a=i[r];a.allowedByApplication&&a.allowedByKeySystem&&t[r].language==a.language||(n[r]=t[r])}}if(G(n))return{};u(Object.keys(n));var s=e.a.abr.manager.chooseStreams(n);return Y(n,function(e){return!!s[e]})?s:(e.ia(new m(4,4012)),{})}function qn(e,t){var i,n={audio:!1,text:!1},r=di(t,e.a,n),a=Kn(e,r);for(i in a)e.B.push({timestamp:Date.now()/1e3,id:a[i].id,type:i,fromAdaptation:!0});Hn(e,a,!0),zn(e),r.text&&r.audio&&n.text&&r.text.language!=r.audio.language&&(e.m.mode="showing",Qn(e))}function zn(e){Promise.resolve().then(function(){this.A||this.dispatchEvent(new f("adaptation"));
}.bind(e))}function Xn(e){Promise.resolve().then(function(){this.A||this.dispatchEvent(new f("trackschanged"))}.bind(e))}function Qn(e){e.dispatchEvent(new f("texttrackvisibility"))}function $n(e){this.a=new En,this.c=e,this.j=tr(this),this.g=null,this.v=!1,this.i=null,this.l=[],this.f=-1,this.m=0,this.b=null,this.h=new Cn(e.h,e.getConfiguration().streaming.retryParameters,this.j)}function Zn(){return!!e.indexedDB}function er(e,t,i,n){function r(){}var a,s,o,u=e.c.h,l=e.c.getConfiguration();return yt(t,u,l.manifest.retryParameters,n).then(function(e){return sr(this),o=new e,o.configure(l.manifest),o.start(t,u,this.s.bind(this),i)}.bind(e)).then(function(e){return sr(this),a=e,s=new xt(u,i,r),s.configure(l.drm),s.init(a,!0)}.bind(e)).then(function(){return sr(this),rr(a)}.bind(e)).then(function(){return sr(this),Ot(s)}.bind(e)).then(function(){return sr(this),o.stop()}.bind(e)).then(function(){return sr(this),{manifest:a,Wb:s}}.bind(e))["catch"](function(e){if(o)return o.stop().then(function(){
throw e});throw e})}function tr(e){return{trackSelectionCallback:e.B.bind(e),progressCallback:function(e,t){return e||t?null:void 0}}}function ir(e){return e.a.a?Promise.resolve():e.a.init(Ca)}function nr(e){var t=e.g?e.g.o():Promise.resolve();return e.g=null,e.b=null,e.v=!1,e.i=null,e.l=[],e.f=-1,t}function rr(e){return e=e.periods.map(function(e){return e.streamSets}).reduce(N,[]).map(function(e){return e.streams}).reduce(N,[]),Promise.all(e.map(function(e){return e.createSegmentIndex()}))}function ar(e,t,i,n){for(var r=[],a=e.b.presentationTimeline.ta(),s=a,o=n.findSegmentPosition(a),u=null!=o?n.getSegmentReference(o):null;u;){var l=e.a.b.segment++;Rn(e.h,i.type,u,(u.endTime-u.startTime)*n.bandwidth/8,function(e,t,i,n){return t={key:e,data:n,manifestKey:this.f,streamNumber:i,segmentNumber:t},this.l.push(e),kn(this.a,"segment",t)}.bind(e,l,u.position,n.id)),r.push({startTime:u.startTime,endTime:u.endTime,uri:"offline:"+e.f+"/"+n.id+"/"+l}),s=u.endTime+t.startTime,u=n.getSegmentReference(++o);
}return e.m=Math.max(e.m,s-a),t=null,n.initSegmentReference&&(l=e.a.b.segment++,t="offline:"+e.f+"/"+n.id+"/"+l,Rn(e.h,i.type,n.initSegmentReference,0,function(e,t){var i={key:l,data:t,manifestKey:this.f,streamNumber:e,segmentNumber:-1};return this.l.push(l),kn(this.a,"segment",i)}.bind(e,n.id))),{id:n.id,primary:i.primary,presentationTimeOffset:n.presentationTimeOffset||0,contentType:i.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,kind:n.kind,language:i.language,width:n.width||null,height:n.height||null,initSegmentUri:t,encrypted:n.encrypted,keyId:n.keyId,segments:r}}function sr(e){if(!e.c)throw new m(9,9002)}function or(e){xa.push(e)}function ur(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),t=new Event(t,e);e.target.dispatchEvent(t)}function lr(e){for(this.c=[],this.b=[],this.a=[],e=new De(new DataView(e.buffer));Me(e);){var t=Ye(1886614376,e);if(-1==t)break;var i=e.a-8,n=Ne(e);if(n>1)Ge(e,t-(e.a-i));else{Ge(e,3);var r=q(Ue(e,16)),a=[];if(n>0)for(var n=Fe(e),s=0;n>s;++s){
var o=q(Ue(e,16));a.push(o)}n=Fe(e),Ge(e,n),this.b.push.apply(this.b,a),this.c.push(r),this.a.push({start:i,end:e.a-1}),e.a!=i+t&&Ge(e,t-(e.a-i))}}}function cr(e,t){try{var i=new dr(e,t);return Promise.resolve(i)}catch(n){return Promise.reject(n)}}function dr(e,t){this.keySystem=e;for(var i=!1,n=0;n<t.length;++n){var r=t[n],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},s=!1;if(r.audioCapabilities)for(var o=0;o<r.audioCapabilities.length;++o){var u=r.audioCapabilities[o];if(u.contentType){var s=!0,l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.audioCapabilities.push(u),i=!0)}}if(r.videoCapabilities)for(o=0;o<r.videoCapabilities.length;++o)u=r.videoCapabilities[o],u.contentType&&(s=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.videoCapabilities.push(u),i=!0));if(s||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),
"required"==r.persistentState&&(a.persistentState="required",a.sessionTypes=["persistent-license"]),i)return void(this.a=a)}throw i=Error("Unsupported keySystem"),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function hr(e){var t=this.mediaKeys;return t&&t!=e&&pr(t,null),delete this.mediaKeys,(this.mediaKeys=e)?pr(e,this):Promise.resolve()}function fr(e){this.a=new MSMediaKeys(e),this.b=new w}function pr(e,t){function i(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",i)}if(A(e.b),!t)return Promise.resolve();_(e.b,t,"msneedkey",gr);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",i),Promise.resolve()}catch(r){return Promise.reject(r)}}function vr(e){L.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new w,this.sessionId="",this.expiration=NaN,this.closed=new y,this.keyStatuses=new br}function gr(e){var t=document.createEvent("CustomEvent");if(t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",
e=e.initData){var i=new lr(e);if(!(1>=i.a.length)){for(var n=[],r=0;r<i.a.length;r++)n.push(e.subarray(i.a[r].start,i.a[r].end+1));for(r=mr,e=[],i=0;i<n.length;++i){for(var a=!1,s=0;s<e.length&&!(a=r?r(n[i],e[s]):n[i]===e[s]);++s);a||e.push(n[i])}for(r=n=0;r<e.length;r++)n+=e[r].length;for(n=new Uint8Array(n),r=i=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;e=n}}t.initData=e,this.dispatchEvent(t)}function mr(e,t){return z(e,t)}function yr(e,t){e.keyStatuses.hb(t),e.dispatchEvent(new f("keystatuseschange"))}function br(){this.size=0,this.a=void 0}function Tr(){return Promise.reject(Error("The key system specified is not supported."))}function Er(e){return e?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function kr(){throw new TypeError("Illegal constructor.")}function wr(){throw new TypeError("Illegal constructor.")}function _r(t){Pa=t,Oa=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Sr,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,
HTMLMediaElement.prototype.setMediaKeys=Lr,e.MediaKeys=Rr,e.MediaKeySystemAccess=Cr}function Ar(e){var t=Pa;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Sr(e,t){try{var i=new Cr(e,t);return Promise.resolve(i)}catch(n){return Promise.reject(n)}}function Lr(e){var t=this.mediaKeys;return t&&t!=e&&xr(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&xr(e,this),Promise.resolve()}function Cr(e,t){this.a=this.keySystem=e;var i=!0;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",i=!1);var n,r=!1;n=document.getElementsByTagName("video"),n=n.length?n[0]:document.createElement("video");for(var a=0;a<t.length;++a){var s=t[a],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},u=!1;if(s.audioCapabilities)for(var l=0;l<s.audioCapabilities.length;++l){var c=s.audioCapabilities[l];if(c.contentType){var u=!0,d=c.contentType.split(";")[0];n.canPlayType(d,this.a)&&(o.audioCapabilities.push(c),
r=!0)}}if(s.videoCapabilities)for(l=0;l<s.videoCapabilities.length;++l)c=s.videoCapabilities[l],c.contentType&&(u=!0,n.canPlayType(c.contentType,this.a)&&(o.videoCapabilities.push(c),r=!0));if(u||(r=n.canPlayType("video/mp4",this.a)||n.canPlayType("video/webm",this.a)),"required"==s.persistentState&&(i?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=o)}throw i="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(i="None of the requested configurations were supported."),i=Error(i),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function Rr(e){this.g=e,this.b=null,this.a=new w,this.c=[],this.f={}}function xr(e,t){e.b=t,A(e.a);var i=Pa;t&&(_(e.a,t,i+"needkey",e.yc.bind(e)),_(e.a,t,i+"keymessage",e.xc.bind(e)),_(e.a,t,i+"keyadded",e.vc.bind(e)),_(e.a,t,i+"keyerror",e.wc.bind(e)))}function Ir(e,t){var i=e.f[t];return i?i:(i=e.c.shift())?(i.sessionId=t,e.f[t]=i):null}function Pr(e,t,i){L.call(this),this.f=e,
this.h=!1,this.a=this.b=null,this.c=t,this.g=i,this.sessionId="",this.expiration=NaN,this.closed=new y,this.keyStatuses=new Mr}function Or(e,t,i){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;var n;try{if("persistent-license"==e.g)if(i)n=new Uint8Array(Pe("LOAD_SESSION|"+i));else{var r=Pe("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),n=a}else n=new Uint8Array(t)}catch(s){return Promise.reject(s)}e.b=new y;var o=Ar("generateKeyRequest");try{e.f[o](e.c,n)}catch(s){if("InvalidStateError"!=s.name)return e.b=null,Promise.reject(s);setTimeout(function(){try{this.f[o](this.c,n)}catch(e){this.b.reject(e),this.b=null}}.bind(e),10)}return e.b}function Dr(e,t){e.keyStatuses.hb(t),e.dispatchEvent(new f("keystatuseschange"))}function Mr(){this.size=0,this.a=void 0}function Nr(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);
return t.abort=function(){},t}}function jr(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var t=0,i=0;i<this.sourceBuffers.length;++i)var n=this.sourceBuffers[i],n=n.buffered.end(n.buffered.length-1),t=Math.max(t,n);if(!isNaN(this.duration)&&t<this.duration)for(this.sb=!0,i=0;i<this.sourceBuffers.length;++i)n=this.sourceBuffers[i],n.ob=!1;return e.apply(this,arguments)};var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.F=this,e.addEventListener("updateend",Fr,!1),this.a||(this.addEventListener("sourceclose",Br,!1),this.a=!0),e}}function Fr(e){var t=e.target,i=t.F;if(i.sb){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.ob=!0,e=0;e<i.sourceBuffers.length;++e)if(0==i.sourceBuffers[e].ob)return;i.sb=!1}}function Br(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",Fr,!1);e.removeEventListener("sourceclose",Br,!1);
}function Ur(e){if(this.c=[],this.b=[],this.ka=Da,e)try{e(this.X.bind(this),this.a.bind(this))}catch(t){this.a(t)}}function Gr(e){var t=new Ur;return t.X(void 0),t.then(function(){return e})}function Vr(e){var t=new Ur;return t.a(e),t}function Wr(e){function t(e,t,i){e.ka==Da&&(r[t]=i,n++,n==r.length&&e.X(r))}var i=new Ur;if(!e.length)return i.X([]),i;for(var n=0,r=Array(e.length),a=i.a.bind(i),s=0;s<e.length;++s)e[s]&&e[s].then?e[s].then(t.bind(null,i,s),a):t(i,s,e[s]);return i}function Yr(e){for(var t=new Ur,i=t.X.bind(t),n=t.a.bind(t),r=0;r<e.length;++r)e[r]&&e[r].then?e[r].then(i,n):i(e[r]);return t}function Hr(e,t,i){Na.push(function(){if(i&&"function"==typeof i){try{var e=i(this.Pa)}catch(n){return void t.a(n)}var r;try{r=e&&e.then}catch(n){return void t.a(n)}e instanceof Ur?e==t?t.a(new TypeError("Chaining cycle detected")):e.then(t.X.bind(t),t.a.bind(t)):r?Jr(e,r,t):t.X(e)}else 1==this.ka?t.X(this.Pa):t.a(this.Pa)}.bind(e)),null==Ma&&(Ma=qr(Kr))}function Jr(e,t,i){try{var n=!1;t.call(e,function(e){
if(!n){n=!0;var t;try{t=e&&e.then}catch(r){return void i.a(r)}t?Jr(e,t,i):i.X(e)}},i.a.bind(i))}catch(r){i.a(r)}}function Kr(){for(;Na.length;){null!=Ma&&(zr(Ma),Ma=null);var e=Na;Na=[];for(var t=0;t<e.length;++t)e[t]()}}function qr(){return 0}function zr(){}function Xr(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Qr(t,i,n){return new e.TextTrackCue(t,i,n)}function $r(t,i,n){return new e.TextTrackCue(t+"-"+i+"-"+n,t,i,n)}var Zr,ea=this;ea.md=!0,s.prototype.setDefaultEstimate=function(e){this.b=e},s.prototype.getBandwidthEstimate=function(){return 128e3>this.a?this.b:Math.min(a(this.c),a(this.f))},t("shaka.abr.SimpleAbrManager",l),l.prototype.stop=function(){this.h=null,this.f=!1,this.g={},this.a={},this.c=null},l.prototype.stop=l.prototype.stop,l.prototype.init=function(e){this.h=e},l.prototype.init=l.prototype.init,l.prototype.chooseStreams=function(e){for(var t in e)this.g[t]=e[t];
if(t={},"audio"in e){var i=c(this);i?(t.audio=i,this.a.audio=i):delete this.a.audio}return"video"in e&&((i=d(this))?(t.video=i,this.a.video=i):delete this.a.video),"text"in e&&(t.text=e.text.streams[0]),this.c=Date.now(),t},l.prototype.chooseStreams=l.prototype.chooseStreams,l.prototype.enable=function(){this.f=!0},l.prototype.enable=l.prototype.enable,l.prototype.disable=function(){this.f=!1},l.prototype.disable=l.prototype.disable,l.prototype.segmentDownloaded=function(e,t,i){var n=this.b;if(t-=e,16e3>i||(e=8e3*i/t,t/=1e3,n.a+=i,r(n.c,t,e),r(n.f,t,e)),null!=this.c&&this.f)e:{if(this.i){if(8e3>Date.now()-this.c)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}i={},(n=c(this))&&(i.audio=n,this.a.audio=n),(n=d(this))&&(i.video=n,this.a.video=n),this.c=Date.now(),this.b.getBandwidthEstimate(),this.h(i)}},l.prototype.segmentDownloaded=l.prototype.segmentDownloaded,l.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate()},l.prototype.getBandwidthEstimate=l.prototype.getBandwidthEstimate,
l.prototype.setDefaultEstimate=function(e){this.b.setDefaultEstimate(e)},l.prototype.setDefaultEstimate=l.prototype.setDefaultEstimate,f.prototype.preventDefault=function(){},f.prototype.stopImmediatePropagation=function(){this.a=!0},f.prototype.stopPropagation=function(){};var ta="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ia="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),na=["loop","playbackRate"],ra=["pause","play"],aa="adaptation buffering emsg error loading unloading texttrackvisibility trackschanged".split(" "),sa="drmInfo getConfiguration getManifestUri getPlaybackRate getTracks getStats isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),oa=[["getConfiguration","configure"]],ua=[["isTextTrackVisible","setTextTrackVisibility"]],la="addTextTrack cancelTrickPlay configure resetConfiguration selectTrack setTextTrackVisibility trickPlay".split(" "),ca=["load","unload"];
t("shaka.util.Error",m),m.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},m.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},m.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_TTML:2006,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,
MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,DASH_DUPLICATE_REPRESENTATION_ID:4018,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,
ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,INDEXED_DB_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007},Zr=b.prototype,Zr.o=function(){return T(this),this.a&&(this.a.stop(function(){},function(){}),this.a=null),this.B=this.A=this.l=null,this.f=this.j=this.h=!1,this.g=this.c=this.b=this.a=this.i=null,Promise.resolve()},Zr.O=function(){return this.f},Zr.cb=function(){return this.v},Zr.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.l();var t=new chrome.cast.SessionRequest(this.C),t=new chrome.cast.ApiConfig(t,this.kc.bind(this),this.rc.bind(this),"origin_scoped");chrome.cast.initialize(t,function(){},function(){})}else e.__onGCastApiAvailable=function(e){e&&this.init();
}.bind(this)},Zr.fb=function(e){this.i=e,this.f&&E(this,{type:"appData",appData:this.i})},Zr.cast=function(e){return this.h?this.j?this.f?Promise.reject(new m(8,8002)):(this.g=new y,chrome.cast.requestSession(this.ab.bind(this,e),this.ub.bind(this)),this.g):Promise.reject(new m(8,8001)):Promise.reject(new m(8,8e3))},Zr.get=function(e,t){if("video"==e){if(0<=ra.indexOf(t))return this.Fb.bind(this,e,t)}else if("player"==e){if(0<=la.indexOf(t))return this.Fb.bind(this,e,t);if(0<=ca.indexOf(t))return this.Gc.bind(this,e,t);if(0<=sa.indexOf(t))return this.Cb.bind(this,e,t)}return this.Cb(e,t)},Zr.set=function(e,t,i){this.b[e][t]=i,E(this,{type:"set",targetName:e,property:t,value:i})},Zr.ab=function(e,t){this.a=t,this.a.addUpdateListener(this.vb.bind(this)),this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.lc.bind(this)),this.vb(),E(this,{type:"init",initState:e,appData:this.i}),this.g.resolve()},Zr.ub=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":
t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new m(8,t,e))},Zr.Cb=function(e,t){return this.b[e][t]},Zr.Fb=function(e,t){E(this,{type:"call",targetName:e,methodName:t,args:Array.prototype.slice.call(arguments,2)})},Zr.Gc=function(e,t){var i=Array.prototype.slice.call(arguments,2),n=new y,r=this.m.toString();return this.m++,this.c[r]=n,E(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:r}),n},Zr.kc=function(e){var t=this.s();this.g=new y,this.ab(t,e)},Zr.rc=function(e){this.j="available"==e,this.l()},Zr.vb=function(){var e=!!this.a&&"connected"==this.a.status;if(this.f&&!e){this.B();for(var t in this.b)this.b[t]={};T(this)}this.v=(this.f=e)?this.a.receiver.friendlyName:"",this.l()},Zr.lc=function(e,t){var i=v(t);switch(i.type){case"event":var n=i.targetName,r=i.event;this.A(n,new f(r.type,r));break;case"update":r=i.update;for(n in r){var a,i=this.b[n]||{};for(a in r[n])i[a]=r[n][a]}break;case"asyncComplete":if(n=i.id,a=i.error,i=this.c[n],delete this.c[n],i)if(a){
n=new m(a.category,a.code);for(r in a)n[r]=a[r];i.reject(n)}else i.resolve()}},Zr=k.prototype,Zr.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},Zr.set=function(e,t){this.a[e]=t},Zr.has=function(e){return this.a.hasOwnProperty(e)},Zr.get=function(e){return(e=this.a[e])?e.slice():null},Zr.remove=function(e,t){var i=this.a[e];if(i)for(var n=0;n<i.length;++n)i[n]==t&&(i.splice(n,1),--n)},Zr.keys=function(){var e,t=[];for(e in this.a)t.push(e);return t},w.prototype.o=function(){return A(this),this.a=null,Promise.resolve()},w.prototype.la=function(e,t){for(var i=this.a.get(t)||[],n=0;n<i.length;++n){var r=i[n];r.target==e&&(r.la(),this.a.remove(t,r))}},S.prototype.la=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)},L.prototype.addEventListener=function(e,t){this.Ba.push(e,t)},L.prototype.removeEventListener=function(e,t){this.Ba.remove(e,t)},L.prototype.dispatchEvent=function(e){for(var t=this.Ba.get(e.type)||[],i=0;i<t.length;++i){
e.target=this.U,e.currentTarget=this.U;var n=t[i];try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.a)break}return e.defaultPrevented},i(C),t("shaka.cast.CastProxy",C),C.prototype.o=function(){var e=[this.h?this.h.o():null,this.b?this.b.o():null,this.a?this.a.o():null];return this.a=this.h=this.i=this.j=this.b=this.c=null,Promise.all(e)},C.prototype.destroy=C.prototype.o,C.prototype.cc=function(){return this.j},C.prototype.getVideo=C.prototype.cc,C.prototype.ac=function(){return this.i},C.prototype.getPlayer=C.prototype.ac,C.prototype.Qb=function(){return!!this.a&&this.a.h&&this.a.j},C.prototype.canCast=C.prototype.Qb,C.prototype.O=function(){return!!this.a&&this.a.O()},C.prototype.isCasting=C.prototype.O,C.prototype.cb=function(){return this.a?this.a.cb():""},C.prototype.receiverName=C.prototype.cb,C.prototype.cast=function(){var e=this.qb();return this.a.cast(e).then(function(){return this.b.kb()}.bind(this))},C.prototype.cast=C.prototype.cast,C.prototype.fb=function(e){
this.a.fb(e)},C.prototype.setAppData=C.prototype.fb,C.prototype.cd=function(){var e=this.a;if(e.f){var t=e.s();chrome.cast.requestSession(e.ab.bind(e,t),e.ub.bind(e))}},C.prototype.suggestDisconnect=C.prototype.cd,Zr=C.prototype,Zr.qb=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.pa,startTime:null};return this.c.pause(),na.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),oa.forEach(function(t){var i=t[1];t=this.b[t[0]](),e.player[i]=t}.bind(this)),ua.forEach(function(t){var i=t[1];t=this.b[t[0]](),e.playerAfterLoad[i]=t}.bind(this)),e},Zr.Vc=function(){this.dispatchEvent(new f("caststatuschanged"))},Zr.Xc=function(){oa.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var e=this.a.get("player","getManifestUri")(),t=this.a.get("video","ended"),i=Promise.resolve(),n=this.c.autoplay,r=null;t||(r=this.a.get("video","currentTime")),e&&(this.c.autoplay=!1,i=this.b.load(e,r),i["catch"](function(e){
this.b.dispatchEvent(new f("error",{detail:e}))}.bind(this)));var a={};na.forEach(function(e){a[e]=this.a.get("video",e)}.bind(this)),i.then(function(){na.forEach(function(e){this.c[e]=a[e]}.bind(this)),ua.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this)),this.c.autoplay=n,e&&this.c.play()}.bind(this))},Zr.jd=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if(this.a.O()&&!Object.keys(this.a.b.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.O()?this.a.get("video",e):(t=this.c[e],"function"==typeof t&&(t=t.bind(this.c)),t)},Zr.ld=function(e,t){this.a.O()?this.a.set("video",e,t):this.c[e]=t},Zr.kd=function(e){this.a.O()||this.g.dispatchEvent(new f(e.type,e))},Zr.Bc=function(e){return"addEventListener"==e?this.f.addEventListener.bind(this.f):"removeEventListener"==e?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==e?this.b.rb.bind(this.b):this.a.O()&&!Object.keys(this.a.b.video).length&&0<=sa.indexOf(e)||!this.a.O()?(e=this.b[e],
e.bind(this.b)):this.a.get("player",e)},Zr.Cc=function(e){this.a.O()||this.f.dispatchEvent(e)},Zr.Wc=function(e,t){this.a.O()&&("video"==e?this.g.dispatchEvent(t):"player"==e&&this.f.dispatchEvent(t))},i(x),t("shaka.cast.CastReceiver",x),x.prototype.ec=function(){return this.h},x.prototype.isConnected=x.prototype.ec,x.prototype.fc=function(){return this.c},x.prototype.isIdle=x.prototype.fc,x.prototype.o=function(){var t=this.a?this.a.o():Promise.resolve();return null!=this.f&&e.clearTimeout(this.f),this.j=this.i=this.a=this.b=null,this.h=!1,this.c=!0,this.f=this.g=null,t.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},x.prototype.destroy=x.prototype.o,Zr=x.prototype,Zr.Ab=function(){this.h=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,P(this)},Zr.Db=function(e,t){this.bb(),D(this,{type:"event",targetName:e,event:t})},Zr.bb=function(){null!=this.f&&e.clearTimeout(this.f),this.f=e.setTimeout(this.bb.bind(this),500);var t={video:{},player:{}
};ia.forEach(function(e){t.video[e]=this.b[e]}.bind(this)),sa.forEach(function(e){t.player[e]=this.a[e]()}.bind(this));var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&(t.video.volume=i.level,t.video.muted=i.muted),D(this,{type:"update",update:t})},Zr.Xb=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&D(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}}),D(this,{type:"event",targetName:"video",event:{type:"volumechange"}})},Zr.mc=function(e){var t=v(e.data);switch(t.type){case"init":O(this,t.initState,t.appData),this.bb();break;case"appData":this.j(t.appData);break;case"set":var i=t.targetName,n=t.property,r=t.value;if("video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){t.setSystemVolumeLevel(r);break}if("muted"==n){t.setSystemVolumeMuted(r);break}}this.i[i][n]=r;break;case"call":i=t.targetName,n=t.methodName,r=t.args,i=this.i[i],i[n].apply(i,r);break;case"asyncCall":i=t.targetName,
n=t.methodName,r=t.args,t=t.id,e=e.senderId,i=this.i[i],i[n].apply(i,r).then(this.Jb.bind(this,e,t,null),this.Jb.bind(this,e,t))}},Zr.Jb=function(e,t,i){D(this,{type:"asyncComplete",id:t,error:i},e)};var da={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ha=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Zr=he.prototype,Zr.T="",Zr.ma="",Zr.V="",Zr.ya=null,Zr.P="",Zr.da="",Zr.toString=function(){var e=[],t=this.T;if(t&&e.push(me(t,fa,!0),":"),t=this.V){e.push("//");var i=this.ma;i&&e.push(me(i,fa,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.ya,null!=t&&e.push(":",String(t))}return(t=this.P)&&(this.V&&"/"!=t.charAt(0)&&e.push("/"),e.push(me(t,"/"==t.charAt(0)?va:pa,!0))),
(t=this.a.toString())&&e.push("?",t),(t=this.da)&&e.push("#",me(t,ma)),e.join("")},Zr.resolve=function(e){var t=new he(this);"data"===t.T&&(t=new he);var i=!!e.T;i?fe(t,e.T):i=!!e.ma,i?t.ma=e.ma:i=!!e.V,i?t.V=e.V:i=null!=e.ya;var n=e.P;if(i)pe(t,e.ya);else if(i=!!e.P){if("/"!=n.charAt(0))if(this.V&&!this.P)n="/"+n;else{var r=t.P.lastIndexOf("/");-1!=r&&(n=t.P.substr(0,r+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){for(var r=!n.lastIndexOf("/",0),n=n.split("/"),a=[],s=0;s<n.length;){var o=n[s++];"."==o?r&&s==n.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==n.length&&a.push("")):(a.push(o),r=!0)}n=a.join("/")}}return i?t.P=n:i=""!==e.a.toString(),i?ve(t,Te(e.a)):i=!!e.da,i&&(t.da=e.da),t};var fa=/[#\/\?@]/g,pa=/[\#\?:]/g,va=/[\#\?]/g,ga=/[\#\?@]/g,ma=/#/g;be.prototype.a=null,be.prototype.c=null,be.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var i=encodeURIComponent(e),n=this.a[e],r=0;r<n.length;r++){
var a=i;""!==n[r]&&(a+="="+encodeURIComponent(n[r])),t.push(a)}return this.b=t.join("&")},t("shaka.media.InitSegmentReference",Ee),t("shaka.media.SegmentReference",ke);var ya=1/15,ba=1;t("shaka.media.SegmentIndex",Ke),Ke.prototype.o=function(){return this.a=null,Promise.resolve()},Ke.prototype.destroy=Ke.prototype.o,Ke.prototype.find=function(e){for(var t=this.a.length-1;t>=0;--t){var i=this.a[t];if(e>=i.startTime&&e<i.endTime)return i.position}return null},Ke.prototype.find=Ke.prototype.find,Ke.prototype.get=function(e){return this.a.length?(e-=this.a[0].position,0>e||e>=this.a.length?null:this.a[e]):null},Ke.prototype.get=Ke.prototype.get,Ke.prototype.Za=function(e){for(var t=[],i=0,n=0;i<this.a.length&&n<e.length;){var r=this.a[i],a=e[n];r.startTime<a.startTime?(t.push(r),i++):(r.startTime>a.startTime||(.1<Math.abs(r.endTime-a.endTime)?t.push(a):t.push(r),i++),n++)}for(;i<this.a.length;)t.push(this.a[i++]);if(t.length)for(i=t[t.length-1].position+1;n<e.length;)a=e[n++],a=new ke(i++,a.startTime,a.endTime,a.a,a.M,a.D),
t.push(a);else t=e;this.a=t},Ke.prototype.merge=Ke.prototype.Za,Ke.prototype.Ta=function(e){for(var t=0;t<this.a.length&&!(this.a[t].endTime>e);++t);this.a.splice(0,t)},Ke.prototype.evict=Ke.prototype.Ta;var Ta;t("shaka.net.NetworkingEngine",pt),pt.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2};var Ea={};pt.registerScheme=function(e,t){Ea[e]=t},pt.unregisterScheme=function(e){delete Ea[e]},pt.prototype.Ec=function(e){this.b.push(e)},pt.prototype.registerRequestFilter=pt.prototype.Ec,pt.prototype.fd=function(e){var t=this.b;e=t.indexOf(e),e>=0&&t.splice(e,1)},pt.prototype.unregisterRequestFilter=pt.prototype.fd,pt.prototype.Tb=function(){this.b=[]},pt.prototype.clearAllRequestFilters=pt.prototype.Tb,pt.prototype.Eb=function(e){this.c.push(e)},pt.prototype.registerResponseFilter=pt.prototype.Eb,pt.prototype.Ob=function(e){var t=this.c;e=t.indexOf(e),e>=0&&t.splice(e,1)},pt.prototype.unregisterResponseFilter=pt.prototype.Ob,pt.prototype.Ub=function(){this.c=[]},pt.prototype.clearAllResponseFilters=pt.prototype.Ub,
pt.prototype.o=function(){this.f=!0,this.b=[],this.c=[];for(var e=[],t=0;t<this.a.length;++t)e.push(this.a[t]["catch"](j));return Promise.all(e)},pt.prototype.destroy=pt.prototype.o,pt.prototype.request=function(e,t){if(this.f)return Promise.reject();for(var i=Date.now(),n=this.b,r=0;r<n.length;r++)try{n[r](e,t)}catch(a){return Promise.reject(a)}for(var r=t.retryParameters||{},n=r.maxAttempts||1,s=r.backoffFactor||2,o=null==r.baseDelay?1e3:r.baseDelay,u=this.g(e,t,0),r=1;n>r;r++)u=u["catch"](this.i.bind(this,e,t,o,r%t.uris.length)),o*=s;return this.a.push(u),u.then(function(t){0<=this.a.indexOf(u)&&this.a.splice(this.a.indexOf(u),1);var n=Date.now();return this.h&&1==e&&this.h(i,n,t.data.byteLength),t}.bind(this))["catch"](function(e){return 0<=this.a.indexOf(u)&&this.a.splice(this.a.indexOf(u),1),Promise.reject(e)}.bind(this))},pt.prototype.request=pt.prototype.request,pt.prototype.g=function(e,t,i){if(this.f)return Promise.reject();var n=new he(t.uris[i]),r=n.T;return r||(r=location.protocol,
r=r.slice(0,-1),fe(n,r),t.uris[i]=n.toString()),(r=Ea[r])?r(t.uris[i],t).then(function(t){for(var i=this.c,n=0;n<i.length;n++)i[n](e,t);return t}.bind(this)):Promise.reject(new m(1,1e3,n))},pt.prototype.i=function(t,i,n,r){var a=new y,s=i.retryParameters||{};return e.setTimeout(a.resolve,n*(1+(2*Math.random()-1)*(null==s.fuzzFactor?.5:s.fuzzFactor))),a.then(this.g.bind(this,t,i,r))};var ka={},wa={};t("shaka.media.ManifestParser.registerParserByExtension",function(e,t){wa[e]=t}),t("shaka.media.ManifestParser.registerParserByMime",function(e,t){ka[e]=t}),t("shaka.media.PresentationTimeline",bt),bt.prototype.ea=function(){return this.a},bt.prototype.getDuration=bt.prototype.ea,bt.prototype.Aa=function(e){this.a=e},bt.prototype.setDuration=bt.prototype.Aa,bt.prototype.Kb=function(e){this.h=e},bt.prototype.setClockOffset=bt.prototype.Kb,bt.prototype.Mb=function(e){this.g=e},bt.prototype.setStatic=bt.prototype.Mb,bt.prototype.bc=function(){return this.c},bt.prototype.getSegmentAvailabilityDuration=bt.prototype.bc,
bt.prototype.Lb=function(e){this.c=e},bt.prototype.setSegmentAvailabilityDuration=bt.prototype.Lb,bt.prototype.Ha=function(e,t){t.length&&(this.b=t.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.b),e||(this.f=Math.max(this.f,t[0].startTime)))},bt.prototype.notifySegments=bt.prototype.Ha,bt.prototype.$a=function(e){this.b=Math.max(this.b,e)},bt.prototype.notifyMaxSegmentDuration=bt.prototype.$a,bt.prototype.S=function(){return 1/0==this.a&&!this.g},bt.prototype.isLive=bt.prototype.S,bt.prototype.fa=function(){return 1/0!=this.a&&!this.g},bt.prototype.isInProgress=bt.prototype.fa,bt.prototype.ta=function(){return Math.max(Math.min(this.f,this.Z()),this.ua())},bt.prototype.getEarliestStart=bt.prototype.ta,bt.prototype.ua=function(){return 1/0==this.c?0:Math.max(0,this.Z()-this.c)},bt.prototype.getSegmentAvailabilityStart=bt.prototype.ua,bt.prototype.Z=function(){return this.S()||this.fa()?Math.min(Math.max(0,(Date.now()+this.h)/1e3-this.b-this.j),this.a):this.a},bt.prototype.getSegmentAvailabilityEnd=bt.prototype.Z,
bt.prototype.Va=function(){return Math.max(0,this.Z()-(this.S()||this.fa()?this.i:0))},bt.prototype.getSeekRangeEnd=bt.prototype.Va;var _a={};t("shaka.media.TextEngine.registerParser",function(e,t){_a[e]=t}),t("shaka.media.TextEngine.unregisterParser",function(e){delete _a[e]}),t("shaka.media.TextEngine.makeCue",Et),Tt.prototype.o=function(){return this.c&&_t(this,function(){return!0}),this.c=this.g=null,Promise.resolve()},Tt.prototype.remove=function(e,t){return Promise.resolve().then(function(){this.c&&(_t(this,function(i){return!(i.startTime>=t||i.endTime<=e)}),null==this.b||t<=this.b||e>=this.a||(e<=this.b&&t>=this.a?this.b=this.a=null:e<=this.b&&t<this.a?this.b=t:e>this.b&&t>=this.a&&(this.a=e)))}.bind(this))};var Aa=1,Sa=2,La={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",
che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",
pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};Ct.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},Zr=xt.prototype,Zr.o=function(){this.c=!0;var e=this.a.map(function(e){return(e.ha.close()||Promise.resolve())["catch"](j)});return this.j.reject(),this.f&&e.push(this.f.o()),this.l&&e.push(this.l.setMediaKeys(null)["catch"](j)),this.v&&this.v.cancel(),this.f=this.l=this.h=this.s=this.b=this.v=null,this.a=[],this.m=[],this.g=this.i=this.H=null,Promise.all(e);
},Zr.configure=function(e){this.i=e},Zr.init=function(e,t){var i={},n=[];return this.C=t,this.m=e.offlineSessionIds,Mt(this,e,t||0<e.offlineSessionIds.length,i,n),n.length?Nt(this,i,n):(this.B=!0,Promise.resolve())},Zr.keySystem=function(){return this.b?this.b.keySystem:""},Zr.jc=function(e){for(var t=new Uint8Array(e.initData),i=0;i<this.a.length;++i)if(z(t,this.a[i].initData))return;Vt(this,e.initDataType,t)},Zr.Bb=function(e){for(var t,i=e.target,n=0;n<this.a.length;n++)if(this.a[n].ha==i){t=this.a[n].Oa;break}n=gt([this.b.licenseServerUri],this.i.retryParameters),n.body=e.message,n.method="POST","com.microsoft.playready"==this.b.keySystem&&Wt(n),this.H.request(2,n).then(function(e){return this.c?Promise.reject():i.update(e.data).then(function(){t&&t.resolve()})}.bind(this),function(e){return this.c?Promise.resolve():(e=new m(6,6007,e),this.g(e),void(t&&t.reject(e)))}.bind(this))["catch"](function(e){return this.c?Promise.resolve():(e=new m(6,6008,e.message),this.g(e),void(t&&t.reject(e)));
}.bind(this))},Zr.wb=function(e){e=e.target;var t;for(t=0;t<this.a.length&&this.a[t].ha!=e;++t);if(t!=this.a.length){var i=!1;e.keyStatuses.forEach(function(e,n){if("string"==typeof n){var r=n;n=e,e=r}if("com.microsoft.playready"==this.b.keySystem&&16==n.byteLength){var r=new DataView(n),a=r.getUint32(0,!0),s=r.getUint16(4,!0),o=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,s,!1),r.setUint16(6,o,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(this.a[t].loaded=!0,this.a.every(function(e){return e.loaded})&&this.j.resolve()),"expired"==e&&(i=!0),r=q(new Uint8Array(n)),this.A[r]=e}.bind(this));var n=e.expiration-Date.now();(0>n||i&&1e3>n)&&!this.a[t].Oa&&(this.a.splice(t,1),e.close()),Rt(this.v)}},Zr.Dc=function(){Y(this.A,function(e,t){return"expired"==t})&&this.g(new m(6,6014)),this.K(this.A)},Zr=qt.prototype,Zr.o=function(){this.h=!0;var e,t=[];for(e in this.a){var i=this.a[e],n=i[0];for(this.a[e]=i.slice(0,1),n&&t.push(n.p["catch"](j)),
n=1;n<i.length;++n)i[n].p["catch"](j),i[n].p.reject()}return this.b&&t.push(this.b.o()),Promise.all(t).then(function(){this.g.o(),this.b=this.i=this.F=this.f=this.g=null,this.c={},this.a={}}.bind(this))},Zr.init=function(e,t){for(var i in e){var n=e[i];"text"==i?this.b=new Tt(this.i,n,t):(n=this.F.addSourceBuffer(n),_(this.g,n,"error",this.$c.bind(this,i)),_(this.g,n,"updateend",this.xa.bind(this,i)),this.c[i]=n,this.a[i]=[])}},Zr.remove=function(e,t,i){return"text"==e?this.b.remove(t,i):ni(this,e,this.Gb.bind(this,e,t,i))},Zr.endOfStream=function(e){return ri(this,function(){e?this.F.endOfStream(e):this.F.endOfStream()}.bind(this))},Zr.Aa=function(e){return ri(this,function(){this.F.duration=e}.bind(this))},Zr.ea=function(){return this.F.duration},Zr.Zc=function(e,t){this.c[e].appendBuffer(t)},Zr.Gb=function(e,t,i){t>=i?this.xa(e):this.c[e].remove(t,i)},Zr.Pb=function(e){var t=this.c[e].appendWindowEnd;this.c[e].abort(),this.c[e].appendWindowEnd=t,this.xa(e)},Zr.Yb=function(e){this.f.currentTime-=.001,
this.xa(e)},Zr.Pc=function(e,t){this.c[e].timestampOffset=t,this.xa(e)},Zr.Nc=function(e,t){this.c[e].appendWindowEnd=t+.04,this.xa(e)},Zr.$c=function(e){this.a[e][0].p.reject(new m(3,3014,this.f.error?this.f.error.code:0))},Zr.xa=function(e){var t=this.a[e][0];t&&(t.p.resolve(),ai(this,e))},t("shaka.dash.DashParser",vi),Zr=vi.prototype,Zr.configure=function(e){this.c=e},Zr.start=function(e,t,i,n,r){return this.g=[e],this.a=t,this.j=i,this.l=n,this.m=r,gi(this).then(function(){return this.a&&Ei(this,0),this.b}.bind(this))},Zr.stop=function(){return this.a&&this.a.Ob(this.La),this.c=this.m=this.l=this.j=this.a=null,this.g=[],this.b=null,this.h=[],this.i={},null!=this.f&&(e.clearTimeout(this.f),this.f=null),Promise.resolve()},Zr.zc=function(e,t){e.R=ki(t,e.L,null);var i=!1,n=Q(t,"Role"),r=void 0;"text"==e.R.contentType&&(r="subtitle");for(var a=0;a<n.length;a++){var s=n[a].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=n[a].getAttribute("value")){case"main":
i=!0;break;case"caption":case"subtitle":r=s}}var n=Ti(t),o=[];Q(t,"SupplementalProperty").forEach(function(e){var t=e.getAttribute("schemeIdUri");("urn:mpeg:dash:adaptation-set-switching:2016"==t||"http://dashif.org/guidelines/AdaptationSetSwitching"==t||"http://dashif.org/descriptor/AdaptationSetSwitching"==t)&&(e=e.getAttribute("value"))&&o.push.apply(o,e.split(","))});var u=null,l=!1;if(Q(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):l=!0}),null!=u||l)return null;var a=Q(t,"ContentProtection"),a=oe(a,this.c.dash.customScheme),s=St(t.getAttribute("lang")||"und"),c=Q(t,"Representation"),r=c.map(this.Ac.bind(this,e,a,r,s)).filter(function(e){return!!e});if(!r.length)throw new m(4,4003);return e.R.contentType||(e.R.contentType=Li(r[0].mimeType,r[0].codecs)),c=c.map(function(e){return e.getAttribute("id")}).filter(F),{id:e.R.id||"__fake__"+this.v++,contentType:e.R.contentType,language:s,hc:i,streams:r,
drmInfos:a.drmInfos,dd:o,ca:n,Hc:c}},Zr.Ac=function(e,t,i,n,r){if(e.u=ki(r,e.R,null),!_i(e.u))return null;e.bandwidth=Z(r,"bandwidth",re)||void 0;var a;if(a=this.Ic.bind(this),e.u.Ia)a=it(e,a);else if(e.u.$)a=at(e,this.i);else if(e.u.Ja)a=lt(e,a,this.i,!!this.b);else{var s=e.u.N,o=e.I.duration||0;a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return e>=0&&o>e?1:null},getSegmentReference:function(e){return 1!=e?null:new ke(1,0,o,function(){return s},0,null)},initSegmentReference:null,presentationTimeOffset:0}}return r=Q(r,"ContentProtection"),r=ue(r,this.c.dash.customScheme,t),{id:this.v++,createSegmentIndex:a.createSegmentIndex,findSegmentPosition:a.findSegmentPosition,getSegmentReference:a.getSegmentReference,initSegmentReference:a.initSegmentReference,presentationTimeOffset:a.presentationTimeOffset,mimeType:e.u.mimeType,codecs:e.u.codecs,frameRate:e.u.frameRate,bandwidth:e.bandwidth,width:e.u.width,height:e.u.height,kind:i,encrypted:0<t.drmInfos.length,
keyId:r,language:n,allowedByApplication:!0,allowedByKeySystem:!0}},Zr.Yc=function(){this.f=null;var e=Date.now();gi(this).then(function(){this.a&&Ei(this,(Date.now()-e)/1e3)}.bind(this))["catch"](function(e){this.l(e),this.a&&Ei(this,0)}.bind(this))},Zr.Ic=function(e,t,i){return e=gt(e,this.c.retryParameters),null!=t&&(e.headers.Range="bytes="+t+"-"+(null!=i?i:"")),this.a.request(1,e).then(function(e){return e.data})},Zr.La=function(e,t){if(1==e){var i=new De(new DataView(t.data)),n=Ye(1701671783,i);if(-1!=n){var r=i.a-8+n;if(Ge(i,4),n=Ve(i),"urn:mpeg:dash:event:2012"==n)gi(this);else{var a=Ve(i),s=Fe(i),o=Fe(i),u=Fe(i),l=Fe(i),i=Ue(i,r-i.a);this.m(new f("emsg",{detail:{schemeIdUri:n,value:a,timescale:s,presentationTimeDelta:o,eventDuration:u,id:l,messageData:i}}))}}}},wa.mpd=vi,ka["application/dash+xml"]=vi,t("shaka.media.TtmlTextParser",Ci),Ci.m=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ci.v=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ci.s=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ci.A=/^(\d*\.?\d*)f$/,
Ci.C=/^(\d*\.?\d*)t$/,Ci.B=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,Ci.l=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Ci.Ka={left:"start",center:"center",right:"end",start:"start",end:"end"},Ci.Ra={left:"line-left",center:"center",right:"line-right"},Ci.b=function(e){var t=[];if(!e)return t;for(var i=e.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==e.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=Ci.b(i[n]),t=t.concat(r))}return t.length||t.push(e),t},Ci.h=function(e,t){for(var i=e.childNodes,n=0;n<i.length;n++)if("br"==i[n].nodeName&&n>0)i[n-1].textContent+="\n";else if(0<i[n].childNodes.length)Ci.h(i[n],t);else if(t){var r=i[n].textContent.trim(),r=r.replace(/\s+/g," ");i[n].textContent=r}},Ci.c=function(e,t,i,n,r,a){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;Ci.h(e,a),a=Ci.a(e.getAttribute("begin"),i);var s=Ci.a(e.getAttribute("end"),i);i=Ci.a(e.getAttribute("dur"),i);var o=e.textContent;
if(null==s&&null!=i&&(s=a+i),null==a||null==s)throw new m(2,2001);return(t=Et(a+t,s+t,o))?(r=Ci.i(e,"region",r),Ci.qa(t,e,r,n),t):null},Ci.qa=function(e,t,i,n){var r,a=Ci.f(t,i,n,"tts:extent");a&&(r=Ci.l.exec(a))&&(e.size=Number(r[1])),r=Ci.f(t,i,n,"tts:writingMode"),a=!0,"tb"==r||"tblr"==r?e.vertical="lr":"tbrl"==r?e.vertical="rl":a=!1,(r=Ci.f(t,i,n,"tts:origin"))&&(r=Ci.l.exec(r))&&(a?(e.position=Number(r[2]),e.line=Number(r[1])):(e.position=Number(r[1]),e.line=Number(r[2])),e.snapToLines=!1),(t=Ci.f(t,i,n,"tts:textAlign"))&&(e.align=t,"center"==t&&("center"!=e.align&&(e.align="middle"),e.position="auto"),e.positionAlign=Ci.Ra[t],e.lineAlign=Ci.Ka[t])},Ci.f=function(e,t,i,n){for(var r=Ci.b(t),a=0;a<r.length;a++){var s=r[a].getAttribute(n);if(s)return s}return r=Ci.i,(e=r(t,"style",i)||r(e,"style",i))?e.getAttribute(n):null},Ci.i=function(e,t,i){if(!e||1>i.length)return null;var n=null;if(e=Ci.ra(e,t))for(t=0;t<i.length;t++)if(i[t].getAttribute("xml:id")==e){n=i[t];break}return n},Ci.ra=function(e,t){
for(var i=null;e&&!(i=e.getAttribute(t));){var n=e.parentNode;if(!(n instanceof Element))break;e=n}return i},Ci.a=function(e,t){var i=null;return Ci.m.test(e)?i=Ci.sa(t,e):Ci.v.test(e)?i=Ci.g(Ci.v,e):Ci.s.test(e)?i=Ci.g(Ci.s,e):Ci.A.test(e)?i=Ci.Ca(t,e):Ci.C.test(e)?i=Ci.Da(t,e):Ci.B.test(e)&&(i=Ci.g(Ci.B,e)),i},Ci.Ca=function(e,t){var i=Ci.A.exec(t);return Number(i[1])/e.frameRate},Ci.Da=function(e,t){var i=Ci.C.exec(t);return Number(i[1])/e.a},Ci.sa=function(e,t){var i=Ci.m.exec(t),n=Number(i[1]),r=Number(i[2]),a=Number(i[3]),s=Number(i[4]),s=s+(Number(i[5])||0)/e.b,a=a+s/e.frameRate;return a+60*r+3600*n},Ci.g=function(e,t){var i=e.exec(t);return i&&""!=i[0]?(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0):null},_a["application/ttml+xml"]=Ci,t("shaka.media.Mp4TtmlParser",xi),xi.U=1937010800,_a['application/mp4; codecs="stpp"']=xi,t("shaka.media.VttTextParser",Di),Di.c=function(e,t,i,n){if(1==e.length&&!e[0]||/^NOTE($|[ \t])/.test(e[0]))return null;var r=null;
0>e[0].indexOf("-->")&&(r=e[0],e.splice(0,1));var a=new Ii(e[0]),s=Di.a(a),o=Pi(a,/[ \t]+--\x3e[ \t]+/g),u=Di.a(a);if(null==s||!o||null==u)throw new m(2,2001);if(n?(s+=i,u+=i):(s+=t,u+=t),e=Et(s,u,e.slice(1).join("\n").trim()),!e)return null;for(Pi(a,/[ \t]+/gm),t=Oi(a);t;)Di.j(e,t),Pi(a,/[ \t]+/gm),t=Oi(a);return null!=r&&(e.id=r),e},Di.j=function(e,t){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(e.align=i[1],"center"==i[1]&&"center"!=e.align&&(e.position="auto",e.align="middle")):(i=/^vertical:(lr|rl)$/.exec(t))?e.vertical=i[1]:(i=/^size:(\d{1,2}|100)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(e.positionAlign=i[2])):(i=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(t))?(e.snapToLines=!1,e.line=Number(i[1]),i[2]&&(e.lineAlign=i[2])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.snapToLines=!0,e.line=Number(i[1]),i[2]&&(e.lineAlign=i[2]))},Di.a=function(e){
if(e=Pi(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),!e)return null;var t=Number(e[2]),i=Number(e[3]);return t>59||i>59?null:Number(e[4])/1e3+i+60*t+3600*(Number(e[1])||0)},_a["text/vtt"]=Di,_a['text/vtt; codecs="vtt"']=Di,t("shaka.media.Mp4VttParser",Mi),Mi.Ba=function(e,t,i,n){for(e=new De(new DataView(e)),i+=t,n+=t,t=[];Me(e);){var r=Ye(Mi.oa,e);if(-1==r)break;(r=Mi.c(Ue(e,r-8).buffer,i,n))&&t.push(r)}return t},Mi.c=function(e,t,i){e=new De(new DataView(e));for(var n,r,a;Me(e);){var s=Fe(e),o=Fe(e),u=Re(Ue(e,s-8).buffer);switch(1==s&&Be(e),o){case Mi.K:n=u;break;case Mi.H:a=u;break;case Mi.Y:r=u}}if(!n)throw new m(2,2008);if(t=Et(t,i,n),!t)return null;if(a&&(t.id=a),r)for(r=new Ii(r),a=Oi(r);a;)Di.j(t,a),Pi(r,/[ \t]+/gm),a=Oi(r);return t},Mi.pa=2004251764,Mi.oa=1987343459,Mi.K=1885436268,Mi.H=1768187247,Mi.Y=1937011815,_a['application/mp4; codecs="wvtt"']=Mi,Zr=Ni.prototype,Zr.o=function(){var t=this.b.o();return this.b=null,Gi(this),null!=this.f&&(e.clearInterval(this.f),this.f=null),
this.m=this.l=this.c=this.a=null,t},Zr.uc=function(){this.i=null,Ui(this);var e=Kt(this.a.buffered,this.a.currentTime,.1),t=Ht(this.a.buffered)>=(this.c.S()?this.c.Z()-.1:this.a.duration-.1)||this.a.ended;this.g?(t||e>=this.j)&&Bi(this,!1):!t&&.5>e&&Bi(this,!0)},Zr.Ua=function(){return this.h},Zr.qc=function(){this.a.playbackRate!=(this.g||0>this.h?0:this.h)&&Vi(this,this.a.playbackRate)},Zr.xb=function(){this.b.la(this.a,"loadedmetadata");var e=Fi(this);.001>Math.abs(this.a.currentTime-e)?(_(this.b,this.a,"seeking",this.zb.bind(this)),_(this.b,this.a,"playing",this.yb.bind(this))):(_(this.b,this.a,"seeking",this.sc.bind(this)),this.a.currentTime=e)},Zr.sc=function(){this.b.la(this.a,"seeking"),_(this.b,this.a,"seeking",this.zb.bind(this)),_(this.b,this.a,"playing",this.yb.bind(this))},Zr.zb=function(){var e=this.a.currentTime,t=Wi(this,e);.001<Math.abs(t-e)?Yi(this,e,t):this.m()},Zr.yb=function(){var e=this.a.currentTime,t=Wi(this,e);.001<Math.abs(t-e)&&Yi(this,e,t)},Ji.prototype.o=function(){
for(var e in this.b)yn(this.b[e]);return this.g=this.b=this.l=this.h=this.B=this.A=this.j=this.v=this.H=this.C=this.a=this.U=this.f=this.m=null,this.c=!0,Promise.resolve()},Ji.prototype.configure=function(e){this.g=e,this.m.j=this.i*Math.max(this.a.minBufferTime||0,this.g.rebufferingGoal)},Ji.prototype.init=function(){var e=this.H(this.a.periods[fn(this,ji(this.m))]);return G(e)?Promise.reject(new m(5,5005)):$i(this,e).then(function(){this.A&&this.A()}.bind(this))},Ji.prototype.Y=function(e){if(!this.c&&!e.ga&&null!=e.aa&&!e.ba)if(e.aa=null,e.na)gn(this,e,e.Qa);else{try{var t=nn(this,e);null!=t&&(mn(this,e,t),e.Xa=!1)}catch(i){return void this.j(i)}t=V(this.b),dn(this,e),t.every(function(e){return e.endOfStream})&&this.f.endOfStream()}},t("shaka.net.DataUriPlugin",bn),Ea.data=bn,t("shaka.net.HttpPlugin",Tn),Ea.http=Tn,Ea.https=Tn,Zr=En.prototype,Zr.init=function(t){if(!e.indexedDB)return Promise.reject(new m(9,9e3));var i=e.indexedDB.open("shaka_offline_db",1),n=new y;return i.onupgradeneeded=function(e){
e=e.target.result;for(var i in t)e.createObjectStore(i,{keyPath:t[i]})},i.onsuccess=function(e){this.a=e.target.result,n.resolve()}.bind(this),i.onerror=Sn.bind(null,i,n),n.then(function(){var e=Object.keys(t);return Promise.all(e.map(function(e){return _n(this,e).then(function(t){this.b[e]=t}.bind(this))}.bind(this)))}.bind(this))},Zr.o=function(){return Promise.all(this.c.map(function(e){try{e.transaction.abort()}catch(t){}return e.J["catch"](j)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},Zr.get=function(e,t){return An(this,e,"readonly",function(e){return e.get(t)})},Zr.forEach=function(e,t){return An(this,e,"readonly",function(e){return e.openCursor()},function(e){e&&(t(e.value),e["continue"]())})},Zr.remove=function(e,t){return An(this,e,"readwrite",function(e){return e["delete"](t)})};var Ca={manifest:"key",segment:"key"};Cn.prototype.o=function(){var e=this.j||Promise.resolve();return this.b={},this.j=this.a=this.l=this.m=this.i=null,e},Pn.prototype.configure=function(){},
Pn.prototype.start=function(e){var t=/^offline:([0-9]+)$/.exec(e);if(!t)return Promise.reject(new m(1,9004,e));var i=Number(t[1]),n=new En;return n.init(Ca).then(function(){return n.get("manifest",i)}).then(function(e){if(!e)throw new m(9,9003,i);return On(e)}).then(function(e){return n.o().then(function(){return e})},function(e){return n.o().then(function(){throw e})})},Pn.prototype.stop=function(){return Promise.resolve()},ka["application/x-offline-manifest"]=Pn,t("shaka.offline.OfflineScheme",Dn),Ea.offline=Dn,Mn.prototype.then=function(e){return this.a=this.a.then(e).then(function(e){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(e)}.bind(this)),this},Mn.prototype.cancel=function(e){return this.b?Promise.resolve():(this.c=!0,this.i=e,this.g)},i(Fn),t("shaka.Player",Fn),Fn.prototype.o=function(){this.A=!0;var e=Promise.resolve();return this.j&&(e=this.j.cancel(new m(7,7e3))),e.then(function(){var e=Promise.all([this.H,Gn(this),this.v?this.v.o():null,this.h?this.h.o():null]);
return this.a=this.h=this.Ka=this.v=this.m=this.f=null,e}.bind(this))},Fn.prototype.destroy=Fn.prototype.o,Fn.version="v2.0.7";var Ra={};Fn.registerSupportPlugin=function(e,t){Ra[e]=t},Fn.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaSource&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)},Fn.probeSupport=function(){return Yt().then(function(e){var t=mt(),i=zt();e={manifest:t,media:i,drm:e};for(var n in Ra)e[n]=Ra[n]();return e})},Fn.prototype.load=function(e,t,i){var n=this.kb(),r=new Mn;return this.j=r,this.dispatchEvent(new f("loading")),Nn(r.then(function(){return n}).then(function(){return yt(e,this.h,this.a.manifest.retryParameters,i)}.bind(this)).then(function(t){return this.l=new t,this.l.configure(this.a.manifest),this.l.start(e,this.h,this.Na.bind(this),this.ia.bind(this),this.Rc.bind(this))}.bind(this)).then(function(t){if(0==t.periods.length)throw new m(4,4014);
return this.c=t,this.pa=e,this.g=new xt(this.h,this.ia.bind(this),this.Sc.bind(this)),this.g.configure(this.a.drm),this.g.init(t,!1)}.bind(this)).then(function(){return this.c.periods.forEach(this.Na.bind(this)),this.Y=Date.now()/1e3,Promise.all([It(this.g,this.f),this.qa])}.bind(this)).then(function(){return this.a.abr.manager.init(this.ib.bind(this)),this.i=new Ni(this.f,this.c.presentationTimeline,1*Math.max(this.c.minBufferTime||0,this.a.streaming.rebufferingGoal),t||null,this.Nb.bind(this),this.Tc.bind(this)),this.C=new qt(this.f,this.F,this.m),this.b=new Ji(this.i,this.C,this.h,this.c,this.Qc.bind(this),this.Rb.bind(this),this.ia.bind(this)),this.b.configure(this.a.streaming),this.b.init()}.bind(this)).then(function(){this.c.periods.forEach(this.Na.bind(this)),Xn(this),zn(this),this.j=null}.bind(this)))["catch"](function(e){return this.j==r&&(this.j=null,this.dispatchEvent(new f("unloading"))),Promise.reject(e)}.bind(this))},Fn.prototype.load=Fn.prototype.load,Fn.prototype.configure=function(e){
e.abr&&e.abr.manager&&e.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),e.abr.manager.init(this.ib.bind(this))),jn(this.a,e,Yn(this),Wn(),""),Un(this)},Fn.prototype.configure=Fn.prototype.configure,Fn.prototype.getConfiguration=function(){var e=Yn(this);return jn(e,this.a,Yn(this),Wn(),""),e},Fn.prototype.getConfiguration=Fn.prototype.getConfiguration,Fn.prototype.Jc=function(){var e=Yn(this);e.abr&&e.abr.manager&&e.abr.manager!=this.a.abr.manager&&(this.a.abr.manager.stop(),e.abr.manager.init(this.ib.bind(this))),this.a=Yn(this),Un(this)},Fn.prototype.resetConfiguration=Fn.prototype.Jc,Fn.prototype.$b=function(){return this.f},Fn.prototype.getMediaElement=Fn.prototype.$b,Fn.prototype.rb=function(){return this.h},Fn.prototype.getNetworkingEngine=Fn.prototype.rb,Fn.prototype.Zb=function(){return this.pa},Fn.prototype.getManifestUri=Fn.prototype.Zb,Fn.prototype.S=function(){return!!this.c&&this.c.presentationTimeline.S()},Fn.prototype.isLive=Fn.prototype.S,Fn.prototype.fa=function(){
return!!this.c&&this.c.presentationTimeline.fa()},Fn.prototype.isInProgress=Fn.prototype.fa,Fn.prototype.Lc=function(){var e=0,t=0;return this.c&&(t=this.c.presentationTimeline,e=t.ua(),t=t.Va()),{start:e,end:t}},Fn.prototype.seekRange=Fn.prototype.Lc,Fn.prototype.keySystem=function(){return this.g?this.g.keySystem():""},Fn.prototype.keySystem=Fn.prototype.keySystem,Fn.prototype.drmInfo=function(){return this.g?this.g.b:null},Fn.prototype.drmInfo=Fn.prototype.drmInfo,Fn.prototype.dc=function(){return this.Da},Fn.prototype.isBuffering=Fn.prototype.dc,Fn.prototype.kb=function(){if(this.A)return Promise.resolve();this.dispatchEvent(new f("unloading"));var e=Promise.resolve();return this.j&&(e=this.j.cancel(new m(7,7e3))),e.then(function(){return this.H||(this.H=Vn(this).then(function(){this.H=null}.bind(this))),this.H}.bind(this))},Fn.prototype.unload=Fn.prototype.kb,Fn.prototype.Ua=function(){return this.i?this.i.Ua():0},Fn.prototype.getPlaybackRate=Fn.prototype.Ua,Fn.prototype.ed=function(e){
this.i&&Vi(this.i,e)},Fn.prototype.trickPlay=Fn.prototype.ed,Fn.prototype.Sb=function(){this.i&&Vi(this.i,1)},Fn.prototype.cancelTrickPlay=Fn.prototype.Sb,Fn.prototype.getTracks=function(){if(!this.b)return[];var e=qi(this.b);return ui(Ki(this.b),e).filter(function(e){return 0>this.oa.indexOf(e.id)}.bind(this))},Fn.prototype.getTracks=Fn.prototype.getTracks,Fn.prototype.Mc=function(e,t){if(this.b){var i=li(Ki(this.b),e);if(i){var n=i.stream;n.allowedByApplication&&n.allowedByKeySystem&&(this.B.push({timestamp:Date.now()/1e3,id:n.id,type:e.type,fromAdaptation:!1}),i={},i[e.type]=n,"text"!=e.type&&(n=qi(this.b).text,this.configure({abr:{enabled:!1}}),n&&(i.text=n)),Hn(this,i,t))}}},Fn.prototype.selectTrack=Fn.prototype.Mc,Fn.prototype.gc=function(){return"showing"==this.m.mode},Fn.prototype.isTextTrackVisible=Fn.prototype.gc,Fn.prototype.Oc=function(e){this.m.mode=e?"showing":"hidden",Qn(this)},Fn.prototype.setTextTrackVisibility=Fn.prototype.Oc,Fn.prototype.getStats=function(){Jn(this);var e={},t={},i=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};
return this.b&&(t=qi(this.b),e=t.video||{},t=t.audio||{}),{width:e.width||0,height:e.height||0,streamBandwidth:e.bandwidth+t.bandwidth||0,decodedFrames:Number(i.totalVideoFrames),droppedFrames:Number(i.droppedVideoFrames),estimatedBandwidth:this.a.abr.manager.getBandwidthEstimate(),playTime:this.ra,bufferingTime:this.K,switchHistory:this.B.slice(0)}},Fn.prototype.getStats=Fn.prototype.getStats,Fn.prototype.addTextTrack=function(e,t,i,n,r){if(!this.b)return Promise.reject();for(var a,s=Ki(this.b),o=0;o<this.c.periods.length;o++)if(this.c.periods[o]==s){if(o==this.c.periods.length-1){if(a=this.c.presentationTimeline.ea()-s.startTime,1/0==a)return Promise.reject()}else a=this.c.periods[o+1].startTime-s.startTime;break}var u={id:this.Ra++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1!=t?null:new ke(1,0,a,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:n,codecs:r||"",
bandwidth:0,kind:i,encrypted:!1,keyId:null,language:t,allowedByApplication:!0,allowedByKeySystem:!0};return n={language:t,type:"text",primary:!1,drmInfos:[],streams:[u]},this.oa.push(u.id),s.streamSets.push(n),zi(this.b,u).then(function(){return this.A?void 0:(this.oa.splice(this.oa.indexOf(u.id),1),qn(this,s),Xn(this),{id:u.id,active:!1,type:"text",bandwidth:0,language:t,kind:i,width:null,height:null})}.bind(this))},Fn.prototype.addTextTrack=Fn.prototype.addTextTrack,Fn.prototype.gb=function(e,t){this.Ca.width=e,this.Ca.height=t},Fn.prototype.setMaxHardwareResolution=Fn.prototype.gb,Zr=Fn.prototype,Zr.Na=function(e){var t=this.b?qi(this.b):{};if(oi(this.g,t,e),t=e.streamSets.some(ci),si(e,this.a.restrictions,this.Ca)&&!this.j&&Xn(this),e=!e.streamSets.some(ci),!t)throw new m(4,4011);if(e)throw new m(4,4012)},Zr.Uc=function(e,t,i){this.a.abr.manager.segmentDownloaded(e,t,i)},Zr.Nb=function(e){Jn(this),this.Da=e,this.dispatchEvent(new f("buffering",{buffering:e}))},Zr.Tc=function(){this.b&&Qi(this.b);
},Zr.Qc=function(e){this.sa=!0,this.a.abr.manager.disable(),e=di(e,this.a),e=Kn(this,e,!0);for(var t in this.s)e[t]=this.s[t].stream;this.s={};for(t in e)this.B.push({timestamp:Date.now()/1e3,id:e[t].id,type:t,fromAdaptation:!0});return this.j||Xn(this),e},Zr.Rb=function(){this.sa=!1,this.a.abr.enabled&&this.a.abr.manager.enable();for(var e in this.s){var t=this.s[e];Xi(this.b,e,t.stream,t.Vb)}this.s={}},Zr.ib=function(e,t){var i,n=qi(this.b);for(i in e){var r=e[i];n[i]!=r?this.B.push({timestamp:Date.now()/1e3,id:r.id,type:i,fromAdaptation:!0}):delete e[i]}if(!G(e)&&this.b){for(i in e)Xi(this.b,i,e[i],t||!1);zn(this)}},Zr.ia=function(e){this.dispatchEvent(new f("error",{detail:e}))},Zr.Rc=function(e){this.dispatchEvent(e)},Zr.tc=function(){if(this.f.error){var e=this.f.error.code;if(1!=e){var t=this.f.error.msExtendedCode;t&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),this.ia(new m(3,3016,e,t))}}},Zr.Sc=function(e){var t=["output-restricted","internal-error"],i=Ki(this.b),n=!1;i.streamSets.forEach(function(i){
i.streams.forEach(function(i){var r=i.allowedByKeySystem;i.keyId&&i.keyId in e&&(i.allowedByKeySystem=0>t.indexOf(e[i.keyId])),r!=i.allowedByKeySystem&&(n=!0)})}),qn(this,i),n&&Xn(this)},t("shaka.offline.Storage",$n),$n.support=Zn,$n.prototype.o=function(){var e=this.l,t=this.a,i=this.h?this.h.o()["catch"](function(){}).then(function(){return Promise.all(e.map(function(e){return t.remove("segment",e)}))}).then(function(){return t.o()}):Promise.resolve();return this.j=this.c=this.h=this.a=null,i},$n.prototype.destroy=$n.prototype.o,$n.prototype.configure=function(e){jn(this.j,e,tr(this),{},"")},$n.prototype.configure=$n.prototype.configure,$n.prototype.ad=function(e,t,i){function n(e){a=e}if(this.v)return Promise.reject(new m(9,9006));this.v=!0;var r,a=null;return ir(this).then(function(){return sr(this),er(this,e,n,i)}.bind(this)).then(function(i){if(sr(this),this.b=i.manifest,this.g=i.Wb,this.b.presentationTimeline.S()||this.b.presentationTimeline.fa())throw new m(9,9005,e);this.b.periods.forEach(this.s.bind(this)),
this.f=this.a.b.manifest++,this.m=0,i=this.b.periods.map(this.A.bind(this));var n=this.g.b,a=Dt(this.g);if(n){if(!a.length)throw new m(9,9007,e);n.initData=[]}return r={key:this.f,originalManifestUri:e,duration:this.m,size:0,periods:i,sessionIds:a,drmInfo:n,appMetadata:t},xn(this.h,r)}.bind(this)).then(function(){if(sr(this),a)throw a;return kn(this.a,"manifest",r)}.bind(this)).then(function(){return nr(this)}.bind(this)).then(function(){return Ln(r)}.bind(this))["catch"](function(e){return nr(this)["catch"](j).then(function(){throw e})}.bind(this))},$n.prototype.store=$n.prototype.ad,$n.prototype.remove=function(e){function t(e){6013!=e.code&&(s=e)}var i=e.offlineUri,n=/^offline:([0-9]+)$/.exec(i);if(!n)return Promise.reject(new m(9,9004,i));var r,a,s=null,o=Number(n[1]);return ir(this).then(function(){return sr(this),this.a.get("manifest",o)}.bind(this)).then(function(e){if(sr(this),!e)throw new m(9,9003,i);return r=e,e=On(r),a=new xt(this.c.h,t,function(){}),a.configure(this.c.getConfiguration().drm),
a.init(e,!0)}.bind(this)).then(function(){return Pt(a,r.sessionIds)}.bind(this)).then(function(){return a.o()}.bind(this)).then(function(){if(sr(this),s)throw s;var t=r.periods.map(function(e){return e.streams.map(function(e){var t=e.segments.map(function(e){return e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.uri),Number(e[1])});return e.initSegmentUri&&(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e.initSegmentUri),t.push(Number(e[1]))),t}).reduce(N,[])}).reduce(N,[]),i=0,n=t.length,a=this.j.progressCallback;return wn(this.a,function(r){return r=t.indexOf(r.key),r>=0&&(a(e,i/n),i++),r>=0}.bind(this))}.bind(this)).then(function(){return sr(this),this.j.progressCallback(e,1),this.a.remove("manifest",o)}.bind(this))},$n.prototype.remove=$n.prototype.remove,$n.prototype.list=function(){var e=[];return ir(this).then(function(){return sr(this),this.a.forEach("manifest",function(t){e.push(Ln(t))})}.bind(this)).then(function(){return e})},$n.prototype.list=$n.prototype.list,$n.prototype.B=function(e){
var t=[],i=e.filter(function(e){return"video"==e.type&&480>=e.height});i.sort(function(e,t){return t.bandwidth-e.bandwidth}),i.length&&t.push(i[0]);for(var n=St(this.c.getConfiguration().preferredAudioLanguage),i=[0,Aa,Sa],r=e.filter(function(e){return"audio"==e.type}),i=i.map(function(e){return r.filter(function(t){return t=St(t.language),At(e,n,t)})}),a=r,s=0;s<i.length;s++)i[s].length&&(a=i[s]);a.sort(function(e,t){return e.bandwidth-t.bandwidth}),a.length&&t.push(a[Math.floor(a.length/2)]);var i=St(this.c.getConfiguration().preferredTextLanguage),o=At.bind(null,Sa,i);return t.push.apply(t,e.filter(function(e){var t=St(e.language);return"text"==e.type&&o(t)})),t},$n.prototype.s=function(e){function t(e,t,i){return t=t.filter(function(e){return e.type==i}),0==t.length?null:li(e,t[0]).stream}var i={};this.i&&(i={video:t(this.b.periods[0],this.i,"video"),audio:t(this.b.periods[0],this.i,"audio")}),oi(this.g,i,e),si(e,this.c.getConfiguration().restrictions,{width:1/0,height:1/0})},$n.prototype.A=function(e){
var t=ui(e,null),t=this.j.trackSelectionCallback(t);this.i||(this.i=t,this.b.periods.forEach(this.s.bind(this)));for(var i=t.length-1;i>0;--i){for(var n=!1,r=i-1;r>=0;--r)if(t[i].type==t[r].type&&t[i].kind==t[r].kind&&t[i].language==t[r].language){n=!0;break}if(n)break}return t=t.map(function(t){return t=li(e,t),ar(this,e,t.bd,t.stream)}.bind(this)),{startTime:e.startTime,streams:t}},Ra.offline=Zn,t("shaka.polyfill.installAll",function(){for(var e=0;e<xa.length;++e)xa[e]()});var xa=[];t("shaka.polyfill.register",or),or(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;
}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ur),document.addEventListener("webkitfullscreenerror",ur),document.addEventListener("mozfullscreenchange",ur),document.addEventListener("mozfullscreenerror",ur),document.addEventListener("MSFullscreenChange",ur),document.addEventListener("MSFullscreenError",ur)}}),or(function(){var t=navigator.userAgent;t&&0<=t.indexOf("CrKey")&&delete e.indexedDB}),dr.prototype.createMediaKeys=function(){var e=new fr(this.keySystem);return Promise.resolve(e)},dr.prototype.getConfiguration=function(){return this.a},fr.prototype.createSession=function(e){if("temporary"!=(e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new vr(this.a)},fr.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));
},i(vr),Zr=vr.prototype,Zr.generateRequest=function(e,t){this.a=new y;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),_(this.f,this.c,"mskeymessage",this.pc.bind(this)),_(this.f,this.c,"mskeyadded",this.nc.bind(this)),_(this.f,this.c,"mskeyerror",this.oc.bind(this)),yr(this,"status-pending")}catch(i){this.a.reject(i)}return this.a},Zr.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Zr.update=function(e){this.b=new y;try{this.c.update(new Uint8Array(e))}catch(t){this.b.reject(t)}return this.b},Zr.close=function(){try{this.c.close(),this.closed.resolve(),A(this.f)}catch(e){this.closed.reject(e)}return this.closed},Zr.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},Zr.pc=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new f("message",{messageType:void 0==this.keyStatuses.Wa()?"licenserequest":"licenserenewal",
message:e.message.buffer}))},Zr.nc=function(){this.a?(yr(this,"usable"),this.a.resolve(),this.a=null):this.b&&(yr(this,"usable"),this.b.resolve(),this.b=null)},Zr.oc=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,this.a)this.a.reject(e),this.a=null;else if(this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:yr(this,"output-not-allowed");default:yr(this,"internal-error")}};var Ia;Zr=br.prototype,Zr.hb=function(e){this.size=void 0==e?0:1,this.a=e},Zr.Wa=function(){return this.a},Zr.forEach=function(e){this.a&&e(this.a,Ia)},Zr.get=function(e){return this.has(e)?this.a:void 0},Zr.has=function(e){var t=Ia;return!(!this.a||!z(new Uint8Array(e),new Uint8Array(t)))},Zr.keys=function(){},kr.prototype.createSession=function(){},kr.prototype.setServerCertificate=function(){},wr.prototype.getConfiguration=function(){},wr.prototype.createMediaKeys=function(){};
var Pa="";Cr.prototype.createMediaKeys=function(){var e=new Rr(this.a);return Promise.resolve(e)},Cr.prototype.getConfiguration=function(){return this.b},Zr=Rr.prototype,Zr.createSession=function(e){var t=e||"temporary";if("temporary"!=t&&"persistent-license"!=t)throw new TypeError("Session type "+e+" is unsupported on this platform.");return e=this.b||document.createElement("video"),e.src||(e.src="about:blank"),t=new Pr(e,this.g,t),this.c.push(t),t},Zr.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},Zr.yc=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},Zr.xc=function(e){var t=Ir(this,e.sessionId);t&&(e=new f("message",{messageType:void 0==t.keyStatuses.Wa()?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},Zr.vc=function(e){(e=Ir(this,e.sessionId))&&(Dr(e,"usable"),
e.a&&e.a.resolve(),e.a=null)},Zr.wc=function(e){var t=Ir(this,e.sessionId);if(t){var i=Error("EME v0.1b key error");i.errorCode=e.errorCode,i.errorCode.systemCode=e.systemCode,!e.sessionId&&t.b?(i.method="generateRequest",45==e.systemCode&&(i.message="Unsupported session type."),t.b.reject(i),t.b=null):e.sessionId&&t.a?(i.method="update",t.a.reject(i),t.a=null):(i=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Dr(t,"output-restricted"):1==i?Dr(t,"expired"):Dr(t,"internal-error"))}},i(Pr),Zr=Pr.prototype,Zr.jb=function(e,t){if(this.a)this.a.then(this.jb.bind(this,e,t))["catch"](this.jb.bind(this,e,t));else{this.a=e;var i,n;"webkit-org.w3.clearkey"==this.c?(i=Re(t),n=JSON.parse(i),"oct"!=n.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=J(n.keys[0].k),n=J(n.keys[0].kid)):(i=new Uint8Array(t),n=null);var r=Ar("addKey");try{this.f[r](this.c,i,n,this.sessionId)}catch(a){this.a.reject(a),this.a=null}}},Zr.generateRequest=function(e,t){
return Or(this,t,null)},Zr.load=function(e){return"persistent-license"==this.g?Or(this,null,e):Promise.reject(Error("Not a persistent session."))},Zr.update=function(e){var t=new y;return this.jb(t,e),t},Zr.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ar("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},Zr.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};var Oa;Zr=Mr.prototype,Zr.hb=function(e){this.size=void 0==e?0:1,this.a=e},Zr.Wa=function(){return this.a},Zr.forEach=function(e){this.a&&e(this.a,Oa)},Zr.get=function(e){return this.has(e)?this.a:void 0},Zr.has=function(e){var t=Oa;return!(!this.a||!z(new Uint8Array(e),new Uint8Array(t)))},Zr.keys=function(){},or(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?_r("webkit"):HTMLMediaElement.prototype.generateKeyRequest?_r(""):e.MSMediaKeys?(Ia=new Uint8Array([0]).buffer,
delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hr,e.MediaKeys=fr,e.MediaKeySystemAccess=dr,navigator.requestMediaKeySystemAccess=cr):(navigator.requestMediaKeySystemAccess=Tr,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Er,e.MediaKeys=kr,e.MediaKeySystemAccess=wr))}),or(function(){if(e.MediaSource){var t=navigator.vendor,i=navigator.appVersion;!t||!i||0>t.indexOf("Apple")||(0<=i.indexOf("Version/8")?e.MediaSource=null:0<=i.indexOf("Version/9")?Nr():0<=i.indexOf("Version/10")&&(Nr(),jr()))}});var Da=0;Ur.prototype.then=function(e,t){var i=new Ur;switch(this.ka){case 1:Hr(this,i,e);break;case 2:Hr(this,i,t);break;case Da:this.c.push({J:i,Ea:e}),this.b.push({J:i,Ea:t})}return i},Ur.prototype["catch"]=function(e){return this.then(void 0,e)},Ur.prototype.X=function(e){if(this.ka==Da){for(this.Pa=e,this.ka=1,e=0;e<this.c.length;++e)Hr(this,this.c[e].J,this.c[e].Ea);
this.c=[],this.b=[]}},Ur.prototype.a=function(e){if(this.ka==Da){for(this.Pa=e,this.ka=2,e=0;e<this.b.length;++e)Hr(this,this.b[e].J,this.b[e].Ea);this.c=[],this.b=[]}};var Ma=null,Na=[];or(function(t){e.setImmediate?(qr=function(t){return e.setImmediate(t)},zr=function(t){return e.clearImmediate(t)}):(qr=function(t){return e.setTimeout(t,0)},zr=function(t){return e.clearTimeout(t)}),e.Promise&&!t||(e.Promise=Ur,e.Promise.resolve=Gr,e.Promise.reject=Vr,e.Promise.all=Wr,e.Promise.race=Yr,e.Promise.prototype.then=Ur.prototype.then,e.Promise.prototype["catch"]=Ur.prototype["catch"])}),or(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Xr)}}),or(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Qr;else if(6==t)e.VTTCue=$r;else{var i;try{i=!!Qr(1,2,"")}catch(n){i=!1}i&&(e.VTTCue=Qr)}}})}).call(r,this),"undefined"!=typeof e&&e.exports?e.exports=r.shaka:(n=function(){
return r.shaka}.call(t,i,t,e),!(void 0!==n&&(e.exports=n)))}()}})}),define("third_party/jwplayer/provider.cast",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([4],{68:function(e,t,i){var n,r;n=[i(74),i(149),i(148),i(147),i(4),i(5),i(2),i(1)],r=function(e,t,i,n,r,a,s,o){var u=n.loadApi(),l={};return function(e,n){function c(){var e=n.get("cast")||{};n.set("castState",{available:!1,active:!1,deviceName:""}),w&&(w.off(),w.reset()),w=new t(e.customAppId),w.on("castState",T),w.on("mediaUpdate",y),w.on("setPlaylist",p),w.updateCastState(),l[n.get("id")]=w;var r=n.chooseProvider;n.chooseProvider=function(e){return n.get("castActive")?i:r(e)}}function d(){}function h(){return n.getVideo()}function f(){n.changeVideoProvider(i),k=h(),k.setService(w)}function p(){w.setPlaylist(n),n.set("state",a.BUFFERING);var e=n.get("playlistItem");k.updateScreen("Connecting",e.image)}function v(){var t,i=n.get("castClicked")&&!w.getPlayerId();i&&w.setPlayerId(n.get("id")),E()&&(e.setFullscreen(!1),f(),
w.addListeners(),t=w.getMedia(),t?w.loaded(t):p(),n.on("change:playlist",p))}function g(){var t=n.get("state"),i=t===a.COMPLETE,s=t===a.IDLE,u=t===a.ERROR,l=n.get("item"),c=n.get("playlist"),d=n.get("playlistItem");w.removeListeners(),k&&k.remove(),d&&u?(d=c[l+1],void 0===d?i=!0:(n.set("item",l+1),n.set("playlistItem",d))):d&&!i&&(d=o.extend({},d),d.starttime=d.start=n.get("position")||0),n.set("castActive",!1),n.set("castClicked",!1),n.resetProvider(),n.setProvider(d),n.off("change:playlist",p),d&&(i?(n.stopVideo(),e.trigger(r.JWPLAYER_PLAYLIST_COMPLETE,{})):s||n.loadVideo(d))}function m(e){e?v():k&&g()}function y(e){var t=e.field,i=e.value;if(k){"media"===t&&b(i);var n=k.castEventHandlers[t];n&&n(i)}}function b(e){var t,i=n.get("playlist");if(e.media){t=e.media.metadata;var r=i[t.index];o.isNumber(t.index)&&t.index!==n.get("item")&&(n.set("item",t.index),n.set("playlistItem",r),n.trigger("itemReady",r));var a=n.get("castState").deviceName,s=a?"Casting to "+a:"";k.updateScreen(s,r.image);
}}function T(e){var t=n.get("castActive"),i=e.active;t!==i&&m(i),i=i&&E(),n.set("castAvailable",e.available),n.set("castActive",i),n.set("castState",{available:e.available,active:i,deviceName:e.deviceName})}function E(){return w.getPlayerId()===n.get("id")}var k=null,w=l[n.get("id")];u.then(c)["catch"](d),this.castToggle=s.noop}}.apply(t,n),!(void 0!==r&&(e.exports=r))},147:function(e,t,i){var n,r;n=[i(4),i(13),i(3),i(1)],r=function(e,t,i,n){function r(){return s?o:o=new Promise(function(i,n){var r="__onGCastApiAvailable";s=new t(u),s.addEventListener(e.ERROR,a),s.load(),window[r]=function(e){e?i(e):n()}})}function a(){s.resetEventListeners(),s=null}var s,o,u="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",l=n.extend({loadApi:r},i);return l}.apply(t,n),!(void 0!==r&&(e.exports=r))},148:function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,a,s=i(165),o=n(s);r=[i(2),i(4),i(3),i(5),i(9),i(1)],a=function(e,t,i,n,r,a){function s(t,i){var n=e.createElement((0,
o["default"])(t));return i&&(n.style.backgroundImage='url("'+i+'")'),n}var u=function(){var o,u,l=this;a.extend(l,i),l.setState=function(e){return r.setState.call(this,e)},l.destroy=function(){clearInterval(l.timeInterval)},l.supportsFullscreen=function(){return!1},l.setService=function(e){u=e,l._castingScreen=l.updateScreen()},l.setup=function(e){l.setState(n.BUFFERING),l.sendCommand("setup",e)},l.init=function(e){l.sendCommand("item",e)},l.load=function(e){l.init(e),l.play()},l.play=function(){l.sendCommand("play")},l.pause=function(){l.sendCommand("pause")},l.seek=function(e){l.trigger(t.JWPLAYER_MEDIA_SEEK,{position:l.getRemote("currentTime"),offset:e}),l.sendCommand("seek",e,function(){l.trigger(t.JWPLAYER_MEDIA_SEEKED)})},l.next=function(e){l.sendCommand("next",e)},l.volume=function(e){l.sendCommand("volume",e)},l.mute=function(e){l.sendCommand("mute",e)},l.sendCommand=function(e){if(u){var t=Array.prototype.slice.call(arguments,1);u[e]&&u[e].apply(u,t)}},l.getRemote=function(e){if(u){
var t=u.getMedia();return t?"currentTime"===e?t.getEstimatedTime():t[e]||t.media&&t.media[e]:null}},l.updateScreen=function(e,t){o.innerHTML=s(e,t).outerHTML},l.setContainer=function(e){o=e,l._castingScreen&&e.appendChild(l._castingScreen)},l.getContainer=function(){return o},l.remove=function(){clearInterval(l.timeInterval),l._castingScreen&&o===l._castingScreen.parentNode&&o.removeChild(l._castingScreen),l._castingScreen=null},l.getDuration=function(){return l.getRemote("duration")||1/0},l.stop=l.setControls=l.setCurrentQuality=l.resize=l.seekDrag=l.setVisibility=e.noop,l.setFullScreen=l.getFullScreen=l.checkComplete=a.constant(!1),l.getCurrentQuality=a.constant(0),l.getQualityLevels=a.constant(["Auto"]),l.castEventHandlers={media:function(e){var t=l.getRemote("items"),i="IDLE"===e.playerState&&"FINISHED"===e.idleReason,n="IDLE"===e.playerState&&"ERROR"===e.idleReason,r=i&&!t;l.castEventHandlers.playerState(r?"complete":e.playerState),l.castEventHandlers.currentTime(),clearInterval(l.timeInterval),
"PLAYING"===e.playerState?l.timeInterval=setInterval(l.castEventHandlers.currentTime,100):r?(l.setState("complete"),u.disconnect()):n&&(l.setState("error"),u.disconnect())},volume:function(e){l.trigger("volume",{volume:Math.round(100*e.volume)}),l.trigger("mute",{mute:e.isMute})},playerState:function(e){if(e&&n[e.toUpperCase()]){var i=e.toLowerCase();i!==n.IDLE&&i!==n.BUFFERING||l.trigger(t.JWPLAYER_MEDIA_BUFFER,{bufferPercent:0,position:l.getRemote("currentTime"),duration:l.getDuration()}),l.setState(i)}},currentTime:function(){l.trigger(t.JWPLAYER_MEDIA_TIME,{position:l.getRemote("currentTime"),duration:l.getDuration()})},duration:function(){l.trigger(t.JWPLAYER_MEDIA_TIME,{position:l.getRemote("currentTime"),duration:l.getDuration()})},isPaused:function(e){e?l.setState(n.PAUSED):l.setState(n.PLAYING)}}};return u.prototype={getName:function(){return{name:"chromecast"}}},u}.apply(t,r),!(void 0!==a&&(e.exports=a))},149:function(e,t,i){var n,r;n=[i(3),i(2),i(1)],r=function(e,t,i){return function(t){
function n(e,t){var n=function(e){var t=!i.size(e.mediaTypes)||!i.contains(e.mediaTypes,'video/webm; codecs="vp9"'),n=!i.size(e.drm)||i.any(e.drm,function(e,t){return"fairplay"!==t});return t&&n},s=e.allSources.slice(0).sort(function(e,t){return!e["default"]&&t["default"]?1:0}),o=i.find(s,n);if(o){var l=a(o.type),c=r(o.file),h=e.image?r(e.image):null,f=o.drm,p=new d.MediaInfo(c,l);return p.metadata=new d.GenericMediaMetadata,p.metadata.title=e.title,p.metadata.subtitle=e.description,p.metadata.index=t||0,p.metadata.playerId=u.getPlayerId(),h&&(p.metadata.images=[{url:h}]),f&&(p.customData={drm:f}),p}}function r(e){var t=document.createElement("a");return t.href=e,t.href}function a(e){switch(e){case"mp4":case"webm":return"video/"+e;case"mpd":case"dash":return"application/dash+xml";case"m3u8":case"hls":return"application/x-mpegURL";case"aac":return"audio/x-aac";case"mp3":return"audio/mpeg";default:return e}}function s(){var e=f.getCastState()!==h.NO_DEVICES_AVAILABLE,t="";p=f.getCurrentSession(),
p&&(t=p.getCastDevice().friendlyName||t),u.trigger("castState",{available:e,active:!!p,deviceName:t})}function o(){var e=u.getMedia();e&&u.trigger("mediaUpdate",{field:"media",value:e})}var u=this,l=window.chrome,c=l.cast,d=c.media,h=window.cast.framework,f=h.CastContext.getInstance(),p=null,v=h.CastContextEventType.CAST_STATE_CHANGED,g=t||d.DEFAULT_MEDIA_RECEIVER_APP_ID;i.extend(u,e),f.removeEventListener(v,s),f.addEventListener(v,s),f.setOptions({receiverApplicationId:g,autoJoinPolicy:c.AutoJoinPolicy.ORIGIN_SCOPED}),u.updateCastState=s,u.setPlaylist=function(e){var t,r,a,s=e.get("playlist"),o=e.get("item"),c=e.get("position"),h=e.get("repeat");"complete"===e.get("state")&&(o=0,c=0),r=i.reduce(s,function(e,t,i){var r,a=n(t,i);return a&&(r=new d.QueueItem(a),a.metadata.index===o&&(r.startTime=c),e.push(r)),e},[]),t=new d.QueueLoadRequest(r),t.startIndex=o,h&&(t.repeatMode=l.cast.media.RepeatMode.ALL),a=p.getSessionObj(),a.queueLoad(t,u.loaded,u.error)},u.getPlayerId=function(){var e,t,i=u.getMedia();
return i&&i.media?(e=i.media.metadata,e.playerId):p?(t=p.getSessionObj(),t.playerId):null},u.setPlayerId=function(e){var t;p&&(t=p.getSessionObj(),t.playerId=e)},u.loaded=function(e){if(u.trigger("mediaUpdate",{field:"volume",value:{volume:p.getVolume(),isMute:p.isMute()}}),p){var t=p.getSessionObj();t.addMediaListener(function(e){e.addUpdateListener(o)})}e.addUpdateListener(o)},u.addListeners=function(){var e;return p?(e=p.getSessionObj(),e.addUpdateListener(s),void p.addEventListener(h.SessionEventType.VOLUME_CHANGED,function(e){u.trigger("mediaUpdate",{field:"volume",value:e})})):null},u.reset=function(){u.removeListeners(),f&&f.removeEventListener(v,s)},u.removeListeners=function(){var e;return p?(e=p.getSessionObj(),e.removeUpdateListener(s),e.media.forEach(function(e){e.removeUpdateListener(o)}),void p.removeEventListener(h.SessionEventType.VOLUME_CHANGED)):null},u.getMedia=function(){if(p){var e=p.getSessionObj(),t=e.media;if(t&&t.length)return t[0]}return null},u.error=function(e){
console.error("Error:",e),u.disconnect()},u.item=function(e){var t=u.getMedia();if(!t)return void u.trigger("setPlaylist");var r=n(e),a=i.find(t.items,function(e){return e.media.contentId===r.contentId&&e.media.index===r.index});a?t.queueJumpToItem(a.itemId):u.trigger("setPlaylist")},u.play=function(){var e=u.getMedia();e&&u.getMedia().play()},u.pause=function(){u.getMedia().pause()},u.next=function(){u.getMedia().queueNext()},u.disconnect=function(){p.endSession(!0)},u.seek=function(e,t){var i=new d.SeekRequest;i.currentTime=e,i.resumeState=d.ResumeState.PLAYBACK_START,u.getMedia().seek(i,t)},u.mute=function(e){p.setMute(e)},u.volume=function(e){p.setVolume(e/100)}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},165:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<div class="jw-cast jw-reset jw-preview"><div class="jw-cast-container"><div class="jw-cast-text jw-reset">'+e+"</div></div></div>";
}}})}),define("third_party/jwplayer/provider.html5",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([5],{8:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},10:function(e,t,i){var n,r;n=[i(1),i(12),i(2),i(16),i(15)],r=function(e,t,i,n,r){function a(t){if(this._currentTextTrackIndex=-1,t){if(this._textTracks?(this._textTracks=e.reject(this._textTracks,function(e){return this.renderNatively&&"nativecaptions"===e._id?(delete this._tracksById[e._id],!0):void 0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),t.length){var n=0,a=t.length;for(n;a>n;n++){var s=t[n];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind,!s.label&&"captions"===s.kind){var o=r.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=r.createId(s,this._textTracks.length);if(this._tracksById[s._id])continue;
s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",s.oncuechange=R.bind(this),this._tracksById[s._id]=s;else if(_(s.kind)){var u,l=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=l,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var c=this._cuesByTrackId[s._id].cues;u=c.shift();)k(this.renderNatively,s,u);s.mode=l,this._cuesByTrackId[s._id].loaded=!0}L.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||b.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(e){if(this.renderNatively){var t=e===this._itemTracks;t||n.cancelXhr(this._itemTracks),this._itemTracks=e,
e&&(t||(this.disableTextTrack(),C.call(this),this.addTextTracks(e)))}}function o(){return this._currentTextTrackIndex}function u(t){return this.renderNatively?void(this._textTracks&&(0===t&&e.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==t-1&&(this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1))}function l(e){if(e.text&&e.begin&&e.end){var t=e.trackid.toString(),i=this._tracksById&&this._tracksById[t];i||(i={kind:"captions",_id:t,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var r;e.useDTS&&(i.source||(i.source=e.source||"mpegts")),r=e.begin+"_"+e.text;var a=this._metaCuesByTextTime[r];if(!a){a={begin:e.begin,
end:e.end,text:e.text},this._metaCuesByTextTime[r]=a;var s=n.convertToVTTCues([a])[0];i.data.push(s)}}}function c(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var a={kind:e.type,_id:t,label:n,embedded:!0};i=S.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):T.call(this,[i])}x.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?k(this.renderNatively,i,r):i.data.push(r))}function d(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],r=[],a=!1,s=0;s<i.length;s++){var o=i[s],u=e.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),a=!0)}a&&r.sort(function(e,t){return e.begin-t.begin});var l=n.convertToVTTCues(r);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(f(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i));
}function f(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function p(){n.cancelXhr(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(w(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),w(this.renderNatively,this.video.textTracks))}function v(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function g(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var t=this.video.textTracks,i=e.filter(t,function(e){
return(e.inuse||!e._id)&&_(e.kind)});if(!this._textTracks||I.call(this,i))return void this.setTextTracks(t);for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}function b(){this.setTextTracks(this.video.textTracks)}function T(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||_(i.kind)){var r=S.call(this,i);L.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),P))}}!this.renderNatively&&this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function E(e,t){if(this.renderNatively){var i=this._tracksById[e._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded){var n;for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};n=t.shift();)k(this.renderNatively,i,n);
}}}function k(e,t,n){if(!i.isIE()||!e||!window.TextTrackCue)return void t.addCue(n);var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);t.addCue(r)}function w(t,n){n.length&&e.each(n,function(e){if(!(i.isIE()&&t&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function _(e){return"subtitles"===e||"captions"===e}function A(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function S(t){var i,n=r.createLabel(t,this._unknownCount),a=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===t.kind){var s=this.video.textTracks;i=e.findWhere(s,{label:a}),i?(i.kind=t.kind,i.language=t.language||""):i=this.video.addTextTrack(t.kind,a,t.language||""),i["default"]=t["default"],i.mode="disabled",i.inuse=!0}else i=t,i.data=i.data||[];return i._id||(i._id=r.createId(t,this._textTracks.length)),
i}function L(e){this._textTracks.push(e),this._tracksById[e._id]=e}function C(){if(this._textTracks){var t=e.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),e.each(t,function(e){this._tracksById[e._id]=e}),this._textTracks=t}}function R(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var a=[];if(e.each(n,function(e){e.startTime<r||(e.data||e.value?a.push(e):e.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(e.text)}))},this),a.length){var s=t.parseID3(a);this.trigger("meta",{metadataTime:r,metadata:s})}this._activeCuePosition=r}}}function x(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var a="_"+t.line,s=Math.floor(20*t.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1||(r[n+a]=s,0));case"metadata":var u=t.data?new Uint8Array(t.data).join(""):t.text;
return n=t.startTime+u,!r[n]&&(r[n]=t.endTime,!0);default:return!1}}function I(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function P(e){i.log("CAPTIONS("+e+")")}var O={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:A,addTracksListener:h,clearTracks:p,clearCueData:v,disableTextTrack:g,enableTextTrack:m,getSubtitlesTrack:o,removeTracksListener:f,addTextTracks:T,setTextTracks:a,setupSideloadedTracks:s,setSubtitlesTrack:u,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:d,addCaptionsCue:l,addVTTCue:c,addVTTCuesToTrack:E,renderNatively:!1};return O}.apply(t,n),!(void 0!==r&&(e.exports=r))},32:function(e,t,i){var n,r;n=[],r=function(){function e(e){return e&&e.length?e.end(e.length-1):0}return{endOfRange:e}}.apply(t,n),!(void 0!==r&&(e.exports=r));
},70:function(e,t,i){var n,r;n=[i(100),i(56),i(4),i(1)],r=function(e,t,i,n){function r(e,r){function d(i){var r=i.target,o=i.initData;if(r.webkitKeys||r.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0")),!r.webkitKeys)throw new Error("Could not create MediaKeys");var c=e.fairplay;c.initData=o,t.ajax(c.certificateUrl,function(e){var t=new Uint8Array(e.response),i=c.extractContentId(l(o));n.isString(i)&&(i=u(i));var d=a(o,i,t),h=r.webkitKeys.createSession("video/mp4",d);if(!h)throw new Error("Could not create key session");s(h,"webkitkeymessage",f),s(h,"webkitkeyerror",m),c.session=h},g,{responseType:"arraybuffer"})}function f(t){var i=e.fairplay,r=t.target,a=t.message,s=new XMLHttpRequest;s.responseType=i.licenseResponseType,s.addEventListener("load",p,!1),s.addEventListener("error",y,!1);var o="";o=n.isFunction(i.processSpcUrl)?i.processSpcUrl(l(i.initData)):i.processSpcUrl,s.open("POST",o,!0),n.each(i.licenseRequestHeaders,function(e){s.setRequestHeader(e.name,e.value);
});var u=i.licenseRequestMessage(a,r);s.send(u)}function p(t){var i=t.target,r=e.fairplay.extractKey(i.response);n.isFunction(r.then)?r.then(v):v(r)}function v(t){var i=e.fairplay.session,r=t;n.isString(r)&&(r=c(r)),i.update(r)}function g(){e.trigger(i.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: Failed to retrieve the server certificate"})}function m(){e.trigger(i.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: Decryption key error was encountered"})}function y(){e.trigger(i.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: The license request failed"})}var b=r.sources[0];if(!e.fairplay||e.fairplay.source!==b){var T=b.drm;T&&T.fairplay?(e.fairplay=n.extend({},h,T.fairplay),e.fairplay.source=b,e.fairplay.destroy=function(){o(e.video,"webkitneedkey",d);var t=this.session;t&&(o(t,"webkitkeymessage",f),o(t,"webkitkeyerror",m)),e.fairplay=null},s(e.video,"webkitneedkey",d)):e.fairplay&&e.fairplay.destroy()}}function a(e,t,i){var n=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),a=new DataView(r),s=new Uint8Array(r,n,e.byteLength);
s.set(e),n+=e.byteLength,a.setUint32(n,t.byteLength,!0),n+=4;var o=new Uint16Array(r,n,t.length);o.set(t),n+=o.byteLength,a.setUint32(n,i.byteLength,!0),n+=4;var u=new Uint8Array(r,n,i.byteLength);return u.set(i),new Uint8Array(r,0,r.byteLength)}function s(e,t,i){o(e,t,i),e.addEventListener(t,i,!1)}function o(e,t,i){e&&e.removeEventListener(t,i)}function u(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0,r=e.length;r>n;n++)i[n]=e.charCodeAt(n);return i}function l(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function c(e){for(var t=window.atob(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;i>r;r++)n[r]=t.charCodeAt(r);return n}var d=function(t,i){e.call(this,t,i);var n=this.init,a=this.load,s=this.destroy;this.init=function(e){r(this,e),n.call(this,e)},this.load=function(e){r(this,e),a.call(this,e)},this.destroy=function(e){this.fairplay&&this.fairplay.destroy(),s.call(this,e)}},h={certificateUrl:"",processSpcUrl:"",licenseResponseType:"arraybuffer",
licenseRequestHeaders:[],licenseRequestMessage:function(e){return e},extractContentId:function(e){return e.split("skd://")[1]},extractKey:function(e){return new Uint8Array(e)}};return d.getName=e.getName,d}.apply(t,n),!(void 0!==r&&(e.exports=r))},100:function(e,t,i){var n,r,a=i(8);n=[i(53),i(20),i(2),i(11),i(1),i(4),i(5),i(9),i(3),i(10),i(32)],r=function(e,t,i,n,r,s,o,u,l,c,d){function h(e,t){i.foreach(e,function(e,i){t.addEventListener(e,i,!1)})}function f(e,t){i.foreach(e,function(e,i){t.removeEventListener(e,i,!1)})}function p(u,p){function L(e){return!!(i.isIOS()||i.isSafari()||i.isEdge())||e&&i.isChrome()}function C(e,t){Ke.setAttribute(e,t||"")}function R(){he(Ke.audioTracks),Se.setTextTracks(Ke.textTracks),C("jw-loaded","data")}function x(){C("jw-loaded","started")}function I(e){Se.trigger("click",e)}function P(){Oe||(B(F()),N(se(),we,ke))}function O(){N(se(),we,ke)}function D(){v(xe),Ce=!0,Se.state===o.STALLED?Se.setState(o.PLAYING):Se.state===o.PLAYING&&(xe=setTimeout(ae,g)),Oe&&Ke.duration===1/0&&0===Ke.currentTime||(B(F()),
j(Ke.currentTime),N(se(),we,ke),Se.state===o.PLAYING&&(Se.trigger(s.JWPLAYER_MEDIA_TIME,{position:we,duration:ke}),M()))}function M(){var e=Be.level;if(e.width!==Ke.videoWidth||e.height!==Ke.videoHeight){if(e.width=Ke.videoWidth,e.height=Ke.videoHeight,ge(),!e.width||!e.height||-1===Pe)return;Be.reason=Be.reason||"auto",Be.mode="hls"===Ae[Pe].type?"auto":"manual",Be.bitrate=0,e.index=Pe,e.label=Ae[Pe].label,Se.trigger("visualQuality",Be),Be.reason=""}}function N(e,t,i){0===i||e===Ie&&i===ke||(Ie=e,Se.trigger(s.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:i})),me()}function j(e){0>ke&&(e=-(ie()-e)),we=e}function F(){var e=Ke.duration,t=ie();if(e===1/0&&t){var i=t-te();i!==1/0&&i>m&&(e=-i)}return e}function B(e){ke=e,Re&&e&&e!==1/0&&Se.seek(Re)}function U(){var e=F();Oe&&e===1/0&&(e=0),Se.trigger(s.JWPLAYER_MEDIA_META,{duration:e,height:Ke.videoHeight,width:Ke.videoWidth}),B(e)}function G(){Ce=Ue=!0,Oe||ge(),b&&Se.setTextTracks(Se._textTracks),W()}function V(){C("jw-loaded","meta"),
U()}function W(){_e||i.isIOS()&&!Ue||(_e=!0,Ue=!1,Se.trigger(s.JWPLAYER_MEDIA_BUFFER_FULL))}function Y(){Se.setState(o.PLAYING),Ke.hasAttribute("jw-played")||C("jw-played",""),Ke.hasAttribute("jw-gesture-required")&&Ke.removeAttribute("jw-gesture-required"),Se.trigger(s.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function H(){Se.state!==o.COMPLETE&&Ke.hasAttribute("jw-played")&&Ke.currentTime!==Ke.duration&&Se.setState(o.PAUSED)}function J(){return Oe||Ke.paused||Ke.ended||Se.state===o.LOADING||Se.state===o.ERROR||Se.seeking?void 0:i.isIOS()&&Ke.duration-Ke.currentTime<=.1?void oe():void(be()&&(He=!0,ye())||Se.setState(o.STALLED))}function K(){Se.trigger(s.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})}function q(e){var t;return"array"===i.typeOf(e)&&e.length>0&&(t=r.map(e,function(e,t){return{label:e.label||t}})),t}function z(e){Ae=e,Pe=X(e);var t=q(e);t&&Se.trigger(s.JWPLAYER_MEDIA_LEVELS,{levels:t,currentQuality:Pe})}function X(e){var t=Math.max(0,Pe),i=p.qualityLabel;
if(e)for(var n=0;n<e.length;n++)if(e[n]["default"]&&(t=n),i&&e[n].label===i)return n;return Be.reason="initial choice",Be.level={},t}function Q(){var e=Ke.play();e&&e["catch"]?e["catch"](function(e){console.warn(e),"NotAllowedError"===e.name&&Ke.hasAttribute("jw-gesture-required")&&Se.trigger("autoplayFailed")}):Ke.hasAttribute("jw-gesture-required")&&Se.trigger("autoplayFailed")}function $(e,t){Re=0,Te();var n=document.createElement("source");n.src=Ae[Pe].file;var r=Ke.src!==n.src,a=Ke.getAttribute("jw-loaded"),s=Ke.hasAttribute("jw-played");r||"none"===a||"started"===a?(ke=t,Z(Ae[Pe]),Se.setupSideloadedTracks(Se._itemTracks),Ke.load()):(0===e&&Ke.currentTime>0&&(Re=-1,Se.seek(e)),Q()),we=Ke.currentTime,E&&!s&&(W(),Ke.paused||Se.state===o.PLAYING||Se.setState(o.LOADING)),i.isIOS()&&Se.getFullScreen()&&(Ke.controls=!0),e>0&&Se.seek(e)}function Z(t){je=null,Fe=-1,Be.reason||(Be.reason="initial choice",Be.level={}),Ce=!1,_e=!1,Oe=e(t),t.preload&&t.preload!==Ke.getAttribute("preload")&&C("preload",t.preload);
var i=document.createElement("source");i.src=t.file;var n=Ke.src!==i.src;n&&(C("jw-loaded","none"),Ke.src=t.file)}function ee(){Ke&&(Se.disableTextTrack(),Ke.removeAttribute("preload"),Ke.removeAttribute("src"),Ke.removeAttribute("jw-loaded"),Ke.removeAttribute("jw-played"),n.emptyElement(Ke),t.style(Ke,{objectFit:""}),Pe=-1,!T&&"load"in Ke&&Ke.load())}function te(){for(var e=Ke.seekable?Ke.seekable.length:0,t=1/0;e--;)t=Math.min(t,Ke.seekable.start(e));return t}function ie(){for(var e=Ke.seekable?Ke.seekable.length:0,t=0;e--;)t=Math.max(t,Ke.seekable.end(e));return t}function ne(){Se.seeking=!1,Se.trigger(s.JWPLAYER_MEDIA_SEEKED)}function re(){Se.trigger("volume",{volume:Math.round(100*Ke.volume)}),Se.trigger("mute",{mute:Ke.muted})}function ae(){Ke.currentTime===we?J():He=!1}function se(){var e=Ke.buffered,t=Ke.duration;return!e||0===e.length||0>=t||t===1/0?0:i.between(e.end(e.length-1)/t,0,1)}function oe(){Se.state!==o.IDLE&&Se.state!==o.COMPLETE&&(Te(),Pe=-1,Se.trigger(s.JWPLAYER_MEDIA_COMPLETE));
}function ue(e){Me=!0,de(e),i.isIOS()&&(Ke.controls=!1)}function le(){for(var e=-1,t=0;t<Ke.audioTracks.length;t++)if(Ke.audioTracks[t].enabled){e=t;break}fe(e)}function ce(e){Me=!1,de(e),i.isIOS()&&(Ke.controls=!1)}function de(e){Se.trigger("fullscreenchange",{target:e.target,jwstate:Me})}function he(e){if(je=null,e){if(e.length){for(var t=0;t<e.length;t++)if(e[t].enabled){Fe=t;break}-1===Fe&&(Fe=0,e[Fe].enabled=!0),je=r.map(e,function(e){var t={name:e.label||e.language,language:e.language};return t})}Se.addTracksListener(e,"change",le),je&&Se.trigger("audioTracks",{currentTrack:Fe,tracks:je})}}function fe(e){Ke&&Ke.audioTracks&&je&&e>-1&&e<Ke.audioTracks.length&&e!==Fe&&(Ke.audioTracks[Fe].enabled=!1,Fe=e,Ke.audioTracks[Fe].enabled=!0,Se.trigger("audioTrackChanged",{currentTrack:Fe,tracks:je}))}function pe(){return je||[]}function ve(){return Fe}function ge(){if("hls"===Ae[0].type){var e="video";0===Ke.videoHeight&&(e="audio"),Se.trigger("mediaType",{mediaType:e})}}function me(){var e=d.endOfRange(Ke.buffered),t=Ke.duration===1/0;
t&&We===e?Ve||(Ve=setTimeout(function(){Ye=!0,ye()},Ge)):(v(Ve),Ve=null,Ye=!1),We=e}function ye(){return!(!Ye||!He||(Se.trigger(s.JWPLAYER_MEDIA_ERROR,{message:"The live stream is either down or has ended"}),0))}function be(){if(Ke.duration!==1/0)return!1;var e=2;return d.endOfRange(Ke.buffered)-Ke.currentTime<=e}function Te(){v(xe),v(Ve),Ve=null}this.state=o.IDLE,this.seeking=!1,r.extend(this,l,c),this.renderNatively=L(p.renderCaptionsNatively);var Ee,ke,we,_e,Ae,Se=this,Le={click:I,durationchange:P,ended:oe,error:K,loadstart:x,loadeddata:R,loadedmetadata:V,canplay:G,playing:Y,progress:O,pause:H,seeked:ne,timeupdate:D,volumechange:re,webkitbeginfullscreen:ue,webkitendfullscreen:ce},Ce=!1,Re=0,xe=-1,Ie=-1,Pe=-1,Oe=null,De=!!p.sdkplatform,Me=!1,Ne=i.noop,je=null,Fe=-1,Be={level:{}},Ue=!1,Ge=3e4,Ve=null,We=null,Ye=!1,He=!1,Je=document.getElementById(u),Ke=Je?Je.querySelector("video, audio"):void 0;Ke||(Ke=document.createElement("video"),E&&C("jw-gesture-required")),Ke.className="jw-video jw-reset",
this.isSDK=De,this.video=Ke,h(Le,Ke),C("disableRemotePlayback",""),C("webkit-playsinline"),C("playsinline"),this.stop=function(){Te(),ee(),this.clearTracks(),i.isIE()&&Ke.pause(),this.setState(o.IDLE)},this.destroy=function(){Ne=i.noop,f(Le,Ke),this.removeTracksListener(Ke.audioTracks,"change",le),this.removeTracksListener(Ke.textTracks,"change",Se.textTrackChangeHandler),this.remove(),this.off()},this.init=function(e){Ae=e.sources,Pe=X(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),we=e.starttime||0,ke=e.duration||0,Be.reason="",Z(Ae[Pe]),this.setupSideloadedTracks(e.tracks)},this.load=function(e){z(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),E&&!Ke.hasAttribute("jw-played")||Se.setState(o.LOADING),$(e.starttime||0,e.duration||0)},this.play=function(){return Se.seeking?(Se.setState(o.LOADING),void Se.once(s.JWPLAYER_MEDIA_SEEKED,Se.play)):(Ne(),void Q())},this.pause=function(){Te(),Ke.pause(),Ne=function(){
var e=Ke.paused&&Ke.currentTime;if(e&&Ke.duration===1/0){var t=ie(),i=t-te(),n=m>i,r=t-Ke.currentTime;n&&t&&(r>15||0>r)&&(Ke.currentTime=Math.max(t-10,t-i))}},this.setState(o.PAUSED)},this.seek=function(e){if(0>e&&(e+=te()+ie()),0===Re&&this.trigger(s.JWPLAYER_MEDIA_SEEK,{position:Ke.currentTime,offset:e}),Ce||(Ce=!!ie()),Ce){Re=0;try{Se.seeking=!0,Ke.currentTime=e}catch(t){Se.seeking=!1,Re=e}}else Re=e,k&&Ke.paused&&Q()},this.volume=function(e){e=i.between(e/100,0,1),Ke.volume=e},this.mute=function(e){Ke.muted=!!e},this.detachMedia=function(){return Te(),f(Le,Ke),this.removeTracksListener(Ke.textTracks,"change",this.textTrackChangeHandler),this.disableTextTrack(),Ke},this.attachMedia=function(){h(Le,Ke),Ce=!1,this.seeking=!1,Ke.loop=!1,this.enableTextTrack(),this.addTracksListener(Ke.textTracks,"change",this.textTrackChangeHandler)},this.setContainer=function(e){Ee=e,e.insertBefore(Ke,e.firstChild)},this.getContainer=function(){return Ee},this.remove=function(){ee(),Te(),Ee===Ke.parentNode&&Ee.removeChild(Ke);
},this.setVisibility=function(e){e=!!e,e||w?t.style(Ee,{visibility:"visible",opacity:1}):t.style(Ee,{visibility:"",opacity:0})},this.resize=function(e,i,n){if(!(e&&i&&Ke.videoWidth&&Ke.videoHeight))return!1;var r={objectFit:"",width:"",height:""};if("uniform"===n){var a=e/i,s=Ke.videoWidth/Ke.videoHeight;Math.abs(a-s)<.09&&(r.objectFit="fill",n="exactfit")}var o=y||_||A||w&&!k;if(o){var u=-Math.floor(Ke.videoWidth/2+1),l=-Math.floor(Ke.videoHeight/2+1),c=Math.ceil(100*e/Ke.videoWidth)/100,d=Math.ceil(100*i/Ke.videoHeight)/100;"none"===n?c=d=1:"fill"===n?c=d=Math.max(c,d):"uniform"===n&&(c=d=Math.min(c,d)),r.width=Ke.videoWidth,r.height=Ke.videoHeight,r.top=r.left="50%",r.margin=0,t.transform(Ke,"translate("+u+"px, "+l+"px) scale("+c.toFixed(2)+", "+d.toFixed(2)+")")}return t.style(Ke,r),!1},this.setFullscreen=function(e){if(e=!!e){var t=i.tryCatch(function(){var e=Ke.webkitEnterFullscreen||Ke.webkitEnterFullScreen;e&&e.apply(Ke)});return!(t instanceof i.Error)&&Se.getFullScreen()}var n=Ke.webkitExitFullscreen||Ke.webkitExitFullScreen;
return n&&n.apply(Ke),e},Se.getFullScreen=function(){return Me||!!Ke.webkitDisplayingFullscreen},this.setCurrentQuality=function(e){if(Pe!==e&&e>=0&&Ae&&Ae.length>e){Pe=e,Be.reason="api",Be.level={},this.trigger(s.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:q(Ae)}),p.qualityLabel=Ae[e].label;var t=Ke.currentTime||0,i=Ke.duration||0;0>=i&&(i=ke),Se.setState(o.LOADING),$(t,i)}},this.getCurrentQuality=function(){return Pe},this.getQualityLevels=function(){return r.map(Ae,function(e){return(0,a.qualityLevel)(e)})},this.getName=function(){return{name:S}},this.setCurrentAudioTrack=fe,this.getAudioTracks=pe,this.getCurrentAudioTrack=ve}var v=window.clearTimeout,g=256,m=120,y=i.isIE(),b=i.isIE(9),T=i.isMSIE(),E=i.isMobile(),k=i.isFF(),w=i.isAndroidNative(),_=i.isIOS(7),A=i.isIOS(8),S="html5",L=function(){};return L.prototype=u,p.prototype=new L,p.getName=function(){return{name:"html5"}},p}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/provider.flash",["shared/polyfills"],function(e,t,i){
webpackJsonpjwplayer([6],{8:function(e,t){"use strict";function i(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityLevel=i},10:function(e,t,i){var n,r;n=[i(1),i(12),i(2),i(16),i(15)],r=function(e,t,i,n,r){function a(t){if(this._currentTextTrackIndex=-1,t){if(this._textTracks?(this._textTracks=e.reject(this._textTracks,function(e){return this.renderNatively&&"nativecaptions"===e._id?(delete this._tracksById[e._id],!0):void 0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),t.length){var n=0,a=t.length;for(n;a>n;n++){var s=t[n];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind,!s.label&&"captions"===s.kind){var o=r.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=r.createId(s,this._textTracks.length);if(this._tracksById[s._id])continue;s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",
s.oncuechange=R.bind(this),this._tracksById[s._id]=s;else if(_(s.kind)){var u,l=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=l,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var c=this._cuesByTrackId[s._id].cues;u=c.shift();)k(this.renderNatively,s,u);s.mode=l,this._cuesByTrackId[s._id].loaded=!0}L.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||b.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(e){if(this.renderNatively){var t=e===this._itemTracks;t||n.cancelXhr(this._itemTracks),this._itemTracks=e,e&&(t||(this.disableTextTrack(),C.call(this),this.addTextTracks(e)))}}function o(){return this._currentTextTrackIndex;
}function u(t){return this.renderNatively?void(this._textTracks&&(0===t&&e.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==t-1&&(this.disableTextTrack(),this._currentTextTrackIndex=t-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(t-1))}function l(e){if(e.text&&e.begin&&e.end){var t=e.trackid.toString(),i=this._tracksById&&this._tracksById[t];i||(i={kind:"captions",_id:t,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var r;e.useDTS&&(i.source||(i.source=e.source||"mpegts")),r=e.begin+"_"+e.text;var a=this._metaCuesByTextTime[r];if(!a){a={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[r]=a;var s=n.convertToVTTCues([a])[0];i.data.push(s)}}}function c(e){
this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var a={kind:e.type,_id:t,label:n,embedded:!0};i=S.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):T.call(this,[i])}x.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?k(this.renderNatively,i,r):i.data.push(r))}function d(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],r=[],a=!1,s=0;s<i.length;s++){var o=i[s],u=e.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),a=!0)}a&&r.sort(function(e,t){return e.begin-t.begin});var l=n.convertToVTTCues(r);Array.prototype.push.apply(t.data,l)}}function h(e,t,i){e&&(f(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function f(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function p(){n.cancelXhr(this._itemTracks);
var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(w(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),w(this.renderNatively,this.video.textTracks))}function v(e){this._cachedVTTCues[e]&&(this._cachedVTTCues[e]={},this._tracksById[e].data=[])}function g(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="disabled",(e.embedded||"nativecaptions"===e._id)&&(e.mode="hidden"))}}function m(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function y(){var t=this.video.textTracks,i=e.filter(t,function(e){return(e.inuse||!e._id)&&_(e.kind)});if(!this._textTracks||I.call(this,i))return void this.setTextTracks(t);
for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}function b(){this.setTextTracks(this.video.textTracks)}function T(e){if(e){this._textTracks||this._initTextTracks();for(var t=0;t<e.length;t++){var i=e[t];if(!i.kind||_(i.kind)){var r=S.call(this,i);L.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),P))}}!this.renderNatively&&this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function E(e,t){if(this.renderNatively){var i=this._tracksById[e._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded){var n;for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};n=t.shift();)k(this.renderNatively,i,n)}}}function k(e,t,n){if(!i.isIE()||!e||!window.TextTrackCue)return void t.addCue(n);var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);
t.addCue(r)}function w(t,n){n.length&&e.each(n,function(e){if(!(i.isIE()&&t&&/^(native|subtitle|cc)/.test(e._id))){e.mode="disabled",e.mode="hidden";for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);e.embedded||(e.mode="disabled"),e.inuse=!1}})}function _(e){return"subtitles"===e||"captions"===e}function A(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function S(t){var i,n=r.createLabel(t,this._unknownCount),a=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===t.kind){var s=this.video.textTracks;i=e.findWhere(s,{label:a}),i?(i.kind=t.kind,i.language=t.language||""):i=this.video.addTextTrack(t.kind,a,t.language||""),i["default"]=t["default"],i.mode="disabled",i.inuse=!0}else i=t,i.data=i.data||[];return i._id||(i._id=r.createId(t,this._textTracks.length)),i}function L(e){this._textTracks.push(e),this._tracksById[e._id]=e}function C(){if(this._textTracks){var t=e.filter(this._textTracks,function(e){
return e.embedded||"subs"===e.groupid});this._initTextTracks(),e.each(t,function(e){this._tracksById[e._id]=e}),this._textTracks=t}}function R(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var a=[];if(e.each(n,function(e){e.startTime<r||(e.data||e.value?a.push(e):e.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(e.text)}))},this),a.length){var s=t.parseID3(a);this.trigger("meta",{metadataTime:r,metadata:s})}this._activeCuePosition=r}}}function x(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var a="_"+t.line,s=Math.floor(20*t.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1||(r[n+a]=s,0));case"metadata":var u=t.data?new Uint8Array(t.data).join(""):t.text;return n=t.startTime+u,!r[n]&&(r[n]=t.endTime,!0);default:return!1}}function I(e){if(e.length>this._textTracks.length)return!0;
for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}function P(e){i.log("CAPTIONS("+e+")")}var O={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:A,addTracksListener:h,clearTracks:p,clearCueData:v,disableTextTrack:g,enableTextTrack:m,getSubtitlesTrack:o,removeTracksListener:f,addTextTracks:T,setTextTracks:a,setupSideloadedTracks:s,setSubtitlesTrack:u,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:d,addCaptionsCue:l,addVTTCue:c,addVTTCuesToTrack:E,renderNatively:!1};return O}.apply(t,n),!(void 0!==r&&(e.exports=r))},52:function(e,t,i){var n,r,a=i(8);n=[i(2),i(1),i(4),i(5),i(58),i(9),i(3),i(10)],r=function(e,t,i,n,r,s,o,u){function l(e){return e+"_swf_"+h++}function c(t){var i=document.createElement("a");i.href=t.flashplayer;var n=i.host===window.location.host;return e.isChrome()&&!n}
function d(d,h){function f(){w=setTimeout(function(){o.trigger.call(R,"flashBlocked")},4e3),T.once("embedded",function(){v(),o.trigger.call(R,"flashUnblocked")},R)}function p(){v(),f()}function v(){clearTimeout(w),window.removeEventListener("focus",p)}function g(t){for(var i=t.levels,n=0;n<i.length;n++){var r=i[n];r.index=n,"Auto"!==r.label&&(r.label=e.generateLabel(r,h.qualityLabels))}t.levels=A=m(t.levels),t.currentQuality=_=y(A,t.currentQuality)}function m(e){return e.sort(function(e,t){return e.height&&t.height?t.height-e.height:t.bitrate-e.bitrate})}function y(e,t){for(var i=0;i<e.length;i++)if(e[i].index===t)return i}var b,T,E,k=null,w=-1,_=-1,A=null,S=-1,L=null,C=!1,R=this,x=function(){return T&&T.__ready},I=function(){T&&T.triggerFlash.apply(T,arguments)};t.extend(this,o,u,{init:function(e){e.preload&&"none"!==e.preload&&!h.autostart&&(k=e)},load:function(e){k=e,this.setState(n.LOADING),I("load",e),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources)},play:function(){
I("play")},pause:function(){I("pause"),this.setState(n.PAUSED)},stop:function(){I("stop"),_=-1,k=null,this.clearTracks(),this.setState(n.IDLE)},seek:function(e){I("seek",e)},volume:function P(e){if(t.isNumber(e)){var P=Math.min(Math.max(0,e),100);x()&&I("volume",P)}},mute:function(e){x()&&I("mute",e)},setState:function(){return s.setState.apply(this,arguments)},getSwfObject:function(e){var t=e.querySelector("object");return t?(t.off(null,null,this),t):r.embed(h.flashplayer,e,l(d),h.wmode)},getContainer:function(){return b},setContainer:function(e){if(b!==e){b=e,T=this.getSwfObject(e),document.hasFocus()?f():window.addEventListener("focus",p),T.once("ready",function(){v(),T.once("pluginsLoaded",function(){I("setupCommandQueue",T.__commandQueue),T.__commandQueue=[]});var e=t.extend({},h),n=T.triggerFlash("setup",e);n===T?T.__ready=!0:this.trigger(i.JWPLAYER_MEDIA_ERROR,n),k&&I("init",k)},this);var r=[i.JWPLAYER_MEDIA_ERROR,i.JWPLAYER_MEDIA_SEEK,i.JWPLAYER_MEDIA_SEEKED,"subtitlesTrackChanged","mediaType"],a=[i.JWPLAYER_MEDIA_BUFFER,i.JWPLAYER_MEDIA_TIME],s=[i.JWPLAYER_MEDIA_BUFFER_FULL];
T.on([i.JWPLAYER_MEDIA_LEVELS,i.JWPLAYER_MEDIA_LEVEL_CHANGED].join(" "),function(e){g(e),this.trigger(e.type,e)},this),T.on(i.JWPLAYER_AUDIO_TRACKS,function(e){S=e.currentTrack,L=e.tracks,this.trigger(e.type,e)},this),T.on(i.JWPLAYER_AUDIO_TRACK_CHANGED,function(e){S=e.currentTrack,L=e.tracks,this.trigger(e.type,e)},this),T.on(i.JWPLAYER_PLAYER_STATE,function(e){var t=e.newstate;t!==n.IDLE&&this.setState(t)},this),T.on(a.join(" "),function(e){"Infinity"===e.duration&&(e.duration=1/0),this.trigger(e.type,e)},this),T.on(r.join(" "),function(e){this.trigger(e.type,e)},this),T.on(s.join(" "),function(e){this.trigger(e.type)},this),T.on(i.JWPLAYER_MEDIA_BEFORECOMPLETE,function(){this.trigger(i.JWPLAYER_MEDIA_COMPLETE)},this),T.on("visualQuality",function(e){var i=0;A.length>1&&(i=y(A,e.level.index+1)),e.level=t.extend(e.level,{index:i}),e.reason=e.reason||"api",this.trigger("visualQuality",e),this.trigger("providerFirstFrame",{})},this),T.on(i.JWPLAYER_PROVIDER_CHANGED,function(e){E=e.message,
this.trigger(i.JWPLAYER_PROVIDER_CHANGED,e)},this),T.on(i.JWPLAYER_ERROR,function(e){this.trigger(i.JWPLAYER_MEDIA_ERROR,e)},this),T.on("subtitlesTracks",function(e){this.addTextTracks(e.tracks)},this),T.on("subtitlesTrackData",function(e){this.addCuesToTrack(e)},this),T.on(i.JWPLAYER_MEDIA_META,function(e){e&&(e.metadata&&"textdata"===e.metadata.type?this.addCaptionsCue(e.metadata):this.trigger(e.type,e))},this),c(h)&&T.on("throttle",function(e){v(),"resume"===e.state?o.trigger.call(R,"flashThrottle",e):w=setTimeout(function(){o.trigger.call(R,"flashThrottle",e)},250)},this)}},remove:function(){_=-1,A=null,r.remove(T)},setVisibility:function(e){e=!!e,b.style.opacity=e?1:0},resize:function(e,t,i){i&&I("stretch",i)},setControls:function(e){I("setControls",e)},setFullscreen:function(e){C=e,I("fullscreen",e)},getFullScreen:function(){return C},setCurrentQuality:function(e){I("setCurrentQuality",A[e].index)},getCurrentQuality:function(){return _},setSubtitlesTrack:function(e){I("setSubtitlesTrack",e);
},getName:function(){return E?{name:"flash_"+E}:{name:"flash"}},getQualityLevels:function(){return t.map(A||k&&k.sources,function(e){return(0,a.qualityLevel)(e)})},getAudioTracks:function(){return L},getCurrentAudioTrack:function(){return S},setCurrentAudioTrack:function(e){I("setCurrentAudioTrack",e)},destroy:function(){v(),this.remove(),T&&(T.off(),T=null),b=null,k=null,this.off()}})}var h=0,f=function(){};return f.prototype=s,d.prototype=new f,d.getName=function(){return{name:"flash"}},d}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/polyfills.intersection-observer",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([7],{76:function(e,t){!function(e,t){"use strict";function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||c(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,n=this.intersectionRect,r=n.width*n.height;
this.intersectionRatio=i?r/i:0}function n(e,t){var i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=a(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(){return e.performance&&performance.now&&performance.now()}function a(e,t){var i=null;return function(){i||(i=setTimeout(function(){e(),i=null},t))}}function s(e,t,i,n){"function"==typeof e.addEventListener?e.addEventListener(t,i,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function o(e,t,i,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,n||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i);
}function u(e,t){var i=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),a=Math.min(e.right,t.right),s=a-r,o=n-i;return s>=0&&o>=0&&{top:i,bottom:n,left:r,right:a,width:s,height:o}}function l(e){var t=e.getBoundingClientRect();return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):void 0}function c(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=t.documentElement,h=[];n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){
return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||0>e||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},n.prototype._parseRootMargin=function(e){var t=e||"0px",i=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,
this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(e,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():c();this._observationTargets.forEach(function(n){var a=n.element,s=l(a),o=this._rootContainsTarget(a),u=n.entry,c=e&&o&&this._computeTargetAndRootIntersection(a,t),d=n.entry=new i({
time:r(),target:a,boundingClientRect:s,rootBounds:t,intersectionRect:c});e&&o?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(t,i){if("none"!=e.getComputedStyle(t).display){for(var n=l(t),r=n,a=t.parentNode,s=!1;!s;){var o=null;if(a==this.root||1!=a.nodeType?(s=!0,o=i):"visible"!=e.getComputedStyle(a).overflow&&(o=l(a)),o&&(r=u(o,r),!r))break;a=a.parentNode}return r}},n.prototype._getRootRect=function(){var e;if(this.root)e=l(this.root);else{var i=t.documentElement,n=t.body;e={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100;
}),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==n)for(var r=0;r<this.thresholds.length;r++){var a=this.thresholds[r];if(a==i||a==n||i>a!=n>a)return!0}},n.prototype._rootIsInDom=function(){return!this.root||d.contains(this.root)},n.prototype._rootContainsTarget=function(e){return(this.root||d).contains(e)},n.prototype._registerInstance=function(){h.indexOf(this)<0&&h.push(this)},n.prototype._unregisterInstance=function(){var e=h.indexOf(this);-1!=e&&h.splice(e,1)},e.IntersectionObserver=n,e.IntersectionObserverEntry=i}}(window,document)}})}),define("third_party/jwplayer/provider.airplay",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([8],{66:function(e,t,i){var n,r;n=[i(2)],r=function(e){return function(t,i){function n(){i.set("castState",{available:i.get("castAvailable"),
active:i.get("castActive")})}function r(t){t&&t.forEach(function(t){t.file=e.getAbsolutePath(t.file)})}function a(t){t&&(t.image=e.getAbsolutePath(t.image),r(t.allSources),r(t.sources))}function s(){l.removeEventListener("webkitplaybacktargetavailabilitychanged",c.updateAvailability),l.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",c.updateActive)}function o(){l.addEventListener("webkitplaybacktargetavailabilitychanged",c.updateAvailability),l.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",c.updateActive)}function u(){l=null,i.getVideo()&&(l=i.getVideo().video),l&&(s(),o()),c.updateAvailability({}),c.updateActive()}var l=null,c=this;c.updateAvailability=function(e){i.set("castAvailable","available"===e.availability),n()},c.updateActive=function(){var e=!1;l&&(e=!!l.webkitCurrentPlaybackTargetIsWireless),i.off("change:playlistItem",a),e&&(t.instreamDestroy(),a(i.get("playlistItem")),i.on("change:playlistItem",a)),i.set("airplayActive",e),i.set("castActive",e),
n()},c.airplayToggle=function(){l&&l.webkitShowPlaybackTargetPicker()},u(i,i.getVideo()),i.on("itemReady",u)}}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/provider.youtube",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([9],{54:function(e,t,i){var n,r;n=[i(2),i(20),i(1),i(4),i(5),i(13),i(9),i(3)],r=function(e,t,i,n,r,a,s,o){function u(d,h){function f(){window.YT&&window.YT.loaded?(D=window.YT,g()):setTimeout(f,100)}function p(){l&&(l.off(),l=null)}function v(){var e=N&&N.parentNode;return e?e:(F||(window.jwplayer(d).onReady(g),F=!0),!1)}function g(){D&&v()&&B&&B.apply(O)}function m(){if(M&&M.getPlayerState){var e=M.getPlayerState();null!==e&&void 0!==e&&e!==V&&S({data:e});var t=D.PlayerState;e===t.PLAYING?b():e===t.BUFFERING&&T()}}function y(e){return Math.round(10*e)/10}function b(){T(),O.trigger(n.JWPLAYER_MEDIA_TIME,{position:y(M.getCurrentTime()),duration:M.getDuration()})}function T(){var e=0;M&&M.getVideoLoadedFraction&&(e=Math.round(100*M.getVideoLoadedFraction())),
j!==e&&(j=e,O.trigger(n.JWPLAYER_MEDIA_BUFFER,{bufferPercent:e}))}function E(){O.state!==r.IDLE&&O.state!==r.COMPLETE&&O.trigger(n.JWPLAYER_MEDIA_COMPLETE)}function k(){O.trigger(n.JWPLAYER_MEDIA_META,{duration:M.getDuration(),width:N.clientWidth,height:N.clientHeight})}function w(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}}function _(e,t){if(!e)throw new Error("invalid Youtube ID");var n=N.parentNode;if(n){var r={height:"100%",width:"100%",videoId:e,playerVars:i.extend({html5:1,autoplay:0,controls:0,showinfo:0,rel:0,modestbranding:0,playsinline:1,origin:location.protocol+"//"+location.hostname},t),events:{onReady:A,onStateChange:S,onPlaybackQualityChange:L,onError:C}};O.setVisibility(!0),M=new D.Player(N,r),N=M.getIframe(),B=null}}function A(){U&&(U.apply(O),U=null)}function S(t){var a=D.PlayerState;switch(V=t.data){case a.UNSTARTED:return void(e.isAndroid()&&M.playVideo());case a.ENDED:return void E();case a.PLAYING:
return i.isFunction(M.unloadModule)&&M.unloadModule("captions"),W=!1,k(),O.trigger(n.JWPLAYER_MEDIA_LEVELS,{levels:O.getQualityLevels(),currentQuality:O.getCurrentQuality()}),void O.setState(r.PLAYING);case a.PAUSED:return void O.setState(r.PAUSED);case a.BUFFERING:return void(O.seeking?O.setState(r.LOADING):O.setState(r.STALLED));case a.CUED:return O.setState(r.IDLE),void(e.isAndroid()&&M.playVideo())}}function L(){V!==D.PlayerState.ENDED&&O.play(),O.trigger(n.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:O.getCurrentQuality(),levels:O.getQualityLevels()})}function C(){O.trigger(n.JWPLAYER_MEDIA_ERROR,{message:"Error loading YouTube: Video could not be played"})}function R(){c&&O.setVisibility(!0)}function x(){clearInterval(G),M&&M.stopVideo&&e.tryCatch(function(){M.stopVideo(),M.clearVideo()})}function I(t){U=null;var i=t.sources[0].file,n=e.youTubeID(i);if(O.volume(h.volume),O.mute(h.mute),O.setVisibility(!0),!D||!M)return B=function(){_(n)},void f();if(!M.getPlayerState){var r=function(){
O.load(t)};return void(U=U?w(r,U):r)}var a=M.getVideoData(),s=a&&a.video_id;if(s!==n){W?(x(),M.cueVideoById(n)):M.loadVideoById(n);var o=M.getPlayerState(),u=D.PlayerState;o!==u.UNSTARTED&&o!==u.CUED||R()}else M.getCurrentTime()>0&&M.seekTo(0),k()}this.state=r.IDLE,i.extend(this,o);var P,O=this,D=window.YT,M=null,N=document.createElement("div"),j=-1,F=!1,B=null,U=null,G=-1,V=-1,W=c;this.setState=function(e){clearInterval(G),e!==r.IDLE&&e!==r.COMPLETE&&(G=setInterval(m,250),e===r.PLAYING?this.seeking=!1:e!==r.LOADING&&e!==r.STALLED||T()),s.setState.apply(this,arguments)},!D&&l&&l.getStatus()===a.loaderstatus.NEW&&(l.on(n.COMPLETE,f),l.on(n.ERROR,p),l.load()),N.id=d+"_youtube",this.init=function(e){I(e)},this.destroy=function(){this.remove(),this.off(),P=N=D=O=null},this.load=function(e){this.setState(r.LOADING),I(e),O.play()},this.stop=function(){x(),this.setState(r.IDLE)},this.play=function(){W||(M&&M.playVideo?M.playVideo():U=U?w(this.play,U):this.play)},this.pause=function(){W||M.pauseVideo&&M.pauseVideo();
},this.seek=function(e){W||M.seekTo&&(this.seeking=!0,M.seekTo(e))},this.volume=function(e){if(i.isNumber(e)){var t=Math.min(Math.max(0,e),100);M&&M.getVolume&&M.setVolume(t)}},this.mute=function(t){var i=e.exists(t)?!!t:!h.mute;M&&M.mute&&(i?M.mute():M.unMute())},this.setContainer=function(e){P=e,e.appendChild(N),this.setVisibility(!0)},this.getContainer=function(){return P},this.remove=function(){x(),N&&P&&P===N.parentNode&&P.removeChild(N),B=U=M=null},this.setVisibility=function(e){e=!!e,e?(t.style(N,{display:"block"}),t.style(P,{visibility:"visible",opacity:1})):c||t.style(P,{opacity:0})},this.resize=function(){return!1},this.getCurrentQuality=function(){if(!M)return-1;if(M.getAvailableQualityLevels){var e=M.getPlaybackQuality(),t=M.getAvailableQualityLevels();return t.indexOf(e)}return-1},this.getQualityLevels=function(){if(M){if(!i.isFunction(M.getAvailableQualityLevels))return[];var e=M.getAvailableQualityLevels();if(2===e.length&&i.contains(e,"auto"))return{label:i.without(e,"auto")
};var t=i.map(e,function(e){return{label:e}});return t.reverse()}},this.setCurrentQuality=function(e){if(M&&M.getAvailableQualityLevels){var t=M.getAvailableQualityLevels();if(t.length){var i=t[t.length-e-1];M.setPlaybackQuality(i)}}},this.getName=u.getName}var l=new a(window.location.protocol+"//www.youtube.com/iframe_api"),c=e.isMobile();return u.getName=function(){return{name:"youtube"}},u.register=function(e){e.api.registerProvider(u)},u}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/polyfills.vttrenderer",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([10],{51:function(e,t,i){var n,r;n=[],r=function(){function e(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function t(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function i(){this.values=Object.create(null);
}function n(e,i){function n(){function e(e){return i=i.substr(e.length),e}if(!i)return null;var t=i.match(/^([^<]*)(<[^>]+>?)?/);return e(t[1]?t[1]:t[2])}function r(e){return v[e]}function a(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],r);return e}function s(e,t){return!y[t.localName]||y[t.localName]===e.localName}function o(t,i){var n=g[t];if(!n)return null;var r=e.document.createElement(n);r.localName=n;var a=m[t];return a&&i&&(r[a]=i.trim()),r}for(var u,l=e.document.createElement("div"),c=l,d=[];null!==(u=n());)if("<"!==u[0])c.appendChild(e.document.createTextNode(a(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var h,f=t(u.substr(1,u.length-2));if(f){h=e.document.createProcessingInstruction("timestamp",f),c.appendChild(h);continue}var p=u.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(h=o(p[1],p[3]),!h)continue;if(!s(c,h))continue;p[2]&&(h.className=p[2].substr(1).replace("."," ")),
d.push(p[1]),c.appendChild(h),c=h}return l}function r(e){for(var t=0;t<b.length;t++){var i=b[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function a(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function s(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?(e.length=0,n[0]):i}return"ruby"===t.tagName?s(e):t.childNodes?(a(e,t),s(e)):void 0}function o(e){if(!e||!e.childNodes)return"ltr";var t,i,n=[];for(a(n,e);t=s(n);)for(var o=0;o<t.length;o++)if(i=t.charCodeAt(o),r(i))return"rtl";return"ltr"}function u(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,r=0;r<i.length&&i[r]!==t;r++)"showing"===i[r].mode&&n++;return-1*++n}function l(){}function c(e,t){l.call(this),this.cue=t,this.cueDiv=n(e,t.text),this.cueDiv.className="jw-text-track-cue jw-reset";var i={
textShadow:"",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={textAlign:"middle"===t.align?"center":t.align,whiteSpace:"pre-line",position:"absolute",direction:o(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.align){case"start":case"left":r=t.position;break;case"middle":case"center":r=t.position-t.size/2;break;case"end":case"right":r=t.position-t.size}r=Math.max(Math.min(100,r),0),""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),
bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:"auto",width:this.formatStyle(e.width,"px")})}}function d(e){var t;if(e.div){var i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight,this.width=Math.ceil(this.width+1)}function h(e,t,i,n,r){function a(e,t){for(var r,a=new d(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(i,t[o])||e.within(i)&&e.overlapsAny(n);)e.move(t[o]);if(e.within(i))return e;var u=e.intersectPercentage(i);s>u&&(r=new d(e),s=u),e=new d(a)}return r||a}var s=new d(t),o=t.cue,l=u(o),c=[];if(o.snapToLines){var h;switch(o.vertical){case"":c=["+y","-y"],h="height";
break;case"rl":c=["+x","-x"],h="width";break;case"lr":c=["-x","+x"],h="width"}var f=s.lineHeight,p=Math.floor(i[h]/f);l=Math.min(l,p-r);var v=f*Math.round(l),g=i[h]+f,m=c[0];if(Math.abs(v)>g&&(v=0>v?-1:1,v*=Math.ceil(g/f)*f),0>l){v+=""===o.vertical?i.height:i.width;var y=r*f;v-=y,c=c.reverse()}v-=r,s.move(m,v)}else{var b=s.lineHeight/i.height*100;switch(o.lineAlign){case"middle":l-=b/2;break;case"end":l-=b}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(l,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(l,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(l,"%")})}c=["+y","-x","+x","-y"],s=new d(t)}var T=a(s,c);t.move(T.toCSSCompatValues(i))}function f(){}function p(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},i.prototype={set:function(e,t){
this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(/^[\d]{1,3}(\.[\d]*)?%$/.test(t)&&(t=parseFloat(t),t>=0&&100>=t))&&(this.set(e,t),!0)}};var v={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},g={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},m={v:"title",lang:"lang"},y={rt:"ruby"},b=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];
l.prototype.applyStyles=function(e,t){t=t||this.div;for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},l.prototype.formatStyle=function(e,t){return 0===e?0:e+t},c.prototype=Object.create(l.prototype),c.prototype.constructor=c,d.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){
var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*i;return n/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i};return r},f.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},f.convertCueToDOMTree=function(e,t){return e&&t?n(e,t):null;
};var T="1.5%";f.processCues=function(e,t,i,n){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);if(!t.length)return null;var r=e.document.createElement("div");if(r.className="jw-text-track-container jw-reset",r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=T,i.appendChild(r),p(t)||n){var a=[],s=d.getSimpleBoxPosition(r),o=t.reduce(function(e,t){return e+t.text.split("\n").length},0);!function(){for(var i=0;i<t.length;i++){var n=t[i],u=new c(e,n);u.div.className="jw-text-track-display jw-reset",r.appendChild(u.div),h(e,u,s,a,o),o-=n.text.split("\n").length,n.displayState=u.div,a.push(d.getSimpleBoxPosition(u))}}()}else for(var u=0;u<t.length;u++)r.appendChild(t[u].displayState)},window.WebVTT||(window.WebVTT=f)}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/polyfills.promise",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([11],{50:function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){
return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],r=function(e){function t(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!==a(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(r,this),t(s,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void c(function(){var i=t._state?e.onFulfilled:e.onRejected;if(null===i)return void(t._state?e.resolve:e.reject)(t._value);var n;try{n=i(t._value)}catch(r){return void e.reject(r)}e.resolve(n)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===("undefined"==typeof e?"undefined":a(e))||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void l(t(i,e),t(r,this),t(s,this))}this._state=!0,this._value=e,
o.call(this)}catch(n){s.call(this,n)}}function s(e){this._state=!1,this._value=e,o.call(this)}function o(){for(var e=0,t=this._deferreds.length;t>e;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,i,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n}function l(e,t,i){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,i(e))})}catch(r){if(n)return;n=!0,i(r)}}var c=e.defer,d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=this;return new i(function(i,a){n.call(r,new u(e,t,i,a))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new i(function(t,i){function n(s,o){try{if(o&&("object"===("undefined"==typeof o?"undefined":a(o))||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){
n(s,e)},i)}e[s]=o,0===--r&&t(e)}catch(l){i(l)}}if(0===e.length)return t([]);for(var r=e.length,s=0;s<e.length;s++)n(s,e[s])})},i.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":a(e))&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,i){i(e)})},i.race=function(e){return new i(function(t,i){for(var n=0,r=e.length;r>n;n++)e[n].then(t,i)})},i._setImmediateFn=function(e){c=e},window.Promise||(window.Promise=i)}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/polyfills.base64",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([12],{49:function(e,t,i){var n,r;n=[],r=function(){function e(e){this.message=e}var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",window.btoa||(window.btoa=function(i){for(var n,r,a=String(i),s=0,o=t,u="";a.charAt(0|s)||(o="=",s%1);u+=o.charAt(63&n>>8-s%1*8)){if(r=a.charCodeAt(s+=.75),
r>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|r}return u}),window.atob||(window.atob=function(i){var n=String(i).replace(/=+$/,"");if(n.length%4===1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,s=0,o=0,u="";a=n.charAt(o++);~a&&(r=s%4?64*r+a:a,s++%4)?u+=String.fromCharCode(255&r>>(-2*s&6)):0)a=t.indexOf(a);return u})}.apply(t,n),!(void 0!==r&&(e.exports=r))}})}),define("third_party/jwplayer/vttparser",["shared/polyfills"],function(e,t,i){webpackJsonpjwplayer([13],{21:function(e,t,i){var n,r;n=[i(29)],r=function(e){function t(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}function i(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(s);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null;
}function n(){this.values=Object.create(null)}function r(e,t,i,n){for(var r=n?e.split(n):[e],a=0;a<=r.length;a+=1)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length){var o=s[0],u=s[1];t(o,u)}}}function a(e,t,a){function s(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(c,""),t}function o(e,t){var i=new n;r(e,function(e,t){switch(e){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===t){i.set(e,a[n].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),s=r[0];i.integer(e,s),i.percent(e,s)&&i.set("snapToLines",!1),i.alt(e,s,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",b,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",b,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",b,"end","left","right"])}},d,h),t.region=i.get("region",null),t.vertical=i.get("vertical","");var s=i.get("line","auto");
"auto"===s&&-1===y.line&&(s=-1),t.line=s,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",b);var o=i.get("position","auto");"auto"===o&&50===y.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}function u(){e=e.replace(f,"")}var l=e;if(u(),t.startTime=s(),u(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),u(),t.endTime=s(),u(),o(e,t)}var s=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,o=/^-?\d+$/,u=/\r\n|\n/,l=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,d=/:/,h=/\s/,f=/^\s+/,p=/-->/,v=/^WEBVTT([ \t].*)?$/,g=window.requestAnimationFrame||function(e){return window.setTimeout(e,17)},m=function(e,i){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=i||new t,this.regionList=[],this.maxCueBatch=1e3};n.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t;
},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){o.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return t=parseFloat(t),t>=0&&100>=t&&(this.set(e,t),!0)}};var y=new e(0,0,0),b="middle"===y.align?"middle":"center";return m.prototype={parse:function(t,i){function n(){for(var e=h.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,h.buffer=e.substr(t),i}function s(e){r(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},d)}function o(){"CUETEXT"===h.state&&h.cue&&h.oncue&&h.oncue(h.cue),h.cue=null,h.state="INITIAL"===h.state?"BADWEBVTT":"BADCUE"}function c(){try{for(;h.buffer&&T<=h.maxCueBatch;){if(!u.test(h.buffer))return h.flush(),this;switch(b?b=!1:f=n(),h.state){case"HEADER":d.test(f)?s(f):f||(h.state="ID");break;case"NOTE":f||(h.state="ID");break;case"ID":if(l.test(f)){h.state="NOTE";break}if(!f)break;
if(h.cue=new e(0,0,""),h.state="CUE",!p.test(f)){h.cue.id=f;break}case"CUE":try{a(f,h.cue,h.regionList)}catch(t){h.cue=null,h.state="BADCUE";break}h.state="CUETEXT";break;case"CUETEXT":var r=p.test(f);if(!f||r&&(b=!0)){h.oncue&&(T+=1,h.oncue(h.cue)),h.cue=null,h.state="ID";break}h.cue.text&&(h.cue.text+="\n"),h.cue.text+=f;break;case"BADCUE":f||(h.state="ID")}}if(T=0,h.buffer)g(c);else if(!i)return h.flush(),this}catch(t){return o(t),this}}var h=this;t&&(h.buffer+=h.decoder.decode(t,{stream:!0}));try{var f;if("INITIAL"===h.state){if(!u.test(h.buffer))return this;f=n();var m=f.match(v);if(!m||!m[0])throw new Error("Malformed WebVTT signature.");h.state="HEADER"}}catch(y){return o(),this}var b=!1,T=0;c()},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse(void 0,!0)),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}},m}.apply(t,n),!(void 0!==r&&(e.exports=r));
}})}),define("third_party/jwplayer/jwplayer",["shared/polyfills","third_party/jwplayer/jwplayer.controls","third_party/jwplayer/provider.hlsjs","third_party/jwplayer/provider.shaka","third_party/jwplayer/provider.cast","third_party/jwplayer/provider.html5","third_party/jwplayer/provider.flash","third_party/jwplayer/polyfills.intersection-observer","third_party/jwplayer/provider.airplay","third_party/jwplayer/provider.youtube","third_party/jwplayer/polyfills.vttrenderer","third_party/jwplayer/polyfills.promise","third_party/jwplayer/polyfills.base64","third_party/jwplayer/vttparser"],function(e,t,i){window.jwplayer=function(t){function i(e){if(r[e])return r[e].exports;var n=r[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var n=window.webpackJsonpjwplayer;window.webpackJsonpjwplayer=function(e,r){for(var s,o,u=0,l=[];u<e.length;u++)o=e[u],a[o]&&l.push.apply(l,a[o]),a[o]=0;for(s in r)t[s]=r[s];for(n&&n(e,r);l.length;)l.shift().call(null,i)};var r={},a={
0:0};return i.e=function(t,n){if(0===a[t])return n.call(null,i);if(void 0!==a[t])a[t].push(n);else{if(a[t]=[n],1===t)return e("third_party/jwplayer/jwplayer.controls");if(2===t)return e("third_party/jwplayer/provider.hlsjs");if(3===t)return e("third_party/jwplayer/provider.shaka");if(4===t)return e("third_party/jwplayer/provider.cast");if(5===t)return e("third_party/jwplayer/provider.html5");if(6===t)return e("third_party/jwplayer/provider.flash");if(7===t)return e("third_party/jwplayer/polyfills.intersection-observer");if(8===t)return e("third_party/jwplayer/provider.airplay");if(9===t)return e("third_party/jwplayer/provider.youtube");if(10===t)return e("third_party/jwplayer/polyfills.vttrenderer");if(11===t)return e("third_party/jwplayer/polyfills.promise");if(12===t)return e("third_party/jwplayer/polyfills.base64");if(13===t)return e("third_party/jwplayer/vttparser")}},i.m=t,i.c=r,i.p="",i(0)}([function(e,t,i){e.exports=i(152)},function(e,t,i){var n,r;n=[],r=function(){var e={},t=Array.prototype,i=Object.prototype,n=Function.prototype,r=t.slice,a=t.concat,s=i.toString,o=i.hasOwnProperty,u=t.map,l=t.reduce,c=t.forEach,d=t.filter,h=t.every,f=t.some,p=t.indexOf,v=Array.isArray,g=Object.keys,m=n.bind,y=function S(e){
return e instanceof S?e:this instanceof S?void 0:new S(e)},b=y.each=y.forEach=function(t,i,n){var r,a;if(null==t)return t;if(c&&t.forEach===c)t.forEach(i,n);else if(t.length===+t.length){for(r=0,a=t.length;a>r;r++)if(i.call(n,t[r],r,t)===e)return}else{var s=y.keys(t);for(r=0,a=s.length;a>r;r++)if(i.call(n,t[s[r]],s[r],t)===e)return}return t};y.map=y.collect=function(e,t,i){var n=[];return null==e?n:u&&e.map===u?e.map(t,i):(b(e,function(e,r,a){n.push(t.call(i,e,r,a))}),n)};var T="Reduce of empty array with no initial value";y.reduce=y.foldl=y.inject=function(e,t,i,n){var r=arguments.length>2;if(null==e&&(e=[]),l&&e.reduce===l)return n&&(t=y.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(b(e,function(e,a,s){r?i=t.call(n,i,e,a,s):(i=e,r=!0)}),!r)throw new TypeError(T);return i},y.find=y.detect=function(e,t,i){var n;return E(e,function(e,r,a){return t.call(i,e,r,a)?(n=e,!0):void 0}),n},y.filter=y.select=function(e,t,i){var n=[];return null==e?n:d&&e.filter===d?e.filter(t,i):(b(e,function(e,r,a){
t.call(i,e,r,a)&&n.push(e)}),n)},y.reject=function(e,t,i){return y.filter(e,function(e,n,r){return!t.call(i,e,n,r)},i)},y.compact=function(e){return y.filter(e,y.identity)},y.every=y.all=function(t,i,n){i||(i=y.identity);var r=!0;return null==t?r:h&&t.every===h?t.every(i,n):(b(t,function(t,a,s){return(r=r&&i.call(n,t,a,s))?void 0:e}),!!r)};var E=y.some=y.any=function(t,i,n){i||(i=y.identity);var r=!1;return null==t?r:f&&t.some===f?t.some(i,n):(b(t,function(t,a,s){return r||(r=i.call(n,t,a,s))?e:void 0}),!!r)};y.size=function(e){return null==e?0:e.length===+e.length?e.length:y.keys(e).length},y.last=function(e,t,i){return null!=e?null==t||i?e[e.length-1]:r.call(e,Math.max(e.length-t,0)):void 0},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}};var k=function(e){return null==e?y.identity:y.isFunction(e)?e:y.property(e)},w=function(e){return function(t,i,n){
var r={};return i=k(i),b(t,function(a,s){var o=i.call(n,a,s,t);e(r,o,a)}),r}};y.groupBy=w(function(e,t,i){y.has(e,t)?e[t].push(i):e[t]=[i]}),y.indexBy=w(function(e,t,i){e[t]=i}),y.sortedIndex=function(e,t,i,n){i=k(i);for(var r=i.call(n,t),a=0,s=e.length;s>a;){var o=a+s>>>1;i.call(n,e[o])<r?a=o+1:s=o}return a},y.contains=y.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=y.values(e)),y.indexOf(e,t)>=0)},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matches(t))},y.findWhere=function(e,t){return y.find(e,y.matches(t))},y.max=function(e,t,i){if(!t&&y.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-(1/0),r=-(1/0);return b(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o>r&&(n=e,r=o)}),n},y.difference=function(e){var i=a.apply(t,r.call(arguments,1));return y.filter(e,function(e){return!y.contains(i,e)})},y.without=function(e){return y.difference(e,r.call(arguments,1))},y.indexOf=function(e,t,i){if(null==e)return-1;
var n=0,r=e.length;if(i){if("number"!=typeof i)return n=y.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,r+i):i}if(p&&e.indexOf===p)return e.indexOf(t,i);for(;r>n;n++)if(e[n]===t)return n;return-1};var _=function(){};y.bind=function(e,t){var i,n;if(m&&e.bind===m)return m.apply(e,r.call(arguments,1));if(!y.isFunction(e))throw new TypeError;return i=r.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(r.call(arguments)));_.prototype=e.prototype;var a=new _;_.prototype=null;var s=e.apply(a,i.concat(r.call(arguments)));return Object(s)===s?s:a}},y.partial=function(e){var t=r.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,a=n.length;a>r;r++)n[r]===y&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},y.once=y.partial(y.before,2),y.memoize=function(e,t){var i={};return t||(t=y.identity),function(){var n=t.apply(this,arguments);return y.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},y.delay=function(e,t){
var i=r.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},y.defer=function(e){return y.delay.apply(y,[e,1].concat(r.call(arguments,1)))},y.throttle=function(e,t,i){var n,r,a,s=null,o=0;i||(i={});var u=function(){o=i.leading===!1?0:y.now(),s=null,a=e.apply(n,r),n=r=null};return function(){var l=y.now();o||i.leading!==!1||(o=l);var c=t-(l-o);return n=this,r=arguments,0>=c?(clearTimeout(s),s=null,o=l,a=e.apply(n,r),n=r=null):s||i.trailing===!1||(s=setTimeout(u,c)),a}},y.keys=function(e){if(!y.isObject(e))return[];if(g)return g(e);var t=[];for(var i in e)y.has(e,i)&&t.push(i);return t},y.invert=function(e){for(var t={},i=y.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},y.defaults=function(e){return b(r.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},y.extend=function(e){return b(r.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},y.pick=function(e){var i={},n=a.apply(t,r.call(arguments,1));return b(n,function(t){
t in e&&(i[t]=e[t])}),i},y.omit=function(e){var i={},n=a.apply(t,r.call(arguments,1));for(var s in e)y.contains(n,s)||(i[s]=e[s]);return i},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.isArray=v||function(e){return"[object Array]"==s.call(e)},y.isObject=function(e){return e===Object(e)},b(["Arguments","Function","String","Number","Date","RegExp"],function(e){y["is"+e]=function(t){return s.call(t)=="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return!(!e||!y.has(e,"callee"))}),y.isFunction=function(e){return"function"==typeof e},y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!=+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==s.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return o.call(e,t)},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},
y.property=function(e){return function(t){return t[e]}},y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},y.now=Date.now||function(){return(new Date).getTime()},y.result=function(e,t){if(null!=e){var i=e[t];return y.isFunction(i)?i.call(e):i}};var A=0;return y.uniqueId=function(e){var t=++A+"";return e?e+t:t},y}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(7),i(1),i(23),i(11),i(20),i(31),i(12),i(56),i(33),i(59),i(110),i(109),i(60)],r=function(e,t,i,n,r,s,o,u,l,c,d,h,f){var p={};return p.log=function(){window.console&&("object"===a(console.log)?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments));
},p.between=function(e,t,i){return Math.max(Math.min(e,i),t)},p.foreach=function(e,t){var i,n;for(i in e)"function"===p.typeOf(e.hasOwnProperty)?e.hasOwnProperty(i)&&(n=e[i],t(i,n)):(n=e[i],t(i,n))},p.indexOf=t.indexOf,p.noop=function(){},p.seconds=e.seconds,p.prefix=e.prefix,p.suffix=e.suffix,t.extend(p,s,o,l,i,u,n,r,c,d,h,f),p}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],r=function(e){var t=[],i=t.slice,n={on:function(e,t,i){if(!s(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i}),this},once:function l(t,i,n){if(!s(this,"once",t,[i,n])||!i)return this;var r=this,l=e.once(function(){r.off(t,l),i.apply(this,arguments)});return l._callback=i,this.on(t,l,n)},off:function(t,i,n){
var r,a,o,u,l,c,d,h;if(!this._events||!s(this,"off",t,[i,n]))return this;if(!t&&!i&&!n)return this._events=void 0,this;for(u=t?[t]:e.keys(this._events),l=0,c=u.length;c>l;l++)if(t=u[l],o=this._events[t]){if(this._events[t]=r=[],i||n)for(d=0,h=o.length;h>d;d++)a=o[d],(i&&i!==a.callback&&i!==a.callback._callback||n&&n!==a.context)&&r.push(a);r.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!s(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&o(n,t,this),r&&o(r,arguments,this),this},triggerSafe:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!s(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&u(n,t,this,e),r&&u(r,arguments,this,e),this}},r=/\s+/,s=function(e,t,i,n){if(!i)return!0;if("object"===("undefined"==typeof i?"undefined":a(i))){for(var s in i)e[t].apply(e,[s,i[s]].concat(n));return!1}if(r.test(i)){for(var o=i.split(r),u=0,l=o.length;l>u;u++)e[t].apply(e,[o[u]].concat(n));
return!1}return!0},o=function(e,t,i){var n,r=-1,a=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:for(;++r<a;)(n=e[r]).callback.call(n.context||i);return;case 1:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s);return;case 2:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s,o);return;case 3:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s,o,u);return;default:for(;++r<a;)(n=e[r]).callback.apply(n.context||i,t);return}},u=function(e,t,i,n){for(var r,a=-1,s=e.length;++a<s;)try{r=e[a],r.callback.apply(r.context||i,t)}catch(o){console.log('Error in "'+n+'" event handler:',o)}};return n}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){var e={DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"},t={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",
JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_META:"meta",
JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_BREAKPOINT:"breakpoint"};return t.touchEvents=e,t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"
}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(3),i(4),i(1),i(2)],r=function(e,t,i,n){function r(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}function a(e){var t=e||window.event;return e instanceof MouseEvent&&("which"in t?3===t.which:"button"in t&&2===t.button)}function s(e,t,i){var n;return n=t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:t.touches&&t.touches.length?t.touches[0]:t.changedTouches[0],{type:e,sourceEvent:t,target:t.target,currentTarget:i,pageX:n.pageX,pageY:n.pageY}}function o(e){(e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault())}var u=t.touchEvents,l="PointerEvent"in window,c="ontouchstart"in window,d=!(l||c&&n.isMobile()),h=n.isFF()&&n.isOSX(),f=function(e,t){function n(e){"touch"!==e.pointerType&&y(u.OVER,e)}function c(e){"touch"!==e.pointerType&&y(u.MOVE,e)}function f(t){(d||l&&"touch"!==t.pointerType&&!e.contains(document.elementFromPoint(t.x,t.y)))&&y(u.OUT,t);
}function p(e,t,i){e.removeEventListener(t,i),e.addEventListener(t,i)}function v(i){b=i.target,w=r(i,"X"),_=r(i,"Y"),a(i)||("pointerdown"===i.type&&i.isPrimary?(t.preventScrolling&&(T=i.pointerId,e.setPointerCapture(T)),p(e,"pointermove",g),p(e,"pointercancel",m),"mouse"===i.pointerType&&"OBJECT"===b.nodeName?p(document,"mouseup",m):p(e,"pointerup",m)):"mousedown"===i.type?(p(document,"mousemove",g),h&&"object"===i.target.nodeName.toLowerCase()?p(e,"click",m):p(document,"mouseup",m)):"touchstart"===i.type&&(p(b,"touchmove",g),p(b,"touchcancel",m),p(b,"touchend",m)),t.preventScrolling&&o(i))}function g(e){var i=6;if(k)y(u.DRAG,e);else{var n=r(e,"X"),a=r(e,"Y"),s=n-w,l=a-_;s*s+l*l>i*i&&(y(u.DRAG_START,e),k=!0,y(u.DRAG,e))}t.preventScrolling&&o(e)}function m(i){var n="pointerup"===i.type||"pointercancel"===i.type;n&&t.preventScrolling&&e.releasePointerCapture(T),e.removeEventListener("pointermove",g),e.removeEventListener("pointercancel",m),e.removeEventListener("pointerup",m),document.removeEventListener("mousemove",g),
document.removeEventListener("mouseup",m),b.removeEventListener("touchmove",g),b.removeEventListener("touchcancel",m),b.removeEventListener("touchend",m),k?y(u.DRAG_END,i):t.directSelect&&i.target!==e||-1!==i.type.indexOf("cancel")||("mouseup"===i.type||"click"===i.type||n&&"mouse"===i.pointerType?y(u.CLICK,i):(y(u.TAP,i),"touchend"===i.type&&o(i))),b=null,k=!1}function y(e,n){var r;if(t.enableDoubleTap&&(e===u.CLICK||e===u.TAP))if(i.now()-A<S){var a=e===u.CLICK?u.DOUBLE_CLICK:u.DOUBLE_TAP;r=s(a,n,E),L.trigger(a,r),A=0}else A=i.now();r=s(e,n,E),L.trigger(e,r)}var b,T,E=e,k=!1,w=0,_=0,A=0,S=300;t=t||{},l?(e.addEventListener("pointerdown",v),t.useHover&&(e.addEventListener("pointerover",n),e.addEventListener("pointerout",f)),t.useMove&&e.addEventListener("pointermove",c)):(d&&(e.addEventListener("mousedown",v),t.useHover&&(e.addEventListener("mouseover",n),e.addEventListener("mouseout",f)),t.useMove&&e.addEventListener("mousemove",c)),e.addEventListener("touchstart",v));var L=this;return this.triggerEvent=y,
this.destroy=function(){this.off(),e.removeEventListener("touchstart",v),e.removeEventListener("mousedown",v),b&&(b.removeEventListener("touchmove",g),b.removeEventListener("touchcancel",m),b.removeEventListener("touchend",m),b=null),l&&(t.preventScrolling&&e.releasePointerCapture(T),e.removeEventListener("pointerover",n),e.removeEventListener("pointerdown",v),e.removeEventListener("pointermove",g),e.removeEventListener("pointermove",c),e.removeEventListener("pointercancel",m),e.removeEventListener("pointerout",f),e.removeEventListener("pointerup",m)),e.removeEventListener("click",m),e.removeEventListener("mouseover",n),e.removeEventListener("mousemove",c),e.removeEventListener("mouseout",f),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m)},this};return f.getPointerType=function(e){return l&&e instanceof window.PointerEvent?"touch"===e.pointerType?"touch":"mouse":c&&e instanceof window.TouchEvent?"touch":"mouse"},i.extend(f.prototype,e),f}.apply(t,n),
!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){function t(e){return/[\(,]format=m3u8-/i.test(e)?"m3u8":!!/[\(,]format=mpd-/i.test(e)&&"mpd"}var i=function(e){return e.replace(/^\s+|\s+$/g,"")},n=function(e,t,i){for(e=""+e,i=i||"0";e.length<t;)e=i+e;return e},r=function(e,t){for(var i=0;i<e.attributes.length;i++)if(e.attributes[i].name&&e.attributes[i].name.toLowerCase()===t.toLowerCase())return e.attributes[i].value.toString();return""},a=function(e){if(!e||"rtmp"===e.substr(0,4))return"";var i=t(e);return i?i:(e=e.split("?")[0].split("#")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)},s=function(e){var t=parseInt(e/3600),i=parseInt(e/60)%60,r=e%60;return n(t,2)+":"+n(i,2)+":"+n(r.toFixed(3),6)},o=function(t,i){if(e.isNumber(t))return t;t=t.replace(",",".");var n=t.split(":"),r=n.length,a=0;if("s"===t.slice(-1))a=parseFloat(t);else if("m"===t.slice(-1))a=60*parseFloat(t);else if("h"===t.slice(-1))a=3600*parseFloat(t);else if(r>1){
var s=r-1;4===r&&(i&&(a=parseFloat(n[s])/i),s-=1),a+=parseFloat(n[s]),a+=60*parseFloat(n[s-1]),r>=3&&(a+=3600*parseFloat(n[s-2]))}else a=parseFloat(t);return a},u=function(t,i){return e.map(t,function(e){return i+e})},l=function(t,i){return e.map(t,function(e){return e+i})};return{trim:i,pad:n,xmlAttribute:r,extension:a,hms:s,seconds:o,suffix:l,prefix:u}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r;n=[i(2),i(4),i(5),i(1)],r=function(e,t,i,n){var r=e.noop,a=n.constant(!1),s={supports:a,play:r,load:r,stop:r,volume:r,mute:r,seek:r,resize:r,remove:r,destroy:r,setVisibility:r,setFullscreen:a,getFullscreen:r,getContainer:r,setContainer:a,getName:r,getQualityLevels:r,getCurrentQuality:r,setCurrentQuality:r,getAudioTracks:r,getCurrentAudioTrack:r,setCurrentAudioTrack:r,checkComplete:r,setControls:r,attachMedia:r,detachMedia:r,setState:function(e){var n=this.state||i.IDLE;this.state=e,e!==n&&this.trigger(t.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){var i=e[0].type,n="oga"===i||"aac"===i||"mp3"===i||"mpeg"===i||"vorbis"===i;
this.trigger(t.JWPLAYER_MEDIA_TYPE,{mediaType:n?"audio":"video"})}};return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r;n=[i(7),i(1),i(106)],r=function(e,t,i){var n={};n.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},n.styleDimension=function(e){return e+(e.toString().indexOf("%")>0?"":"px")};var r=function(e){return t.isString(e.className)?e.className.split(" "):[]},a=function(t,i){i=e.trim(i),t.className!==i&&(t.className=i)};return n.classList=function(e){return e.classList?e.classList:r(e)},n.hasClass=i.hasClass,n.addClass=function(e,i){var n=r(e),s=t.isArray(i)?i:i.split(" ");t.each(s,function(e){t.contains(n,e)||n.push(e)}),a(e,n.join(" "))},n.removeClass=function(e,i){var n=r(e),s=t.isArray(i)?i:i.split(" ");a(e,t.difference(n,s).join(" "))},n.replaceClass=function(e,t,i){var n=e.className||"";t.test(n)?n=n.replace(t,i):i&&(n+=" "+i),a(e,n)},n.toggleClass=function(e,i,r){var a=n.hasClass(e,i);r=t.isBoolean(r)?r:!a,
r!==a&&(r?n.addClass(e,i):n.removeClass(e,i))},n.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.addStyleSheet=function(e){},n.empty=function(e){if(e)for(;e.childElementCount>0;)e.removeChild(e.children[0])},n.bounds=function(e){var t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!e||!document.body.contains(e))return t;var i=e.getBoundingClientRect(),n=window.pageYOffset,r=window.pageXOffset;return i.width||i.height||i.left||i.top?(t.left=i.left+r,t.right=i.right+r,t.top=i.top+n,t.bottom=i.bottom+n,t.width=i.right-i.left,t.height=i.bottom-i.top,t):t},n}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){var t={},i={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return t.utf8ArrayToStr=function(e,t){var i,n,r,a,s,o;for(i="",r=e.length,n=t||0;r>n;)if(a=e[n++],0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(a);break;case 12:
case 13:s=e[n++],i+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[n++],o=e[n++],i+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}return i},t.utf16BigEndianArrayToStr=function(e,t){var i,n,r;for(i="",r=e.length-1,n=t||0;r>n;)254===e[n]&&255===e[n+1]||(i+=String.fromCharCode((e[n]<<8)+e[n+1])),n+=2;return i},t.syncSafeInt=function(e){var i=t.arrayToInt(e);return 127&i|(32512&i)>>1|(8323072&i)>>2|(2130706432&i)>>3},t.arrayToInt=function(e){for(var t="0x",i=0;i<e.length;i++)e[i]<16&&(t+="0"),t+=e[i].toString(16);return parseInt(t)},t.parseID3=function(n){return e.reduce(n,function(n,r){if(!("value"in r)&&"data"in r&&r.data instanceof ArrayBuffer){var a=r,s=new Uint8Array(a.data),o=s.length;r={value:{key:"",data:""}};for(var u=10;14>u&&u<s.length&&0!==s[u];)r.value.key+=String.fromCharCode(s[u]),u++;var l=19,c=s[l];3!==c&&0!==c||(c=s[++l],o--);var d=0;if(1!==c&&2!==c)for(var h=l+1;o>h;h++)if(0===s[h]){d=h-l;break}if(d>0){var f=t.utf8ArrayToStr(s.subarray(l,l+=d),0);if("PRIV"===r.value.key){
if("com.apple.streaming.transportStreamTimestamp"===f){var p=1&t.syncSafeInt(s.subarray(l,l+=4)),v=t.syncSafeInt(s.subarray(l,l+=4));p&&(v+=4294967296),r.value.data=v}else r.value.data=t.utf8ArrayToStr(s,l+1);r.value.info=f}else r.value.info=f,r.value.data=t.utf8ArrayToStr(s,l+1)}else{var g=s[l];1===g||2===g?r.value.data=t.utf16BigEndianArrayToStr(s,l+1):r.value.data=t.utf8ArrayToStr(s,l+1)}}if(i.hasOwnProperty(r.value.key)&&(n[i[r.value.key]]=r.value.data),r.value.info){var m=n[r.value.key];e.isObject(m)||(m={},n[r.value.key]=m),m[r.value.info]=r.value.data}else n[r.value.key]=r.value.data;return n},{})},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(4),i(3),i(1)],r=function(e,t,i){var n={},r={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},a=function(a,s){function o(t){c=r.ERROR,l.trigger(e.ERROR,t)}function u(t){c=r.COMPLETE,l.trigger(e.COMPLETE,t)}var l=i.extend(this,t),c=r.NEW;this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){},
this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=s?this.makeStyleLink:this.makeScriptTag,this.load=function(){if(c===r.NEW){var t=n[a];if(t&&(c=t.getStatus(),2>c))return t.on(e.ERROR,o),void t.on(e.COMPLETE,u);var i=document.getElementsByTagName("head")[0]||document.documentElement,l=this.makeTag(a),d=!1;l.onload=l.onreadystatechange=function(e){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,u(e),l.onload=l.onreadystatechange=null,i&&l.parentNode&&!s&&i.removeChild(l))},l.onerror=o,i.insertBefore(l,i.firstChild),c=r.LOADING,n[a]=this}},this.getStatus=function(){return c}};return a.loaderstatus=r,a}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){var t="free",i="premium",n="enterprise",r="platinum",a="ads",s="unlimited",o="trial",u={setup:[t,i,n,a,s,o,r],dash:[i,n,a,s,o,r],drm:[n,a,s,o],hls:[i,a,n,s,o,r],ads:[a,s,o,r,n],casting:[i,n,a,s,o,r],jwpsrv:[t,i,n,a,o,r]
},l=function(t){return function(i){return e.contains(u[i],t)}};return l}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return{createId:function(e,t){var i,n=e.kind||"cc";return i=e["default"]||e.defaulttrack?"default":e._id||e.file||n+t},createLabel:function(e,t){var i=e.label||e.name||e.language;return i||(i="Unknown CC",t+=1,t>1&&(i+=" ["+t+"]")),{label:i,unknownCount:t}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(2),i(17),i(28),i(94),i(29)],r=function(e,t,n,r,a,s){function o(e,t,i,s){var o,l,c=e.responseXML?e.responseXML.firstChild:null;if(c)for("xml"===n.localName(c)&&(c=c.nextSibling);c.nodeType===c.COMMENT_NODE;)c=c.nextSibling;try{if(c&&"tt"===n.localName(c))o=a(e.responseXML),l=this.convertToVTTCues(o),delete t.xhr,i(l);else{var d=e.responseText;d.indexOf("WEBVTT")>=0?u(d,t,i,s):(o=r(d),l=this.convertToVTTCues(o),delete t.xhr,i(l))}}catch(h){delete t.xhr,s(h)}}function u(e,t,n,r){i.e(13,function(a){var s=i(21),o=new s(window),u=[];
o.oncue=function(e){u.push(e)},o.onflush=function(){delete t.xhr,n(u)};try{o.parse(e)}catch(l){delete t.xhr,r(l)}})}var l={};return l.loadFile=function(e,i,n){e.xhr=t.ajax(e.file,function(t){o.call(l,t,e,i,n)},n)},l.cancelXhr=function(t){e.each(t,function(e){var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()),delete e.xhr})},l.convertToVTTCues=function(t){var i=e.map(t,function(e){return new s(e.begin,e.end,e.text)});return i},l}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(7)],r=function(e){return{localName:function t(e){var t="";return e&&(e.localName?t=e.localName:e.baseName&&(t=e.baseName)),t},textContent:function i(t){var i="";return t&&(t.textContent?i=e.trim(t.textContent):t.text&&(i=e.trim(t.text))),i},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(98),i(99),i(48),i(22)],
r=function(e,t,i,n){var r={},a={},s=function(i,n){return a[i]=new e(new t(r),n),a[i]},o=function(e,t,a,s){var o=n.getPluginName(e);r[o]||(r[o]=new i(e)),r[o].registerPlugin(e,t,a,s)};return{loadPlugins:s,registerPlugin:o}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return{repo:"http://ssl.p.jwpcdn.com/player/v/",SkinsIncluded:["seven"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(7),i(42)],r=function(e,t){function i(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}function n(t,i){return""===i||void 0===i||null===i?"":"string"==typeof i&&isNaN(i)?/png|gif|jpe?g/i.test(i)&&i.indexOf("url")<0?"url("+i+")":i:0===i||"z-index"===t||"opacity"===t?""+i:/color/i.test(t)?"#"+e.pad(i.toString(16).replace(/^0x/i,""),6):Math.ceil(i)+"px";
}var r,s=function(e,i,n,r){n=n||"all-players";var s="";if("object"===("undefined"==typeof i?"undefined":a(i))){var u=document.createElement("div");o(u,i);var l=u.style.cssText;r&&l&&(l=l.replace(/;/g," !important;")),s="{"+l+"}"}else"string"==typeof i&&(s=i);return""===s||"{}"===s?void t.clear(n,e):void t.style([[e,e+s]],n)},o=function(e,t){if(void 0!==e&&null!==e){void 0===e.length&&(e=[e]);var r,a={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=n(r,t[r]));for(var s=0;s<e.length;s++){var o,u=e[s];if(void 0!==u&&null!==u)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o=i(r),u.style[o]!==a[r]&&(u.style[o]=a[r]))}}},u=function(e,t){o(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},l=function(e,t){var i="rgb",n=void 0!==t&&100!==t;if(n&&(i+="a"),!r){var a=document.createElement("canvas");a.height=1,a.width=1,r=a.getContext("2d")}e?isNaN(parseInt(e,16))||(e="#"+e):e="#000000",r.clearRect(0,0,1,1),r.fillStyle=e,r.fillRect(0,0,1,1);var s=r.getImageData(0,0,1,1).data;
return i+="("+s[0]+", "+s[1]+", "+s[2],n&&(i+=", "+t/100),i+")"};return{css:s,style:o,clearCss:t.clear,transform:u,hexToRgba:l,getRgba:l}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r;n=[i(7)],r=function(e){var t={},i=t.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return t.getPluginPathType=function(t){if("string"==typeof t){t=t.split("?")[0];var n=t.indexOf("://");if(n>0)return i.ABSOLUTE;var r=t.indexOf("/"),a=e.extension(t);return!(0>n&&0>r)||a&&isNaN(a)?i.RELATIVE:i.CDN}},t.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},t.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){function t(e){return function(){return n(e)}}var i={},n=e.memoize(function(e){var t=navigator.userAgent.toLowerCase();return null!==t.match(e)}),r=i.isInt=function(e){return parseFloat(e)%1===0};i.isFlashSupported=function(){var e=i.flashVersion();
return e&&e>=18},i.isFF=t(/gecko\//i),i.isIPod=t(/iP(hone|od)/i),i.isIPad=t(/iPad/i),i.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),i.isOSX=t(/Mac OS X/i),i.isFacebook=t(/FBAV/i);var a=i.isEdge=function(e){return n(e?new RegExp("\\sedge\\/"+e,"i"):/\sEdge\/\d+/i)},s=i.isIETrident=t(/trident\/.+rv:\s*11/i),o=i.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),n(new RegExp("msie\\s*"+e,"i"))):n(/msie/i)};i.isChrome=function(){return n(/\s(?:Chrome|CriOS)\//i)&&!i.isEdge()},i.isIE=function(e){return e?(e=parseFloat(e).toFixed(1),e>=12?a(e):e>=11?s():o(e)):a()||s()||o()},i.isSafari=function(){return n(/safari/i)&&!n(/chrome/i)&&!n(/crios/i)&&!n(/chromium/i)&&!n(/android/i)};var u=i.isIOS=function(e){return n(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)};i.isAndroidNative=function(e){return l(e,!0)};var l=i.isAndroid=function(e,t){return!(t&&n(/chrome\/[123456789]/i)&&!n(/chrome\/18/))&&(e?(r(e)&&!/\./.test(e)&&(e=""+e+"."),n(new RegExp("Android\\s*"+e,"i"))):n(/Android/i));
};return i.isMobile=function(){return u()||l()},i.isIframe=function(){try{return window.self!==window.top}catch(e){return!0}},i.flashVersion=function(){if(i.isAndroid())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"],e&&e.description))return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(n){return 0}return e}return 0},i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return"7.11.0+commercial_v7-11-0.178.commercial.cad481.jwplayer.5b926d.freewheel.d45996.googima.f50918.vast.81e36f.analytics.340e73.plugin-gapro.7e936b.plugin-related.179f26.plugin-sharing.f395ef.vr-plugin.d532d3.hls.js."}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(14)],r=function(e,t){var i,n=[{configName:"clearkey",keyName:"org.w3.clearkey"
},{configName:"widevine",keyName:"com.widevine.alpha"},{configName:"playready",keyName:"com.microsoft.playready"}],r=[],a={},s=function(t){var i=t.get("playlist");return!!t.get("drm")||e.some(i,function(t){return!!t.drm||e.some(t.sources,function(e){return!!e.drm})})},o=function(e){return new Promise(function(t,i){var n;try{n=new window.MSMediaKeys(e)}catch(r){}n?t():i()})},u=function(t){var s=o;return navigator.requestMediaKeySystemAccess&&(s=navigator.requestMediaKeySystemAccess.bind(navigator)),i?i.then(t):(e.forEach(n,function(e){var t=s(e.keyName,[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}]}]).then(function(){a[e.configName]=!0})["catch"](function(){a[e.configName]=!1});r.push(t)}),i=Promise.all(r).then(t))},l=function(){return!!navigator.requestMediaKeySystemAccess&&!!MediaKeySystemAccess.prototype.getConfiguration||!!window.MSMediaKeys},c=function(e){return a[e]},d=function(t){
i||console.error('DRM only supported with "drm" block in initial setup.',t);var n=e.keys(t);return e.some(n,function(e){return c(e)})};return{containsDrm:s,probe:function(e,i){l()&&t(i)("drm")?u(e):e()},anySupported:d,isSupported:c}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(38),i(90),i(1),i(3),i(108),i(4),i(5)],r=function(e,t,i,n,r,a,s,o){var u=function(){function a(e,t){var i=n.extend({},t,{type:e}),r=this.mediaModel;switch(e){case"flashThrottle":var a="resume"!==t.state;this.set("flashThrottle",a),this.set("flashBlocked",a);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":return void this.set(e,t[e]);case"mute":return void(this.get("autostartMuted")||this.set(e,t[e]));case s.JWPLAYER_MEDIA_TYPE:return void(r.get("mediaType")!==t.mediaType&&(r.set("mediaType",t.mediaType),this.mediaController.trigger(e,i)));case s.JWPLAYER_PLAYER_STATE:return void r.set("state",t.newstate);
case s.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case s.JWPLAYER_MEDIA_META:var u=t.duration;n.isNumber(u)&&!n.isNaN(u)&&(r.set("duration",u),this.set("duration",u));break;case s.JWPLAYER_MEDIA_BUFFER_FULL:r.get("playAttempt")?this.playVideo():r.on("change:playAttempt",function(){this.playVideo()},this);break;case s.JWPLAYER_MEDIA_TIME:r.set("position",t.position),this.set("position",t.position),n.isNumber(t.duration)&&(r.set("duration",t.duration),this.set("duration",t.duration));break;case s.JWPLAYER_PROVIDER_CHANGED:this.set("provider",h.getName());break;case s.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),r.set("levels",t.levels);break;case s.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case s.JWPLAYER_MEDIA_COMPLETE:return p=!0,this.mediaController.trigger(s.JWPLAYER_MEDIA_BEFORECOMPLETE,i),void(v&&this.playbackComplete());case s.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),
r.set("audioTracks",t.tracks);break;case s.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case"subtitlesTrackChanged":this.persistVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":var l=n.extend({},t);r.set("visualQuality",l);break;case"autoplayFailed":this.set("autostartFailed",!0),r.get("state")===o.PLAYING&&r.set("state",o.PAUSED)}this.mediaController.trigger(e,i)}function u(){return!!e.isIOS()&&!(e.isIOS(6)||e.isIOS(7)||e.isIOS(8)||e.isIOS(9))}function c(){var t=!f.get("advertising")||f.get("advertising").autoplayadsmuted,i=u()&&(e.isSafari()||e.isChrome()||e.isFacebook()),n=e.isAndroid()&&e.isChrome(),r=i||n,a=1===f.get("sdkplatform");return!f.get("sdkplatform")&&t&&r||a}var d,h,f=this,p=!1,v=!0,g=e.noop;this.mediaController=n.extend({},r),this.mediaModel=new l,i.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(e){return n.extend(this.attributes,e,{item:0,itemMeta:{},playlistItem:void 0,state:o.IDLE,flashBlocked:!1,
provider:void 0,duration:0,position:0,buffer:0}),this.updateProviders(),this},this.getConfiguration=function(){return n.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){d=new t(this.getConfiguration())},this.setQualityLevel=function(e,t){e>-1&&t.length>1&&"youtube"!==h.getName().name&&this.mediaModel.set("currentLevel",parseInt(e))},this.persistQualityLevel=function(e,t){var i=t[e]||{},n=i.label;this.set("qualityLabel",n)},this.setCurrentAudioTrack=function(e,t){e>-1&&t.length>0&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");g.setContainer(e)},this.changeVideoProvider=function(e){if(this.off("change:mediaContainer",this.onMediaContainer),h&&(h.off(null,null,this),h.getContainer()&&h.remove(),delete h.instreamMode),!e)return h=g=e,void this.set("provider",void 0);g=new e(f.get("id"),f.getConfiguration());var t=this.get("mediaContainer");t?g.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),
this.set("provider",g.getName()),-1===g.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),h=g,h.volume(f.get("volume")),h.mute(this.autoStartOnMobile()||f.get("mute")),h.on("all",a,this),this.get("instreamMode")===!0&&(h.instreamMode=!0),this.set("renderCaptionsNatively",h.renderNatively)},this.checkComplete=function(){return p},this.detachMedia=function(){return v=!1,h.off("all",a,this),h.detachMedia()},this.attachMedia=function(){return v=!0,h.off("all",a,this),h.on("all",a,this),p&&this.playbackComplete(),h.attachMedia()},this.playbackComplete=function(){p=!1,h.setState(o.COMPLETE),this.mediaController.trigger(s.JWPLAYER_MEDIA_COMPLETE,{})},this.destroy=function(){this.off(),h&&(h.off(null,null,this),h.destroy())},this.getVideo=function(){return h},this.setFullscreen=function(e){e=!!e,e!==f.get("fullscreen")&&f.set("fullscreen",e)},this.chooseProvider=function(e){return d.choose(e).provider},this.setItemIndex=function(e){var t=this.get("playlist");
e=parseInt(e,10)||0,e=(e+t.length)%t.length,this.set("item",e),this.set("playlistItem",t[e]),this.setActiveItem(t[e])},this.setActiveItem=function(t){this.mediaModel.off(),this.mediaModel=new l,this.set("itemMeta",{}),this.set("mediaModel",this.mediaModel),this.set("position",t.starttime||0),this.set("minDvrWindow",t.minDvrWindow),this.set("duration",t.duration&&e.seconds(t.duration)||0),this.setProvider(t)},this.setProvider=function(e){var t=e&&e.sources&&e.sources[0];if(void 0!==t){var i=this.chooseProvider(t);i&&g instanceof i||f.changeVideoProvider(i),g&&(g.init&&g.init(e),this.trigger("itemReady",e))}},this.getProviders=function(){return d},this.resetProvider=function(){g=null},this.setVolume=function(e){e=Math.round(e),this.set("volume",e),h&&h.volume(e);var t=0===e;t!==this.getMute()&&this.setMute(t)},this.getMute=function(){return this.get("autostartMuted")||this.get("mute")},this.setMute=function(t){if(e.exists(t)||(t=!this.getMute()),this.set("mute",t),h&&h.mute(t),!t){var i=Math.max(10,this.get("volume"));
this.set("autostartMuted",!1),this.setVolume(i)}},this.loadVideo=function(t){t||(t=this.get("playlist")[this.get("item")]),this.set("position",t.starttime||0),this.set("duration",t.duration&&e.seconds(t.duration)||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(s.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),h.load(t)},this.stopVideo=function(){h&&h.stop()},this.playVideo=function(){h.play()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.name):this.set("captionLabel","Off")},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),h&&h.setSubtitlesTrack&&h.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e,t){this.setVideoSubtitleTrack(e,t),this.persistCaptionsTrack()},this.setNextUp=function(e){this.set("nextUp",e)},this.autoStartOnMobile=function(){return this.get("autostart")&&c()}},l=u.MediaModel=function(){
this.set("state",o.IDLE)};return n.extend(u.prototype,a),n.extend(l.prototype,a),u}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(5)],r=function(e){function t(t){return t===e.COMPLETE||t===e.ERROR?e.IDLE:t}return function(e,i,n){if(i=t(i),n=t(n),i!==n){var r=i.replace(/(?:ing|d)$/,""),a={type:r,newstate:i,oldstate:n,reason:e.mediaModel.get("state")};"play"===r?a.playReason=e.get("playReason"):"pause"===r&&(a.pauseReason=e.get("pauseReason")),this.trigger(r,a)}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(7)],r=function(e,t){function i(e){var t={},i=e.split("\r\n");1===i.length&&(i=e.split("\n"));var r=1;if(i[0].indexOf(" --> ")>0&&(r=0),i.length>r+1&&i[r+1]){var a=i[r],s=a.indexOf(" --> ");s>0&&(t.begin=n(a.substr(0,s)),t.end=n(a.substr(s+5)),t.text=i.slice(r+1).join("\r\n"))}return t}var n=e.seconds;return function(e){var n=[];e=t.trim(e);var r=e.split("\r\n\r\n");1===r.length&&(r=e.split("\n\n"));for(var a=0;a<r.length;a++)if("WEBVTT"!==r[a]){
var s=i(r[a]);s.text&&n.push(s)}return n}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n;n=function(){function e(e){if("string"!=typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function t(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(i,r,a){var s=this;s.hasBeenReset=!1;var o="",u=!1,l=i,c=r,d=a,h=null,f="",p=!0,v="auto",g="start",m=50,y="middle",b=50,T="middle";Object.defineProperty(s,"id",{enumerable:!0,get:function(){return o},set:function(e){o=""+e}}),Object.defineProperty(s,"pauseOnExit",{enumerable:!0,get:function(){return u},set:function(e){u=!!e}}),Object.defineProperty(s,"startTime",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"endTime",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");
c=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"text",{enumerable:!0,get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}}),Object.defineProperty(s,"region",{enumerable:!0,get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"vertical",{enumerable:!0,get:function(){return f},set:function(t){var i=e(t);if(i===!1)throw new SyntaxError("An invalid or illegal string was specified.");f=i,this.hasBeenReset=!0}}),Object.defineProperty(s,"snapToLines",{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}}),Object.defineProperty(s,"line",{enumerable:!0,get:function(){return v},set:function(e){if("number"!=typeof e&&e!==n)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"lineAlign",{enumerable:!0,get:function(){return g},set:function(e){var i=t(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0;
}}),Object.defineProperty(s,"position",{enumerable:!0,get:function(){return m},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"positionAlign",{enumerable:!0,get:function(){return y},set:function(e){var i=t(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");y=i,this.hasBeenReset=!0}}),Object.defineProperty(s,"size",{enumerable:!0,get:function(){return b},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}}),Object.defineProperty(s,"align",{enumerable:!0,get:function(){return T},set:function(e){var i=t(e);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");T=i,this.hasBeenReset=!0}}),s.displayState=void 0}if(window.VTTCue)return window.VTTCue;var n="auto",r={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text);
},i}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n,r;n=[i(1),i(47),i(97)],r=function(e,t,i){var n={sources:[],tracks:[],minDvrWindow:120};return function(r){r=r||{},e.isArray(r.tracks)||delete r.tracks;var a=e.extend({},n,r);e.isObject(a.sources)&&!e.isArray(a.sources)&&(a.sources=[t(a.sources)]),e.isArray(a.sources)&&0!==a.sources.length||(r.levels?a.sources=r.levels:a.sources=[t(r)]);for(var s=0;s<a.sources.length;s++){var o=a.sources[s];if(o){var u=o["default"];u?o["default"]="true"===u.toString():o["default"]=!1,a.sources[s].label||(a.sources[s].label=s.toString()),a.sources[s]=t(a.sources[s])}}return a.sources=e.compact(a.sources),e.isArray(a.tracks)||(a.tracks=[]),e.isArray(a.captions)&&(a.tracks=a.tracks.concat(a.captions),delete a.captions),a.tracks=e.compact(e.map(a.tracks,i)),a}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(33)],r=function(e,t){function i(e){return/^(?:(?:https?|file)\:)?\/\//.test(e)}function n(t){return e.some(t,function(e){
return"parsererror"===e.nodeName})}var r={};return r.getAbsolutePath=function(e,n){if(t.exists(n)||(n=document.location.href),t.exists(e)){if(i(e))return e;var r,a=n.substring(0,n.indexOf("://")+3),s=n.substring(a.length,n.indexOf("/",a.length+1));if(0===e.indexOf("/"))r=e.split("/");else{var o=n.split("?")[0];o=o.substring(a.length+s.length+1,o.lastIndexOf("/")),r=o.split("/").concat(e.split("/"))}for(var u=[],l=0;l<r.length;l++)r[l]&&t.exists(r[l])&&"."!==r[l]&&(".."===r[l]?u.pop():u.push(r[l]));return a+s+"/"+u.join("/")}},r.getScriptPath=e.memoize(function(e){for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=t[i].src;if(n){var r=n.indexOf("/"+e);if(r>=0)return n.substr(0,r+1)}}return""}),r.parseXML=function(e){var t=null;try{"DOMParser"in window?(t=(new window.DOMParser).parseFromString(e,"text/xml"),(n(t.childNodes)||t.childNodes&&n(t.childNodes[0].childNodes))&&(t=null)):(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(i){}
return t},r.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},r.parseDimension=function(e){return"string"==typeof e?""===e?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e},r.timeFormat=function(t,i){if(0>=t&&!i||e.isNaN(parseInt(t)))return"0:00";var n=0>t?"-":"";t=Math.abs(t);var r=Math.floor(t/3600),a=Math.floor((t-3600*r)/60),s=Math.floor(t%60);return n+(r?r+":":"")+a+":"+(10>s?"0":"")+s},r}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(1)],r=function(e){var t={};return t.exists=function(e){switch("undefined"==typeof e?"undefined":a(e)){case"string":return e.length>0;case"object":
return null!==e;case"undefined":return!1;default:return!0}},t.isHTTPS=function(){return 0===window.location.href.indexOf("https")},t.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},t.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},t.youTubeID=function(e){var t=/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e);return t?t.slice(1).join("").replace("?",""):""},t.typeOf=function(t){if(null===t)return"null";var i="undefined"==typeof t?"undefined":a(t);return"object"===i&&e.isArray(t)?"array":i},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,function(e,t,i){var n,r;n=[i(23),i(14),i(1),i(102),i(25)],r=function(e,t,i,n,r){function a(){return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function s(n,a){if(e.isSafari())return!1;var s=t(a);if(!s("dash"))return!1;if(n.drm&&!r.anySupported(n.drm))return!1;var o=window.MediaSource;if(!window.HTMLVideoElement||!o)return!1;
var u=!0;return n.mediaTypes&&(u=i.all(n.mediaTypes,function(e){return o.isTypeSupported(e)})),u&&("dash"===n.type||"mpd"===n.type||(n.file||"").indexOf("mpd-time-csf")>-1)}var o=i.find(n,i.matches({name:"flash"})),u=o.supports;o.supports=function(i,n){if(!e.isFlashSupported()||i.drm)return!1;var r=i&&i.type;if("hls"===r||"m3u8"===r){var a=t(n);return a("hls")}return u.apply(this,arguments)};var l=i.find(n,i.matches({name:"html5"})),c=l.supports;return l.supports=function(e,i){var n=c.apply(this,arguments);if(n&&e.drm&&"hls"===e.type){var r=t(i),a=r("drm");if(a&&e.drm.fairplay){var s=window.WebKitMediaKeys;return s&&s.isTypeSupported&&s.isTypeSupported("com.apple.fps.1_0","video/mp4")}return a}return n},n.push({name:"shaka",supports:s}),n.splice(1,0,{name:"hlsjs",supports:function d(i,n){var r=e.isChrome()||e.isFF()||e.isIE(11),s=e.isAndroid()&&i.hlsjsdefault;if(r&&a()&&(!e.isMobile()||s)&&!i.drm){var o=i&&i.type,u=i&&i.file;if(u.indexOf(".m3u8")>-1||"hls"===o||"m3u8"===o){var d=t(n);return d("hls");
}}}}),n}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(103),i(1),i(37)],r=function(e,t){function n(e,i,n){var r=t.indexOf(e,t.findWhere(e,{name:n})),a=t.indexOf(e,t.findWhere(e,{name:i}));if(!(r>a)){var s=e.splice(a,1)[0];e.splice(r,0,s)}}var r,a=e.registerProvider,s=e.prototype.reorderProviders;return t.extend(e.loaders,{shaka:function(e){i.e(3,function(t){var n=i(71);a(n),e(n)})},hlsjs:function(e){i.e(2,function(t){var n=i(69);n["default"]&&(n=n["default"]),n.setEdition&&n.setEdition(r),a(n),e(n)})}}),t.extend(e.prototype,{reorderProviders:function(e){var t=s.call(this,e);return"flash"!==e?n(t,"hlsjs","flash"):(n(t,"flash","hlsjs"),n(t,"hlsjs","html5")),t},providerSupports:function(e,t){return r=this.config.edition,e.supports(t,r)}}),e}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,function(e,t,i){var n;n=function(e,t,i){function n(e,t){a(t,s(e))}function r(e,t){var i=d[e];if(i)if(t){var n=i[t];if(n)for(var r=0;r<n.parts.length;r+=1)n.parts[r]()}else{for(var a=Object.keys(i),s=0;s<a.length;s+=1)for(var o=i[a[s]],u=0;u<o.parts.length;u+=1)o.parts[u]();
delete d[e]}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=(d[e]||{})[n.id];if(r){for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(l(e,n.parts[a]))}else{for(var s=[],a=0;a<n.parts.length;a++)s.push(l(e,n.parts[a]));d[e]=d[e]||{},d[e][n.id]={id:n.id,parts:s}}}}function s(e){for(var t=[],i={},n=0;n<e.length;n++){var r=e[n],a=r[0],s=r[1],o=r[2],u={css:s,media:o};i[a]?i[a].parts.push(u):t.push(i[a]={id:a,parts:[u]})}return t}function o(e){p().appendChild(e)}function u(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),o(t),t}function l(e,t){var i,n,r,a=h[e];a||(a=h[e]={element:u(e),counter:0});var s=a.counter++;return i=a.element,n=c.bind(null,i,s,!1),r=c.bind(null,i,s,!0),n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media)return;n(t=e)}else r()}}function c(e,t,i,n){}var d={},h={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t;
}},p=f(function(){return document.head||document.getElementsByTagName("head")[0]});i.exports={style:n,clear:r};(function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}})()}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n,r;n=[],r=function(){function e(){return t?Promise.resolve(t):new Promise(function(e){i.e(1,function(n){t=i(65),e(t)})})}var t=null;return{load:e}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(7),i(17),i(95),i(96),i(30)],r=function(e,t,i,n,r){function a(t){for(var a={},o=0;o<t.childNodes.length;o++){var u=t.childNodes[o],c=l(u);if(c)switch(c.toLowerCase()){case"enclosure":a.file=e.xmlAttribute(u,"url");break;case"title":a.title=s(u);break;case"guid":a.mediaid=s(u);break;case"pubdate":a.date=s(u);break;case"description":a.description=s(u);break;case"link":a.link=s(u);break;case"category":a.tags?a.tags+=s(u):a.tags=s(u)}}return a=n(t,a),a=i(t,a),new r(a)}var s=t.textContent,o=t.getChildNode,u=t.numChildren,l=t.localName,c={};
return c.parse=function(e){var t=[];t.feedData={};for(var i=0;i<u(e);i++){var n=o(e,i),r=l(n).toLowerCase();if("channel"===r)for(var c=0;c<u(n);c++){var d=o(n,c),h=l(d).toLowerCase();"item"===h?t.push(a(d)):h&&(t.feedData[h]=s(d))}}return t},c}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(17),i(44),i(2),i(4),i(3),i(1)],r=function(e,t,i,n,r,a){var s=function(){function s(r){var s=i.tryCatch(function(){var i,s=r.responseXML?r.responseXML.childNodes:null,o="";if(s){for(var c=0;c<s.length&&(o=s[c],8===o.nodeType);c++);if("xml"===e.localName(o)&&(o=o.nextSibling),"rss"===e.localName(o)){var d=t.parse(o);i=a.extend({playlist:d},d.feedData)}}if(!i)try{var h=JSON.parse(r.responseText);if(a.isArray(h))i={playlist:h};else{if(!a.isArray(h.playlist))throw Error;i=h}}catch(f){return void u("Not a valid RSS/JSON feed")}l.trigger(n.JWPLAYER_PLAYLIST_LOADED,i)});s instanceof i.Error&&u()}function o(e){u("Playlist load error: "+e)}function u(e){l.trigger(n.JWPLAYER_ERROR,{message:e?e:"Error loading file"
})}var l=a.extend(this,r);this.load=function(e){i.ajax(e,s,o)},this.destroy=function(){this.off()}};return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(30),i(47),i(1),i(38)],r=function(e,t,i,n){function r(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=t.choose(n);if(r)return{type:n.type,provider:r.providerToCheck}}return null}function a(e,t){return i.isUndefined(e)?t:e}var s=function(t){return t=i.isArray(t)?t:[t],i.compact(i.map(t,e))};s.filterPlaylist=function(e,t,n){var r=[],a=t.getProviders(),s=t.get("preload"),l=i.extend({},n);return delete l.playlist,i.each(e,function(e){e=i.extend({},e),e.allSources=o(e,t),e.sources=u(e.allSources,a),e.sources.length&&(e.file=e.sources[0].file,s&&(e.preload=e.preload||s),n&&(e.feedData=l),r.push(e))}),r};var o=function(e,n){var r=e.sources,s=n.get("androidhls"),o=e.drm||n.get("drm"),u=e.preload||n.get("preload"),l=a(e.withCredentials,n.get("withCredentials")),c=n.get("hlsjsdefault");return i.compact(i.map(r,function(e){
if(!i.isObject(e))return null;void 0!==s&&null!==s&&(e.androidhls=s),(e.drm||o)&&(e.drm=e.drm||o),(e.preload||u)&&(e.preload=e.preload||u);var n=a(e.withCredentials,l);return i.isUndefined(n)||(e.withCredentials=n),c&&(e.hlsjsdefault=c),t(e)}))},u=function(e,t){t&&t.choose||(t=new n({primary:t?"flash":null}));var a=r(e,t);if(!a)return[];var s=a.provider,o=a.type;return i.filter(e,function(e){return e.type===o&&t.providerSupports(s,e)})};return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(7),i(1)],r=function(e,t,i){var n={"default":!1};return function(r){if(r&&r.file){var a=i.extend({},n,r);a.file=t.trim(""+a.file);var s=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(s.test(a.type)&&(a.mimeType=a.type,a.type=a.type.replace(s,"$1")),e.isYouTube(a.file)?a.type="youtube":e.isRtmp(a.file)?a.type="rtmp":a.type||(a.type=t.extension(a.file)),a.type){switch(a.type){case"m3u8":case"vnd.apple.mpegurl":a.type="hls";break;case"dash+xml":a.type="dash";break;case"smil":a.type="rtmp";break;
case"m4a":a.type="aac"}return i.each(a,function(e,t){""===e&&delete a[t]}),a}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(22),i(4),i(3),i(13),i(1)],r=function(e,t,i,n,r,s){var o={FLASH:0,JAVASCRIPT:1,HYBRID:2},u=function(u){function l(){switch(t.getPluginPathType(u)){case t.pluginPathType.ABSOLUTE:return u;case t.pluginPathType.RELATIVE:return e.getAbsolutePath(u,window.location.href)}}function c(){s.defer(function(){m=r.loaderstatus.COMPLETE,g.trigger(i.COMPLETE)})}function d(){m=r.loaderstatus.ERROR,g.trigger(i.ERROR,{url:u})}var h,f,p,v,g=s.extend(this,n),m=r.loaderstatus.NEW;this.load=function(){if(m===r.loaderstatus.NEW){if(u.lastIndexOf(".swf")>0)return h=u,m=r.loaderstatus.COMPLETE,void g.trigger(i.COMPLETE);if(t.getPluginPathType(u)===t.pluginPathType.CDN)return m=r.loaderstatus.COMPLETE,
void g.trigger(i.COMPLETE);m=r.loaderstatus.LOADING;var e=new r(l());e.on(i.COMPLETE,c),e.on(i.ERROR,d),e.load()}},this.registerPlugin=function(e,t,n,a){v&&(clearTimeout(v),v=void 0),p=t,n&&a?(h=a,f=n):"string"==typeof n?h=n:"function"==typeof n?f=n:n||a||(h=e),m=r.loaderstatus.COMPLETE,g.trigger(i.COMPLETE)},this.getStatus=function(){return m},this.getPluginName=function(){return t.getPluginName(u)},this.getFlashPath=function(){if(h)switch(t.getPluginPathType(h)){case t.pluginPathType.ABSOLUTE:return h;case t.pluginPathType.RELATIVE:return u.lastIndexOf(".swf")>0?e.getAbsolutePath(h,window.location.href):e.getAbsolutePath(h,l())}return null},this.getJS=function(){return f},this.getTarget=function(){return p},this.getPluginmode=function(){return void 0!==("undefined"==typeof h?"undefined":a(h))&&void 0!==("undefined"==typeof f?"undefined":a(f))?o.HYBRID:void 0!==("undefined"==typeof h?"undefined":a(h))?o.FLASH:void 0!==("undefined"==typeof f?"undefined":a(f))?o.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,i){
return new f(e,t,i)},this.getURL=function(){return u}};return u}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,,function(e,t,i){var n,r;n=[i(23)],r=function(e){return function(t){if("hls"===t.type){if(t.androidhls===!1&&e.isAndroid())return!1;var i=e.isAndroidNative;if(i(2)||i(3)||i("4.0"))return!1;if(e.isAndroid()&&!e.isFF())return!0}return null}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return"hidden"in document?function(){return!document.hidden}:"webkitHidden"in document?function(){return!document.webkitHidden}:function(){return!0}}()},function(e,t,i){var n,r;n=[i(1),i(31)],r=function(e,t){function i(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function n(t,n){return function(r){var a=r.currentTarget||n.xhr;if(clearTimeout(n.timeoutId),n.retryWithoutCredentials&&n.xhr.withCredentials){i(a);var s=e.extend({},n,{xhr:null,withCredentials:!1,
retryWithoutCredentials:!1});return void d(s)}n.onerror(t,n.url,a)}}function r(e){return function(t){var i=t.currentTarget||e.xhr;if(4===i.readyState){if(clearTimeout(e.timeoutId),i.status>=400){var n;return n=404===i.status?"File not found":""+i.status+"("+i.statusText+")",e.onerror(n,e.url,i)}if(200===i.status)return a(e)(t)}}}function a(e){return function(i){var n=i.currentTarget||e.xhr;if(clearTimeout(e.timeoutId),e.responseType){if("json"===e.responseType)return s(n,e)}else{var r,a=n.responseXML;if(a)try{r=a.firstChild}catch(u){}if(a&&r)return o(n,a,e);if(l&&n.responseText&&!a&&(a=t.parseXML(n.responseText),a&&a.firstChild))return o(n,a,e);if(e.requireValidXML)return void e.onerror("Invalid XML",e.url,n)}e.oncomplete(n)}}function s(t,i){if(!t.response||e.isString(t.response)&&'"'!==t.responseText.substr(1))try{t=e.extend({},t,{response:JSON.parse(t.responseText)})}catch(n){return void i.onerror("Invalid JSON",i.url,t)}return i.oncomplete(t)}function o(t,i,n){var r=i.documentElement;
return n.requireValidXML&&("parsererror"===r.nodeName||r.getElementsByTagName("parsererror").length)?void n.onerror("Invalid XML",n.url,t):(t.responseXML||(t=e.extend({},t,{responseXML:i})),n.oncomplete(t))}var u=function(){},l=!1,c=function(e){var t=document.createElement("a"),i=document.createElement("a");t.href=location.href;try{return i.href=e,i.href=i.href,t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch(n){}return!0},d=function(t,s,o,d){e.isObject(t)&&(d=t,t=d.url);var h,f=e.extend({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:s||u,onerror:o||u,mimeType:d&&!d.responseType?"text/xml":"",requireValidXML:!1,responseType:d&&d.plainText?"text":""},d);if("XDomainRequest"in window&&c(t))h=f.xhr=new window.XDomainRequest,h.onload=a(f),h.ontimeout=h.onprogress=u,l=!0;else{if(!("XMLHttpRequest"in window))return void f.onerror("",t);h=f.xhr=new window.XMLHttpRequest,h.onreadystatechange=r(f)}var p=n("Error loading file",f);h.onerror=p,"overrideMimeType"in h?f.mimeType&&h.overrideMimeType(f.mimeType):l=!0;
try{t=t.replace(/#.*$/,""),h.open("GET",t,!0)}catch(v){return p(v),h}if(f.responseType)try{h.responseType=f.responseType}catch(v){}f.timeout&&(f.timeoutId=setTimeout(function(){i(h),f.onerror("Timeout",t,h)},f.timeout),h.onabort=function(){clearTimeout(f.timeoutId)});try{f.withCredentials&&"withCredentials"in h&&(h.withCredentials=!0),h.send()}catch(v){p(v)}return h};return{ajax:d,crossdomain:c}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(2),i(3),i(1)],r=function(e,t,i){function n(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function r(e,t,i){Object.defineProperty(e,t,{get:function(){return i}})}function s(s,o,c,d){var h,f=!0;if(d=d||"opaque",e.isMSIE()){var p=document.createElement("div");o.appendChild(p),
p.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+c+'" name="'+c+'" tabindex="0"><param name="movie" value="'+s+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="'+d+'"><param name="bgcolor" value="'+l+'"><param name="menu" value="false"></object>';for(var v=o.getElementsByTagName("object"),g=v.length;g--;)v[g].id===c&&(h=v[g])}else h=document.createElement("object"),h.setAttribute("type","application/x-shockwave-flash"),h.setAttribute("data",s),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("bgcolor",l),h.setAttribute("id",c),h.setAttribute("name",c),n(h,"allowfullscreen","true"),n(h,"allowscriptaccess","always"),n(h,"wmode",d),n(h,"menu","false"),o.appendChild(h,o);h.className="jw-swf jw-reset",h.style.display="block",h.style.position="absolute",h.style.left=0,h.style.right=0,h.style.top=0,h.style.bottom=0,e.isIE()&&"PointerEvent"in window&&(h.style.pointerEvents="none");
var m=-1;return r(h,"on",t.on),r(h,"once",t.once),r(h,"_eventQueue",[]),r(h,"off",function(){var e=Array.prototype.slice.call(arguments);return e.length||(h._eventQueue.length=0,clearTimeout(m)),t.off.apply(h,e)}),r(h,"trigger",function(e,i){var n=h._eventQueue;n.push({type:e,json:i}),m>-1||(m=setTimeout(function(){var e=n.length;for(m=-1;e--;){var i=n.shift();if(i.json){var r=JSON.parse(decodeURIComponent(i.json));t.trigger.call(h,i.type,r)}else t.trigger.call(h,i.type)}}))}),r(h,"_events",{}),r(h,"triggerFlash",function(t){if("setupCommandQueue"===t&&(f=!1),"setup"!==t&&f||!h.__externalCall){for(var n=h.__commandQueue,r=n.length;r--;)n[r][0]===t&&n.splice(r,1);return n.push(Array.prototype.slice.call(arguments)),h}var s=Array.prototype.slice.call(arguments,1),o=e.tryCatch(function(){if(s.length){for(var e=s.length;e--;)"object"===a(s[e])&&i.each(s[e],u);var n=JSON.stringify(s);h.__externalCall(t,n)}else h.__externalCall(t)});return o instanceof e.Error&&(console.error(t,o),"setup"===t)?(o.name="Failed to setup flash",
o):h}),r(h,"__commandQueue",[]),h}function o(e){e&&e.parentNode&&(e.style.display="none",e.parentNode.removeChild(e),e=null)}function u(e,t,i){e instanceof window.HTMLElement&&delete i[t]}var l="#000000";return{embed:s,remove:o}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(19),i(1),i(33),i(31),i(24)],r=function(e,t,i,n,r){var a={};return a.repo=t.memoize(function(){var t=r.split("+")[0],n=e.repo+t+"/";return i.isHTTPS()?n.replace(/^http:/,"https:"):n}),a.versionCheck=function(e){var t=("0"+e).split(/\W/),i=r.split(/\W/),n=parseFloat(t[0]),a=parseFloat(i[0]);return!(n>a||n===a&&parseFloat("0"+t[1])>parseFloat(i[1]))},a.loadFrom=function(){return a.repo()},a}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){"use strict";function n(e,t,i){if(!e)return"";var n=e.bitrate||e.bandwidth;return a(t,n)||e.label||r(e.height,n,i)}function r(e,t,i){if(!e&&!t)return"";var n=o(t)+" kbps",r=n;return e&&(r=e+"p",t&&i&&(r+=" ("+n+")")),r}function a(e,t){var i=null,n=l.keys(e);
if(t&&e&&n.length){var r=parseFloat(t);isNaN(r)||(i=e[s(n,o(r))])}return i}function s(e,t){var i=null,n=1/0,r=void 0;return l.isArray(e)&&l.forEach(e,function(e){r=Math.abs(e-t),n>r&&(i=e,n=r)}),i}function o(e){return Math.floor(e/1e3)}function u(e){return!!l.isArray(e)&&l.some(e,function(e){var t=e.height||e.bitrate||e.bandwidth,i=this[t];return this[t]=1,i},{})}Object.defineProperty(t,"__esModule",{value:!0});var l=i(1);t.generateLabel=n,t.createLabel=r,t.getCustomLabel=a,t.findClosestBandwidth=s,t.toKbps=o,t.hasRedundantLevels=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestAnimationFrame=window.requestAnimationFrame||function(e){return setTimeout(e,17)},t.cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout},function(e,t,i){var n,r;n=[i(104),i(1)],r=function(e,t){var i=function(){var i={},n={},r={},a={},s=(new Date).getTime();return 1>s&&(s=1),{start:function(t){i[t]=s+e.now(),r[t]=r[t]+1||1},end:function(t){if(i[t]){var r=s+e.now(),a=r-i[t];
delete i[t],n[t]=n[t]+a||a}},dump:function(){var o=t.extend({},n);for(var u in i)if(Object.prototype.hasOwnProperty.call(i,u)){var l=s+e.now(),c=l-i[u];o[u]=o[u]+c||c}return{counts:t.extend({},r),sums:o,events:t.extend({},a)}},tick:function(t){a[t]=s+e.now()},between:function(e,t){return a[t]&&a[e]?a[t]-a[e]:null}}};return i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return document.createElement("video")}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,function(e,t,i){var n,r;n=[i(82),i(18),i(1)],r=function(e,t,i){var n=e.selectPlayer,r=function(){var e=n.apply(this,arguments);return e?e:{registerPlugin:function(e,i,n){"jwpsrv"!==e&&t.registerPlugin(e,i,n)}}};return i.extend(e,{selectPlayer:r})}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,,function(e,t,i){var n,r;n=[i(2),i(73),i(14)],r=function(e,t,i){var n="invalid",r="RnXcsftYjWRDA^Uy",a=function(a){function s(a){e.exists(a)||(a="");try{a=t.decrypt(a,r);var s=a.split("/");o=s[0],"pro"===o&&(o="premium");
var c=i(o);if(s.length>2&&c("setup")){u=s[1];var d=parseInt(s[2]);d>0&&(l=new Date,l.setTime(d))}else o=n}catch(h){o=n}}var o,u,l;this.edition=function(){return l&&l.getTime()<(new Date).getTime()?n:o},this.token=function(){return u},this.expiration=function(){return l},s(a)};return a}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){var e=function(e){return window.atob(e)},t=function(e){return unescape(encodeURIComponent(e))},i=function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}},n=function(e){for(var t=new Array(Math.ceil(e.length/4)),i=0;i<t.length;i++)t[i]=e.charCodeAt(4*i)+(e.charCodeAt(4*i+1)<<8)+(e.charCodeAt(4*i+2)<<16)+(e.charCodeAt(4*i+3)<<24);return t},r=function(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(255&e[i],e[i]>>>8&255,e[i]>>>16&255,e[i]>>>24&255);return t.join("")};return{decrypt:function(a,s){if(a=String(a),s=String(s),0==a.length)return"";for(var o,u,l=n(e(a)),c=n(t(s).slice(0,16)),d=l.length,h=l[d-1],f=l[0],p=2654435769,v=Math.floor(6+52/d),g=v*p;0!=g;){
u=g>>>2&3;for(var m=d-1;m>=0;m--)h=l[m>0?m-1:d-1],o=(h>>>5^f<<2)+(f>>>3^h<<4)^(g^f)+(c[3&m^u]^h),f=l[m]-=o;g-=p}var y=r(l);return y=y.replace(/\0+$/,""),i(y)}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(142),i(4),i(162),i(1)],r=function(e,t,i,n,r){var a=function(a,s){var o=new t(a,s),u=o.setup;o.setup=function(){u.call(this),s.on("change:skipButton",this.onSkipButton,this),s.change("castAvailable",this.onCastAvailable,this),s.change("castActive",this.onCastActive,this)};var l=o.addControls;return o.addControls=function(e){l.call(this,e);var t=this.controlsContainer();t&&this._skipButton&&t.appendChild(this._skipButton.element())},o.addSkipButton=function(){this._skipButton=new n(this.instreamModel),this._skipButton.on(i.JWPLAYER_AD_SKIPPED,function(){this.api.skipAd()},this);var e=this.controlsContainer();e&&e.appendChild(this._skipButton.element())},o.onSkipButton=function(e,t){t?this.addSkipButton():this._skipButton&&(this._skipButton.destroy(),this._skipButton=null);
},o.onCastActive=function(t,i){i=i||!1;var n=t.get("airplayActive")||!1;e.toggleClass(this.getContainer(),"jw-flag-casting",i),e.toggleClass(this.getContainer(),"jw-flag-airplay-casting",n)},o.onCastAvailable=function(t,i){var n=t.get("cast");r.isObject(n)&&e.toggleClass(this.getContainer(),"jw-flag-cast-available",i)},o};return a}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(n[a]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},,function(e,t,i){var n,r;n=[i(18),i(1)],r=function(e,t){return function(i,n){var r=["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia","next"];
t.each(r,function(e){i[e]=function(){return n[e].apply(n,arguments),i}}),i.registerPlugin=e.registerPlugin}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){return function(t,i){var n=["buffer","controls","position","duration","fullscreen","volume","item","stretching","playlist","captions","viewable"];e.each(n,function(e){var n=e.slice(0,1).toUpperCase()+e.slice(1);t["get"+n]=function(){return i._model.get(e)}});var r=["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia"],a=["setControls","setFullscreen","setVolume","setMute","setCues","setCaptions"];e.each(r,function(e){t[e]=function(){return i[e]?i[e].apply(i,arguments):null}}),e.each(a,function(e){t[e]=function(){return i[e].apply(i,arguments),
t}}),t.getPlaylistIndex=t.getItem}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(4),i(5),i(3),i(2),i(62),i(1),i(150),i(77),i(78),i(80),i(24)],r=function(e,t,i,n,r,a,s,o,u,l,c){var d=function(d,h){var f,p=this;a.extend(this,i),this.utils=n,this._=a,this.Events=i,this.version=c,this.trigger=function(e,t){t=a.isObject(t)?a.extend({},t):{},t.type=e;var n=window.jwplayer;return n&&n.debug?i.trigger.call(p,e,t):i.triggerSafe.call(p,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this);var v=function(){f=new s(d),o(p,f),u(p,f),f.on(e.JWPLAYER_MEDIA_META,function(e){var t=f._model.get("itemMeta");a.extend(t,e.metadata)}),f.on(e.JWPLAYER_READY,function(e){g.tick("ready"),e.setupTime=g.between("setup","ready")}),f.on("all",p.trigger)};v(),l(this),this.id=d.id;var g=this._qoe=new r;g.tick("init");var m=function(){p.off(),f&&f.off(),f&&f.playerDestroy&&f.playerDestroy()};return this.getPlugin=function(e){return p.plugins&&p.plugins[e]},this.addPlugin=function(e,t){
this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return g.tick("setup"),m(),v(),n.foreach(e.events,function(e,t){var i=p[e];"function"==typeof i&&i.call(p,t)}),e.id=p.id,f.setup(e,this),p},this.qoe=function(){var e=f.getItemQoe(),t=g.between("setup","ready"),i=e.getFirstFrame();return{setupTime:t,firstFrame:i,player:g.dump(),item:e.dump()}},this.getContainer=function(){return f.getContainer?f.getContainer():d},this.getMeta=this.getItemMeta=function(){return f._model.get("itemMeta")||{}},this.getPlaylistItem=function(e){if(!n.exists(e))return f._model.get("playlistItem");var t=p.getPlaylist();return t?t[e]:null},this.getRenderingMode=function(){return"html5"},this.getMute=function(){return f._model.getMute()},this.load=function(e,t){return f.load(e,t),p},this.play=function(e,i){if(a.isObject(e)&&e.reason&&(i=e),i||(i={reason:"external"}),e===!0)return f.play(i),p;if(e===!1)return f.pause(i),p;switch(e=p.getState()){
case t.PLAYING:case t.BUFFERING:f.pause(i);break;default:f.play(i)}return p},this.pause=function(e,t){return a.isBoolean(e)?this.play(!e,t):this.play(t)},this.createInstream=function(){return f.createInstream()},this.castToggle=function(){f&&f.castToggle&&f.castToggle()},this.playAd=this.pauseAd=n.noop,this.remove=function(){return h(p),p.trigger("remove"),m(),p},this};return d}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(4)],r=function(e,t){return function(i){var n={onBufferChange:t.JWPLAYER_MEDIA_BUFFER,onBufferFull:t.JWPLAYER_MEDIA_BUFFER_FULL,onError:t.JWPLAYER_ERROR,onSetupError:t.JWPLAYER_SETUP_ERROR,onFullscreen:t.JWPLAYER_FULLSCREEN,onMeta:t.JWPLAYER_MEDIA_META,onMute:t.JWPLAYER_MEDIA_MUTE,onPlaylist:t.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:t.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:t.JWPLAYER_PLAYLIST_COMPLETE,onReady:t.JWPLAYER_READY,onResize:t.JWPLAYER_RESIZE,onComplete:t.JWPLAYER_MEDIA_COMPLETE,onSeek:t.JWPLAYER_MEDIA_SEEK,onTime:t.JWPLAYER_MEDIA_TIME,
onVolume:t.JWPLAYER_MEDIA_VOLUME,onBeforePlay:t.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:t.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:t.JWPLAYER_DISPLAY_CLICK,onControls:t.JWPLAYER_CONTROLS,onQualityLevels:t.JWPLAYER_MEDIA_LEVELS,onQualityChange:t.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:t.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:t.JWPLAYER_CAPTIONS_CHANGED,onAdError:t.JWPLAYER_AD_ERROR,onAdClick:t.JWPLAYER_AD_CLICK,onAdImpression:t.JWPLAYER_AD_IMPRESSION,onAdTime:t.JWPLAYER_AD_TIME,onAdComplete:t.JWPLAYER_AD_COMPLETE,onAdCompanions:t.JWPLAYER_AD_COMPANIONS,onAdSkipped:t.JWPLAYER_AD_SKIPPED,onAdPlay:t.JWPLAYER_AD_PLAY,onAdPause:t.JWPLAYER_AD_PAUSE,onAdMeta:t.JWPLAYER_AD_META,onCast:t.JWPLAYER_CAST_SESSION,onAudioTrackChange:t.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:t.JWPLAYER_AUDIO_TRACKS},r={onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle"};e.each(r,function(t,n){i[n]=e.partial(i.on,t,e)}),e.each(n,function(t,n){i[n]=e.partial(i.on,t,e)})}}.apply(t,n),!(void 0!==r&&(e.exports=r));
},function(e,t,i){var n,r;n=[i(2),i(1)],r=function(e,t){function n(i){t.each(i,function(t,n){i[n]=e.serialize(t)})}function r(e){return e.slice&&"px"===e.slice(-2)&&(e=e.slice(0,-2)),e}function a(t,i){if(-1===i.toString().indexOf("%"))return 0;if("string"!=typeof t||!e.exists(t))return 0;if(/^\d*\.?\d+%$/.test(t))return t;var n=t.indexOf(":");if(-1===n)return 0;var r=parseFloat(t.substr(0,n)),a=parseFloat(t.substr(n+1));return 0>=r||0>=a?0:a/r*100+"%"}var s={autostart:!1,controls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"seven",stretching:"uniform",mute:!1,volume:90,width:480,height:270,audioMode:!1,localization:{player:"Video Player",play:"Play",playback:"Start playback",pause:"Pause",volume:"Volume",prev:"Previous",next:"Next",cast:"Chromecast",airplay:"Airplay",fullscreen:"Fullscreen",playlist:"Playlist",hd:"Quality",cc:"Closed captions",audioTracks:"Audio tracks",replay:"Replay",buffer:"Loading",more:"More",liveBroadcast:"Live broadcast",
loadingAd:"Loading ad",rewind:"Rewind 10s",nextUp:"Next Up",nextUpClose:"Next Up Close",related:"Discover",close:"Close"},renderCaptionsNatively:!0,nextUpDisplay:!0},o=function(o,u){var l=u&&u.getAllItems(),c=t.extend({},(window.jwplayer||{}).defaults,l,o);n(c),c.localization=t.extend({},s.localization,c.localization);var d=t.extend({},s,c);"."===d.base&&(d.base=e.getScriptPath("jwplayer.js")),d.base=(d.base||e.loadFrom()).replace(/\/?$/,"/"),i.p=d.base,d.width=r(d.width),d.height=r(d.height);var h=e.getScriptPath("jwplayer.js")||d.base;d.flashplayer=d.flashplayer||h+"jwplayer.flash.swf",d.flashloader=d.flashloader||h+"jwplayer.loader.swf","http:"===window.location.protocol&&(d.flashplayer=d.flashplayer.replace("https","http"),d.flashloader=d.flashloader.replace("https","http")),d.aspectratio=a(d.aspectratio,d.width),t.isObject(d.skin)&&(d.skinUrl=d.skin.url,d.skinColorInactive=d.skin.inactive,d.skinColorActive=d.skin.active,d.skinColorBackground=d.skin.background,d.skin=t.isString(d.skin.name)?d.skin.name:s.skin),
t.isString(d.skin)&&d.skin.indexOf(".xml")>0&&(console.warn("JW Player does not support XML skins, please update your config"),d.skin=d.skin.replace(".xml","")),d.aspectratio||delete d.aspectratio;var f=d.playlist;if(f)t.isArray(f.playlist)&&(d.feedData=f,d.playlist=f.playlist);else{var p=t.pick(d,["title","description","type","mediaid","image","file","sources","tracks","preload"]);d.playlist=[p]}return d.qualityLabels=d.qualityLabels||d.hlslabels,d};return o}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(79),i(1),i(38),i(37),i(18)],r=function(e,t,i,n,r){var a=[],s=0,o=function(t){var i,n;return t?"string"==typeof t?(i=u(t),i||(n=document.getElementById(t))):"number"==typeof t?i=a[t]:t.nodeType&&(n=t,i=u(n.id)):i=a[0],i?i:n?l(new e(n,c)):{registerPlugin:r.registerPlugin}},u=function(e){for(var t=0;t<a.length;t++)if(a[t].id===e)return a[t];return null},l=function(e){return s++,e.uniqueId=s,a.push(e),e},c=function(e){for(var t=a.length;t--;)if(a[t].uniqueId===e.uniqueId){
a.splice(t,1);break}},d={selectPlayer:o,registerProvider:i.registerProvider,availableProviders:n,registerPlugin:r.registerPlugin};return o.api=d,d}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(151),i(3),i(1),i(4)],r=function(e,t,i,n){var r=function(t,r,a,s){function o(){h("Setup Timeout Error","Setup took longer than "+g+" seconds to complete.")}function u(){for(var e in v)if(Object.prototype.hasOwnProperty.call(v,e)){var i=v[e];!i.complete&&!i.running&&t&&c(i.depends)&&(i.running=!0,l(i))}}function l(e){var i=function(t){t=t||{},d(e,t)};e.method(i,r,t,a,s)}function c(e){return i.all(e,function(e){return v[e].complete})}function d(e,t){"error"===t.type?h(t.msg,t.reason):"complete"===t.type?(clearTimeout(f),p.trigger(n.JWPLAYER_READY)):(e.complete=!0,u())}function h(e,t){clearTimeout(f),p.trigger(n.JWPLAYER_SETUP_ERROR,{message:e+": "+t}),p.destroy()}var f,p=this,v=e.getQueue(),g=30;this.start=function(){f=setTimeout(o,1e3*g),u()},this.destroy=function(){clearTimeout(f),
this.off(),v.length=0,t=null,r=null,a=null}};return r.prototype=t,r}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(16),i(15)],r=function(e,t,i){var n=function(n,r){function a(e){if(e.tracks.length){for(var t=e.tracks||[],i=0;i<t.length;i++){var n=t[i];m[n._id]||h(n)}var r=f();p(),this.setCaptionsList(r)}}function s(){g=[],m={},y=0}function o(e){s(r,e);var i=e.tracks,n=i&&i.length;if(!r.get("renderCaptionsNatively")&&n){var a,o;for(a=0;n>a;a++)o=i[a],u(o.kind)&&!m[o._id]&&(h(o),t.loadFile(o,l.bind(null,o),c))}var d=f();p(),this.setCaptionsList(d)}function u(e){return"subtitles"===e||"captions"===e}function l(e,t){e.data=t}function c(t){e.log("CAPTIONS("+t+")")}function d(e,t){var i=null;0!==t&&(i=g[t-1]),e.set("captionsTrack",i)}function h(e){if(e.data=e.data||[],e.name=e.label||e.name||e.language,e._id=i.createId(e,g.length),!e.name){var t=i.createLabel(e,y);e.name=t.label,y=t.unknownCount}g.push(e),m[e._id]=e}function f(){for(var e=[{id:"off",label:"Off"}],t=0;t<g.length;t++)e.push({
id:g[t]._id,label:g[t].name||"Unknown CC"});return e}function p(){var e=0,t=r.get("captionLabel");if("Off"===t)return void r.set("captionsIndex",0);for(var i=0;i<g.length;i++){var n=g[i];if(t&&t===n.name){e=i+1;break}n["default"]||n.defaulttrack||"default"===n._id?e=i+1:n.autoselect}v(e)}function v(e){g.length?r.setVideoSubtitleTrack(e,g):r.set("captionsIndex",e)}r.on("change:playlistItem",s,this),r.on("change:captionsIndex",d,this),r.on("itemReady",o,this),r.mediaController.on("subtitlesTracks",a,this);var g=[],m={},y=0;this.getCurrentIndex=function(){return r.get("captionsIndex")},this.getCaptionsList=function(){return r.get("captionsList")},this.setCaptionsList=function(e){r.set("captionsList",e)}};return n}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=[i(81),i(87),i(1),i(83),i(84),i(26),i(92),i(46),i(45),i(2),i(74),i(3),i(27),i(5),i(4),i(131),i(86),i(43)],
r=function(e,t,i,n,r,s,o,u,l,c,d,h,f,p,v,g,m,y){function b(e){return function(){var t=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+e].apply(this,t):this.eventsQueue.push([e,t])}}function T(e){return e===p.LOADING||e===p.STALLED?p.BUFFERING:e}var E=function(e){this.originalContainer=this.currentContainer=e,this.eventsQueue=[],i.extend(this,h),this._model=new s};return E.prototype={play:b("play"),pause:b("pause"),seek:b("seek"),stop:b("stop"),load:b("load"),playlistNext:b("next"),playlistPrev:b("prev"),playlistItem:b("item"),setCurrentCaptions:b("setCurrentCaptions"),setCurrentQuality:b("setCurrentQuality"),setFullscreen:b("setFullscreen"),setup:function(s,g){function b(e,t){ve.triggerAfterReady(e,t)}function E(e,t){t?y.load().then(function(e){if(oe.isSetup){var t=new e(document,oe.element());oe.addControls(t),t.on("all",b,ve)}})["catch"](function(e){ve.triggerError({message:"Controls failed to load",reason:e})}):oe.removeControls()}function k(e,t){ve.trigger(v.JWPLAYER_CONTROLS,{
controls:t})}function w(){le=null,oe.on("all",b,ve);var e=g.getPlugin("related");e&&e.on("nextUp",he.setNextUp,he),oe.once(v.JWPLAYER_RESIZE,_),oe.init()}function _(){he.change("visibility",A),he.on("change:controls",k),ve.trigger(v.JWPLAYER_READY,{setupTime:0}),ve.triggerAfterReady=ve.trigger;for(var e=0;e<be.length;e++){var t=be[e];fe=t.type===v.JWPLAYER_MEDIA_BEFOREPLAY,ve.trigger(t.type,t.args),fe=!1}S(),he.on("change:viewable",L)}function A(e,t){i.isUndefined(t)||he.set("viewable",Math.round(t))}function S(){var e=he.get("autostart");c.isMobile()||e!==!0?L(he,he.get("viewable")):M()}function L(e,t){he.get("playOnViewable")&&(t?M():c.isMobile()&&ve.pause({reason:"autostart"}))}function C(e){var t=he.getProviders(),i=t.required(e,he.get("primary"));return t.load(i).then(function(){ve.getProvider()||(he.setProvider(he.get("playlistItem")),R())})}function R(){for(;ve.eventsQueue.length>0;){var e=ve.eventsQueue.shift(),t=e[0],i=e[1]||[];ve["_"+t].apply(ve,i)}}function x(e,t){switch(he.get("state")===p.ERROR&&he.set("state",p.IDLE),
he.set("preInstreamState","instream-idle"),ve.trigger("destroyPlugin",{}),N(!0),he.once("itemReady",S),"undefined"==typeof e?"undefined":a(e)){case"string":I(e);break;case"object":var i=G(e,t);i&&V(0);break;case"number":V(e)}}function I(e){var t=new l;t.on(v.JWPLAYER_PLAYLIST_LOADED,function(e){x(e.playlist,e)}),t.on(v.JWPLAYER_ERROR,function(e){e.message="Error loading playlist: "+e.message,this.triggerError(e)},this),t.load(e)}function P(){return ve._instreamAdapter&&ve._instreamAdapter.getState()}function O(){var e=P();return i.isString(e)?e:he.get("state")}function D(e){if(e&&he.set("playReason",e.reason),he.get("state")!==p.ERROR){var t=P();if(i.isString(t))return void g.pauseAd(!1);if(he.get("state")===p.COMPLETE&&(N(!0),V(0)),!fe&&(fe=!0,ve.triggerAfterReady(v.JWPLAYER_MEDIA_BEFOREPLAY,{playReason:he.get("playReason")}),fe=!1,de))return de=!1,void(ce=null);var n;if(F()){if(0===he.get("playlist").length)return;n=c.tryCatch(function(){he.loadVideo()})}else he.get("state")===p.PAUSED&&(n=c.tryCatch(function(){
he.playVideo()}));n instanceof c.Error&&(ve.triggerError(n),ce=null)}}function M(){var e=he.get("state");e!==p.IDLE&&e!==p.PAUSED||D({reason:"autostart"})}function N(e){he.off("itemReady",S);var t=!e;ce=null;var i=c.tryCatch(function(){he.stopVideo()},ve);return i instanceof c.Error?(ve.triggerError(i),!1):(t&&(pe=!0),fe&&(de=!0),!0)}function j(e){ce=null,e&&(he.set("pauseReason",e.reason),"interaction"!==e.reason&&"external"!==e.reason||he.set("playOnViewable",!1));var t=P();if(i.isString(t))return void g.pauseAd(!0);switch(he.get("state")){case p.ERROR:return;case p.PLAYING:case p.BUFFERING:var n=c.tryCatch(function(){ge().pause()},this);if(n instanceof c.Error)return void ve.triggerError(n);break;default:fe&&(de=!0)}}function F(){var e=he.get("state");return e===p.IDLE||e===p.COMPLETE||e===p.ERROR}function B(e,t){he.get("state")!==p.ERROR&&(he.get("scrubbing")||he.get("state")===p.PLAYING||D(t),ge().seek(e))}function U(e,t){N(!0),he.get("state")===p.ERROR&&he.set("state",p.IDLE),V(e),
D(t)}function G(e,t){he.set("feedData",t);var n=u(e);return n=u.filterPlaylist(n,he,t),he.set("playlist",n),i.isArray(n)&&0!==n.length?(C(n),!0):(ve.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function V(e){he.setItemIndex(e)}function W(e){U(he.get("item")-1,e||{reason:"external"})}function Y(e){U(he.get("item")+1,e||{reason:"external"})}function H(){if(F()){if(pe)return void(pe=!1);ce=H;var e=he.get("item");return e===he.get("playlist").length-1?void(he.get("repeat")?Y({reason:"repeat"}):(he.set("playOnViewable",!1),he.set("state",p.COMPLETE),ve.trigger(v.JWPLAYER_PLAYLIST_COMPLETE,{}))):void Y({reason:"playlist"})}}function J(e){ge()&&(e=parseInt(e,10)||0,ge().setCurrentQuality(e))}function K(){return ge()?ge().getCurrentQuality():-1}function q(){return this._model?this._model.getConfiguration():void 0}function z(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");var e=X();if(e){var t=K(),n=e[t];if(n)return{level:i.extend({
index:t},n),mode:"",reason:""}}return null}function X(){return ge()?ge().getQualityLevels():null}function Q(e){ge()&&(e=parseInt(e,10)||0,ge().setCurrentAudioTrack(e))}function $(){return ge()?ge().getCurrentAudioTrack():-1}function Z(){return ge()?ge().getAudioTracks():null}function ee(e){e=parseInt(e,10)||0,he.persistVideoSubtitleTrack(e),ve.trigger(v.JWPLAYER_CAPTIONS_CHANGED,{tracks:ie(),track:e})}function te(){return ue.getCurrentIndex()}function ie(){return ue.getCaptionsList()}function ne(){return he.detachMedia()}function re(){var e=c.tryCatch(function(){he.attachMedia()});return e instanceof c.Error?void c.log("Error calling _attachMedia",e):void("function"==typeof ce&&ce())}function ae(e){i.isBoolean(e)||(e=!he.get("fullscreen")),he.set("fullscreen",e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)}function se(){var e=g.getPlugin("related");e&&e.next()}var oe,ue,le,ce,de,he=this._model,fe=!1,pe=!1,ve=this,ge=function(){
return he.getVideo()},me=new o;me.track(he);var ye=new e(s,me),be=[];he.setup(ye,me),oe=this._view=new d(g,he),le=new n(g,he,oe,G),le.on(v.JWPLAYER_READY,w,this),le.on(v.JWPLAYER_SETUP_ERROR,this.setupError,this),he.mediaController.on("all",b,this),he.mediaController.on(v.JWPLAYER_MEDIA_COMPLETE,function(){i.defer(H)}),he.mediaController.on(v.JWPLAYER_MEDIA_ERROR,this.triggerError,this),he.on("change:flashBlocked",function(e,t){if(!t)return void this._model.set("errorEvent",void 0);var i=!!e.get("flashThrottle"),n={message:i?"Click to run Flash":"Flash plugin failed to load"};i||this.trigger(v.JWPLAYER_ERROR,n),this._model.set("errorEvent",n)},this),he.on("change:state",f,this),he.on("change:duration",function(e,t){var i=e.get("minDvrWindow"),n=c.streamType(t,i);e.set("streamType",n)}),he.on("change:castState",function(e,t){ve.trigger(v.JWPLAYER_CAST_SESSION,t)}),he.on("change:fullscreen",function(e,t){ve.trigger(v.JWPLAYER_FULLSCREEN,{fullscreen:t}),t&&e.set("playOnViewable",!1)}),he.on("itemReady",function(){
ve.triggerAfterReady(v.JWPLAYER_PLAYLIST_ITEM,{index:he.get("item"),item:he.get("playlistItem")})}),he.on("change:playlist",function(e,t){if(t.length){var n={playlist:t},r=he.get("feedData");if(r){var a=i.extend({},r);delete a.playlist,n.feedData=a}ve.triggerAfterReady(v.JWPLAYER_PLAYLIST_LOADED,n)}}),he.on("change:volume",function(e,t){ve.trigger(v.JWPLAYER_MEDIA_VOLUME,{volume:t})}),he.on("change:mute",function(e,t){ve.trigger(v.JWPLAYER_MEDIA_MUTE,{mute:t})}),he.on("change:scrubbing",function(e,t){t?j():D({reason:"interaction"})}),he.on("change:captionsList",function(e,t){ve.triggerAfterReady(v.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:he.get("captionsIndex")||0})}),he.on("change:mediaModel",function(e){e.mediaModel.on("change:state",function(t,i){e.set("state",T(i))})}),ue=new r(g,he),he.on("change:viewSetup",function(e,t){if(t){var i=this.currentContainer.querySelector("video, audio");if(ve.showView(oe.element()),i){var n=he.get("mediaContainer");n.appendChild(i)}}},this),he.on("change:inDom",function(e,t){
t&&(e.off("change:controls",E),e.change("controls",E))}),this.triggerAfterReady=function(e,t){be.push({type:e,args:t})},this._play=D,this._pause=j,this._seek=B,this._stop=N,this._load=x,this._next=Y,this._prev=W,this._item=U,this._setCurrentCaptions=ee,this._setCurrentQuality=J,this._setFullscreen=ae,this.detachMedia=ne,this.attachMedia=re,this.getCurrentQuality=K,this.getQualityLevels=X,this.setCurrentAudioTrack=Q,this.getCurrentAudioTrack=$,this.getAudioTracks=Z,this.getCurrentCaptions=te,this.getCaptionsList=ie,this.getVisualQuality=z,this.getConfig=q,this.getState=O,this.setVolume=he.setVolume.bind(he),this.setMute=he.setMute.bind(he),this.getProvider=function(){return he.get("provider")},this.getWidth=function(){return he.get("containerWidth")},this.getHeight=function(){return he.get("containerHeight")},this.getContainer=function(){return this.currentContainer},this.resize=oe.resize,this.getSafeRegion=oe.getSafeRegion,this.setCues=oe.addCues,this.setCaptions=oe.setCaptions,this.next=se,
this.addButton=function(e,t,n,r,a){var s={img:e,tooltip:t,callback:n,id:r,btnClass:a},o=!1,u=i.map(he.get("dock"),function(e){var t=e!==s&&e.id===s.id;return t?(o=!0,s):e});o||u.push(s),he.set("dock",u)},this.removeButton=function(e){var t=he.get("dock")||[];t=i.reject(t,i.matches({id:e})),he.set("dock",t)},this.checkBeforePlay=function(){return fe},this.getItemQoe=function(){return he._qoeItem},this.setControls=function(e){i.isBoolean(e)||(e=!he.get("controls")),he.set("controls",e);var t=he.getVideo();t&&t.setControls(e)},this.playerDestroy=function(){this.stop(),this.showView(this.originalContainer),oe&&oe.destroy(),he&&he.destroy(),le&&(le.destroy(),le=null)},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return he.checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new t(this,he,oe),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){
ve._instreamAdapter&&ve._instreamAdapter.destroy()},this.trigger=function(e,t){var i=m(he,e,t);return h.trigger.call(this,e,i)},le.start()},showView:function(e){if(!document.body.contains(this.currentContainer)){var t=document.getElementById(this._model.get("id"));t&&(this.currentContainer=t)}this.currentContainer.parentElement&&this.currentContainer.parentElement.replaceChild(e,this.currentContainer),this.currentContainer=e},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",p.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(v.JWPLAYER_ERROR,e)},setupError:function(e){var t=e.message,n=c.createElement(g(this._model.get("id"),this._model.get("skin"),t)),r=this._model.get("width"),a=this._model.get("height");c.style(n,{width:r.toString().indexOf("%")>0?r:r+"px",height:a.toString().indexOf("%")>0?a:a+"px"}),this.showView(n);var s=this;i.defer(function(){s.trigger(v.JWPLAYER_SETUP_ERROR,{message:t})})}},
E}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(4)],r=function(e,t){return function(i,n,r){var a=r;switch(n){case t.JWPLAYER_MEDIA_TIME:case"beforePlay":case"pause":case"play":case"ready":var s=i.get("viewable");e.isUndefined(s)||(a=e.extend({},r,{viewable:s}))}return a}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(89),i(88),i(4),i(5),i(2),i(3),i(1)],r=function(e,t,i,n,r,a,s){function o(i){var n="",r=i.get("provider");return r&&(n=r.name),n.indexOf("flash")>=0?t:e}var u={skipoffset:null,tag:null},l=function(e,a,l){function c(){T._adModel.set("state","buffering"),a.set("skipButton",!1),E++;var e,t=p[E];v&&(e=v[E]),w.loadItem(t,e)}function d(e,t){"complete"!==e&&(t=t||{},k.tag&&!t.tag&&(t.tag=k.tag),this.trigger(e,t),"mediaError"!==e&&"error"!==e||p&&E+1<p.length&&c())}function h(e){T._adModel.set("duration",e.duration),T._adModel.set("position",e.position)}function f(e){var t={};k.tag&&(t.tag=k.tag),this.trigger(i.JWPLAYER_MEDIA_COMPLETE,t),
S.call(this,e)}var p,v,g,m,y,b=o(a),T=new b(e,a),E=0,k={},w=this,_=s.bind(function(e){e=e||{},e.hasControls=!!a.get("controls"),this.trigger(i.JWPLAYER_INSTREAM_CLICK,e),T&&T._adModel&&(T._adModel.get("state")===n.PAUSED?e.hasControls&&T.instreamPlay():T.instreamPause())},this),A=s.bind(function(){T&&T._adModel&&T._adModel.get("state")===n.PAUSED&&a.get("controls")&&(e.setFullscreen(),e.play())},this);this.type="instream",this.init=function(){g=a.getVideo(),m=a.get("position"),y=a.get("playlist")[a.get("item")],T.on("all",d,this),T.on(i.JWPLAYER_MEDIA_TIME,h,this),T.on(i.JWPLAYER_MEDIA_COMPLETE,f,this),T.init(),e.detachMedia(),a.mediaModel.set("state",n.BUFFERING),e.checkBeforePlay()||0===m&&!a.checkComplete()?(m=0,a.set("preInstreamState","instream-preroll")):g&&a.checkComplete()||a.get("state")===n.COMPLETE?a.set("preInstreamState","instream-postroll"):a.set("preInstreamState","instream-midroll");var t=a.get("state");return t!==n.PLAYING&&t!==n.BUFFERING||g.pause(),l.setupInstream(T._adModel),
T._adModel.set("state",n.BUFFERING),l.clickHandler()&&l.clickHandler().setAlternateClickHandlers(r.noop,null),this.setText(a.get("localization").loadingAd),this};var S=function(e){p&&E+1<p.length?c():(this.trigger("adBreakEnd",{}),e.type===i.JWPLAYER_MEDIA_COMPLETE&&this.trigger(i.JWPLAYER_PLAYLIST_COMPLETE,{}),this.destroy())};this.loadItem=function(e,n){if(r.isAndroid(2.3))return void this.trigger({type:i.JWPLAYER_ERROR,message:"Error loading instream: Cannot play instream on Android 2.3"});var o=e;s.isArray(e)?(p=e,v=n,e=p[E],v&&(n=v[E])):o=[e];var l=a.getProviders(),c=b===t?"flash":void 0,d=l.required(o,c);a.set("hideAdsControls",!1),l.load(d).then(function(){if(null!==T){w.trigger(i.JWPLAYER_PLAYLIST_ITEM,{index:E,item:e}),k=s.extend({},u,n),T.load(e),w.addClickHandler();var t=e.skipoffset||k.skipoffset;t&&w.setupSkipButton(t,k)}})},this.setupSkipButton=function(e,t,i){a.set("skipButton",!1),i&&(S=i),T._adModel.set("skipMessage",t.skipMessage),T._adModel.set("skipText",t.skipText),
T._adModel.set("skipOffset",e),a.set("skipButton",!0)},this.applyProviderListeners=function(e){T.applyProviderListeners(e),this.addClickHandler()},this.play=function(){T.instreamPlay()},this.pause=function(){T.instreamPause()},this.addClickHandler=function(){l.clickHandler()&&l.clickHandler().setAlternateClickHandlers(_,A),T.on(i.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=i.JWPLAYER_AD_SKIPPED;this.trigger(t,e),S.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&l.resizeMedia()},this.destroy=function(){if(this.off(),a.set("skipButton",!1),T){l.clickHandler()&&l.clickHandler().revertAlternateClickHandlers(),a.off(null,null,T),T.off(null,null,w),T.instreamDestroy(),l.destroyInstream(),T=null,e.attachMedia();var t=a.get("preInstreamState");switch(t){case"instream-preroll":case"instream-midroll":var i=s.extend({},y);i.starttime=m,a.loadVideo(i),r.isMobile()&&a.mediaModel.get("state")===n.BUFFERING&&g.setState(n.BUFFERING),g.play();break;case"instream-postroll":
case"instream-idle":g.stop()}}},this.getState=function(){return!(!T||!T._adModel)&&T._adModel.get("state")},this.setText=function(e){l.setAltText(e?e:"")},this.hide=function(){a.set("hideAdsControls",!0)}};return s.extend(l.prototype,a),l}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(3),i(26),i(27),i(4),i(5),i(2),i(1)],r=function(e,t,i,n,r,a,s){var o=function(e,n){this.model=n,this._adModel=(new t).setup({id:n.get("id"),volume:n.get("volume"),fullscreen:n.get("fullscreen"),mute:n.get("mute")}),this._adModel.on("change:state",i,this);var r=e.getContainer();this.swf=r.querySelector("object")};return o.prototype=s.extend({init:function(){if(a.isChrome()){var e=-1,t=!1;this.swf.on("throttle",function(i){if(clearTimeout(e),"resume"===i.state)t&&(t=!1,this.instreamPlay());else{var n=this;e=setTimeout(function(){n._adModel.get("state")===r.PLAYING&&(t=!0,n.instreamPause())},250)}},this)}this.swf.on("instream:state",this.stateHandler,this).on("instream:time",function(e){
this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(n.JWPLAYER_MEDIA_TIME,e)},this).on("instream:complete",function(e){this.trigger(n.JWPLAYER_MEDIA_COMPLETE,e)},this).on("instream:error",function(e){this.trigger(n.JWPLAYER_MEDIA_ERROR,e)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(e){e&&(this.model.on("change:volume",function(t,i){e.volume(i)},this),this.model.on("change:mute",function(t,i){e.mute(i)},this),e.volume(this.model.get("volume")),e.mute(this.model.get("mute")),e.off(),e.on(n.JWPLAYER_PLAYER_STATE,this.stateHandler,this),e.on(n.JWPLAYER_MEDIA_TIME,function(e){this.trigger(n.JWPLAYER_MEDIA_TIME,e)},this))}},stateHandler:function(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:this._adModel.set("state",e.newstate)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null);
},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),o}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(3),i(27),i(4),i(5),i(26)],r=function(e,t,i,n,r,a){var s=function(s,o){function u(t){var r=t||h.getVideo();if(f!==r){if(f=r,!r)return;var a="vpaid"===r.type;r.off(),r.on("all",function(t,i){a&&t===n.JWPLAYER_MEDIA_COMPLETE||this.trigger(t,e.extend({},i,{type:t}))},p),r.on(n.JWPLAYER_MEDIA_BUFFER_FULL,d),r.on(n.JWPLAYER_PLAYER_STATE,l),r.attachMedia(),r.volume(o.get("volume")),r.mute(o.get("mute")||o.get("autostartMuted")),h.on("change:state",i,p)}}function l(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:h.set("state",e.newstate)}}function c(e){o.trigger(e.type,e),p.trigger(n.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function d(){h.getVideo().play()}var h,f,p=e.extend(this,t);return s.on(n.JWPLAYER_FULLSCREEN,function(e){
this.trigger(n.JWPLAYER_FULLSCREEN,e)},p),this.init=function(){h=(new a).setup({id:o.get("id"),volume:o.get("volume"),fullscreen:o.get("fullscreen"),mute:o.get("mute")||o.get("autostartMuted"),instreamMode:!0}),h.on("fullscreenchange",c),this._adModel=h},p.load=function(e){h.set("item",0),h.set("playlistItem",e),h.setActiveItem(e),u(),h.off(n.JWPLAYER_ERROR),h.on(n.JWPLAYER_ERROR,function(e){this.trigger(n.JWPLAYER_ERROR,e)},p),h.loadVideo(e)},p.applyProviderListeners=function(e){u(e),e&&(e.off(n.JWPLAYER_ERROR),e.on(n.JWPLAYER_ERROR,function(e){this.trigger(n.JWPLAYER_ERROR,e)},p),o.on("change:volume",function(e,t){f.volume(t)},p),o.on("change:mute",function(e,t){f.mute(t)},p),o.on("change:autostartMuted",function(e,t){t||f.mute(o.get("mute"))},p))},this.instreamDestroy=function(){h&&(h.off(),this.off(),f&&(f.detachMedia(),f.off(),h.getVideo()&&f.destroy()),h=null,s.off(null,null,this),s=null)},p.instreamPlay=function(){h.getVideo()&&h.getVideo().play(!0)},p.instreamPause=function(){h.getVideo()&&h.getVideo().pause(!0);
},p};return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(62),i(1)],r=function(e,t){function i(e){e.mediaController.off(s,e._onPlayAttempt),e.mediaController.off(o,e._triggerFirstFrame),e.mediaController.off(l,e._onTime),e.off("change:activeTab",e._onTabVisible)}function n(e){e._onTabVisible&&i(e),e._triggerFirstFrame=t.once(function(){var t=e._qoeItem;t.tick(u);var n=t.getFirstFrame();e.mediaController.trigger(u,{loadTime:n}),i(e)}),e._onTime=h(e._triggerFirstFrame),e._onPlayAttempt=function(){e._qoeItem.tick(s)},e._onTabVisible=function(t,i){i?e._qoeItem.tick(d):e._qoeItem.tick(c)},e.on("change:activeTab",e._onTabVisible),e.mediaController.on(s,e._onPlayAttempt),e.mediaController.once(o,e._triggerFirstFrame),e.mediaController.on(l,e._onTime)}function r(t){function i(t,i,r){t._qoeItem&&r&&t._qoeItem.end(r.get("state")),t._qoeItem=new e,t._qoeItem.getFirstFrame=function(){var e=this.between(s,u),t=this.between(d,u);return t>0&&e>t?t:e},t._qoeItem.tick(a),t._qoeItem.start(i.get("state")),
n(t),i.on("change:state",function(e,i,n){t._qoeItem.end(n),t._qoeItem.start(i)})}t.on("change:mediaModel",i)}var a="playlistItem",s="playAttempt",o="providerFirstFrame",u="firstFrame",l="time",c="tabHidden",d="tabVisible",h=function(e){var t=0;return function(i){var n=i.position;n>t&&e(),t=n}};return{model:r}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(18),i(45),i(13),i(58),i(19),i(1),i(2),i(4),i(43)],r=function(e,t,n,r,a,s,o,u,l){function c(){var e={LOAD_PROMISE_POLYFILL:{method:h,depends:[]},LOAD_BASE64_POLYFILL:{method:f,depends:[]},LOAD_PLUGINS:{method:v,depends:["LOAD_PROMISE_POLYFILL"]},LOAD_XO_POLYFILL:{method:p,depends:[]},LOAD_SKIN:{method:_,depends:[]},LOAD_PLAYLIST:{method:y,depends:[]},LOAD_CONTROLS:{method:C,depends:["LOAD_PROMISE_POLYFILL"]},SETUP_VIEW:{method:A,depends:["LOAD_SKIN","LOAD_XO_POLYFILL","LOAD_PROMISE_POLYFILL"]},INIT_PLUGINS:{method:g,depends:["LOAD_PLUGINS","SETUP_VIEW"]},CHECK_FLASH:{method:b,depends:["SETUP_VIEW"]},FILTER_PLAYLIST:{
method:T,depends:["LOAD_PLAYLIST","CHECK_FLASH"]},SET_ITEM:{method:S,depends:["INIT_PLUGINS","FILTER_PLAYLIST"]},DEFERRED:{method:d,depends:[]},SEND_READY:{method:L,depends:["LOAD_CONTROLS","SET_ITEM","DEFERRED"]}};return e}function d(e){setTimeout(e,0)}function h(e){window.Promise?e():i.e(11,function(t){i(50),e()})}function f(e){window.btoa&&window.atob?e():i.e(12,function(t){i(49),e()})}function p(e){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?e():i.e(7,function(t){i(76),e()})}function v(t,i){window.jwplayerPluginJsonp=e.registerPlugin,x=e.loadPlugins(i.get("id"),i.get("plugins")),x.on(u.COMPLETE,t),x.on(u.ERROR,s.partial(m,t)),x.load()}function g(e,t,i){delete window.jwplayerPluginJsonp,x.setupPlugins(i,t),e()}function m(e,t){R(e,"Could not load plugin",t.message)}function y(e,i){var n=i.get("playlist");s.isString(n)?(I=new t,I.on(u.JWPLAYER_PLAYLIST_LOADED,function(t){i.attributes.feedData=t,
i.attributes.playlist=t.playlist,e()}),I.on(u.JWPLAYER_ERROR,s.partial(E,e)),I.load(n)):e()}function b(e,t,i,n){var a="flash"===t.get("primary"),s=o.flashVersion();if(a&&s){var u,l=function(){-1!==u&&(clearTimeout(u),u=-1,setTimeout(function(){r.remove(h.querySelector("#"+f)),e()},0))},c=function(){t.set("primary",void 0),t.updateProviders(),l()},d=n.element(),h=d.querySelector(".jw-media");d.parentElement||c();var f=""+t.get("id")+"-"+Math.random().toString(16).substr(2),p=t.get("flashloader");Object.defineProperty(r.embed(p,h,f,null),"embedCallback",{get:function(){return l}}),u=setTimeout(c,3e3)}else e()}function T(e,t,i,n,r){var a=r(t.get("playlist"),t.get("feedData"));a?e():E(e)}function E(e,t){t&&t.message?R(e,"Error loading playlist",t.message):R(e,"Error loading player","No playable sources found")}function k(e,t){var i;return s.contains(a.SkinsLoadable,e)&&(i=t+"skins/"+e+".css"),i}function w(e){for(var t=document.styleSheets,i=0,n=t.length;n>i;i++)if(t[i].href===e)return!0;return!1;
}function _(e,t){var i=t.get("skin"),r=t.get("skinUrl");if(s.contains(a.SkinsIncluded,i))return void e();if(r||(r=k(i,t.get("base"))),s.isString(r)&&!w(r)){t.set("skin-loading",!0);var o=!0,l=new n(r,o);l.addEventListener(u.COMPLETE,function(){t.set("skin-loading",!1)}),l.addEventListener(u.ERROR,function(){t.set("skin","seven"),t.set("skin-loading",!1)}),l.load()}e()}function A(e,t,i,n){var r=t.autoStartOnMobile();r&&t.set("autostartMuted",!0),t.set("playOnViewable",r||"viewable"===t.get("autostart")),n.setup(),e()}function S(e,t){t.once("itemReady",e),t.setItemIndex(t.get("item"))}function L(e){e({type:"complete"})}function C(e,t){return t.get("controls")?void l.load().then(function(){e()})["catch"](function(t){R(e,"Failed to load controls",t)}):void e()}function R(e,t,i){e({type:"error",msg:t,reason:i})}var x,I;return{getQueue:c,error:R}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(2)],r=function(e,t){function i(e){return"jwplayer."+e}function n(){return e.reduce(this.persistItems,function(e,n){
var r=u[i(n)];return r&&(e[n]=t.serialize(r)),e},{})}function r(e,t){try{u[i(e)]=t}catch(n){var r=window.jwplayer;r&&r.debug&&console.error(n)}}function a(){e.each(this.persistItems,function(e){u.removeItem(i(e))})}function s(){this.persistItems=["volume","mute","captionLabel","qualityLabel"]}function o(t){e.each(this.persistItems,function(e){t.on("change:"+e,function(t,i){r(e,i)})})}var u={removeItem:t.noop};try{u=window.localStorage}catch(l){}return e.extend(s.prototype,{getAllItems:n,track:o,clear:a}),s}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(67),i(2)],r=function(e,t){return i.p=t.loadFrom(),e.selectPlayer}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(7)],r=function(e){function t(e){e||i()}function i(){throw new Error("Invalid DFXP file")}var n=e.seconds;return function(r){t(r);var a=[],s=r.getElementsByTagName("p"),o=30,u=r.getElementsByTagName("tt");if(u&&u[0]){var l=parseFloat(u[0].getAttribute("ttp:frameRate"));isNaN(l)||(o=l);
}t(s),s.length||(s=r.getElementsByTagName("tt:p"),s.length||(s=r.getElementsByTagName("tts:p")));for(var c=0;c<s.length;c++){for(var d=s[c],h=d.getElementsByTagName("br"),f=0;f<h.length;f++){var p=h[f];p.parentNode.replaceChild(r.createTextNode("\r\n"),p)}var v=d.innerHTML||d.textContent||d.text||"",g=e.trim(v).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(g){var m=d.getAttribute("begin"),y=d.getAttribute("dur"),b=d.getAttribute("end"),T={begin:n(m,o),text:g};b?T.end=n(b,o):y&&(T.end=T.begin+n(y,o)),a.push(T)}}return a.length||i(),a}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(17),i(7),i(2)],r=function(e,t,i){var n="jwplayer",r=function(r,a){for(var s=[],o=[],u=t.xmlAttribute,l="default",c="label",d="file",h="type",f=0;f<r.childNodes.length;f++){var p=r.childNodes[f];if(p.prefix===n){var v=e.localName(p);"source"===v?(delete a.sources,s.push({file:u(p,d),"default":u(p,l),label:u(p,c),type:u(p,h)})):"track"===v?(delete a.tracks,
o.push({file:u(p,d),"default":u(p,l),kind:u(p,"kind"),label:u(p,c)})):(a[v]=i.serialize(e.textContent(p)),"file"===v&&a.sources&&delete a.sources)}a[d]||(a[d]=a.link)}if(s.length)for(a.sources=[],f=0;f<s.length;f++)s[f].file.length>0&&(s[f][l]="true"===s[f][l],s[f].label.length||delete s[f].label,a.sources.push(s[f]));if(o.length)for(a.tracks=[],f=0;f<o.length;f++)o[f].file.length>0&&(o[f][l]="true"===o[f][l],o[f].kind=o[f].kind.length?o[f].kind:"captions",o[f].label.length||delete o[f].label,a.tracks.push(o[f]));return a};return r}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(17),i(7),i(2)],r=function(e,t,i){function n(e){for(var t=[],i=0;i<o(e);i++){var n=e.childNodes[i];"jwplayer"===n.prefix&&"mediatypes"===a(n).toLowerCase()&&t.push(s(n))}return t}var r=t.xmlAttribute,a=e.localName,s=e.textContent,o=e.numChildren,u="media",l=function c(e,t){function l(e){var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",
ru:"Russian",es:"Spanish"};return t[e]?t[e]:e}var d,h,f="tracks",p=[];for(h=0;h<o(e);h++)if(d=e.childNodes[h],d.prefix===u){if(!a(d))continue;switch(a(d).toLowerCase()){case"content":if(r(d,"duration")&&(t.duration=i.seconds(r(d,"duration"))),r(d,"url")){t.sources||(t.sources=[]);var v={file:r(d,"url"),type:r(d,"type"),width:r(d,"width"),label:r(d,"label")},g=n(d);g.length&&(v.mediaTypes=g),t.sources.push(v)}o(d)>0&&(t=c(d,t));break;case"title":t.title=s(d);break;case"description":t.description=s(d);break;case"guid":t.mediaid=s(d);break;case"thumbnail":t.image||(t.image=r(d,"url"));break;case"group":c(d,t);break;case"subtitle":var m={};m.file=r(d,"url"),m.kind="captions",r(d,"lang").length>0&&(m.label=l(r(d,"lang"))),p.push(m)}}for(t.hasOwnProperty(f)||(t[f]=[]),h=0;h<p.length;h++)t[f].push(p[h]);return t};return l}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){var t={kind:"captions","default":!1};return function(i){return i&&i.file?e.extend({},t,i):void 0;
}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(22),i(2),i(4),i(3),i(1),i(13)],r=function(e,t,i,n,r,a){function s(e,t,i){return function(){var n=e.getContainer().getElementsByClassName("jw-overlays")[0];n&&(i.left=n.style.left,i.top=n.style.top,n.appendChild(i),t.displayArea=n)}}function o(e){function t(){var t=e.displayArea;t&&e.resize(t.clientWidth,t.clientHeight)}return function(){t(),setTimeout(t,400)}}var u=function(u,l){function c(){g||(g=!0,v=a.loaderstatus.COMPLETE,p.trigger(i.COMPLETE))}function d(){if(!y&&(l&&0!==r.keys(l).length||c(),!g)){var n=u.getPlugins();f=r.after(m,c),r.each(l,function(r,s){var o=e.getPluginName(s),u=n[o],l=u.getJS(),c=u.getTarget(),d=u.getStatus();d!==a.loaderstatus.LOADING&&d!==a.loaderstatus.NEW&&(l&&!t.versionCheck(c)&&p.trigger(i.ERROR,{message:"Incompatible player version"}),f())})}}function h(e){if(!y){var n="File not found";e.url&&t.log(n,e.url),this.off(),this.trigger(i.ERROR,{message:n}),d()}}var f,p=r.extend(this,n),v=a.loaderstatus.NEW,g=!1,m=r.size(l),y=!1;
this.setupPlugins=function(i,n){var a=[],l=u.getPlugins(),c=n.get("plugins");r.each(c,function(n,u){var d=e.getPluginName(u),h=l[d],f=h.getFlashPath(),p=h.getJS(),v=h.getURL();if(f){var g=r.extend({name:d,swf:f,pluginmode:h.getPluginmode()},n);a.push(g)}var m=t.tryCatch(function(){if(p){var e=c[v];if(!e)return void t.log("JW Plugin already loaded",d,v);var n=document.createElement("div");n.id=i.id+"_"+d,n.className="jw-plugin jw-reset";var a=r.extend({},e),u=h.getNewInstance(i,a,n);u.addToPlayer=s(i,u,n),u.resizeHandler=o(u),i.addPlugin(d,u,n)}});m instanceof t.Error&&t.log("ERROR: Failed to load "+d+".")}),n.set("flashPlugins",a)},this.load=function(){if(t.exists(l)&&"object"!==t.typeOf(l))return void d();v=a.loaderstatus.LOADING,r.each(l,function(e,n){if(t.exists(n)){var r=u.addPlugin(n);r.on(i.COMPLETE,d),r.on(i.ERROR,h)}});var e=u.getPlugins();r.each(e,function(e){e.load()}),d()},this.destroy=function(){y=!0,this.off()},this.getStatus=function(){return v}};return u}.apply(t,n),!(void 0!==r&&(e.exports=r));
},function(e,t,i){var n,r;n=[i(22),i(48)],r=function(e,t){var i=function(i){this.addPlugin=function(n){var r=e.getPluginName(n);return i[r]||(i[r]=new t(n)),i[r]},this.getPlugins=function(){return i}};return i}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r;n=[],r=function(){return{}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(53),i(2),i(1),i(63)],r=function(e,t,i,n){var r=[{name:"youtube",supports:function(e){return t.isYouTube(e.file,e.type)}},{name:"html5",supports:function(i){var r={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},a=i.file,s=i.type,o=e(i);if(null!==o)return o;if(t.isRtmp(a,s))return!1;if(!r[s])return!1;if(n.canPlayType){var u=n.canPlayType(r[s]);return!!u;
}return!1}},{name:"flash",supports:function(e){var n={flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",mpeg:"sound",smil:"rtmp"},r=i.keys(n);if(!t.isFlashSupported())return!1;var a=e.file,s=e.type;return!!t.isRtmp(a,s)||i.contains(r,s)}}];return r}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(9),i(37),i(101),i(1),i(105)],r=function(e,t,n,r,a){function s(e){this.config=e||{},this.providers=this.reorderProviders(this.config.primary)}s.loaders={html5:function(e){i.e(5,function(t){var n=i(70);o(n),e(n)})},flash:function(e){i.e(6,function(t){var n=i(52);o(n),e(n)})},youtube:function(e){i.e(9,function(t){var n=i(54);o(n),e(n)})}};var o=s.registerProvider=function(i){var s=i.getName().name;if(!n[s]){if(!r.find(t,r.matches({name:s}))){if(!r.isFunction(i.supports))throw new Error("Tried to register a provider with an invalid object");t.unshift({name:s,supports:i.supports})}a(i.prototype,e),n[s]=i}};return r.extend(s.prototype,{
load:function(e){return Promise.all(r.map(e,function(e){return new Promise(function(t){var i=s.loaders[e.name];i?i(t):t()})}))},reorderProviders:function(e){var i=r.clone(t);if("flash"===e){var n=r.indexOf(i,r.findWhere(i,{name:"flash"})),a=i.splice(n,1)[0],s=r.indexOf(i,r.findWhere(i,{name:"html5"}));i.splice(s,0,a)}return i},providerSupports:function(e,t){return e.supports(t)},required:function(e,t){var i=this,n=this.reorderProviders(t);return e=e.slice(),r.compact(r.map(n,function(t){for(var n=!1,r=e.length;r--;){var a=e[r],s=i.providerSupports(t,a.sources[0]);s&&e.splice(r,1),n=n||s}return n?t:void 0}))},choose:function(e){e=r.isObject(e)?e:{};for(var t=this.providers.length,i=0;t>i;i++){var a=this.providers[i];if(this.providerSupports(a,e)){var s=t-i-1;return{priority:s,name:a.name,type:e.type,providerToCheck:a,provider:n[a.name]}}}return null}}),s}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){var e=window.performance,t=!(!e||!e.now),i=1e3,n=function(){
return t?e.now():(new Date).getTime()},r=function(){var e=n(),t=e,r=function(){var e=n()-t;e>i?e=i:0>e&&(e=0),t+=e};setInterval(r,50),Object.defineProperty(this,"currentTime",{get:function(){return r(),t-e}})};return r.prototype.now=function(){return this.currentTime},new r}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){return function(t){return e.each(Array.prototype.slice.call(arguments,1),function(e){if(e)for(var i in e)i in t||(t[i]=e[i])}),t}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){return{hasClass:function(e,t){var i=" "+t+" ";return 1===e.nodeType&&(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(i)>=0}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,function(e,t,i){var n,r;n=[i(1),i(3)],r=function(e,t){return e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){if(this.attributes=this.attributes||{},this.attributes[e]!==t){var i=this.attributes[e];
this.attributes[e]=t,this.trigger("change:"+e,this,t,i)}},clone:function(){return e.clone(this.attributes)},change:function(e,t,i){var n="change:"+e,r=this.get(e);return this.on(n,t,i),t.call(i,this,r,r),this}},t)}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1)],r=function(e){var t={};return t.isDvr=function(e,t){return Math.abs(e)>=Math.max(t,0)},t.streamType=function(i,n){var r=e.isUndefined(n)?120:n,a="VOD";return i===1/0?a="LIVE":0>i&&(a=t.isDvr(i,r)?"DVR":"LIVE"),a},t}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){var e=function(e,i,n){i=i||this,n=n||[];var r=window.jwplayer;if(r&&r.debug)return e.apply(i,n);try{return e.apply(i,n)}catch(a){return new t(e.name,a)}},t=function(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t};return{tryCatch:e,Error:t}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(2),i(20),i(11),i(5),i(1)],r=function(e,t,n,r,a){var s,o=t.style,u={back:!0,backgroundOpacity:50,
edgeStyle:null,fontSize:14,fontOpacity:100,fontScale:.05,preprocessor:a.identity,windowOpacity:0};return s=function(r){function s(){if(a.isFinite(L.fontSize)){var e=r.get("containerHeight");return e?void(A=u.fontScale*L.fontSize/u.fontSize):void r.once("change:containerHeight",s)}}function l(){var e=r.get("containerHeight");if(e){var t=Math.round(e*A);r.get("renderCaptionsNatively")?f(r.get("id"),t):o(E,{fontSize:t+"px"})}}function c(e,t){l(),h(e,t),d(e,t)}function d(e,i){t.css("#"+e+" .jw-text-track-display",S,e),t.css("#"+e+" .jw-text-track-cue",i,e)}function h(i,n){e.isSafari()&&t.css("#"+i+" .jw-video::-webkit-media-text-track-display-backdrop",{backgroundColor:n.backgroundColor},i,!0),t.css("#"+i+" .jw-video::-webkit-media-text-track-display",S,i,!0),t.css("#"+i+" .jw-video::cue",n,i,!0)}function f(e,i){S.fontSize=i+"px",t.css("#"+e+" .jw-video::-webkit-media-text-track-display",S,e,!0)}function p(e,i){var n=i.color,r=i.fontOpacity;if((n||r!==u.fontOpacity)&&(e.color=t.hexToRgba(n||"#ffffff",r)),
i.back){var a=i.backgroundColor,s=i.backgroundOpacity;a===u.backgroundColor&&s===u.backgroundOpacity||(e.backgroundColor=t.hexToRgba(a,s))}else e.background="transparent";i.fontFamily&&(e.fontFamily=i.fontFamily),i.fontStyle&&(e.fontStyle=i.fontStyle),i.fontWeight&&(e.fontWeight=i.fontWeight),i.textDecoration&&(e.textDecoration=i.textDecoration)}function v(e,i,n){var r=t.hexToRgba("#000000",n);"dropshadow"===e?i.textShadow="0 2px 1px "+r:"raised"===e?i.textShadow="0 0 5px "+r+", 0 1px 5px "+r+", 0 2px 5px "+r:"depressed"===e?i.textShadow="0 -2px 1px "+r:"uniform"===e&&(i.textShadow="-2px 0 1px "+r+",2px 0 1px "+r+",0 -2px 1px "+r+",0 2px 1px "+r+",-1px 1px 1px "+r+",1px 1px 1px "+r+",1px -1px 1px "+r+",1px 1px 1px "+r)}function g(e){r.get("renderCaptionsNatively")||(T=e,this.selectCues(y,T))}function m(){r.get("renderCaptionsNatively")||i.e(10,function(e){i(51),_=window.WebVTT})}var y,b,T,E,k,w,_,A,S,L={};E=document.createElement("div"),E.className="jw-captions jw-reset",this.show=function(){
n.addClass(E,"jw-captions-enabled")},this.hide=function(){n.removeClass(E,"jw-captions-enabled")},this.populate=function(e){return r.get("renderCaptionsNatively")?void 0:(b=[],y=e,e?void this.selectCues(e,T):(b=[],void this.renderCues()))},this.resize=function(){l(),this.renderCues(!0)},this.renderCues=function(e){e=!!e,_&&_.processCues(window,b,E,e)},this.selectCues=function(e,t){var i,n;e&&e.data&&t&&(n=this.getAlignmentPosition(e,t),n!==!1&&(i=this.getCurrentCues(e.data,n),this.updateCurrentCues(i),this.renderCues(!0)))},this.getCurrentCues=function(e,t){return a.filter(e,function(e){return t>=e.startTime&&(!e.endTime||t<=e.endTime)})},this.updateCurrentCues=function(e){return e.length?a.difference(e,b).length&&(n.addClass(k,"jw-captions-window-active"),b=e):b=[],b},this.getAlignmentPosition=function(e,t){var i=e.source,n=t.metadata;return i?n&&a.isNumber(n[i])?n[i]:void 0:e.embedded&&t.duration<0?t.position-t.duration:t.position},this.clear=function(){e.empty(E)},this.setup=function(e,i){
k=document.createElement("div"),w=document.createElement("span"),k.className="jw-captions-window jw-reset",w.className="jw-captions-text jw-reset",L=a.extend({},u,i),A=u.fontScale,s(L.fontSize);var n=L.windowColor,l=L.windowOpacity,d=L.edgeStyle;S={};var h={};p(h,L),(n||l!==u.windowOpacity)&&(S.backgroundColor=t.hexToRgba(n||"#000000",l)),v(d,h,L.fontOpacity),L.back||null!==d||v("uniform",h),o(k,S),o(w,h),c(e,h),k.appendChild(w),E.appendChild(k),this.populate(r.get("captionsTrack")),r.set("captions",L)},this.element=function(){return E},r.on("change:playlistItem",function(){T=null,b=[]},this),r.on("change:captionsTrack",function(e,t){this.populate(t)},this),r.mediaController.on("seek",function(){b=[]},this),r.mediaController.on("time seek",g,this),r.mediaController.on("subtitlesTrackData",function(){this.selectCues(y,T)},this),r.on("itemReady",m,this)}}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,,,,,,,,,,,,,,,,,function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,a,s=i(143),o=n(s);
r=[],a=function(){function e(e,t,i,n){return(0,o["default"])(e,t,i,n)}return e}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,a,s=i(144),o=n(s);r=[i(6),i(2),i(4),i(1),i(3)],a=function(e,t,i,n,r){var a=t.style,s={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(u){function l(){var e=u.get("dock"),i=!!(e&&e.length&&"top-right"===d.position&&u.get("controls"));t.toggleClass(c,"jw-below",i)}n.extend(this,r);var c,d,h=new Image;return this.setup=function(){if(d=n.extend({},s,u.get("logo")),d.file){d.position=d.position||s.position,d.hide="true"===d.hide.toString(),c||(c=t.createElement((0,o["default"])(d.position,d.hide))),u.set("logo",d),u.change("dock",l),u.on("change:controls",l),h.onload=function(){var e={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};if(d.margin!==s.margin){var t=/(\w+)-(\w+)/.exec(d.position);3===t.length&&(e["margin-"+t[1]]=d.margin,e["margin-"+t[2]]=d.margin);
}a(c,e),u.set("logoWidth",e.width)},h.src=d.file;var r=new e(c);r.on("click tap",function(e){t.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(i.JWPLAYER_LOGO_CLICK,{link:d.link,linktarget:d.linktarget})},this)}},this.setContainer=function(e){c&&e.appendChild(c)},this.element=function(){return c},this.position=function(){return d.position},this.destroy=function(){u.off("change:dock",l),u.off("change:controls",l),h.onload=null},this}}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,i){var n,r;n=[i(1),i(2)],r=function(e,t){function i(e,t){t.off("change:mediaType",null,this),t.on("change:mediaType",function(t,i){"audio"===i&&this.setImage(e.get("playlistItem").image)},this)}function n(e,i){var n=e.get("autostart")&&!t.isMobile()||e.get("item")>0;return n?(this.setImage(null),e.off("change:state",null,this),void e.on("change:state",function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||(this.setImage(i.image),this.resize(null,null,e.get("stretching")))},this)):void this.setImage(i.image);
}var r=function(e){this.model=e,e.on("change:playlistItem",n,this),e.on("change:mediaModel",i,this)};return e.extend(r.prototype,{setup:function(e){this.el=e;var t=this.model.get("playlistItem");t&&this.setImage(t.image)},setImage:function(i){var n=this.image;n&&(n.onload=null,this.image=null),this.model.off("change:state",null,this);var r="";e.isString(i)&&(r='url("'+i+'")',n=this.image=new Image,n.src=i),t.style(this.el,{backgroundImage:r})},resize:function(e,i,n){if("uniform"===n){if(e&&(this.playerAspectRatio=e/i),!this.playerAspectRatio)return;var r=this.image,a=null;if(r){if(0===r.width){var s=this;return void(r.onload=function(){s.resize(e,i,n)})}var o=r.width/r.height;Math.abs(this.playerAspectRatio-o)<.09&&(a="cover")}t.style(this.el,{backgroundSize:a})}},element:function(){return this.el}}),r}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(1),i(2)],r=function(e,t){var i=function(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)};
return e.extend(i.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e;var t=this.el.getElementsByTagName("div");this.title=t[0],this.description=t[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var i={paddingLeft:0,paddingRight:0},n=e.get("controls"),r=e.get("dock"),a=e.get("logo");if(a){var s=1*(""+a.margin).replace("px",""),o=e.get("logoWidth")+(isNaN(s)?0:s);"top-left"===a.position?i.paddingLeft=o:"top-right"===a.position&&(i.paddingRight=o)}if(n&&r&&r.length){var u=56*r.length;i.paddingRight=Math.max(i.paddingRight,u)}t.style(this.el,i)},playlistItem:function(e,t){if(e.get("displaytitle")||e.get("displaydescription")){var i="",n="";t.title&&e.get("displaytitle")&&(i=t.title),t.description&&e.get("displaydescription")&&(n=t.description),this.updateText(i,n);
}else this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),i}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.CONTROLBAR_ONLY_HEIGHT=44;t.isAudioMode=function(e){var t=e.get("height");if(e.get("aspectratio"))return!1;if("string"==typeof t&&t.indexOf("%")>-1)return!1;var n=1*t||NaN;return n=isNaN(n)?e.get("containerHeight"):n,!!n&&n&&i>=n}},function(e,t,i){"use strict";function n(e){var t=0;return e>=1280?t=7:e>=960?t=6:e>=800?t=5:e>=640?t=4:e>=540?t=3:e>=420?t=2:e>=320&&(t=1),t}function r(e,t){var i="jw-breakpoint-"+t;a.replaceClass(e,/jw-breakpoint-\d+/,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.getBreakpoint=n,t.setBreakpoint=r;var a=i(11)},function(e,t,i){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,s=function(){
function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();r=[i(6),i(4),i(3),i(1)],a=function(e,t,i,r){return function(){function a(t,s){n(this,a),r.extend(this,i),this.revertAlternateClickHandlers(),this.domElement=s,this.model=t;var o={enableDoubleTap:!0,useMove:!0};this.ui=new e(s,r.extend(o,o)).on({"click tap":this.clickHandler,"doubleClick doubleTap":function(){return this.alternateDoubleClickHandler?void this.alternateDoubleClickHandler():void this.trigger("doubleClick")},move:function(){this.trigger("move")},over:function(){this.trigger("over")},out:function(){this.trigger("out")}},this)}return s(a,[{key:"destroy",value:function(){this.ui&&(this.ui.destroy(),this.ui=this.domElement=this.model=null,this.revertAlternateClickHandlers())}},{key:"clickHandler",value:function(e){return this.model.get("flashBlocked")?void 0:this.alternateClickHandler?void this.alternateClickHandler(e):void this.trigger(e.type===t.touchEvents.CLICK?"click":"tap");
}},{key:"element",value:function(){return this.domElement}},{key:"setAlternateClickHandlers",value:function(e,t){this.alternateClickHandler=e,this.alternateDoubleClickHandler=t||null}},{key:"revertAlternateClickHandlers",value:function(){this.alternateClickHandler=null,this.alternateDoubleClickHandler=null}}]),a}()}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t,i){var n,r;n=[i(11)],r=function(e){return function(t){var i=!1,n=function(){i=!1,e.removeClass(t,"jw-no-focus")},r=function(e){e.target&&e.target.blur&&e.target.blur()},a=function(){i=!0,e.addClass(t,"jw-no-focus")},s=function(){i||n()};return t.addEventListener("focus",s),t.addEventListener("blur",n),t.addEventListener("mousedown",a),t.addEventListener("mouseup",r),{destroy:function(){t.removeEventListener("focus",s),t.removeEventListener("blur",n),t.removeEventListener("mousedown",a),t.removeEventListener("mouseup",r)}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[],r=function(){var e=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];
return function(t,i,n){for(var r=t.requestFullscreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen,a=i.exitFullscreen||i.webkitExitFullscreen||i.webkitCancelFullScreen||i.mozCancelFullScreen||i.msExitFullscreen,s=!(!r||!a),o=e.length;o--;)i.addEventListener(e[o],n);return{events:e,supportsDomFullscreen:function(){return s},requestFullscreen:function(){r.apply(t)},exitFullscreen:function(){a.apply(i)},fullscreenElement:function(){return i.fullscreenElement||i.webkitCurrentFullScreenElement||i.mozFullScreenElement||i.msFullscreenElement},destroy:function(){for(o=e.length;o--;)i.removeEventListener(e[o],n)}}}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=window.IntersectionObserver;window.IntersectionObserver&&!d&&(d=new e(function(e){if(e&&e.length)for(var t=e.length;t--;)for(var i=e[t],n=c.length;n--;){var r=c[n];if(i.target===r.getContainer()){
r.model.set("intersectionRatio",i.intersectionRatio);break}}},{threshold:[0,.25,.5,.75,1]}))}function a(){(0,l.cancelAnimationFrame)(h),h=(0,l.requestAnimationFrame)(function(){c.forEach(function(e){e.updateBounds()}),c.forEach(function(e){e.model.get("visibility")&&e.updateStyles()}),c.forEach(function(e){e.checkResized()})})}function s(){c.forEach(function(e){e.model.set("activeTab",(0,u["default"])())})}Object.defineProperty(t,"__esModule",{value:!0});var o=i(55),u=n(o),l=i(61),c=[],d=void 0,h=-1;document.addEventListener("visibilitychange",s),document.addEventListener("webkitvisibilitychange",s),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),window.addEventListener("beforeunload",function(){document.removeEventListener("visibilitychange",s),document.removeEventListener("webkitvisibilitychange",s),window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}),t["default"]={add:function(e){c.push(e)},remove:function(e){var t=c.indexOf(e);
-1!==t&&c.splice(t,1)},size:function(){return c.length},observe:function(e){r();try{d.unobserve(e)}catch(t){}d.observe(e)},unobserve:function(e){d&&d.unobserve(e)}}},function(e,t){"use strict";function i(e,t,i){if(e.get("fullscreen"))return 1;if(!e.get("activeTab"))return 0;var r=e.get("intersectionRatio");return void 0===r&&(r=n(t,i)),r}function n(e,t){var i=document.documentElement,n=document.body,a={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight};if(!n.contains(e))return 0;for(var s=e.getBoundingClientRect(),o=s,u=e.parentNode,l=!1;!l;){var c=null;if(u&&1===u.nodeType?"visible"!==window.getComputedStyle(u).overflow&&(c=t(u)):(l=!0,c=a),c&&(o=r(c,o),!o))return 0;u=u.parentNode}var d=s.width*s.height,h=o.width*o.height;return d?h/d:0}function r(e,t){var i=Math.max(e.top,t.top),n=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),a=Math.min(e.right,t.right),s=a-r,o=n-i;return s>=0&&o>=0&&{
top:i,bottom:n,left:r,right:a,width:s,height:o}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,a,s=i(145),o=n(s),u=i(135),l=i(140),c=n(l),d=i(141),h=n(d),f=i(55),p=n(f),v=i(61),g=i(136);r=[i(4),i(5),i(3),i(2),i(1),i(139),i(138),i(137),i(111),i(132),i(133),i(134)],a=function(e,t,n,r,a,s,l,d,f,m,y,b){var T=r.style,E=r.bounds,k=r.isMobile(),w=r.isIE(),_=!1;return function(A,S){function L(){return{reason:"interaction"}}function C(){(0,v.cancelAnimationFrame)(ce),ce=(0,v.requestAnimationFrame)(R)}function R(){$.updateBounds(),$.updateStyles(),$.checkResized()}function x(e,t){var i=(0,u.isAudioMode)(S);if(a.isNumber(e)&&a.isNumber(t)){var n=(0,g.getBreakpoint)(e);(0,g.setBreakpoint)(Z,n);var s=2>n,o=S.get("timeSliderAbove"),l=!i&&o!==!1&&(o||s);r.toggleClass(Z,"jw-flag-small-player",s),r.toggleClass(Z,"jw-flag-time-slider-above",l),r.toggleClass(Z,"jw-orientation-portrait",t>e)}r.toggleClass(Z,"jw-flag-audio-player",i),
S.set("audioMode",i)}function I(e,t,i){if(e){var n={color:e,borderColor:e,stroke:e};r.css("#"+i+" .jw-color-active",n,i),r.css("#"+i+" .jw-color-active-hover:hover",n,i)}if(t){var a={color:t,borderColor:t,stroke:t};r.css("#"+i+" .jw-color-inactive",a,i),r.css("#"+i+" .jw-color-inactive-hover:hover",a,i)}}function P(){S.set("visibility",(0,h["default"])(S,Z,E))}function O(e,t,i){t&&!i&&(z(ue||e),$.updateStyles())}function D(i,n,a){var s=new d(n,a,{useHover:!0});return s.on({click:function(){$.trigger(e.JWPLAYER_DISPLAY_CLICK),S.get("controls")&&i.play(L())},tap:function(){$.trigger(e.JWPLAYER_DISPLAY_CLICK);var a=n.get("state"),s=S.get("controls");if(s&&(a===t.IDLE||a===t.COMPLETE||ue&&ue.get("state")===t.PAUSED)&&i.play(L()),s&&a===t.PAUSED){if(ue||n.get("castActive")||n.mediaModel&&"audio"===n.mediaModel.get("mediaType"))return;r.toggleClass(Z,"jw-flag-controls-hidden"),ne.renderCues(!0)}else ve&&(ve.showing?ve.userInactive():ve.userActive())},doubleClick:function(){return ve&&i.setFullscreen();
},move:function(){return ve&&ve.userActive()},over:function(){return ve&&ve.userActive()}}),s}function M(e,t){r.replaceClass(Z,/jw-skin-\S+/,t?"jw-skin-"+t:"")}function N(e,t){r.replaceClass(Z,/jw-stretch-\S+/,"jw-stretch-"+t)}function j(e,t){r.toggleClass(Z,"jw-flag-aspect-mode",!!t);var i=Z.querySelector(".jw-aspect");T(i,{paddingTop:t||null})}function F(e,t){r.toggleClass(Z,"jw-flag-flash-blocked",t)}function B(e){e.link?(A.pause(!0,L()),A.setFullscreen(!1),window.open(e.link,e.linktarget)):S.get("controls")&&A.play(L())}function U(e,t,i){var n={width:e};i=!!i,i&&S.set("aspectratio",null),S.get("aspectratio")||(n.height=t),r.exists(e)&&r.exists(t)&&(S.set("width",e),S.set("height",t)),T(Z,n)}function G(e,t){if((e&&!isNaN(1*e)||(e=S.get("containerWidth")))&&(t&&!isNaN(1*t)||(t=S.get("containerHeight")))){te&&te.resize(e,t,S.get("stretching"));var i=S.getVideo();if(i){var n=i.resize(e,t,S.get("stretching"));n&&(clearTimeout(le),le=setTimeout(G,250))}}}function V(){if(he.supportsDomFullscreen()){
var e=he.fullscreenElement();return!(!e||e.id!==S.get("id"))}return ue?ue.getVideo().getFullScreen():S.getVideo().getFullScreen()}function W(e){var t=S.get("fullscreen"),i=void 0!==e.jwstate?e.jwstate:V();t!==i&&S.set("fullscreen",i),C(),clearTimeout(le),le=setTimeout(G,200)}function Y(e,t){t?(r.addClass(e,"jw-flag-fullscreen"),T(document.body,{overflowY:"hidden"}),ve&&ve.userActive()):(r.removeClass(e,"jw-flag-fullscreen"),T(document.body,{overflowY:""})),G(),C()}function H(){ve.userActive()}function J(e,t){var i="audio"===t,n=S.getVideo(),a=n&&0===n.getName().name.indexOf("flash");r.toggleClass(Z,"jw-flag-media-audio",i),i&&!a?Z.insertBefore(te.el,ee):Z.insertBefore(te.el,ne.element())}function K(e,t){if(!ue){var i="LIVE"===t;r.toggleClass(Z,"jw-flag-live",i),$.setAltText(i?e.get("localization").liveBroadcast:"")}}function q(e,t){return t?void(t.name?ie.updateText(t.name,t.message):ie.updateText(t.message,"")):void ie.playlistItem(e,e.get("playlistItem"))}function z(e){if(S.get("viewSetup")){
ae=e.get("state");var t=null;ue&&(t=ae),ve&&(ve.instreamState=t),X(ae)}}function X(e){switch(S.get("controls")&&e!==t.PAUSED&&r.hasClass(Z,"jw-flag-controls-hidden")&&r.removeClass(Z,"jw-flag-controls-hidden"),r.replaceClass(Z,/jw-state-\S+/,"jw-state-"+e),e===t.COMPLETE&&A.setFullscreen(!1),e){case t.IDLE:case t.ERROR:case t.COMPLETE:ne.hide();break;default:ne.show(),e===t.PAUSED&&ve&&!ve.showing&&ne.renderCues(!0)}}function Q(){!ve||ue||k||ve.userActive()}var $=a.extend(this,n,{isSetup:!1,api:A,model:S});a.extend(S.attributes,{containerWidth:void 0,containerHeight:void 0,mediaContainer:void 0,fullscreen:!1,inDom:void 0,iFrame:void 0,activeTab:void 0,intersectionRatio:void 0,visibility:void 0,viewable:void 0,viewSetup:!1,audioMode:void 0,touchMode:void 0,altText:"",cues:void 0,castClicked:!1,scrubbing:!1,logoWidth:0});var Z=r.createElement((0,o["default"])(S.get("id"),S.get("localization").player)),ee=Z.querySelector(".jw-media"),te=new y(S),ie=new b(S),ne=void 0,re=void 0,ae=void 0,se=void 0,oe=void 0,ue=void 0,le=-1,ce=-1,de=void 0,he=void 0,fe=void 0,pe=null,ve=void 0;
this.updateBounds=function(){(0,v.cancelAnimationFrame)(ce);var e=document.body.contains(Z),t=E(Z),i=Math.round(t.width),n=Math.round(t.height);return i===se&&n===oe?(se&&oe||C(),void S.set("inDom",e)):(i&&n||se&&oe||C(),(i||n||e)&&(S.set("containerWidth",i),S.set("containerHeight",n)),S.set("inDom",e),void(e&&c["default"].observe(Z)))},this.updateStyles=function(){var e=S.get("containerWidth"),t=S.get("containerHeight");S.get("controls")&&x(e,t),ve&&ve.resize(e,t),G(e,t),ne.resize()},this.checkResized=function(){var t=S.get("containerWidth"),i=S.get("containerHeight");if(t!==se||i!==oe){se=t,oe=i,$.trigger(e.JWPLAYER_RESIZE,{width:t,height:i});var n=(0,g.getBreakpoint)(t);pe!==n&&(pe=n,$.trigger(e.JWPLAYER_BREAKPOINT,{breakpoint:pe}))}},this.handleColorOverrides=function(){function e(e,i,n,a){e=r.prefix(e,"#"+t+(a?"":" "));var s={};s[i]=n,r.css(e.join(", "),s,t)}var t=S.get("id"),i=S.get("skinColorActive"),n=S.get("skinColorInactive"),a=S.get("skinColorBackground");if(i&&(e([".jw-button-color.jw-toggle",".jw-button-color:hover",".jw-button-color.jw-toggle.jw-off:hover",".jw-option:not(.jw-active-option):hover",".jw-nextup-header"],"color",i),
e([".jw-option.jw-active-option",".jw-progress"],"background","none "+i)),n&&(e([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-skip .jw-skip-icon",".jw-nextup-body"],"color",n),e([".jw-cue",".jw-knob",".jw-active-option",".jw-nextup-header"],"background","none "+n)),a){if(e([".jw-background-color"],"background","none "+a),S.get("timeSliderAbove")!==!1){var s="transparent linear-gradient(180deg, "+r.getRgba(a,0)+" 0%, "+r.getRgba(a,.25)+" 30%, "+r.getRgba(a,.4)+" 70%, "+r.getRgba(a,.5)+") 100%";e([".jw-flag-time-slider-above .jw-background-color.jw-controlbar"],"background",s,!0)}e([".jw-flag-time-slider-above .jw-background-color.jw-slider-time"],"background","transparent",!0)}I(i,n,t)},this.setup=function(){var t=this;te.setup(Z.querySelector(".jw-preview")),ie.setup(Z.querySelector(".jw-title")),re=new m(S),re.setup(),re.setContainer(Z),re.on(e.JWPLAYER_LOGO_CLICK,B),ne=new f(S),ne.setup(Z.id,S.get("captions")),Z.insertBefore(ne.element(),ie.element()),de=D(A,S,ee),
fe=l(Z),he=s(Z,document,W),Z.addEventListener("focus",Q),S.on("change:errorEvent",q),S.on("change:hideAdsControls",function(e,t){r.toggleClass(Z,"jw-flag-ads-hide-controls",t)}),S.on("change:scrubbing",function(e,t){r.toggleClass(Z,"jw-flag-dragging",t)}),S.mediaController.on("fullscreenchange",W),S.change("mediaModel",function(e,i){i.change("mediaType",J,t),i.on("change:visualQuality",function(){G()},t)}),S.change("skin",M,this),S.change("stretching",N),S.change("flashBlocked",F);var n=S.get("width"),a=S.get("height");U(n,a),S.change("aspectratio",j),S.get("controls")?x(n,a):r.addClass(Z,"jw-flag-controls-hidden"),_||(_=!0,i(173)),w&&r.addClass(Z,"jw-ie"),S.get("skin-loading")===!0&&(r.addClass(Z,"jw-flag-skin-loading"),S.once("change:skin-loading",function(){r.removeClass(Z,"jw-flag-skin-loading")})),this.handleColorOverrides(),S.set("mediaContainer",ee),S.set("iFrame",r.isIframe()),S.set("activeTab",(0,p["default"])()),S.set("touchMode",k&&("string"==typeof a||a>=u.CONTROLBAR_ONLY_HEIGHT)),
c["default"].add(this),this.isSetup=!0,S.set("viewSetup",!0),S.set("inDom",document.body.contains(Z))},this.init=function(){this.updateBounds(),S.change("state",z),S.on("change:fullscreen",me),S.on("change:activeTab",P),S.on("change:fullscreen",P),S.on("change:intersectionRatio",P),S.on("change:visibility",O),P(),1!==c["default"].size()||S.get("visibility")||O(S,1,0),se=oe=null,this.checkResized()};var ge=function(e,t){t&&z(ue||S)};this.addControls=function(e){ve=e,r.removeClass(Z,"jw-flag-controls-hidden"),T(ee,{cursor:"pointer"}),S.change("streamType",K,this),e.enable(A,S),e.addActiveListeners(re.element());var i=e.logoContainer();i&&re.setContainer(i),oe&&(x(se,oe),e.resize(se,oe),ne.renderCues(!0)),e.on("userActive userInactive",function(){ae!==t.PLAYING&&ae!==t.BUFFERING||ne.renderCues(!0)});var n=Z.querySelector(".jw-overlays");n.addEventListener("mousemove",H)},this.removeControls=function(){re.setContainer(Z),ve&&(ve.removeActiveListeners(re.element()),ve.disable(),ve=null);var e=document.querySelector(".jw-overlays");
e&&e.removeEventListener("mousemove",H),r.addClass(Z,"jw-flag-controls-hidden"),T(ee,{cursor:""})};var me=function(e,t){var i=S.getVideo();t&&ve&&S.get("autostartMuted")&&ve.unmuteAutoplay(A,S),he.supportsDomFullscreen()?(t?he.requestFullscreen():he.exitFullscreen(),Y(Z,t)):w?Y(Z,t):(ue&&ue.getVideo()&&ue.getVideo().setFullscreen(t),i.setFullscreen(t)),i&&0===i.getName().name.indexOf("flash")&&i.setFullscreen(t)};this.resize=function(e,t){var i=!0;U(e,t,i),R()},this.resizeMedia=G,this.setupInstream=function(e){this.instreamModel=ue=e,ue.on("change:controls",ge,this),ue.on("change:state",z,this),r.addClass(Z,"jw-flag-ads"),ve&&ve.userActive()},this.setAltText=function(e){S.set("altText",e)},this.destroyInstream=function(){if(ue&&(ue.off(null,null,this),ue=null),this.setAltText(""),r.removeClass(Z,["jw-flag-ads","jw-flag-ads-hide-controls"]),S.set("hideAdsControls",!1),S.getVideo){var e=S.getVideo();e.setContainer(ee)}K(S,S.get("streamType")),de.revertAlternateClickHandlers()},this.addCues=function(e){
S.set("cues",e)},this.clickHandler=function(){return de},this.getContainer=this.element=function(){return Z},this.controlsContainer=function(){return ve?ve.element():null},this.getSafeRegion=function(e){var t={x:0,y:0,width:se||0,height:oe||0};return ve&&(e=e||!r.exists(e),e&&(t.height-=ve.controlbarHeight())),t},this.setCaptions=function(e){ne.clear(),ne.setup(S.get("id"),e),ne.resize()},this.destroy=function(){c["default"].unobserve(Z),c["default"].remove(this),this.isSetup=!1,this.off(),(0,v.cancelAnimationFrame)(ce),clearTimeout(le),Z.removeEventListener("focus",Q),fe&&(fe.destroy(),fe=null),he&&(he.destroy(),he=null),S.mediaController&&S.mediaController.off("fullscreenchange",W),ve&&ve.disable(),ue&&this.destroyInstream(),de&&(de.destroy(),de=null),re&&(re.destroy(),re=null),r.clearCss(S.get("id"))}}}.apply(t,r),!(void 0!==a&&(e.exports=a))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";
return'<div id="'+e+'" class="jw-skin-'+t+' jw-error jw-reset"><div class="jw-title jw-reset">'+('<div class="jw-title-primary jw-reset">'+i+"</div>")+('<div class="jw-title-secondary jw-reset">'+n+"</div>")+'</div><div class="jw-display-container jw-reset"><div class="jw-display-icon-container jw-background-color jw-reset"><div class="jw-icon jw-icon-display jw-reset" aria-hidden="true"></div></div></div></div>'}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var i=t?" jw-hide":"";return'<div class="jw-logo jw-logo-'+e+i+' jw-reset"></div>'}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div id="'+e+'" class="jwplayer jw-reset jw-state-setup" tabindex="0" aria-label="'+t+'"><div class="jw-aspect jw-reset"></div><div class="jw-media jw-reset"></div><div class="jw-preview jw-reset"></div><div class="jw-title jw-reset"><div class="jw-title-primary jw-reset"></div><div class="jw-title-secondary jw-reset"></div></div><div class="jw-overlays jw-reset"></div></div>';
}},function(e,t,i){var n,r;n=[i(67),i(1),i(24),i(2),i(7),i(6),i(72),i(13),i(73),i(63),i(4),i(5),i(46),i(30),i(44),i(18)],r=function(e,t,i,n,r,a,s,o,u,l,c,d,h,f,p,v){var g={};return g.api=e,g._=t,g._=t,g.version=i,g.utils=t.extend(n,r,{key:s,extend:t.extend,scriptloader:o,rssparser:p,tea:u,UI:a}),g.utils.css.style=g.utils.style,g.vid=l,g.events=t.extend({},c,{state:d}),g.playlist=t.extend({},h,{item:f}),g.plugins=v,g}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,function(e,t,i){var n,r;n=[i(85),i(14),i(161),i(25),i(23),i(1)],r=function(e,t,n,r,a,s){var o=e.prototype.setup;return e.prototype.setup=function(e,u){function l(){var e=f.get("cast");return s.isObject(e)&&v("casting")}function c(){var e=f.getVideo(),t=f.get("cast")||{};l()?(!t.customAppId&&r.containsDrm(f)||d.apply(this),h.apply(this)):e&&e.video&&(e.video.webkitWirelessVideoPlaybackDisabled=!0)}function d(){i.e(4,function(e){if(window.chrome&&a.isChrome()){var t=i(68);this._castController=new t(this,f),this.castToggle=this._castController.castToggle.bind(this._castController);
}}.bind(this))}function h(){window.WebKitPlaybackTargetAvailabilityEvent&&i.e(8,function(e){var t=i(66);this._airplayController=new t(this,f),this.castToggle=this._airplayController.airplayToggle.bind(this._airplayController)}.bind(this))}o.apply(this,arguments);var f=this._model,p=f.get("edition"),v=t(p),g=n.setup(this._view);e.analytics&&(e.sdkplatform=e.sdkplatform||e.analytics.sdkplatform);var m=this;u.getAdBlock=g.getAdBlock,this.on("playlistItem",function(){g.onReady.apply(m)}),this.once("ready",c,this)},e}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(72),i(14),i(1),i(2),i(59),i(91),i(25)],r=function(e,t,n,r,a,s,o){function u(e,t,i){if(t){var n=t.client;delete t.client,/\.(js|swf)$/.test(n||"")||(n=a.repo()+i),e[n]=t}}function l(e,i){var r=n.clone(i.get("plugins"))||{},s=i.get("edition"),o=t(s),l=/^(vast|googima|freewheel)$/,c=/\.(js|swf)$/,d=a.repo(),h=n.clone(i.get("advertising"));if(o("ads")&&h&&(c.test(h.client)?r[h.client]=h:l.test(h.client)&&(r[d+h.client+".js"]=h),
delete h.client),o("jwpsrv")){var f=i.get("analytics");n.isObject(f)||(f={}),u(r,f,"jwpsrv.js")}u(r,i.get("ga"),"gapro.js"),u(r,i.get("sharing"),"sharing.js");var p=i.get("related"),v=n.isObject(p),g=i.get("visualplaylist")!==!1||v;v||(p={disableRelated:!0}),p.showDockButton=g,u(r,p,"related.js");var m=i.get("mobileSdk");if(!m){var y=i.get("playlist");n.some(y,function(e){return e.stereomode&&e.stereomode.length>0?(u(r,i.get("vr")||{},"vr.js"),!0):void 0})}i.set("plugins",r),e()}function c(t,n){var o=n.get("key")||window.jwplayer&&window.jwplayer.key,u=new e(o),l=u.edition();if(n.set("key",o),n.set("edition",l),"unlimited"===l){var c=r.getScriptPath("jwplayer.js");if(!c)return void s.error(t,"Error setting up player","Could not locate jwplayer.js script tag");i.p=c,r.repo=a.repo=a.loadFrom=function(){return c}}n.updateProviders(),"invalid"===l?s.error(t,"Error setting up player",(void 0===o?"Missing":"Invalid")+" license key"):t()}function d(e,t){o.containsDrm(t)?o.probe(e,t.get("edition")):e();
}function h(){var e=s.getQueue();return e.CHECK_KEY={method:c,depends:["LOAD_BASE64_POLYFILL"]},e.PROBE_DRM_SUPPORT={method:d,depends:["CHECK_KEY","LOAD_PROMISE_POLYFILL"]},e.FILTER_PLUGINS={method:l,depends:["CHECK_KEY"]},e.FILTER_PLAYLIST.depends.push("PROBE_DRM_SUPPORT"),e.LOAD_PLUGINS.depends.push("FILTER_PLUGINS"),e}return{getQueue:h}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){var n,r;n=[i(93),i(146),i(1)],r=function(e,t,i){var n=window,r=i.extend(e,t);return"function"==typeof n.define&&n.define.amd&&n.define([],function(){return r}),n.jwplayer?n.jwplayer:r}.apply(t,n),!(void 0!==r&&(e.exports=r))},,,,,,,,,function(e,t,i){var n,r;n=[],r=function(){function e(){var e=document.createElement("div");return e.className=i,e.innerHTML="&nbsp;",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.background="transparent",e}function t(t){function n(){if(s)return!0;var e=this;r()&&e.trigger("adBlock")}function r(){return null!==o.offsetParent&&o.className===i&&""!==o.innerHTML&&0!==o.clientHeight||(s=!0),
s}function a(){return s}var s=!1,o=e();return t.element().appendChild(o),{onReady:n,getAdBlock:a}}var i="afs_ads";return{setup:t}}.apply(t,n),!(void 0!==r&&(e.exports=r))},function(e,t,i){function n(e){return e&&e.__esModule?e:{"default":e}}var r,a,s=i(164),o=n(s);r=[i(2),i(4),i(6),i(3),i(1)],a=function(e,t,i,n,r){var a=function(e){this.model=e,this.setup()};return r.extend(a.prototype,n,{setup:function(){this.destroy(),this.skipMessage=this.model.get("skipText"),this.skipMessageCountdown=this.model.get("skipMessage"),this.setWaitTime(this.model.get("skipOffset"));var t=(0,o["default"])();this.el=e.createElement(t),this.skiptext=this.el.getElementsByClassName("jw-skiptext")[0],this.skipAdOnce=r.once(this.skipAd.bind(this)),new i(this.el).on("click tap",r.bind(function(){this.skippable&&this.skipAdOnce()},this)),this.model.on("change:duration",this.onChangeDuration,this),this.model.on("change:position",this.onChangePosition,this),this.onChangeDuration(this.model,this.model.get("duration")),
this.onChangePosition(this.model,this.model.get("position"))},updateMessage:function(e){this.skiptext.innerHTML=e},updateCountdown:function(e){this.updateMessage(this.skipMessageCountdown.replace(/xx/gi,Math.ceil(this.waitTime-e)))},onChangeDuration:function(t,i){if(i){if(this.waitPercentage){if(!i)return;this.itemDuration=i,this.setWaitTime(this.waitPercentage),delete this.waitPercentage}e.removeClass(this.el,"jw-hidden")}},onChangePosition:function(t,i){this.waitTime-i>0?this.updateCountdown(i):(this.updateMessage(this.skipMessage),this.skippable=!0,e.addClass(this.el,"jw-skippable"))},element:function(){return this.el},setWaitTime:function(t){if(r.isString(t)&&"%"===t.slice(-1)){var i=parseFloat(t);return void(this.itemDuration&&!isNaN(i)?this.waitTime=this.itemDuration*i/100:this.waitPercentage=t)}r.isNumber(t)?this.waitTime=t:"string"===e.typeOf(t)?this.waitTime=e.seconds(t):isNaN(Number(t))?this.waitTime=0:this.waitTime=Number(t)},skipAd:function(){this.trigger(t.JWPLAYER_AD_SKIPPED);
},destroy:function(){this.el&&(this.el.removeEventListener("click",this.skipAdOnce),this.el.parentElement&&this.el.parentElement.removeChild(this.el)),delete this.skippable,delete this.itemDuration,delete this.waitPercentage}}),a}.apply(t,r),!(void 0!==a&&(e.exports=a))},,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return'<div class="jw-skip jw-background-color jw-hidden jw-reset"><span class="jw-text jw-skiptext jw-reset"></span><span class="jw-icon jw-icon-inline jw-skip-icon jw-reset"></span></div>'}},,,function(e,t,i){t=e.exports=i(75)(),t.push([])},,,,,,function(e,t,i){var n=i(167);"string"==typeof n&&(n=[["all-players",n,""]]),i(42).style(n,"all-players"),n.locals&&(e.exports=n.locals)}])}),define("shared/jwplayer",["shared/polyfills","third_party/jwplayer/jwplayer"],function(e,t,i){e("third_party/jwplayer/jwplayer");var n=window.jwplayer;n.key="iZmHDrLdzye6tdECs5fB+nY1ldcQWT3C6VlxiqemIAVRI04G",i.exports=n});
