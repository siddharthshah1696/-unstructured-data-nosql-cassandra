/*! Amp Custom Project Script | (c) Scaled Inference | Key: 39b7bb0abd974a9a | Injection: 7de69eb5f28f9fea-published | Built Mon Jun 05 2017 17:24:05 GMT+0000 (UTC) */ 

(function () {
  try {
    window.ampConfig = typeof window.ampConfig == "object" ? window.ampConfig : {};
    var projectConfig = {"domain":"https://amp.ai","key":"39b7bb0abd974a9a","samplingRate":1,"policies":[{"id":"7de69eb5f28f9fea-DEFAULT_POLICY","allocation":1,"type":"DEFAULT","default":true,"percentRandom":0}]};
    for (var key in projectConfig) {
      if (Object.prototype.hasOwnProperty.call(projectConfig, key)) window.ampConfig[key] = projectConfig[key];
    }
  } catch (e) { 
    window.ampConfigKey = "39b7bb0abd974a9a";
  }
})();



!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.amp=t()}(this,function(){if("undefined"!=typeof window&&window.amp&&window.amp.ts&&window.amp.ts.script){throw new Error("Amp library already exists - we'll continue to use the existing one")}try{return function e(t,r,n){function i(o){if(r[o])return r[o].exports;if(!t[o]){var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var s=r[o]={exports:{}};return t[o][0].call(s.exports,function(e){var r=t[o][1][e];return i(r||e)},s,s.exports,e,t,r,n),s.exports}if(n&&n.length)return i(n[0])}({1:[function(e,t,r){"use strict";var n=e("./core/global");n.ts={script:(new Date).getTime()};var i=e("./interface");if(Object.keys(i).forEach(function(e){n[e]=i[e]}),"undefined"!=typeof window&&window.document&&(!0===n.config.debugger||n.config.debugger&&n.config.debugger.enable)){var o=document,a=o.getElementsByTagName("script")[0],s=o.createElement("script");a.parentNode.insertBefore(s,a),s.type="text/javascript",s.async=!1===n.config.async,s.src=(n.config.domain||"https://amp.ai")+"/libs/amp-debugger.min.js",window.localStorage&&n.config.debugger&&void 0!==n.config.debugger.expand&&localStorage.setItem("amp-debugger-minimized",n.config.debugger&&n.config.debugger.expand?0:1)}if(n.config.key&&n.init(),n.utils.domReady(function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=new n.builtinEvents.AmpClick;n.utils.addEvent(document,"click",function(t){e.send({element:t.target})});var t=new n.builtinEvents.AmpScroll({minDiff:100});try{n.utils.addEvent(window,"scroll",n.utils.debounce(function(){t.send()},1e3))}catch(e){n.log({message:e,level:"verbose"})}var r=new n.builtinEvents.AmpFocus;try{var i=[];n.utils.addEvent(window,"mousemove",n.utils.throttle(function(e){["input","textarea"].indexOf(e.target&&e.target.nodeName.toLowerCase())>-1&&-1===i.indexOf(e.target)&&(n.utils.addEvent(e.target,"focus",function(e){r.send({element:e.target})}),i.push(e.target))})),n.utils.addEvent(window,"blur",function(e){document.activeElement&&"iframe"==document.activeElement.nodeName.toLowerCase()&&r.send({element:document.activeElement})})}catch(e){n.log({message:e,level:"verbose"})}(new n.builtinEvents.AmpOpenGraph).send({document:document}),(new n.builtinEvents.AmpTwitterCard).send({document:document}),(new n.builtinEvents.AmpSchemaOrg).send({document:document})}}),n.injections.version=n.config.injection,n.injections.version&&n.config.key?n.request({method:"GET",async:!1,url:n.config.domain+"/libs/"+n.config.key+"/"+n.injections.version+".json"},function(e,t){(n.utils.typeof(t.body,"array")||t.body&&t.body.content&&t.body.name&&t.body.type)&&n.injections.add(t.body)}):n.inject([{"name":"Observe Page","type":"js","content":" amp.utils.domReady(function () {  var bodyClasses = document.body.className.split(' '); var isMobile = bodyClasses.indexOf('mweb') >= 0;  var isAuthenticated = bodyClasses.indexOf('logged_out') === -1; if (isMobile) { var pw = document.getElementById('page_wrapper'); isAuthenticated = (!pw || !pw.className || pw.className.indexOf('is_logged_out') >= 0) ? false : true; }  var properties = { isAuthenticated: isAuthenticated, version: isMobile ? 'mobile' : 'desktop' };  amp.observe('PageDetails', properties);  }); "}],!1),"undefined"!=typeof window&&window.amp&&window.amp.replay)try{var c=window.amp.replay;window.amp=n,c.forEach(function(e){e[2]&&n.timing.markStart("as."+e[0],e[2]).end(),n.config.replayDelay=n.ts.script-e[2],n[e[0]].apply(n,e[1])}),n.config.replayDelay=0}catch(e){n.warn(n.error({name:"UNAVAILABLE",message:"Error replaying amp snippet"}))}n.hooks(),n.config.blockingDetection&&n.utils.detectBlocking(function(e){var t={type:"metric"};t.projectKey=n.config.key,t.data={name:"blocked",value:e},n.log(t,{send:!0})}),t.exports=n},{"./core/global":7,"./interface":18}],2:[function(e,t,r){"use strict";var n=e("./global"),i=e("./config"),o=e("./event"),a=e("./error"),s=(e("./request"),e("./timing"),e("./builtinEvents")),c=e("../utils"),l=function e(t){var r=this;if(c.typeof(t,"string")&&(t={resumeFrom:t}),this.context=[],this.updated=this.created=(new Date).getTime(),this.options=t=c.typeof(t,"function")?{}:c.result(t,"object"),t&&t.resumeFrom){var o=e.deserialize(t.resumeFrom);if(o&&o.options&&o.updated){var a=o.options.sessionTTL||i.sessionTTL;a&&a>=(new Date).getTime()-o.updated&&(this.created=o.created,this.updated=o.updated,this.properties=o.properties,this.context=o.context,this.resumed=!0,this.options=t=o.options)}delete t.resumeFrom}this.index=t.index||1,delete t.index,this.id=t.sessionId=t.id||t.sessionId||c.randomString(16),delete t.id,!i.debugger||i.simulations&&0!==i.simulations.length||(t.properties=t.properties||{},t.properties.debugging=!0,t.properties.debugger=i.debuggerVersion||"1.0.0");var l=new s.AmpSession(c.deepMerge({session:this},{properties:i.sessionProperties},t.event||{},{properties:t.properties}));this.properties=l.options().properties,delete t.properties,t.key=t.key||i.key,t.userId=t.userId||i.userId,t.domain=t.domain||i.domain,t.apiPath=t.apiPath||i.apiPath,t.sessionTTL=t.sessionTTL||i.sessionTTL,t.timeout=t.timeout||i.timeout,i.debugger&&!t.userId&&(t.userId=c.randomString(5)),n.trigger("session:create",this);var u=arguments[arguments.length-1],d=c.typeof(u,"function")?function(e,t){e&&n.trigger("callbackError","session",e,r,t),u(e,r,t)}:function(e,t){e&&n.trigger("callbackError","session",e,r,t)};this.sendEvent({name:"AmpSession",properties:this.properties},d)};l.prototype={sendEvent:function(e,t){var r=this;return e=c.merge({index:this.index},this.options,c.result(e,"object")),this.index++,e.session=this,o(e,function(n,i){if(i=i||{},i.session=r,e.name){var o={name:e.name,error:n?n+"":null,ts:(new Date).getTime()};e.properties&&Object.keys(e.properties).length&&(o.properties=e.properties),i.decision&&(o.decision=i.decision),i.response&&i.response.meta&&(o.meta=i.response.meta),r.context.push(o),"AmpSession"!==e.name&&(r.updated=(new Date).getTime()),r.trigger("change",r,o)}c.typeof(t,"function")&&t(n,i)})},observe:function(e,t,r){t=c.typeof(t,"plainobject")?t:{},r=c.merge({},c.typeof(r,"function")?{}:c.result(r,"object"),{name:e,properties:t});var i=arguments[arguments.length-1],o="function"==typeof i?function(t,r){t&&n.trigger("callbackError","observe",t,{name:e,properties:r.properties},r),i(t,{name:e,properties:r.properties},r)}:function(t,r){t&&n.trigger("callbackError","observe",t,{name:e,properties:r.properties},r)};return this.sendEvent(r,o)},decide:function(e,t,r){r=c.merge({},c.typeof(r,"function")?{}:c.result(r,"object"),{name:e}),r.decision={candidates:t||[],ttl:r.ttl,limit:r.limit,indexes:r.indexes||[]},delete r.limit,delete r.ttl;var i=arguments[arguments.length-1],o="function"==typeof i?function(e,t){e&&n.trigger("callbackError","decide",e,t.decision&&t.decision.result,t),i(e,t.decision&&t.decision.result,t)}:function(e,t){e&&n.trigger("callbackError","decide",e,t.decision&&t.decision.result,t)};return this.sendEvent(r,o)},serialize:function(){try{return JSON.stringify({id:this.id,index:this.index,created:this.created,updated:this.updated,options:this.options,context:this.context,properties:this.properties,resumed:this.resumed})}catch(e){return a({name:"DATALOSS",message:"Could not serialize the session",key:this.options.key||i.key,sessionId:this.id,send:!0}),""}}},l.deserialize=function(e){try{return JSON.parse(e)}catch(e){return a({name:"DATALOSS",message:"Could not deserialize the session",key:this.options.key||i.key,sessionId:this.id,send:!0}),!1}},c.Events.mixin(l.prototype),t.exports=l},{"../utils":42,"./builtinEvents":3,"./config":4,"./error":5,"./event":6,"./global":7,"./request":10,"./timing":11}],3:[function(e,t,r){"use strict";function n(e){return Array.isArray(e)?e:Array.from(e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("../utils"),a=e("./global"),s=e("./config"),c=e("./warn"),l=e("./error"),u=!1;o.domReady(function(){return u=!0});var d=function(e){var t=e.className?(e.className+"").trim():"";return e.nodeName.toLowerCase()+(e.id?"#"+e.id:"")+(t?"."+t.replace(/ /g,"."):"")},p=function e(t,r,n){var o="string"==typeof r?r.split(".").filter(function(e){return!!e}):r;1===o.length?t[o[0]]=n:o.length>1&&("object"!==i(t[o[0]])&&(t[o[0]]={}),e(t[o[0]],o.slice(1),n))},m=function(e){this.initialOptions=e||{},o.merge(this,this.initialOptions)};m.prototype={send:function(e,t){if(o.typeof(e,"function")?(t=e,e={}):o.typeof(e,"object")?o.typeof(t,"function")||(t=function(){}):(t=function(){},e={}),!this.isEnabled())return this;o.merge(this,e);var r=e.session||this.session||a.session;delete e.session,e=this.options(e);try{if(!this.test.call(this,e,e.properties||{}))return this}catch(e){return this}if(a.trigger("defaultEvent",this,e),r)r.sendEvent(e,t);else{if(!s.autoSession)return c(l({message:"Please create session before any events!"}));a.session=new a.Session(function(r,n){if(r)return t(r);n.sendEvent(e,t)})}return this},options:function(e){return e=o.deepMerge({},this.initialOptions,e||{}),e.name=e.name||this.name||"Event",this.isEnabled()&&(e.properties=o.deepMerge(this.getProperties(e),e.properties||{})),this._optionsHook&&(e=this._optionsHook(e)),e},getProperties:function(e){return{}},test:function(e){return!0},isEnabled:function(){var e=s.builtinEvents;return!0===e||o.typeof(e,"array")&&e.indexOf(this.name)>=0||!0===e[this.name]||e[this.name]&&(o.typeof(e[this.name],"array")||!0===e[this.name].enabled)}};var f={};f.add=function(e){e=e||{};var t=e.name,r=e.properties||{},n=Object.keys(r),i=f[t]=function(r){this.name=t,this._pdefCache={},e.options&&(this._optionsHook=e.options),m.call(this,r)};return i.prototype=Object.create(m.prototype),i.prototype.constructor=i,i.prototype.resolveProperty=function(e,t,r){if(o.typeof(t,"object")){if(e in this._pdefCache)return this._pdefCache[e];var n=void 0;if(t.value&&o.typeof(t.value,"function"))try{n=t.value.call(this,r)}catch(e){}return"default"in t&&void 0===n&&(n=o.typeof(t.default,"function")?t.default.call(this,r):t.default),(!0===t.cache||"domReady"===t.cache&&u)&&(this._pdefCache[e]=n),n}if(!o.typeof(t,"function"))return t;try{return t.call(this,r)}catch(e){return}},i.prototype.getProperties=function(i){var a=this,u={},d=[];if(s.builtinEvents)if(!0===s.builtinEvents||o.typeof(s.builtinEvents,"array")&&s.builtinEvents.indexOf(t)>=0)d=n;else{var m=s.builtinEvents[t];if(m)if(!0===m||m.enabled&&!("properties"in m))d=n;else if(o.typeof(m,"array"))d=m;else{if(!o.typeof(m.properties,"array"))return[];d=m.properties}else d=[]}else d=[];if(o.typeof(e.properties,"function"))try{var f=e.properties.call(this);return o.typeof(f,"plainobject")?f:{}}catch(e){return c(l({message:e.toString()})),{}}return d.forEach(function(e){if(e in r){var t=a.resolveProperty(e,r[e],i);void 0!==t&&p(u,e,t)}}),u},o.typeof(e.test,"function")&&(i.prototype.test=e.test),i},f.add({name:"AmpSession",properties:{"device.width":{default:0,value:function(){return window.screen.width}},"device.height":{default:0,value:function(){return window.screen.height}},"device.touch":{default:!1,value:function(){return"ontouchstart"in window||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}},"device.touchPoints":{default:0,value:function(){return navigator.maxTouchPoints||navigator.msMaxTouchPoints}},"device.time":function(){return(new Date).getTime()},"device.timezone":function(){return(new Date).getTimezoneOffset()},"user.languages":{default:"",cache:!0,value:function(){var e=window.navigator.languages?window.navigator.languages.join(","):window.navigator.language||window.navigator.userLanguage;return e?e.toLowerCase():""}},"browser.width":{default:0,value:function(){return Math.max(document.documentElement.clientWidth,document.documentElement.offsetWidth,document.documentElement.scrollWidth)}},"browser.height":{default:0,value:function(){return Math.max(document.documentElement.clientHeight,document.documentElement.offsetHeight,document.documentElement.scrollHeight)}},"browser.userAgent":{default:"",cache:!0,value:function(){return window.navigator.userAgent}},"page.title":{default:"",value:function(){return document.title}},"page.url":{default:"",value:function(){return window.location.href}},"page.referrer":{default:"",value:function(){return document.referrer}},"page.doNotTrack":{default:!1,value:function(){return!!(window.doNotTrack||"yes"===navigator.doNotTrack||navigator.msDoNotTrack||navigator.doNotTrack)}}}}),f.add({name:"AmpClick",options:function(e){return"undefined"!=typeof document&&this.element===document&&(e.properties.node={path:"document"}),e},properties:{"node.id":{value:function(){if(this.element.id)return this.element.id}},"node.class":{value:function(){var e=(this.element.className+"").trim();if(e)return e}},"node.attributes":function(){var e={},t=0,r=["id","class","data-amp-tags"];if(Array.prototype.slice.call(this.element.attributes).forEach(function(n){if(!(r.indexOf(n.name)>=0)){var i=(n.value+"").trim();i&&(e[n.name]=i,t++)}}),t)return e},"node.path":function(){var e=this.element;if(e===document.body||e===document.body.parentNode||e===document)return d(e);for(var t=[];e&&e!==document.body;){try{t.unshift(d(e))}catch(e){a.log({message:e,level:"verbose"})}e=e.parentNode}return t.length?t.join(">"):void 0},_tags:function(e){if(this.element.getAttribute("data-amp-tags")){var t=o.parse(this.element.getAttribute("data-amp-tags"));if("object"===(void 0===t?"undefined":i(t)))return t}}}}),f.add({name:"AmpScroll",test:function(e,t){var r=this.minDiff||100,n=this.lastScroll||0;return t.offset.top-n>r&&(this.lastScroll=t.offset.top,!0)},properties:{"offset.top":{default:0,value:function(e){return window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}},"offset.left":{default:0,value:function(e){return window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft}},"page.width":{default:0,value:function(){return Math.max(document.body.clientWidth,document.body.offsetWidth,document.body.scrollWidth)}},"page.height":{default:0,value:function(){return Math.max(document.body.clientHeight,document.body.offsetHeight,document.body.scrollHeight)}}}}),f.add({name:"AmpFocus",properties:{"node.id":{value:function(){if(this.element.id)return this.element.id}},"node.class":{value:function(){var e=(this.element.className||"").trim();if(e)return e}},"node.path":function(){var e=this.element;if(e===document.body||e===document.body.parentNode||e===document)return d(e);for(var t=[];e&&e!==document.body;){try{t.unshift(d(e))}catch(e){a.log({message:e,level:"verbose"})}e=e.parentNode}return t.length?t.join(">"):void 0},_tags:function(e){if(this.element.getAttribute("data-amp-tags")){var t=o.parse(this.element.getAttribute("data-amp-tags"));if("object"===(void 0===t?"undefined":i(t)))return t}}}}),f.add({name:"AmpOpenGraph",properties:function(){var e=this.document,t=e.getElementsByTagName("meta"),r=["image","video","audio","article","book","profile","locale"],o=["music_album","music_musician","video_actor","video_director","video_writer","video_tag","article_author","article_tag","book_author","book_tag","locale_alternate"];if(t&&0!==t.length){var a={};return Array.prototype.slice.call(t).forEach(function(e){var t=e.getAttribute("property");if(0===(t+"").trim().indexOf("og:")){var s=t.trim().slice(3).replace(/:/g,"_"),c=e.getAttribute("content").replace(/\r?\n|\r/g,"").replace(/\s+/g," ");if(r.indexOf(s)>=0)if("object"!==i(a[s]))a[s]={content:c};else{var l=s+"s";a[l]=a[l]||[a[s].content],a[l].push(c)}else if(s.indexOf("_")>0&&r.indexOf(s.split("_")[0])>=0){var u=(s.split("_"),s.split("_")),d=n(u),p=d[0],m=d.slice(1),f=m.join("_"),g=p+"s";if(a[p]&&!a[g])o.indexOf(s)>=0?(a[p][f]=a[p][f]||[],a[p][f].push(c)):a[p][f]=c;else if(a[g].length>1)return}else a[s]=c}}),a}},test:function(e){return!!Object.keys(e.properties).length}}),f.add({name:"AmpTwitterCard",properties:function(){var e=this.document,t=e.getElementsByTagName("meta");if(t&&0!==t.length){var r={};return Array.prototype.slice.call(t).forEach(function(e){if(!((e.getAttribute("name")+"").trim().indexOf("twitter:")<0)){var t=e.getAttribute("name").trim().slice(8).replace(/:/g,"_"),n=e.getAttribute("content").trim().replace(/\r?\n|\r/g,"").replace(/\s+/g," ");r[t]=n}}),r}},test:function(e){return!!Object.keys(e.properties).length}}),f.add({name:"AmpSchemaOrg",properties:function(){var e=this.document.body,t=(this.document.documentElement,{}),r=function(e){var t=null;return"LINK"===e.nodeName?t=e.getAttribute("href"):"META"===e.nodeName?t=e.getAttribute("content"):e.childNodes&&e.childNodes[0]&&e.childNodes[0].nodeValue&&(t=e.childNodes[0].nodeValue.trim().replace(/\r?\n|\r/g,"").replace(/\s+/g," ")),t},n=function e(t){if(!t.hasAttribute("itemscope"))return r(t);for(var n=t.childNodes,i=0;i<n.length;i++){var o=n[i];if("#text"!==o.nodeName&&o.hasAttribute("itemscope"))return e(o);if("#text"!==o.nodeName)return r(o)}},a=function e(t){Object.keys(t).forEach(function(r){if("object"===i(t[r])){var n=t[r].type;t[r][n]=o.merge({},t[r]),Object.keys(t[r]).filter(function(e){return e!==n}).forEach(function(e){delete t[r][e]}),delete t[r][n].type,e(t[r][n])}})},s=function e(t){var r=Object.keys(t)[0];return"object"!==i(t[r])?t[r]:e(t[r])};return t=function(e){var t={},r=[],n=Array.prototype.slice.call(document.querySelectorAll("script"));if(n&&0!==n.length)return n.forEach(function(e){if(e.hasAttribute("type")&&"application/ld+json"===e.getAttribute("type").trim()){var t=JSON.parse(e.innerHTML.replace(/@/g,""));delete t.context,a(t);var n={},i=t.type;delete t.type,n[i]={},o.merge(n[i],t),r.push(n)}}),r.forEach(function(e){var r=Object.keys(e)[0];if(t.hasOwnProperty(r)){var n=r+"s";t[n]=t[n]||[s(t[r])],t[n].push(s(e[r]))}t[r]=e[r]}),t}(),0===Object.keys(t).length&&function e(t,i,o){if(t&&(!t.nodeName||"SCRIPT"!==t.name)){var a=Array.prototype.slice.call(t.children);if(a&&0!==a.length)if(t.hasAttribute("itemscope")){var s=t.getAttribute("itemtype").trim().slice(18);if(i.hasOwnProperty(s)){var c=null,l=s+"s";i[l]=i[l]||[i[s].name||i[s].url];for(var u=0;u<a.length;u++){var d=a[u];if(d.hasAttribute("itemscope")){c=n(d),i[l].push(c);break}if(d.hasAttribute("itemprop")){c=n(d),i[l].push(c);break}e(d,i,i[l])}}else{var p={};a.forEach(function(t){if("text"!=t.nodeName&&t.hasAttribute("itemprop")){var r=t.getAttribute("itemprop");t.hasAttribute("itemscope")?(p[r]={},e(t,p[r])):p[r]=n(t)}else e(t,p)}),i[s]=p}}else for(var m=0;m<a.length;m++){var f=a[m];if("text"!=f.nodeName&&f.hasAttribute("itemprop"))if(o&&o.constructor===Array){if(!f.hasAttribute("itemscope")){o.push(r(f));break}i[prop]={},e(f,i[prop],o)}else{var g=f.getAttribute("itemprop");f.hasAttribute("itemscope")?(i[g]={},e(f,i[g])):i[g]=r(f)}else o&&o.constructor===Array?e(f,i,o):e(f,i)}}}(e,t),t}}),t.exports=f},{"../utils":42,"./config":4,"./error":5,"./global":7,"./warn":12}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils/typeof"),o=e("../utils/parse"),a=e("../utils/merge"),s=e("../utils/hasLocalStorage"),c=e("../utils/getCurrentScript"),l=e("../utils/query"),u=function e(t,r){if(i(t,"array"))return t.map(function(t){return e[t]});if(i(t,"object"))a(e,t);else if(i(t,"string")){if(2!==arguments.length)return e[t];e[t]=r}else if(0==arguments.length){var n={};return Object.keys(e).forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}};a(u,{domain:"https://amp.ai",apiPath:"/api/core/v1",key:"",autoSession:!0,sessionTTL:0,timeout:1e3,userId:"",sessionProperties:{},samplingRate:1,injection:!1,policies:null,extendNatives:!1,builtinEvents:["AmpSession","AmpClick","AmpFocus","AmpScroll"],hooks:!1,eventOptions:null,debugger:!1,blockingDetection:!1,logLevel:"warn"}),"undefined"!=typeof window&&a(u,{key:window.ampConfigKey||""},window.ampConfig||{});var d=c();if(d&&d instanceof HTMLScriptElement){var p=o(d.getAttribute("amp-config"));a(u,p)}if("undefined"!=typeof window&&window.location){var m=l.get("amp-config");m&&(m=o(m))&&a(u,m)}if(u.debugger&&s()){var f=o(localStorage.getItem("AMP_CONFIG"));"object"==(void 0===f?"undefined":n(f))&&a(u,f)}t.exports=u},{"../utils/getCurrentScript":36,"../utils/hasLocalStorage":38,"../utils/merge":45,"../utils/parse":47,"../utils/query":50,"../utils/typeof":59}],5:[function(e,t,r){"use strict";var n=e("../utils/typeof"),i=e("../utils/result"),o=e("../utils/merge"),a=e("./log"),s={OK:{code:0,status:200,message:"ok"},CANCELED:{code:1,status:499,message:"Canceled"},UNKNOWN:{code:2,status:400,message:"Unknown"},INVALID_ARGUMENT:{code:3,status:406,message:"Invalid Argument"},DEADLINE_EXCEEDED:{code:4,status:408,message:"Timed Out"},NOT_FOUND:{code:5,status:404,message:"Resource Not Found"},ALREADY_EXISTS:{status:409,code:6,message:"Already Exists"},PERMISSION_DENIED:{status:403,code:7,message:"Permission Denied"},RESOURCE_EXHAUSTED:{status:429,code:8,message:"Resource no longer available"},FAILED_PRECONDITION:{status:428,code:9,message:"Validation Failed"},ABORTED:{status:444,code:10,message:"Aborted"},OUT_OF_RANGE:{status:416,code:11,message:"Not in Range"},UNIMPLEMENTED:{code:12,status:501,message:"Unimplemented"},INTERNAL:{code:13,status:500,message:"Internal Server Error"},UNAVAILABLE:{code:14,status:503,message:"Not Available"},DATALOSS:{code:15,status:411,message:"Data Corrupted"},UNAUTHORIZED:{status:401,code:16,message:"Not Authorized"}},c=function e(t,r){n(t,"error")?(r=i(r,"object"),r.message=t.message,t=null):n(t,"object")?(r=t,t=null):r=i(r,"object");var c=s.UNKNOWN;r&&(c=r.name?e.get(r.name):r.code?e.get(r.code):r.status?e.get(r.status):e.get(t),r.message&&(c.message=r.message),delete r.name,delete r.code,delete r.status,delete r.message),c.message=n.isEmpty(t)?c.message:t;var l=void 0;if(r.send){delete r.send,l=o(new Error(c.message),c,r);var u={type:"error"};u.data={code:l.code,message:l.message},"undefined"!=typeof window&&window.location&&window.navigator&&o(u.data,{origin:location.origin,pathname:location.pathname,lang:navigator.language,UTCOffset:(new Date).getTimezoneOffset(),userAgent:navigator.userAgent}),o(u,r),a(u,{send:!0})}else l=o(new Error(c.message),c,r);return l},l=Object.keys(s).map(function(e){return s[e]});c.get=function(e){var t=s.UNKNOWN;return n(e,"string")?s[e]||l.filter(function(t){return t.message==e})[0]||t:n(e,"number")?l.filter(function(t){return t.code==e})[0]||l.filter(function(t){return t.status==e})[0]||t:t},t.exports=c},{"../utils/merge":45,"../utils/result":55,"../utils/typeof":59,"./log":9}],6:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils"),o=e("./global"),a=e("./config"),s=e("./error"),c=e("./timing"),l=e("./request"),u=function e(t){if(i.typeof(t,"string"))return i.normalize(t);var r={};return i.typeof(t,"plainobject")&&Object.keys(t).forEach(function(n){var o=t[n],a=n;a=i.normalize(a),i.typeof.isPrimitive(o)?r[a]=i.formatPropertyValue(o,{limit:1024,leftIndicator:!0}):i.typeof(o,"plainobject")?r[a]=e(o):i.typeof(o,"array")&&(r[a]=o.map(function(e){return i.formatPropertyValue(e,{limit:1024,leftIndicator:!0})}).filter(function(e){return null!==e}))}),r},d=function(e,t,r){return r=i.result(r,"array"),i.hashCode(e+t+JSON.stringify(r))};t.exports=function(e,t){var r=(new Date).getTime();e=i.typeof(e,"function")?{}:i.result(e,"object");var p={name:i.normalize(e.name),index:e.index||1,client:{core:o.version,snippet:o.snippetVersion},sessionId:e.sessionId||i.randomString(),userId:e.userId||a.userId,properties:e.properties||{},key:e.key||a.key},m=null,f=a.eventOptions&&a.eventOptions[p.name]||{},g=i.typeof.isEmpty(e.timeout)?a.timeout:e.timeout;if(a.replayDelay&&(g=Math.max(1,g-a.replayDelay)),i.typeof(t,"function")||(g=6e4),t=i.typeof(t,"function")?t:function(){},!p.name||"string"!=typeof p.name){var h=s({name:"INVALID_ARGUMENT",message:"Event Name is Required",key:p.key,sessionId:p.sessionId});return o.trigger("session",i.merge({},p,{error:h})),t(h,p)}if(i.typeof(e.decision,"plainobject")){var v=p.decision={limit:e.decision.limit||1,candidates:e.decision.candidates};if("object"!==n(v.candidates)){var y=s({name:"INVALID_ARGUMENT",message:"Incorrect Candidates Format",key:p.key,sessionId:p.sessionId,send:!0});return o.trigger("session",i.merge({},p,{error:y})),t(y,p)}if(e.decision.indexes&&e.decision.indexes.length&&(v.indexes=e.decision.indexes,v.limit=e.decision.indexes.length),m=v.candidates,i.typeof(v.candidates,"array")&&i.typeof(f.decision,"plainobject")&&f.decision.length)m=v.candidates=v.candidates.slice(0,f.decision.length);else if(i.typeof(v.candidates,"object")){if(i.typeof(f.decision,"plainobject")&&i.typeof(f.decision.values,"plainobject")){var x={},b=f.decision.values;Object.keys(b).forEach(function(e){var t=b[e],r=v.candidates[e];r&&"number"==typeof t&&(1===t?(x[e]=r[0],delete v.candidates[e]):t>1&&(v.candidates[e]=r.slice(0,t)))}),p.properties=p.properties||{},i.merge(p.properties,x)}m=i.combinations(v.candidates),v.candidates=[v.candidates]}if(v.candidates=i.typeof(v.candidates,"array")?v.candidates.map(function(e){return u(e)}):[],!m.length){var _=s({name:"INVALID_ARGUMENT",message:Object.keys(p.decision.candidates).length?"Invalid Candidate Format":"At least one candidate is required to make a decision",key:p.key,sessionId:p.sessionId,send:!0});return o.trigger("session",i.merge({},p,{error:_})),t(_,p)}if(e.decision.ttl){var w=i.typeof(e.cacheKey,"function")?e.cacheKey(v):"si-amp-cached-decision-"+d(p.userId,p.name,p.decision.candidates);if(i.hasLocalStorage())try{var S=JSON.parse(localStorage.getItem(w));S&&S.ts&&S.ts+S.ttl>(new Date).getTime()&&(v.indexes=S.indexes)}catch(h){log(h,{level:"log"})}}v.result=e.decision.limit>=1?m.slice(0,e.decision.limit).map(function(e){return i.merge({},p.properties||{},e)}):i.merge({},p.properties||{},m[0])}if(p.properties&&i.typeof(f.properties,"plainobject")){var A=f.properties;Object.keys(p.properties).forEach(function(e){if(!1===A[e])delete p.properties[e];else if(i.typeof(A[e],"array")&&-1===A[e].indexOf(p.properties[e]))delete p.properties[e];else{if("any"===A[e])return;i.typeof(A[e],"string")&&!i.typeof(p.properties[e],A[e])&&delete p.properties[e]}})}if(i.typeof(f.timeout,"number")&&(g=f.timeout||g),p.properties=u(p.properties),!p.key||"string"!=typeof p.key){var E=s({name:"FAILED_PRECONDITION",message:"Amp key is Required",sessionId:p.sessionId});return o.trigger("session",i.merge({},p,{error:E})),t(E,p)}if(!p.userId){if(!i.hasLocalStorage()){var O=s({name:"FAILED_PRECONDITION",message:"User Id is Required",key:p.key,sessionId:p.sessionId,send:!0});return o.trigger("session",i.merge({},p,{error:O})),t(O,p)}p.userId=localStorage.getItem("si-amp-user-id"),p.userId||(p.userId=i.randomString(24),localStorage.setItem("si-amp-user-id",p.userId))}var k=a.samplingRate;if(k<=0||!p.userId||"number"!=typeof k||Math.abs(i.hashCode(p.userId))%1e3>1e3*k)return o.trigger("request:unallocated",p),p.allocated=!1,t(null,p);var T="a."+(p.decision?"d":"o"),N=c.markStart(T,r,p),M=function(r,n){if(n.request&&n.request.url&&c.addByPerformanceEntryName(T,n.request.url,{name:p.name,sessionId:p.sessionId,userId:p.userId,key:p.key}),p.response=n.response&&n.response.body?n.response.body:{},p.error=r||n.error,p.decision){var l=p.response.indexes||[];p.decision.indexes||(p.decision.indexes=l);var u=m.slice(0),f=[];l.forEach(function(e){f.push(u[e]||{}),u[e]=!1}),f=f.concat(u.filter(function(e){return!!e}));var g=f.slice(0,p.decision.limit||1);if(p.decision.result=e.decision.limit>=1?g.slice(0,e.decision.limit).map(function(e){return i.merge({},p.properties||{},e)}):i.merge({},p.properties||{},g[0]),!p.decision.indexes&&e.decision.ttl&&i.hasLocalStorage()){var h="si-amp-cached-decision-"+d(p.userId,p.name,p.decision.candidates);try{localStorage.setItem(h,JSON.stringify({indexes:l,ttl:e.decision.ttl,ts:(new Date).getTime()}))}catch(r){log(r,{level:"log"})}}}if(N.end(),!0===a.timeout){var v=c.getSummary()[T+".d"];if(v&&v.avg){var y=v.count<100?v.values.sort()[Math.floor(.9*v.values.length)]:1.5*v.avg;a.timeout=Math.max(y,a.timeout,1e3)}}r=p.error?s(p.error,{key:p.key,sessionId:p.sessionId,send:!0}):null,o.trigger("session",i.merge({},p,{error:r})),t(r,p)};if(m&&m.length<=1){M(null,{response:{body:{indexes:[0]}}})}else if(a.mockCoreRequest||e.mockCoreRequest||0===p.key.indexOf("MOCK")||e.random)if(i.typeof(e.mockCoreRequest,"function"))e.mockCoreRequest(p,function(e,t){M(e,{response:{body:t}})});else if(i.typeof(a.mockCoreRequest,"function"))a.mockCoreRequest(p,function(e,t){M(e,{response:{body:t}})});else if(0===p.key.indexOf("MOCK")){var I={};if(p.decision&&p.decision.indexes)I={indexes:p.decision.indexes};else if(p.decision&&m){var C=m.map(function(e,t){return t});(p.key.indexOf("RANDOM")>-1||e.random)&&(C=i.shuffle(C)),p.decision.limit&&(C=C.slice(0,p.decision.limit)),I={indexes:C}}var P=null;if(p.key.indexOf("ERROR")>-1&&(P="Mock Error!"),(p.key.indexOf("TIMEOUT")>-1||requestObject.timeout<=10)&&(P="Timed Out"),p.key.indexOf("DELAY")>-1){var B=parseInt(/DELAY(\d*)/.exec(p.key)[1]);setTimeout(function(){B>g&&(P="Timed Out"),M(P,{response:{body:I}})},B)}else M(P,{response:{body:I}})}else if(e.random&&m&&m.length){var j=i.shuffle(m.map(function(e,t){return t}));p.decision.limit&&(j=j.slice(0,p.decision.limit)),M(null,{response:{body:{indexes:j}}})}else m&&m.length?M(null,{response:{body:{indexes:Object.keys(m)}}}):M(null,{response:{body:null}});else{if(a.policies){var D=i.decide({eventName:p.name,userId:p.userId,candidates:p.decision&&!p.decision.indexes?m:null,limit:p.decision?p.decision.limit:0,policies:a.policies,context:e.session.context});D&&"indexes"in D&&(p.decision.indexes=D.indexes),D&&"ruleIndex"in D&&(p.decision.ruleIndex=D.ruleIndex),D&&"policyId"in D&&(p.policyId=D.policyId)}var L={method:"POST",url:a.domain+a.apiPath+"/"+p.key+"/event",json:p,timeout:g};(p.policyId&&!p.decision||p.decision&&p.decision.indexes)&&!a.debugAsyncDecisionOnly?(l(L),M(null,p.decision?{response:{body:{indexes:p.decision.indexes}}}:{response:{body:{}}})):l(L,M)}}},{"../utils":42,"./config":4,"./error":5,"./global":7,"./request":10,"./timing":11}],7:[function(e,t,r){"use strict";var n=e("../utils"),i=function e(){return e.__run.apply(e,arguments)};i.__run=function(){},i.version="6.7.4",i.snippetVersion="2.5.0",i.session=null,n.Events.mixin(i),t.exports=i},{"../utils":42}],8:[function(e,t,r){"use strict";var n=e("./global"),i=e("../utils"),o=e("./error"),a=e("./config"),s=e("./log"),c=["js","css","html"],l=["now","domReady","elementReady"],u=["eqeqeq","eq","nenene","ne","lt","lte","gt","gte","contains","regex_match"],d=[],p=[],m=function(e){if(this.key=e.key+"",this.path=this.key.split("."),this.path[0]||(this.path=[]),this.operator="eq",i.typeof(e.operator,"string")){var t=e.operator.replace("INJ_OP_","").toLowerCase();u.indexOf(t)>-1&&(this.operator=t)}this.value=e.value};m.prototype={isValid:function(){var e=this.value,t=this.getActual();switch(this.operator){case"lte":return t<=e;case"lt":return t<e;case"gte":return t>=e;case"gt":return t>e;case"nenene":return t!==e;case"ne":return t!=e;case"eqeqeq":return t===e;case"eq":return t==e;case"contains":return(t+"").indexOf(e)>-1;case"regex_match":return new RegExp(e+"").test(t)}return!1},getActual:function(){if(this.path.length)return i.resolvePath(window,this.path)}};var f=function(e,t){var r=this;p.push(this),this.id=p.length,this.tag=t,this.name=e.name||"Trigger "+this.id,this.type=l.indexOf(e.type)>-1?e.type:"now",this.typeDetails=i.typeof(e.typeDetails,"object")?e.typeDetails:{},this.conditions=[],i.typeof(e.conditions,"array")&&(this.conditions=e.conditions.filter(function(e){return i.typeof(e,"object")}).map(function(e){return new m(e,r)}))};f.prototype={setup:function(){var e=this;"now"===this.type?this.run():"domReady"===this.type?i.domReady(function(){return e.run(document.body)}):"elementReady"===this.type&&i.elementReady(this.typeDetails.selector,function(){e.run(document.body)})},run:function(e){this.isValid()&&(n.trigger("injection:triggered",this.tag,this),this.tag.run(e))},isValid:function(){return this.conditions.every(function(e){return e.isValid()})}};var g=function(e){var t=this;d.push(this),this.id=d.length,
this.name=e.name||"Tag "+this.id,this.type=e.type&&c.indexOf(e.type)>-1?e.type:"html",this.content=e.content+"",this.triggers=[],i.typeof(e.triggers,"array")&&(this.triggers=e.triggers.filter(function(e){return i.typeof(e,"object")}).map(function(e){return new f(e,t)})),this.triggers.length||this.triggers.push(new f({},this)),n.trigger("injection:created",this),this.triggers.forEach(function(e){return e.setup()})};g.prototype={run:function(e){switch(this.type){case"js":return this._evaluateScript();case"css":return this._includeStylesheet(e);case"html":return this._appendHtml(e)}},_evaluateScript:function(){try{new Function("return function (amp) {\n\n"+this.content+"\n\n}; //# sourceURL=amp-injection-"+this.id+".js")().call(window,n)}catch(e){e=o("DATALOSS","Unable to evaluate injection script: "+e,{key:a.key}),s(e,{level:"critical"})}},_includeStylesheet:function(e){if("undefined"!=typeof document){e=e||document.getElementsByTagName("head")[0]||document.documentElement;var t=document.createElement("style");t.type="text/css",t.styleSheet&&t.styleSheet.cssText?t.styleSheet.cssText=this.content:t.appendChild(document.createTextNode(this.content)),e.appendChild(t)}},_appendHtml:function(e){if("undefined"!=typeof document){e=e||document.body||document.documentElement;var t=document.createElement("div");t.className="amp-injection amp-injection-"+this.id,t.innerHTML=this.content,e.appendChild(t)}}};var h={Tag:g,Trigger:f,Condition:m,version:!1,add:function(e,t){if(2!==arguments.length||t===h.version)return i.typeof(e,"array")?e.forEach(function(e){return h.add(e)}):i.typeof(e,"object")?new g(e):void 0},list:function(){return d}};t.exports=h},{"../utils":42,"./config":4,"./error":5,"./global":7,"./log":9}],9:[function(e,t,r){"use strict";var n=e("../utils/typeof"),i=e("./config"),o=e("./global"),a=e("../utils/result"),s=e("../utils/merge"),c=e("../utils/debounce"),l=e("../utils/hasLocalStorage"),u=e("../utils/hashCode"),d=void 0,p=[],m=function(e,t){if(0!==arguments.length){if(t=a(t,"object"),n(e,"string")?t.message=e:n(e,"error")?t.message=s(e,{type:"error",message:t.message}):n(e,"object")&&1===arguments.length&&e.message?t=e:t.message=e,i.logLevel===t.level||"debug"===i.logLevel){var r=n(console[t.level],"function")?t.level:"log";console[r](t.message)}t.send&&f(t.message)}},f=c(function(){if(p.length&&!i.mockCoreRequest){if(!i.key)return m({message:"No Key Found!",entries:p,level:"warn"});var t=i.userId;!t&&l()&&(t=localStorage.getItem("si-amp-user-id"));var r=i.samplingRate;if(r<=0||!t||"number"!=typeof r||Math.abs(u(t))%1e3>1e3*r)return void o.trigger("logRequest:unallocated",{key:i.key,entries:p});d=e("./request"),d({method:"POST",url:i.domain+i.apiPath+"/"+i.key+"/log",json:{entries:p}}),o.trigger("logRequest",{key:i.key,entries:p}),p=[]}},{delay:5e3,max:3e4,every:function(e){p.push(e)}});t.exports=m},{"../utils/debounce":28,"../utils/hasLocalStorage":38,"../utils/hashCode":40,"../utils/merge":45,"../utils/result":55,"../utils/typeof":59,"./config":4,"./global":7,"./request":10}],10:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./global"),o=e("./config"),a=e("./error"),s=e("./log"),c={pending:1,request:2,success:3,fail:4},l="method url async mode body json timeout headers".split(" "),u=0,d=function(e,t){var r=this;e=n.result(e,"object"),n.merge(this,{id:++u,status:c.pending,createdTimestamp:(new Date).getTime(),completedTimestamp:null,request:{method:"POST",url:"",async:!0,mode:"ajax",json:{},body:"",timeout:o.timeout||1e3,headers:{"Content-Type":"text/plain",accept:"application/json"}},response:null,error:null,callback:t||function(){},doneQueue:[]}),l.forEach(function(t){t in e&&(r.request[t]=e[t])}),"sync"==this.request.mode&&(this.request.mode="ajax",this.request.async=!1),"undefined"==typeof window&&(this.request.mode="server"),this.request.body=this.request.body||JSON.stringify(this.request.json),"get"===this.request.method.toLowerCase()&&delete this.request.body,this.request.url=this._appendQuery(this.request.url,{ts:(new Date).getTime()})};d.prototype={send:function(){var e=this;if(this.status==c.pending){n.typeof.isEmpty(this.request.timeout)||this.timeout||(this.timeoutStart=(new Date).getTime(),this.timeout=n.setTimeout(function(t,r,n){t===e.timeout.TIMEOUT?e.status==c.request?setTimeout(function(){return e._complete(a({message:"Timed Out"}),r,n)},1):e._complete(a({message:"Timed Out"}),r,n):(e.request.timeout+=e.timeout.blocking||0,e._complete(t,r,n))},this.request.timeout,{ignoreThreadBlocking:!o.blockingDetection})),this.status=c.request,i.trigger("request",this);try{return o.request?o.request(this.request,this.timeout.run):this._sendXHR()}catch(e){s(e,{level:"verbose"}),this.timeout.run(a(e))}}},done:function(e){return this.status===c.success?e.call(this,null,this):this.status===c.fail?e.call(this,this.error||"Failed",this):this.doneQueue.push(e),this},_sendXHR:function(){var e=this,t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(t.open(this.request.method,this.request.url,this.request.async),t.onreadystatechange=function(){if(4===t.readyState)if(t.status>=300||t.status<200)try{var r=JSON.parse(t.responseText),i=n.merge({status:t.status},r.error?r.error:r);i.message=i.message||(r.error?r.error.toString():r+""),e.timeout.run(a(i))}catch(r){s(r,{level:"verbose"}),e.timeout.run(a({status:t.status,message:t.responseText}),t)}else try{e.timeout.run(null,t,JSON.parse(t.responseText))}catch(r){s(r,{level:"verbose"}),e.timeout.run(a({code:15,message:"Unable to parse response"}),t)}},this.request.headers)for(var r in this.request.headers)t.setRequestHeader(r,this.request.headers[r]);return t.onerror=function(){return e.timeout.run(a({message:"Request Error"}),t)},t.send(this.request.body),t},_complete:function(e,t,r){this.status!=c.success&&this.status!=c.fail&&(t=n.result(t,"object"),t.body=r,!e&&t&&t.status>=300&&(e=a(n.merge({message:"Not OK",status:t.status},e))),!e&&this.request.timeout&&this.request.timeout<(new Date).getTime()-this.timeoutStart&&(e=a({message:"Timed Out"})),this.completedTimestamp=(new Date).getTime(),this.response=t,this.body=r,this.error=e,this._setStatus(e?c.fail:c.success),this.callback(e,this),i.trigger("response",this,t,e))},_appendQuery:function(e,t){return t=t||{},e+(e.indexOf("?")>=0?"&":"?")+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},_setStatus:function(e){var t=this;this.status=e,this.status===c.fail?(this.doneQueue.forEach(function(e){return e.call(t,t.error||"Failed",t)}),this.doneQueue=[]):this.status===c.success&&(this.doneQueue.forEach(function(e){return e.call(t,null,t)}),this.doneQueue=[])}},t.exports=function(e,t,r){var n=new d(e,t);return!1!==r&&n.send(),n}},{"../utils":42,"./config":4,"./error":5,"./global":7,"./log":9}],11:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./global"),o=e("./log"),a={"cdn.mxpnl.com/libs/mixpanel":"m","cdn.optimizely.com/js/":"o","www.google-analytics.com/analytics.js":"ga","cdn.segment.com/analytics.js":"s","amp.ai/libs":"a"},s=[],c=n.hasTiming(),l=function(){if(a)try{var e=Object.keys(a);if(!e.length)return void(a=null);window.performance.getEntriesByType("resource").forEach(function(t){if("script"==t.initiatorType.toLowerCase())for(var r=0;r<e.length;r++)if(t.name.indexOf(e[r])>=0)return u("l."+a[e[r]],t),delete a[e[r]],void e.splice(r,1)})}catch(e){o(e,{level:"verbose"})}},u=function(e,t,r){t=t||{},f(e+".ns",t.startTime||0,r),f(e+".nd",t.duration||0,r),t.transferSize&&(f(e+".nds",t.requestStart-t.fetchStart,r),f(e+".ndw",t.responseStart-t.requestStart,r),f(e+".ndd",t.responseEnd-t.responseStart,r))},d=function(e,t,r){if(!c)return!1;try{var n=window.performance.getEntriesByName(t);return n&&n.length>0&&u(e,n[0],r),l(),!0}catch(e){o(e,{level:"verbose"})}return!1},p=function(){var e={};return s.forEach(function(t){e[t.name]||(e[t.name]={count:0,min:t.value,max:t.value,avg:0,sum:0,values:[]}),e[t.name].count++,e[t.name].min=e[t.name].min>t.value?t.value:e[t.name].min,e[t.name].max=e[t.name].max<t.value?t.value:e[t.name].max,e[t.name].sum+=t.value,e[t.name].values.push(t.value),e[t.name].avg=e[t.name].sum/e[t.name].count}),e},m=function(){return s},f=function(e,t,r){if(r=r||{},e&&"string"==typeof e&&!isNaN(parseFloat(t))&&isFinite(t)&&!(t<0)){t=Math.floor(100*t)/100,s.push({name:e,value:t,details:r});var n={type:"metric"};["sessionId","userId","index","name"].forEach(function(e){r[e]&&(n[e]=r[e])}),n.data={name:e,value:t},o(n,{send:!0}),i.trigger("timing",e,t,r)}},g=function(e,t,r){if(c){(t<=0||!n.typeof(t,"number"))&&(r=r||t||{},t=(new Date).getTime());var i=t-window.performance.timing.fetchStart;if(!(!i||isNaN(parseFloat(i))||!isFinite(i)||i<0||i>36e5))return f(e,i,r),t}},h=function(e,t,r){return c?("number"!=typeof t&&(r=r||t||{},t=(new Date).getTime()),g(e+".s",t,r),{end:function(){f(e+".d",(new Date).getTime()-t,r),g(e+".e",r)}}):{end:function(){}}};if(c)try{var v=window.performance.timing,y=v.fetchStart;y&&v.responseEnd&&f("p.dom.s",v.responseEnd-y),n.domReady(function(){(v.domComplete||v.domContentLoadedEventStart)&&v.responseEnd&&f("p.dom.d",(v.domComplete||v.domContentLoadedEventStart)-v.responseEnd)}),i.ts.snippet&&y&&f("l.as.s",i.ts.snippet-y),l()}catch(e){o(e,{level:"verbose"})}t.exports={storage:s,timingEnabled:c,addByPerformanceEntryName:d,mark:g,add:f,getAll:m,getSummary:p,markStart:h,addPerformanceEntry:u,checkLibs:l}},{"../utils":42,"./global":7,"./log":9}],12:[function(e,t,r){"use strict";var n=e("./log");t.exports=function(e,t){if(0!==arguments.length){var r={};r.send=Boolean(t),r.message=e,r.level="warn",n(r)}}},{"./log":9}],13:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../core/global"),o=function(e){if(!n.typeof(e,"plainobject"))return!1;var t={t:"eventName",dl:"link",ul:"lang",de:"encode",dt:"title",sr:"screenSize",vp:"windowSize",fl:"flash"},r={};return Object.keys(e).forEach(function(n){t[n]&&(r[t[n]]=e[n])}),r},a=function(e){if("img"==e.initiatorType&&/google-analytics.com(.*)collect/.test(e.name)){var t=o(n.query.getAll(e.name));if(t){var r=t.eventName;delete t.eventName,t.source="ga",r&&i.observe(r,t)}}},s=function e(t){return t=void 0===t?1e3:t,n.poll(e.polling,t)},c=0;s.polling=function(){if(!n.hasTiming())return!1;for(var e=performance.getEntries(),t=e.length;c<t;)a(e[c++]);return!0},t.exports=s},{"../core/global":7,"../utils":42}],14:[function(e,t,r){"use strict";var n=e("../core/config"),i=e("../utils"),o={ga:e("./ga"),optimizely:e("./optimizely"),segment:e("./segment")};t.exports=function(e){if(!1===(e=e||n.hooks))return!1;if(i.typeof(e,"string")&&(e=[e]),i.typeof(e,"array")){var t=e;e={},t.forEach(function(t){e[t]=!0})}if(!i.typeof(e,"boolean")&&!i.typeof(e,"object"))return!1;Object.keys(o).forEach(function(t){(!0===e||!0===e[t]||e[t]&&e[t].enabled)&&o[t](e&&e[t]&&e[t].interval)})}},{"../core/config":4,"../utils":42,"./ga":13,"./optimizely":15,"./segment":16}],15:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../core/global"),o=void 0,a=function e(t){return t=void 0===t?1e3:t,n.poll(e.polling,t)},s=function(e){if("xmlhttprequest"==e.initiatorType&&/optimizely.com\/event\?/.test(e.name)){var t=n.query.getAll(e.name);if(!t||!t.n)return;var r=t.n,o={};o.source="optimizely",r&&0!==r.indexOf("http")&&i.observe(r,o)}},c={};a.checkDecide=function(){try{if("undefined"!=typeof window&&window.optimizely&&window.optimizely.variationIdsMap){var e=window.optimizely;if(o||(o=e.data&&e.data.visitor,n.typeof(o,"object")&&i.observe("optimizelyContext",o)),Object.keys(e.variationIdsMap)===Object.keys(c))return;Object.keys(e.variationIdsMap).forEach(function(t){var r=e.variationIdsMap[t];if(r&&r.length&&e.allExperiments&&e.allExperiments[t]){var n=e.allExperiments[t];if(n.name&&n.variation_ids&&n.variation_ids.length){var o=(n.name+"").replace(/[^a-zA-Z0-9_-]*/g,"")||n.id+"";if(!c[o]){var a=r.map(function(t){var r=e.allVariations&&e.allVariations[t]?e.allVariations[t]:null;if(r&&r.name)return{variant:r.name}});n.variation_ids.forEach(function(t){var n=e.allVariations&&e.allVariations[t]?e.allVariations[t]:null;r.indexOf(t)>=0||!n||!n.name||a.push({variant:n.name})});for(var s=[],l=0;l<r.length;l++)s[l]=l;i.decide("Optimizely-"+o,a,{limit:s.length,indexes:s}),c[o]=!0}}}})}}catch(e){}};var l=0;a.polling=function(){if(a.checkDecide(),!n.hasTiming())return!1;for(var e=performance.getEntries(),t=e.length;l<t;)s(e[l++]);return!0},t.exports=a},{"../core/global":7,"../utils":42}],16:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../core/global"),o=function e(){return n.poll("segment",e.polling,{interval:1e3,maxCount:3})},a=null,s=0;o.polling=function(){return"undefined"!=typeof window&&(!(s>=2)&&void(a!==window.analytics.track&&(a=n.hijack(window.analytics,"track",null,function(){s++;var e=arguments[0],t=arguments[1]||{};n.typeof(t,"object")||(t={}),t.source="segment",i.observe(e,t)}))))},t.exports=o},{"../core/global":7,"../utils":42}],17:[function(e,t,r){"use strict";var n=e("../core/global"),i=e("../core/Session"),o=e("../core/config"),a=e("../core/error"),s=e("../core/warn");t.exports=function(e){if(n.session)return n.session.decide.apply(n.session,arguments);if(!o.autoSession)return s(a({message:"Please create session before any events!"}));var t=arguments;return n.session=new i(function(e,r){r.decide.apply(r,t)}),n.session}},{"../core/Session":2,"../core/config":4,"../core/error":5,"../core/global":7,"../core/warn":12}],18:[function(e,t,r){"use strict";t.exports={config:e("../core/config"),error:e("../core/error"),log:e("../core/log"),warn:e("../core/warn"),utils:e("../utils"),timing:e("../core/timing"),mark:e("./mark"),event:e("../core/event"),request:e("../core/request"),builtinEvents:e("../core/builtinEvents"),Session:e("../core/Session"),decide:e("./decide"),observe:e("./observe"),ready:e("./ready"),init:e("./init"),inject:e("./inject"),injections:e("../core/injections"),hooks:e("../hooks")}},{"../core/Session":2,"../core/builtinEvents":3,"../core/config":4,"../core/error":5,"../core/event":6,"../core/injections":8,"../core/log":9,"../core/request":10,"../core/timing":11,"../core/warn":12,"../hooks":14,"../utils":42,"./decide":17,"./init":19,"./inject":20,"./mark":21,"./observe":22,"./ready":23}],19:[function(e,t,r){"use strict";var n=e("../core/global"),i=e("../core/config"),o=e("../core/Session"),a=e("../core/error"),s=e("../utils"),c="si-amp-last-global-session-",l=!1;t.exports=function(e){if(s.typeof(e,"string")&&(e={key:e}),!l||!e||e.forceInit){e&&e.forceInit&&delete e.forceInit,l=!0,s.typeof(e,"object")&&s.merge(i,e),s.isBot()&&(i.samplingRate=0,a({name:"FAILED_PRECONDITION",message:"Bot Detected",key:i.key,send:!0}));var t=arguments[arguments.length-1],r=s.typeof(t,"function")?t:function(){};if(i.autoSession){var u=void 0;i.sessionTTL>0&&s.hasLocalStorage()?(u=new o({resumeFrom:localStorage.getItem(c+i.key)},function(e,t,i){n.session=t,r(e,t,i)}),localStorage.setItem(c+i.key,u.serialize()),u.on("change",function(){s.hasLocalStorage()&&localStorage.setItem(c+i.key,u.serialize())})):(u=new o(function(e,t,i){n.session=t,r(e,t,i)}),s.hasLocalStorage()&&localStorage.removeItem(c+i.key)),n.session=u}else r();if(n.trigger("init"),!i.extendNatives||!Object.defineProperty||Object.prototype.decide||Array.prototype.decide||Object.prototype.observe?i.extendNatives||(delete Object.prototype.decide,delete Object.prototype.observe,delete Array.prototype.decide):(Object.defineProperty(Object.prototype,"decide",{value:function(e,t,r){var i=Array.prototype.slice.call(arguments);i.splice(1,0,this),n.session.decide.apply(n.session,i)}}),Object.defineProperty(Array.prototype,"decide",{value:function(e,t,r){var i=Array.prototype.slice.call(arguments);i.splice(1,0,this),n.session.decide.apply(n.session,i)}}),Object.defineProperty(Object.prototype,"observe",{value:function(e,t,r){var i=Array.prototype.slice.call(arguments);i.splice(1,0,this),n.session.observe.apply(n.session,i)}})),!0===n.config.timeout&&"undefined"!=typeof window)if(window.amp&&window.amp.ts&&window.amp.ts.snippet)n.config.timeout=Math.max((new Date).getTime()-window.amp.ts.snippet,n.config.timeout,MIN_TIMEOUT);else if(window.performance){var d=n.utils.getCurrentScript();if(d){var p=performance.getEntriesByName(d.src)[0];p&&(n.config.timeout=Math.max(p.duration,n.config.timeout,MIN_TIMEOUT))}}}}},{"../core/Session":2,"../core/config":4,"../core/error":5,"../core/global":7,"../utils":42}],20:[function(e,t,r){"use strict";var n=e("../core/injections");t.exports=function(){return n.add.apply(n,arguments)}},{"../core/injections":8}],21:[function(e,t,r){"use strict";var n=e("../core/timing");t.exports=function(){return n.mark.apply(n,arguments)}},{"../core/timing":11}],22:[function(e,t,r){"use strict";var n=e("../core/global"),i=e("../core/Session"),o=e("../core/config"),a=e("../core/error"),s=e("../core/warn");t.exports=function(e){if(n.session)return n.session.observe.apply(n.session,arguments);if(!o.autoSession)return s(a({message:"Please create session before any events!"}));var t=arguments;return n.session=new i(function(e,r){r.observe.apply(r,t)}),n.session}},{"../core/Session":2,"../core/config":4,"../core/error":5,"../core/global":7,"../core/warn":12}],23:[function(e,t,r){"use strict";var n=e("../amp");t.exports=function(e){"function"==typeof e&&e.apply(n)}},{"../amp":1}],24:[function(e,t,r){"use strict";var n=e("./typeof"),i=function(e,t,r,i){if(!r)return!0;if(n(r,"object")){for(var o in r)e[t].apply(e,[o,r[o]].concat(i));return!1}if(/\s+/.test(r)){for(var a=r.split(/\s+/),s=0,c=a.length;s<c;s++)e[t].apply(e,[a[s]].concat(i));return!1}return!0},o=function(e,t){e.forEach(function(e){return e.callback.apply(e.ctx,t)})};t.exports={on:function(e,t,r){return i(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!i(this,"once",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]),o=this,a=function(){o.off(e),t.apply(this,arguments)};return n.push({callback:a,context:r,ctx:r||this}),this},off:function(e,t,r){if(!this._events||!i(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(var n=e?[e]:Object.keys(this._events),o=0,a=n.length;o<a;o++){var s=n[o],c=this._events[s];if(c){if(this._events[s]=[],t||r)for(var l=0,u=c.length;l<u;l++){var d=c[l];(t&&t!==d.callback||r&&r!==d.context)&&this._events[s].push(d)}this._events[s].length||delete this._events[s]}}return this},trigger:function(e){if(!e||!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!i(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&o(r,t),n&&o(n,arguments),this},mixin:function(e){var t=this;return e?(["on","off","once","trigger"].forEach(function(r){e[r]=t[r]}),e):this}}},{"./typeof":59}],25:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e,t,r){if(null!=e&&t&&n(t,"string"))return e.addEventListener?(e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}}):e.attachEvent?(e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}):void 0}},{"./typeof":59}],26:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=e("./typeof"),o=e("./merge");t.exports=function(e){if(!i(e,"Object"))return[];var t=Object.keys(e);if(!t.length)return[];var r=[];t=t.sort().reverse();for(;t.length;)!function(){var a=t.pop(),s=e[a];i(s,"Array")&&s.length&&(r=0===r.length?s.map(function(e){return n({},a,e)}):r.map(function(e){return s.map(function(t){return o(n({},a,t),e)})}).reduce(function(e,t){return e.concat(t)},[]))}();return r}},{"./merge":45,"./typeof":59}],27:[function(e,t,r){"use strict";var n=function(){};t.exports=function(e){if(Object.create)return Object.create(e);if(null!==e&&e!==Object(e))throw TypeError("Argument must be an object, or null");n.prototype=e||{};var t=new n;return n.prototype=null,null===e&&(t.__proto__=null),t}},{}],28:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e,t){t=t||{},n(t,"number")&&(t={delay:t}),t.max=t.max||null,t.every=t.every||null,t.immediate=t.immediate||!1;var r=void 0,i=void 0;n.isEmpty(t.delay)&&(t.delay=1e3);var o=function(t,r){i=null,e.apply(t,r)},a=function(){var e=this,a=arguments;if(clearTimeout(r),n(t.every,"function")&&t.every.apply(this,arguments),t.immediate||t.max&&i&&i+t.max<=(new Date).getTime())o(this,arguments);else{i||(i=(new Date).getTime());var s=t.max?Math.min(t.max+i-(new Date).getTime(),t.delay):t.delay;r=setTimeout(function(){o(e,a)},s)}};return a.clear=function(){r&&(clearTimeout(r),r=null)},a.run=o,a}},{"./typeof":59}],29:[function(e,t,r){"use strict";function n(e){var t=e.candidates,r=e.limit,n=t.map(function(e,t){return t});return r&&(n=n.slice(0,r)),n}var i=e("./rendezvousHash"),o=e("./expressions"),a=e("./shuffle"),s=e("./randomFloat");e("./merge");t.exports=function(e){var t={},r={};e.policies.forEach(function(e){t[e.id]=e,r[e.id]=e.allocation});var c=i(e.userId,r),l=t[c];if(c){if(!e.candidates||!e.candidates.length)return{policyId:c};if("RANDOM"===l.type||l.percentRandom>0&&l.percentRandom>=s()){var u=a(e.candidates.map(function(e,t){return t}));return e.limit&&(u=u.slice(0,e.limit)),{policyId:c,indexes:u,ruleIndex:-1}}if("BEST"===l.type)return{policyId:c};if("DEFAULT"===l.type||!l.rules||!l.rules[e.eventName])return{policyId:c,indexes:n(e)};for(var d=l.rules[e.eventName],p=d.length,m=0;m<d.length;m++)if(d[m]&&d[m].context&&d[m].ranking&&o.evaluate(d[m].context,e.context)){p=m;break}if(p===d.length)return{policyId:c,indexes:n(e),ruleIndex:p};var f=[],g=d[p].ranking,h=e.candidates.map(function(){return!1});return g.forEach(function(t){e.limit&&f.length>=e.limit||h.forEach(function(r,n){r||e.limit&&f.length>=e.limit||o.evaluate(t,[{name:e.eventName,properties:e.candidates[n]}])&&(h[n]=!0,f.push(n))})}),h.forEach(function(e,t){e||f.push(t)}),e.limit&&(f=f.slice(0,e.limit)),{policyId:c,indexes:f,ruleIndex:p}}}},{"./expressions":34,"./merge":45,"./randomFloat":51,"./rendezvousHash":53,"./shuffle":57}],30:[function(e,t,r){"use strict";var n=e("./merge");t.exports=n.bind(null,!0)},{"./merge":45}],31:[function(e,t,r){"use strict";var n=e("./poll"),i=e("./typeof"),o=n.POLLING_TIME,a={blockers:[],running:!1,add:function(e){return a.blockers.push(e),!0},remove:function(e){var t=a.blockers.indexOf(e);return t>=0&&a.blockers.splice(t,1),-1!==t},run:function(e){a.blockers.length&&!a.running&&(a.running=!0,a.blockers.forEach(function(t){try{t.run(e)}catch(e){console.log(e)}}),a.running=!1)}},s=function(e,t,r){this.name=e,this.fn=t,this.timer=r,this.poll=r,this.count=0,this.stopped=!1,this.added=a.add(this)};s.prototype={status:function(){return Boolean(this.stopped)?"active":"stopped"},start:function(){this.stopped=!1},getLength:function(){return a.blockers.length},stop:function(){this.stopped=!0},remove:function(){a.remove(this)},destroy:function(){a.remove(this)},run:function(e){var t=this.fn(e);this.count++,!1===t&&this.destroy()}};var c=null,l=function(e,t){if(i(e,"function")&&(t=e,e=t.name||"UNKNOWN @ "+(new Date).getTime()),!i(t,"function"))return!1;if(!c){var r=(new Date).getTime(),l=0;c=n("detectBlocking",function(){l++;var e=Math.floor(((new Date).getTime()-r)/o)+1;if(e-l>1){var t=(e-l)*o;a.run(t),l=0,r=(new Date).getTime()}},o)}return new s(e,t,c)};l.add=l,l.queue=a,l.stopAll=function(){a.blockers.forEach(function(e){return e.stopped=!0})},l.removeAll=function(){a.blockers.length=0},l.startAll=function(){a.blockers.forEach(function(e){return e.stopped=!1}),a.run()},t.exports=l},{"./poll":49,"./typeof":59}],32:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./hasDom"),o=e("./addEvent"),a=!1,s=!1,c=[],l=function(){a=!0,c.forEach(function(e){return e.fn.call(e.context)}),c=[]};t.exports=function(e,t){return!!n(e,"function")&&(i()?(document&&"complete"===document.readyState&&(a=!0),a?e.call(t):(s||(s=!0,o(document,"DOMContentLoaded",l),o(window,"load",l),document.addEventListener||document.attachEvent("onreadystatechange",function(){document&&"complete"===document.readyState&&l()})),void c.push({fn:e,context:t}))):e.call(t))}},{"./addEvent":25,"./hasDom":37,"./typeof":59}],33:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./hasDom"),o=void 0;"undefined"!=typeof window&&null!==window&&(o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),o||(o=function(e){setTimeout(e,1)});var a={},s=!1,c=0,l=function e(){if(s=!0,c=0,Object.keys(a).forEach(function(e){var t=a[e];if(!t.element)try{t.element=document.querySelector(e),t.element?(t.queue.forEach(function(e,r){return e.call(t.contextQueue[r],null,t.element)}),t.queue=[],t.contextQueue=[]):c++}catch(e){}}),s=!1,c)return o(e)};t.exports=function(e,t,r){return!!n(t,"function")&&(i()?n(e,"string")?void(a[e]&&a[e].element?t.call(r,null,a[e].element):(a[e]=a[e]||{queue:[],contextQueue:[]},a[e].contextQueue.push(r),a[e].queue.push(t),c++,s||l())):t.call(r,new Error("Invalid Selector")):t.call(r,new Error("No Dom!")))}},{"./hasDom":37,"./typeof":59}],34:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./userAgent"),o=e("./merge"),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],c=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,l={NONE:function(e){return e},ANNIHILATE:function(){},ROUND:function(e){return n(e,"number")?Math.round(e):null},FLOOR:function(e){return n(e,"number")?Math.floor(e):null},CEILING:function(e){return n(e,"number")?Math.ceiling(e):null},PERCENTAGE:function(e){return n(e,"number")?100*e:null},LOG2:function(e){return n(e,"number")?Math.log2(e):null},LOG10:function(e){return n(e,"number")?Math.log(e):null},STRING:function(e){return e+""},DISCRETISE:function(e){return(n(e,"number")?Math.round(e):e)+""},LOWERCASE:function(e){return(e+"").toLowerCase()},UPPERCASE:function(e){return(e+"").toUpperCase()},TRIM:function(e){return(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},CONTAINS:function(e,t){return(e+"").indexOf(t)>-1},STARTS_WITH:function(e,t){return-1===(e+"").indexOf(t)},ENDS_WITH:function(e,t){return(e+"").indexOf(t)===e.length-t.length},CONCAT:function(){return[].slice.call(arguments,0).map(function(e){return e+""}).join("")},DAY_OF_WEEK:function(e){return n(e,"number")?a[new Date(e).getDay()]:null},IS_WEEKEND:function(e){return n(e,"number")?new Date(e).getDay()%6==0:null},IS_NIGHT:function(e){return n(e,"number")?1!==Math.floor((new Date(e).getHours()+6)/12):null},MONTH:function(e){return n(e,"number")?s[new Date(e).getMonth()]:null},DAY:function(e){return n(e,"number")?new Date(e).getDay()+1:null},YEAR:function(e){return n(e,"number")?new Date(e).getFullYear()+1:null},BROWSER_NAME:function(e){return i(e).ua.family},BROWSER_MAJOR:function(e){return i(e).ua.major},BROWSER_VERSION:function(e){return i(e).ua.toVersionString()},BROWSER_NAME_VERSION:function(e){return i(e).ua.toString()},OS_NAME:function(e){return i(e).os.family},OS_VERSION:function(e){return i(e).os.toVersionString()},OS_NAME_VERSION:function(e){return i(e).os.toString()},DEVICE_FAMILY:function(e){return i(e).device.family},EXTRACT_HOST:function(e){return c.exec(e+"")[11]},EXTRACT_PATH:function(e){return c.exec(e+"")[13]},EXTRACT_SCHEME:function(e){return(c.exec(e+"")[4]+"").replace(":","")},EXTRACT_QUERY:function(e){return(c.exec(e+"")[16]+"").replace("?","")},EXTRACT_FRAGMENT:function(e){return(c.exec(e+"")[17]+"").replace("#","")},GET_NTH_DOMPATH_ELEMENT:function(e,t){return(e+"").split(">")[t]},IS_CLASS:function(e,t){return(e+"").split(" ").indexOf(t)>=0}},u={ANY:function(e){return e[Math.floor(e.length*Math.random())]},FIRST:function(e){return e.length?e[0]:null},LAST:function(e){return e.length?e[e.length-1]:null},MIN:function(e){var t=e.reduce(function(e,t){return n(t,"number")?null===e?t:Math.min(e,t):e},null);return isFinite(t)?t:null},MAX:function(e){var t=e.reduce(function(e,t){return n(t,"number")?null===e?t:Math.max(e,t):e},null);return isFinite(t)?t:null},SUM:function(e){return e.reduce(function(e,t){return n(t,"number")?e+t:e},0)},AVG:function(e){var t=0,r=e.reduce(function(e,r){return n(r,"number")&&(t++,e+=r),e},0);return t>0?r/t:null},COUNT:function(e){return e.length}},d={NOP:function(e){return e},ADD:function(e,t){return n(e,"number")&&n(t,"number")?e+t:null},SUB:function(e,t){return n(e,"number")&&n(t,"number")?e-t:null},MUL:function(e,t){return n(e,"number")&&n(t,"number")?e*t:null},DIV:function(e,t){return n(e,"number")&&n(t,"number")?e/t:null},EQ:function(e,t){return e===t},NEQ:function(e,t){return e!==t},GT:function(e,t){return n(e,"number")&&n(t,"number")?e>t:null},GTE:function(e,t){return n(e,"number")&&n(t,"number")?e>=t:null},LT:function(e,t){return n(e,"number")&&n(t,"number")?e<t:null},LTE:function(e,t){return n(e,"number")&&n(t,"number")?e<=t:null},AND:function(e,t){return!!e&&!!t},OR:function(e,t){return!!e||!!t},NOT:function(e){return!e}},p=function(e){e=e||{},this.expression=e.expression||{},this.context=e.context||[],this.events=this.extractEvents(this.context),this.transformations=e.transformations||{},this.reducers=e.reducers||{},this.operators=e.operators||{}};p.prototype={extractEvents:function(e){var t={},r=function e(r,i,o){o=o?o+".":"",n(i,"plainobject")&&Object.keys(i).forEach(function(a){var s=i[a];if(a=o+a,n(s,"plainobject"))return e(r,s,a);a in t[r]||(t[r][a]=[]),t[r][a].push(s)})};return e.forEach(function(e){e.name&&(e.name in t||(t[e.name]={}),e.properties&&r(e.name,e.properties),e.decision&&e.decision.result&&(n(e.decision.result,"array")?e.decision.result.forEach(function(t){return r(e.name,t)}):r(e.name,e.decision.result)))}),t},evaluate:function(e){var t=this;e=e||this.expression||{};var r=void 0;if(void 0!==e.constant)r=e.constant;else if(e.reduction){var i=e.reduction.event,o=e.reduction.property,a=e.reduction.reducer;if(this.events[i]&&this.events[i][o]&&this.events[i][o].length){var s=this.reducers[a]||u[a];n(s,"function")&&(r=s.call(this,this.events[i][o]))}}else if(e.left&&e.op){var c=e.left?this.evaluate(e.left):null,p=e.right?this.evaluate(e.right):null,m=this.operators[e.op]||d[e.op];n(m,"function")&&(r=m.call(this,c,p))}if(void 0!==r&&null!==r&&e.f){var f=this.transformations[e.f]||l[e.f];if(n(f,"function")){var g=[],h=e.parameters;h&&h.length&&(g=h.map(function(e){return e?t.evaluate(e):null})),g.unshift(r),r=f.apply(this,g)}}return r}},t.exports={Expression:p,transformations:l,reducers:u,operators:d,evaluate:function(e,t,r){return new p(o({},r,{expression:e,context:t})).evaluate()}}},{"./merge":45,"./typeof":59,"./userAgent":60}],35:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e,t,r){var i=null;if(n(t,"object")&&(r=t,t=r.limit),r=r||{},n.isPrimitive(e))if(0===t)i="";else if(t)if(n(e,"string")&&e.length>t){var o=e.length,a=o-t+"";if(t<=3)i=e.substr(0,t);else if(t<11||!r.leftIndicator)i=e.substr(0,t-3)+"...";else{var s=e.length,c=Math.floor((t-8-a.length)/2);c<0&&(c=1);var l=t-c-a.length-8;l<0&&(l=1),i=e.substr(0,c)+"...<"+(s-c-l)+">..."+e.substr(s-l+1,s)}}else i=e;else i=e;return i}},{"./typeof":59}],36:[function(e,t,r){"use strict";var n=(e("./typeof"),e("./hasDom"));t.exports=function(){if(n()){if(document.currentScript)return document.currentScript;var e=document.getElementsByTagName("script");if(!(e&&e.length<1))return e[e.length-1]}}},{"./hasDom":37,"./typeof":59}],37:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(){if("undefined"!=typeof document&&document&&n(document.createElement,"function")){var e=document.createElement("div");if(!e)return!1;if(n(e.querySelector,"function")){e.innerHTML="<i></i>";var t=e.querySelector("i");return!!t&&"I"===t.tagName
}if(n(e.getElementsByTagName,"function")){var r=e.getElementsByTagName("i");return!!r&&1===r.length}}return!1}},{"./typeof":59}],38:[function(e,t,r){"use strict";t.exports=function(){try{if("undefined"==typeof localStorage)return!1;if(localStorage.setItem("Storage-Test","1"),"1"!==localStorage.getItem("Storage-Test"))return!1;localStorage.removeItem("Storage-Test")}catch(e){return!1}return!0}},{}],39:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(){return"undefined"!=typeof window&&window&&window.performance&&window.performance.timing&&window.performance.timing.fetchStart&&n(window.performance.getEntries,"function")}},{"./typeof":59}],40:[function(e,t,r){"use strict";t.exports=function(e){return(e+"").split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)}},{}],41:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./createObject");t.exports=function(e,t,r,o){if(!e||!n(e[t],"function")||!r&&!o)return!1;var a=e[t];return e[t]=i(a),Object.keys(a).forEach(function(r){e[t][r]=a[r]}),e[t]=function(){n(r,"function")&&r.apply(this,arguments),a.apply(this,arguments),n(o,"function")&&o.apply(this,arguments)},e[t]}},{"./createObject":27,"./typeof":59}],42:[function(e,t,r){"use strict";t.exports={addEvent:e("./addEvent"),debounce:e("./debounce"),throttle:e("./throttle"),merge:e("./merge"),deepMerge:e("./deepMerge"),detectBlocking:e("./detectBlocking"),setTimeout:e("./setTimeout"),createObject:e("./createObject"),typeof:e("./typeof"),Events:e("./Events"),combinations:e("./combinations"),domReady:e("./domReady"),hasDom:e("./hasDom"),hashCode:e("./hashCode"),getCurrentScript:e("./getCurrentScript"),md5:e("./md5"),rendezvousHash:e("./rendezvousHash"),decide:e("./decide"),hasTiming:e("./hasTiming"),hijack:e("./hijack"),poll:e("./poll"),parse:e("./parse"),expressions:e("./expressions"),query:e("./query"),randomFloat:e("./randomFloat"),randomString:e("./randomString"),isBot:e("./isBot"),normalize:e("./normalize"),formatPropertyValue:e("./formatPropertyValue"),shuffle:e("./shuffle"),elementReady:e("./elementReady"),hasLocalStorage:e("./hasLocalStorage"),policy:e("./policy"),resolvePath:e("./resolvePath"),result:e("./result"),userAgent:e("./userAgent")}},{"./Events":24,"./addEvent":25,"./combinations":26,"./createObject":27,"./debounce":28,"./decide":29,"./deepMerge":30,"./detectBlocking":31,"./domReady":32,"./elementReady":33,"./expressions":34,"./formatPropertyValue":35,"./getCurrentScript":36,"./hasDom":37,"./hasLocalStorage":38,"./hasTiming":39,"./hashCode":40,"./hijack":41,"./isBot":43,"./md5":44,"./merge":45,"./normalize":46,"./parse":47,"./policy":48,"./poll":49,"./query":50,"./randomFloat":51,"./randomString":52,"./rendezvousHash":53,"./resolvePath":54,"./result":55,"./setTimeout":56,"./shuffle":57,"./throttle":58,"./typeof":59,"./userAgent":60}],43:[function(e,t,r){"use strict";t.exports=function(){return!("undefined"==typeof navigator||!navigator||!navigator.userAgent)&&/googlebot|crawler|spider|robot|crawling|auto|bot/gi.test(navigator.userAgent)}},{}],44:[function(e,t,r){"use strict";for(var n=[],i=0;i<64;)n[i]=0|4294967296*Math.abs(Math.sin(++i));t.exports=function(e){for(var t,r,i,o,a=[],s=unescape(encodeURI(e)),c=s.length,l=[t=1732584193,r=-271733879,~t,~r],u=0;u<=c;)a[u>>2]|=(s.charCodeAt(u)||128)<<u++%4*8;for(a[e=16*(c+8>>6)+14]=8*c,u=0;u<e;u+=16){for(c=l,o=0;o<64;)c=[i=c[3],(t=0|c[1])+((i=c[0]+[t&(r=c[2])|~t&i,i&t|~i&r,t^r^i,r^(t|~i)][c=o>>4]+(n[o]+(0|a[[o,5*o+1,3*o+5,7*o][c]%16+u])))<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+o++%4])|i>>>32-c),t,r];for(o=4;o;)l[--o]=l[o]+c[o]}for(e="";o<32;)e+=(l[o>>3]>>4*(1^7&o++)&15).toString(16);return e}},{}],45:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./result");t.exports=function e(t,r){var o=void 0;return!0===t?(o=Array.prototype.slice.call(arguments,2),null!=r&&-1!==["object","array","error","map","set"].indexOf(n(r))||(r={}),o.forEach(function(t){if(n(t,"object")||n(t,"array"))for(var o in t)t.hasOwnProperty(o)&&(n(t[o],"array")?(r[o]=i(r[o],"array"),e(!0,r[o],t[o])):n(t[o],"plainobject")&&t[o].constructor===Object?(r[o]=i(r[o],"object"),e(!0,r[o],t[o])):r[o]=t[o])})):(!1===t?o=Array.prototype.slice.call(arguments,2):(r=t,o=Array.prototype.slice.call(arguments,1)),o.forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})),r}},{"./result":55,"./typeof":59}],46:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e){return n.isPrimitive(e)?(e+="",e.trim().replace(/\s|-/g,"_").replace(/[^a-zA-Z0-9_]/g,"").replace(/_{2,}/g,"_")):""}},{"./typeof":59}],47:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e){if(!e||!n(e,"string"))return null;if(e=e.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,""),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,":").replace(/\w*\s*\:/g,":")))try{return new Function("return "+e)()}catch(e){return null}return null}},{"./typeof":59}],48:[function(e,t,r){"use strict";var n=e("./expressions").evaluate,i=(e("./deepMerge"),e("./result"),e("./typeof")),o=e("./shuffle"),a=e("./hasLocalStorage"),s=function(e,t){this.session=e.session||amp.session,this.eventName=e.eventName,this.candidates=e.candidates||[],this.indexes=Object.keys(e.candidates),this.currEvent=e.event,this.policy=this.parser(e.policy,e.save),this.done=t||e.done||function(){}};s.prototype.parser=function(e,t){if(e&&!i(e,"string"))return!1;if(!e&&a()&&(e=localStorage.getItem("AMP_OFFLINE_POLICY")),!e)return!1;t&&a()&&localStorage.setItem("AMP_OFFLINE_POLICY",e);try{return e=JSON.parse(e)}catch(t){return a()&&(e=localStorage.removeItem("AMP_OFFLINE_POLICY")),!1}},s.prototype.run=function(){this.policy&&this.session||this.done(null,this.indexes);var e=this.session.context.slice();if(e.push(this.currEvent),this.policy[this.eventName]){for(var t=this.policy[this.eventName],r=null,i=0,a=t.length;i<a;i++){if(!!n(t[i].condition,e)){r=t[i];break}}if(r){if(r.random)this.indexes=o(Object.keys(this.candidates));else if(r.ranking)this.indexes=r.ranking;else{var s=r.rules;this.indexes=this.candidates.map(function(e,t){for(var r=0;r<s.length;r++)if(n(s[r],e))return{index:t,rank:r};return{index:t,rank:Math.POSITIVE_INFINITY}}).sort(function(e,t){return t.rank-e.rank}).map(function(e){return e.index})}return this.done(null,this.indexes)}}return this.done(null,this.indexes)};var c=function(e,t){return new s(e,t).run()};t.exports={policy:s,evaluate:c}},{"./deepMerge":30,"./expressions":34,"./hasLocalStorage":38,"./result":55,"./shuffle":57,"./typeof":59}],49:[function(e,t,r){"use strict";var n=e("./typeof"),i=e("./result"),o=e("./addEvent"),a={polls:[],running:!1,add:function(e){var t=e.isValid;return e.isValid&&a.polls.push(e),a.run(),t},remove:function(e){var t=a.polls.indexOf(e);return t>=0&&a.polls.splice(t,1),-1!==t},run:function(){a.polls.length&&!a.running&&(a.running=!0,a.polls.forEach(function(e){try{e.run()}catch(e){}}),setTimeout(function(){a.running=!1,a.run()},500))}},s=function(e,t,r){n(r,"number")&&(r={interval:r}),r=i(r,"object"),this.name=e,this.fn=t,this.interval=r.interval||1e3,this.maxCount=r.maxCount||1/0,this.count=0,this.lastRun=0,this.stopped=!1,this.added=a.add(this)};s.prototype={status:function(){return Boolean(this.stopped)?"active":"stopped"},start:function(){this.stopped=!1},stop:function(){this.stopped=!0},getLength:function(){return a.polls.length},remove:function(){a.remove(this)},destroy:function(){a.remove(this)},isValid:function(){return n(this.fn,"function")&&n(this.interval,"number")&&!isNaN(this.interval)},run:function(){if(!(this.stopped||this.lastRun>Date.now()-this.interval)){this.lastRun=(new Date).getTime();var e=this.fn();this.count++,(this.count>=this.maxCount||!1===e)&&this.destroy()}}};var c=function(e,t,r){return n(e,"function")&&(t=e,r=t,e=t.name||"UNKNOWN @ "+(new Date).getTime()),new s(e,t,r)};c.add=c,c.queue=a,c.POLLING_TIME=500,c.stopAll=function(){c.queue.polls.forEach(function(e){return e.stopped=!0})},c.removeAll=function(){c.queue.polls.length=0},c.startAll=function(){c.queue.polls.forEach(function(e){return e.stopped=!1}),c.queue.run()},"undefined"!=typeof window&&o(window,"beforeunload",function(e){a.running=!1,a.run()}),t.exports=c},{"./addEvent":25,"./result":55,"./typeof":59}],50:[function(e,t,r){"use strict";t.exports={get:function(e,t){return this.getAll(t)[e]},getAll:function(e){var t={};try{e||(e="undefined"!=typeof window&&window.location?window.location.href:"");var r=e.indexOf("?");if(r<0)return{};e=e.substr(r+1),e.split("&").forEach(function(e){if(e){var r=e.split("+").join(" ").split(/=(.+)/);if(r[0]){var n=r[1]?decodeURIComponent(r[1]):"";"true"===n?n=!0:"false"===n?n=!1:isNaN(n)||(n=parseFloat(n)),t[r[0]]=n}}})}catch(e){}return t}}},{}],51:[function(e,t,r){"use strict";t.exports=function(){if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var e=new Uint32Array(1);return window.crypto.getRandomValues(arr),e[0]/4294967296}return Math.random()}},{}],52:[function(e,t,r){"use strict";var n=e("./hashCode");t.exports=function(e,t){e=e||16,t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var r="",i="",o=Math.floor(.25*e),a=e-o,s=void 0;for(s="undefined"!=typeof window&&window.navigator&&window.location&&window.screen?Math.abs(n(window.navigator.userAgent+window.screen.height+window.screen.width+(new Date).getTime()+window.location.href)):Math.abs(n((new Date).getTime())%t.length);o--;)i+=t.charAt(Math.floor(s%t.length)),s=Math.abs(n(s/t.length));if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;if(c&&c.getRandomValues){for(;a--;)r+=t.charAt(Math.floor(c.getRandomValues(new Uint8Array(1))[0]/256*t.length));return r+=i}}for(;a--;)r+=t.charAt(Math.floor(Math.random()*t.length));return r+=i}},{"./hashCode":40}],53:[function(e,t,r){"use strict";var n=e("./md5");e("./hashCode");t.exports=function(e,t){var r=0;Object.keys(t).forEach(function(e){return r+=t[e]});var i={};Object.keys(t).forEach(function(e){return i[e]=t[e]/r});var o=null,a=null;return Object.keys(i).forEach(function(t){var r=i[t];if(!(r<=0)){var s=n(t+""+e),c=parseInt(s,16)/Math.pow(2,128),l=Math.log(c)/r;(null===o||l>o)&&(a=t,o=l)}}),a}},{"./hashCode":40,"./md5":44}],54:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function e(t,r){return r?(n(r,"string")&&(r=r.split(".")),r&&r.length&&t?r[0]in t?(t=t[r[0]],e(t,r.slice(1))):null:t):t}},{"./typeof":59}],55:[function(e,t,r){"use strict";var n=e("./typeof");t.exports=function(e,t,r){n(e,"function")&&(e=e.call(r)),n(t,"string")||(t="");var i=n(e);return t=t.toLowerCase(),"array"===t?"array"==i?e:[]:"object"===t?"object"==i?e:{}:"number"===t?parseFloat(e):e}},{"./typeof":59}],56:[function(e,t,r){"use strict";var n=e("./detectBlocking"),i=(e("./typeof"),{code:"U_TIMEOUT_FROM_BUILTIN_SETTIMEOUT"});t.exports=function(e,t,r){var o={startTS:(new Date).getTime(),blocking:0};return o.TIMEOUT=i,o.run=function(){var t=arguments;o.clear(),setTimeout(function(){e.apply(null,t),o.remove()},10)},o.timerId=setTimeout(e.bind(null,i),t),o.clear=function(){clearTimeout(o.timerId)},o.toString=function(){o.clear()},o.remove=function(){o.detection&&o.detection.remove()},r.ignoreThreadBlocking||(o.detection=n(function(r){o.blocking+=r,clearTimeout(o.timerId);var n=t-((new Date).getTime()-o.startTS-r);o.timerId=setTimeout(e.bind(null,i),n+r)})),o}},{"./detectBlocking":31,"./typeof":59}],57:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.length,n=void 0,i=void 0,o=e;for(!1===t&&(o=e.slice());0!==r;)i=Math.floor(Math.random()*r),r-=1,n=o[r],o[r]=o[i],o[i]=n;return o}},{}],58:[function(e,t,r){"use strict";t.exports=function(e,t){if(!e)return!1;t=t||250;var r=void 0,n=0;return function(){function i(){n=Number(new Date),e.apply(self,o)}var o=arguments;r||i(),r&&clearTimeout(r);var a=Number(new Date)-n;a>t?i():r=setTimeout(i,t-a)}}},{}],59:[function(e,t,r){"use strict";var n=function e(t,r){var n=Object.prototype.toString.call(t).slice(8).slice(0,-1).toLowerCase();return 2===arguments.length?"string"==typeof r&&(r=r.toLowerCase(),"plainobject"===r?e.isPlainObject(t):n==r):n};n.isPlainObject=function(e){return n(e,"object")&&n(e.constructor,"function")&&n(e.constructor.prototype,"object")&&e.constructor.prototype.hasOwnProperty("isPrototypeOf")},n.isEmpty=function(e){return void 0===e||null===e},n.isPrimitive=function(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e},t.exports=n},{}],60:[function(e,t,r){"use strict";function n(e){return c.test(e)}function i(e,t,r,n,i){this.family=e||"Other",this.major=t||null,this.minor=r||null,this.patch=n||null,this.patchMinor=i||null}function o(e,t,r,n){this.family=e||"Other",this.major=t||null,this.minor=r||null,this.patch=n||null}function a(e){this.family=e||"Other"}var s={user_agent_parsers:[{regex:"(HbbTV)/(\\d+)\\.(\\d+)\\.(\\d+) \\("},{regex:"(Chimera|SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)?"},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)"},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB"},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)"},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser"},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"(Opera)/(\\d+)\\.(\\d+).+Opera Mobi",family_replacement:"Opera Mobile"},{regex:"Opera Mobi.+(Opera)(?:/|\\s+)(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)(?:/att)?/(\\d+)\\.(\\d+)"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(?:Mobile Safari).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"(?:Chrome).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera"},{regex:"(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"webOS Browser"},{regex:"(luakit)",family_replacement:"LuaKit"},{regex:"(Snowshoe)/(\\d+)\\.(\\d+).(\\d+)"},{regex:"(Lightning)/(\\d+)\\.(\\d+)\\.?((?:[ab]?\\d+[a-z]*)|(?:\\d*))"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox"},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox"},{regex:"(rekonq)/(\\d+)\\.(\\d+)\\.?(\\d+)? Safari",family_replacement:"Rekonq"},{regex:"rekonq",family_replacement:"Rekonq"},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror"},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror"},{regex:"(WeTab)-Browser"},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon"},{regex:"(YottaaMonitor|BrowserMob|HttpMonitor|YandexBot|Slurp|BingPreview|PagePeeker|ThumbShotsBot|WebThumb|URL2PNG|ZooShot|GomezA|Catchpoint bot|Willow Internet Crawler|Google SketchUp|Read%20Later)"},{regex:"(Symphony) (\\d+).(\\d+)"},{regex:"(Minimo)"},{regex:"PLAYSTATION 3.+WebKit",family_replacement:"NetFront NX"},{regex:"PLAYSTATION 3",family_replacement:"NetFront"},{regex:"(PlayStation Portable)",family_replacement:"NetFront"},{regex:"(PlayStation Vita)",family_replacement:"NetFront NX"},{regex:"AppleWebKit.+ (NX)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"NetFront NX"},{regex:"(Nintendo 3DS)",family_replacement:"NetFront NX"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",family_replacement:"Amazon Silk"},{regex:"(Puffin)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UCBrowser)[ /](\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser"},{regex:"(UC Browser)[ /](\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(UC Browser|UCBrowser|UCWEB)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser"},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser"},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer"},{regex:"(baidubrowser)[/\\s](\\d+)",family_replacement:"Baidu Browser"},{regex:"(FlyFlow)/(\\d+)\\.(\\d+)",family_replacement:"Baidu Explorer"},{regex:"(MQQBrowser/Mini)(?:(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser Mini"},{regex:"(MQQBrowser)(?:/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser Mobile"},{regex:"(QQBrowser)(?:/(\\d+)(?:\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser"},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot"},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(LinkedInBot)/(\\d+)\\.(\\d+)",family_replacement:"LinkedInBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"Google.*/\\+/web/snippet",family_replacement:"GooglePlusBot"},{regex:"(Rackspace Monitoring)/(\\d+)\\.(\\d+)",family_replacement:"RackspaceBot"},{regex:"(PyAMF)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(YaBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Yandex Browser"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+).* MRCHROME",family_replacement:"Mail.ru Chromium Browser"},{regex:"(AOL) (\\d+)\\.(\\d+); AOLBuild (\\d+)"},{regex:"(AdobeAIR|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Epiphany|Shiira|Sunrise|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iris|UP\\.Browser|Bunjalloo|Google Earth|Raven for Mac|Openwave)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"MSOffice 12",family_replacement:"Outlook",v1_replacement:"2007"},{regex:"MSOffice 14",family_replacement:"Outlook",v1_replacement:"2010"},{regex:"Microsoft Outlook 15\\.\\d+\\.\\d+",family_replacement:"Outlook",v1_replacement:"2013"},{regex:"(Airmail) (\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(Thunderbird)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Thunderbird"},{regex:"(Chromium|Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"\\b(Dolphin)(?: |HDCN/|/INT\\-)(\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(bingbot|Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris|Abrowser|Planetweb|ICE Browser|mDolphin)/(\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Chromium|Chrome)/(\\d+)\\.(\\d+)"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Kindle)/(\\d+)\\.(\\d+)"},{regex:"(Android) Donut",v1_replacement:"1",v2_replacement:"2"},{regex:"(Android) Eclair",v1_replacement:"2",v2_replacement:"1"},{regex:"(Android) Froyo",v1_replacement:"2",v2_replacement:"2"},{regex:"(Android) Gingerbread",v1_replacement:"2",v2_replacement:"3"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Obigo)InternetBrowser"},{regex:"(Obigo)\\-Browser"},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",family_replacement:"Obigo"},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon"},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(NCSA_Mosaic)/(\\d+)\\.(\\d+)",family_replacement:"NCSA Mosaic"},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris"},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris"},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?",family_replacement:"Bon Echo"},{regex:"(CFNetwork)(?:/(\\d+)\\.(\\d+)\\.?(\\d+)?)?",family_replacement:"CFNetwork"},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPod|iPhone|iPad);.*CPU.*OS (\\d+)_(\\d+)(?:_(\\d+))?.*Mobile",family_replacement:"Mobile Safari"},{regex:"(iPod|iPhone|iPad)",family_replacement:"Mobile Safari"},{regex:"(AvantGo) (\\d+).(\\d+)"},{regex:"(OneBrowser)/(\\d+).(\\d+)",family_replacement:"ONE Browser"},{regex:"(Avant)",v1_replacement:"1"},{regex:"(QtCarBrowser)",v1_replacement:"1"},{regex:"^(iBrowser/Mini)(\\d+).(\\d+)",family_replacement:"iBrowser Mini"},{regex:"^(iBrowser|iRAPP)/(\\d+).(\\d+)"},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",family_replacement:"Nokia Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Nokia Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",family_replacement:"Nokia Browser"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Nokia Browser"},{regex:"(Series60)/5\\.0",family_replacement:"Nokia Browser",v1_replacement:"7",v2_replacement:"0"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Ovi Browser"},{regex:"(Nokia)[EN]?(\\d+)"},{regex:"(BB10);",family_replacement:"BlackBerry WebKit"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"BlackBerry WebKit"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"BlackBerry WebKit"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"BlackBerry"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)"},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre"},{regex:"(ELinks)/(\\d+)\\.(\\d+)"},{regex:"(ELinks) \\((\\d+)\\.(\\d+)"},{regex:"(Links) \\((\\d+)\\.(\\d+)"},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)"},{regex:"(PhantomJS)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Safari",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)"},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0"},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)"},{regex:"(Teleca)",family_replacement:"Teleca Browser"},{regex:"(Phantom)/V(\\d+)\\.(\\d+)",family_replacement:"Phantom Browser"},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(Espial)/(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?"},{regex:"(AppleWebKit)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"AppleMail"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"([MS]?IE) (\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(python-requests)/(\\d+)\\.(\\d+)",family_replacement:"Python Requests"}],os_parsers:[{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 4.0",os_v1_replacement:"2013"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 3.0",os_v1_replacement:"2012"},{regex:"HbbTV/1.1.1 \\(;;;;;\\) Maple_2011",os_replacement:"Samsung",os_v1_replacement:"2011"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*FXPDEUC",os_v2_replacement:"UE40F7000"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*MST12DEUC",os_v2_replacement:"UE32F4500"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/4",os_v1_replacement:"2013"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/3",os_v1_replacement:"2012"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/2",os_v1_replacement:"2011"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+.*(firetv)-firefox-plugin (\\d+).(\\d+).(\\d+)",os_replacement:"FireHbbTV"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(.*; ?([a-zA-Z]+) ?;.*(201[1-9]).*\\)"},{regex:"(Windows Phone) (?:OS[ /])?(\\d+)\\.(\\d+)"},{regex:"(Android)[ \\-/](\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v1_replacement:"1",os_v2_replacement:"2"},{regex:"(Android) Eclair",os_v1_replacement:"2",os_v2_replacement:"1"},{regex:"(Android) Froyo",os_v1_replacement:"2",os_v2_replacement:"2"},{regex:"(Android) Gingerbread",os_v1_replacement:"2",os_v2_replacement:"3"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"^UCWEB.*; (Adr) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?;",os_replacement:"Android"},{regex:"^UCWEB.*; (iPad OS|iPh OS) (\\d+)_(\\d+)(?:_(\\d+))?;",os_replacement:"iOS"},{regex:"^UCWEB.*; (wds) (\\d+)\\.(\\d+)(?:\\.(\\d+))?;",os_replacement:"Windows Phone"},{regex:"^(JUC).*; ?U; ?(?:Android)?(\\d+)\\.(\\d+)(?:[\\.\\-]([a-z0-9]+))?",os_replacement:"Android"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(XBLWP7)",os_replacement:"Windows Phone"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Win 9x 4\\.90)",os_replacement:"Windows ME"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000|Windows 3.1)"},{regex:"(Windows NT 6\\.2; ARM;)",os_replacement:"Windows RT"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows NT 6\\.3; ARM;)",os_replacement:"Windows RT 8.1"},{regex:"(Windows NT 6\\.3)",os_replacement:"Windows 8.1"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Windows ?CE)",os_replacement:"Windows CE"},{regex:"Win ?(95|98|3.1|NT|ME|2000)",os_replacement:"Windows $1"},{regex:"Win16",os_replacement:"Windows 3.1"},{regex:"Win32",os_replacement:"Windows 95"},{regex:"(Tizen)/(\\d+)\\.(\\d+)"},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?"},{regex:" (Dar)(win)/(9).(\\d+).*\\((?:i386|x86_64|Power Macintosh)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"5"},{regex:" (Dar)(win)/(10).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"6"},{regex:" (Dar)(win)/(11).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"7"},{regex:" (Dar)(win)/(12).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"8"},{regex:" (Dar)(win)/(13).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"9"},{regex:"Mac_PowerPC",os_replacement:"Mac OS"},{regex:"(?:PPC|Intel) (Mac OS X)"},{regex:"(CPU OS|iPhone OS|CPU iPhone) +(\\d+)[_\\.](\\d+)(?:[_\\.](\\d+))?",os_replacement:"iOS"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS"},{regex:"(AppleTV)/(\\d+)\\.(\\d+)",os_replacement:"ATV OS X"},{regex:"(CFNetwork)/(5)48\\.0\\.3.* Darwin/11\\.0\\.0",os_replacement:"iOS"},{regex:"(CFNetwork)/(5)48\\.(0)\\.4.* Darwin/(1)1\\.0\\.0",os_replacement:"iOS"},{regex:"(CFNetwork)/(5)48\\.(1)\\.4",os_replacement:"iOS"},{regex:"(CFNetwork)/(4)85\\.1(3)\\.9",os_replacement:"iOS"},{regex:"(CFNetwork)/(6)09\\.(1)\\.4",os_replacement:"iOS"},{regex:"(CFNetwork)/(6)(0)9",os_replacement:"iOS"},{regex:"(CFNetwork)/6(7)2\\.(1)\\.13",os_replacement:"iOS"},{regex:"(CFNetwork)/6(7)2\\.(1)\\.(1)4",os_replacement:"iOS"},{regex:"(CF)(Network)/6(7)(2)\\.1\\.15",os_replacement:"iOS",os_v1_replacement:"7",os_v2_replacement:"1"},{regex:"(CFNetwork)/6(7)2\\.(0)\\.(?:2|8)",os_replacement:"iOS"},{regex:"(CFNetwork)/709\\.1",os_replacement:"iOS",os_v1_replacement:"8",os_v2_replacement:"0.b5"},{regex:"CFNetwork/.* Darwin/(9)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"1"},{regex:"CFNetwork/.* Darwin/(10)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"4"},{regex:"CFNetwork/.* Darwin/(11)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"5"},{regex:"CFNetwork/.* Darwin/(13)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"6"},{regex:"CFNetwork/6.* Darwin/(14)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"7"},{regex:"CFNetwork/7.* Darwin/(14)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"8",os_v2_replacement:"0"},{regex:"\\b(iOS[ /]|iPhone(?:/| v|[ _]OS[/,]|; | OS : |\\d,\\d/|\\d,\\d; )|iPad/)(\\d{1,2})[_\\.](\\d{1,2})(?:[_\\.](\\d+))?",os_replacement:"iOS"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"([Dd]ebian)",os_replacement:"Debian"},{regex:"(Linux Mint)(?:/(\\d+))?"},{regex:"(Mandriva)(?: Linux)?/(?:[\\d.-]+m[a-z]{2}(\\d+).(\\d))?"},{regex:"(Symbian[Oo][Ss])[/ ](\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"\\b(Series 60|SymbOS|S60Version|S60V\\d|S60\\b)",os_replacement:"Symbian OS"},{regex:"(MeeGo)"},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"Series40;",os_replacement:"Nokia Series 40"},{regex:"Series30Plus;",os_replacement:"Nokia Series 30 Plus"},{regex:"(BB10);.+Version/(\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS"},{regex:"(Black[Bb]erry)",os_replacement:"BlackBerry OS"},{regex:"\\((?:Mobile|Tablet);.+Firefox/\\d+\\.\\d+",os_replacement:"Firefox OS"},{regex:"(BREW)[ /](\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(BREW);"},{regex:"(Brew MP|BMP)[ /](\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"Brew MP"},{regex:"BMP;",os_replacement:"Brew MP"},{regex:"(GoogleTV)(?: (\\d+)\\.(\\d+)(?:\\.(\\d+))?|/[\\da-z]+)"},{regex:"(WebTV)/(\\d+).(\\d+)"},{regex:"(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",
os_replacement:"webOS"},{regex:"(VRE);"},{regex:"(Fedora|Red Hat|PCLinuxOS|Puppy|Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Slackware|(?:Free|Open|Net|\\b)BSD)[/ ](\\d+)\\.(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?"},{regex:"(Linux)[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?.*gentoo",os_replacement:"Gentoo"},{regex:"\\((Bada);"},{regex:"(Windows|Android|WeTab|Maemo)"},{regex:"(Ubuntu|Kubuntu|Arch Linux|CentOS|Slackware|Gentoo|openSUSE|SUSE|Red Hat|Fedora|PCLinuxOS|Gentoo|Mageia|(?:Free|Open|Net|\\b)BSD)"},{regex:"(Linux)(?:[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?)?"},{regex:"SunOS",os_replacement:"Solaris"}],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1"},{regex:"HTC[-_/\\s]([A-Za-z0-9]+)",device_replacement:"HTC $1"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1"},{regex:"(HTC)"},{regex:"(QtCarBrowser)",device_replacement:"Tesla Model S"},{regex:"(SamsungSGHi560)",device_replacement:"Samsung SGHi560"},{regex:"(SCH-[A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"(SGH-[A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"(GT-[A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"(SM-[A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"(SPH-[A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"SAMSUNG-([A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"SAMSUNG ([A-Za-z0-9_-]+)",device_replacement:"Samsung $1"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1"},{regex:"PLAYSTATION 3",device_replacement:"PlayStation 3"},{regex:"(PlayStation (:?Portable|Vita))"},{regex:"(PlayStation (:?\\d+))"},{regex:"(KFOT Build)",device_replacement:"Kindle Fire"},{regex:"(KFTT Build)",device_replacement:"Kindle Fire HD"},{regex:"(KFJWI Build)",device_replacement:'Kindle Fire HD 8.9" WiFi'},{regex:"(KFJWA Build)",device_replacement:'Kindle Fire HD 8.9" 4G'},{regex:"(KFSOWI Build)",device_replacement:'Kindle Fire HD 7" WiFi'},{regex:"(KFTHWI Build)",device_replacement:'Kindle Fire HDX 7" WiFi'},{regex:"(KFTHWA Build)",device_replacement:'Kindle Fire HDX 7" 4G'},{regex:"(KFAPWI Build)",device_replacement:'Kindle Fire HDX 8.9" WiFi'},{regex:"(KFAPWA Build)",device_replacement:'Kindle Fire HDX 8.9" 4G'},{regex:"(Kindle Fire)"},{regex:"(Kindle)"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1"},{regex:"NOKIA([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1"},{regex:"Symbian",device_replacement:"Nokia"},{regex:"BB10; ([A-Za-z0-9\\- ]+)\\)",device_replacement:"BlackBerry $1"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"BlackBerry Playbook"},{regex:"Black[Bb]erry ([0-9]+);",device_replacement:"BlackBerry $1"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1"},{regex:"Black[Bb]erry;",device_replacement:"BlackBerry"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi"},{regex:"(Touch[Pp]ad)/(\\d+)\\.(\\d+)",device_replacement:"HP TouchPad"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer"},{regex:"(AppleTV)",device_replacement:"AppleTV"},{regex:"AdsBot-Google-Mobile",device_replacement:"Spider"},{regex:"Googlebot-Mobile/(\\d+).(\\d+)",device_replacement:"Spider"},{regex:"Googlebot/\\d+.\\d+",device_replacement:"Spider"},{regex:"NING/(\\d+).(\\d+)",device_replacement:"Spider"},{regex:"MsnBot-Media /(\\d+).(\\d+)",device_replacement:"Spider"},{regex:"(iPad) Simulator;"},{regex:"(iPad);"},{regex:"(iPod) touch;"},{regex:"(iPod);"},{regex:"(iPhone) Simulator;"},{regex:"(iPhone);"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1"},{regex:"ALCATEL-([A-Za-z0-9]+)",device_replacement:"Alcatel $1"},{regex:"Alcatel-([A-Za-z0-9]+)",device_replacement:"Alcatel $1"},{regex:"ALCATEL_ONE_TOUCH_([A-Za-z0-9]+)",device_replacement:"Alcatel ONE TOUCH $1"},{regex:"ALCATEL (ONE TOUCH [A-Za-z0-9]+)",device_replacement:"Alcatel $1"},{regex:"ALCATEL (one touch [A-Za-z0-9]+)",device_replacement:"Alcatel $1"},{regex:"ALCATEL ([A-Za-z0-9]+)",device_replacement:"Alcatel $1"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1"},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1"},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1"},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1"},{regex:"([A-Za-z0-9]+)_W\\;FOMA",device_replacement:"DoCoMo $1"},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1"},{regex:"Huawei([A-Za-z0-9]+)",device_replacement:"Huawei $1"},{regex:"HUAWEI-([A-Za-z0-9]+)",device_replacement:"Huawei $1"},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1"},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1"},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1"},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1"},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1"},{regex:"Lenovo_([A-Za-z0-9]+)",device_replacement:"Lenovo $1"},{regex:"(HbbTV)/[0-9]+\\.[0-9]+\\.[0-9]+"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1"},{regex:" (DROID RAZR [A-Za-z0-9 ]+) ",device_replacement:"Motorola $1"},{regex:" (DROID[2 ][A-Za-z0-9 ]+) ",device_replacement:"Motorola $1"},{regex:" (Droid2| )",device_replacement:"Motorola $1"},{regex:" (DROID2| )",device_replacement:"Motorola $1"},{regex:"(Nintendo WiiU)",device_replacement:"Nintendo Wii U"},{regex:"Nintendo (DS|3DS|DSi|Wii);",device_replacement:"Nintendo $1"},{regex:"Pantech([A-Za-z0-9]+)",device_replacement:"Pantech $1"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1"},{regex:"ZTE-([A-Za-z0-9\\-]+)",device_replacement:"ZTE $1"},{regex:"ZTE ([A-Za-z0-9\\-]+)",device_replacement:"ZTE $1"},{regex:"ZTE_([A-Za-z0-9\\-]+)",device_replacement:"ZTE $1"},{regex:"Dreamcast",device_replacement:"Sega Dreamcast"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1"},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1"},{regex:"Sony([^ ]+) ",device_replacement:"Sony $1"},{regex:"(WebTV)/(\\d+).(\\d+)"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [^;]+; ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+; [^;]+; ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+; [^;]+; WOWMobile ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1; [^;]+; ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+;[^;]+;([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+; ([A-Za-z0-9 _-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [^;]+; ([A-Za-z0-9\\.\\/_-]+) "},{regex:"Android[\\- ][\\d]+\\.[\\d]+; [^;]+; ([A-Za-z0-9\\.\\/_-]+) "},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda_)",device_replacement:"Generic Feature Phone"},{regex:"(bingbot|bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks|crawler|Netvibes|Sogou Pic Spider|ICC\\-Crawler|Innovazion Crawler|Daumoa|EtaoSpider|A6\\-Indexer|YisouSpider|Riddler|DBot|wsr\\-agent|Xenu|SeznamBot|PaperLiBot|SputnikBot|CCBot|ProoXiBot|Scrapy|Genieo|Screaming Frog|YahooCacheSystem|CiBra|Nutch)",device_replacement:"Spider"}]},c=/^\d/;i.prototype.toVersionString=function(){var e="";return null!=this.major&&(e+=this.major,null!=this.minor&&(e+="."+this.minor,null!=this.patch&&(n(this.patch)&&(e+="."),e+=this.patch,null!=this.patchMinor&&(n(this.patchMinor)&&(e+="."),e+=this.patchMinor)))),e},i.prototype.toString=function(){var e=this.toVersionString();return e&&(e=" "+e),this.family+e};var l=s.os_parsers.map(function(e){var t=new RegExp(e.regex),r=e.os_replacement,n=e.os_v1_replacement,o=e.os_v2_replacement,a=e.os_v3_replacement,s=e.os_v4_replacement;return function(e){var c=e.match(t);return c?new i(r?r.replace("$1",c[1]):c[1],n||c[2],o||c[3],a||c[4],s||c[5]):null}});o.prototype.toVersionString=i.prototype.toVersionString,o.prototype.toString=i.prototype.toString;var u=s.user_agent_parsers.map(function(e){var t=new RegExp(e.regex),r=e.family_replacement,n=e.v1_replacement,i=e.v2_replacement,a=e.v3_replacement;return function(e){var s=e.match(t);return s?new o(r?r.replace("$1",s[1]):s[1],n||s[2],i||s[3],a||s[4]):null}});a.prototype.toString=function(){return this.family};var d=s.device_parsers.map(function(e){var t=new RegExp(e.regex),r=e.device_replacement;return function(e){var n=e.match(t);return n?new a(r?r.replace("$1",n[1]):n[1]):null}}),p={};t.exports=function(e){if(!((e+="")in p)){for(var t=void 0,r=void 0,n=void 0,s=0;s<l.length&&!(t=l[s](e));s++);for(var c=0;c<u.length&&!(r=u[c](e));c++);for(var m=0;m<d.length&&!(n=d[m](e));m++);p[e]={ua:r||new o,os:t||new i,device:n||new a}}return p[e]}},{}]},{},[1])}catch(e){return console.log(e),function(){function e(e,t){try{var r=Object.prototype.toString.call(e).slice(8).slice(0,-1).toLowerCase();return 2===arguments.length?"string"==typeof t&&(t=t.toLowerCase(),r==t):r}catch(e){return!1}}function t(t){try{if(!e(t,"Object"))return null;var r=Object.keys(t);if(!r.length)return[];for(var n=[];r.length;){var i=r.pop(),o=t[i];e(o,"Array")&&o.length&&(n=0===n.length?o.map(function(e){var t={};return t[i]=e,t}):n.map(function(e){return o.map(function(t){var r={};return r[i]=t,Object.keys(e).forEach(function(t){r[i]=e[t]}),r})}).reduce(function(e,t){return e.concat(t)},[]))}return n}catch(e){return[]}}function r(t,n){e(n,"array")?n.forEach(function(e){"string"==typeof e?t[e]=function(){}:r(t,e)}):e(n,"object")&&Object.keys(n).forEach(function(i){e(n[i],"object")||e(n[i],"array")?(t[i]={},r(t[i],n[i])):e(n[i],"function")?t[i]=n[i]():t[i]=n[i]})}var n=function(){},i=["__run","on","off","once","trigger","config","error","log","warn","mark","event","request","ready","init","inject","hooks",{builtInEvents:["add"],injections:["Tag","Trigger","Condition","add","list",{version:!1}],timing:[{storage:function(){return[]},timingEnabled:!1},"addByPerformanceEntryName","mark","add","getAll","getSummary","markStart","addPerformanceEntry","checkLibs"],ts:{script:(new Date).getTime()},version:"fallback",utils:["addEvent","createObject","debounce","deepMerge","domReady","elementReady","Events","expressions","getCurrentScript","hasDom","hashCode","hasLocalStorage","hasTiming","hijack","isBot","merge","normalize","parse","policy","poll","query","randomString","resolvePath","result","shuffle","throttle",{typeof:function(){return e},combinations:function(){return t}}]}];return r(n,i),n.observe=function(t,r,n,i){var o=arguments[arguments.length-1];e(o,"function")&&o(new Error("Fallback"))},n.decide=function(r,n,i,o){var a=arguments[arguments.length-1],s=i&&!isNaN(i.limit)&&i.limit>0?i.limit:1;e(n,"object")&&(n=t(n)),n=e(n,"array")?n.slice(0,s):[],e(a,"function")&&a(new Error("Fallback"),i&&i.limit>1?n:n[0]||{})},n.Session=function(){this.id="",this.context=[],this.created=0,this.options={},this.properties={}},n.Session.prototype={observe:function(){return n.observe.apply(this,arguments)},decide:function(e,t,r){return n.decide.apply(this,arguments)},sendEvent:function(){},serialize:function(){return""},deserialize:function(){return!1},on:function(){},off:function(){},trigger:function(){}},n}()}});